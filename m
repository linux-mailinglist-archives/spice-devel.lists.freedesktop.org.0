Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 5B01355419
	for <lists+spice-devel@lfdr.de>; Tue, 25 Jun 2019 18:12:00 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B7EDC6E172;
	Tue, 25 Jun 2019 16:11:58 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7ACA56E16D
 for <spice-devel@lists.freedesktop.org>; Tue, 25 Jun 2019 16:11:57 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx05.intmail.prod.int.phx2.redhat.com
 [10.5.11.15])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 25D6130872F3
 for <spice-devel@lists.freedesktop.org>; Tue, 25 Jun 2019 16:11:57 +0000 (UTC)
Received: from fziglio.remote.csb (unknown [10.33.32.4])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 58D7A5D70D;
 Tue, 25 Jun 2019 16:11:56 +0000 (UTC)
From: Frediano Ziglio <fziglio@redhat.com>
To: spice-devel@lists.freedesktop.org
Date: Tue, 25 Jun 2019 17:11:29 +0100
Message-Id: <20190625161147.25211-6-fziglio@redhat.com>
In-Reply-To: <20190625161147.25211-1-fziglio@redhat.com>
References: <20190625161147.25211-1-fziglio@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.15
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.47]); Tue, 25 Jun 2019 16:11:57 +0000 (UTC)
Subject: [Spice-devel] [PATCH spice-server 05/23] websocket: Move
 RedsWebSocket to header
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

SW50ZW50aW9uIGlzIHRvIG1ha2UgcHJpdmF0ZSBpbiB3ZWJzb2NrZXRzLmMgYW5kIHJlZHVjZQpj
aGFuZ2VzIGluIHJlZC1zdHJlYW0uYwoKU2lnbmVkLW9mZi1ieTogRnJlZGlhbm8gWmlnbGlvIDxm
emlnbGlvQHJlZGhhdC5jb20+Ci0tLQogc2VydmVyL3JlZC1zdHJlYW0uYyB8IDQwICsrKystLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIHNlcnZlci93ZWJzb2NrZXQuYyAgfCAz
OSArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0tLS0KIHNlcnZlci93ZWJzb2Nr
ZXQuaCAgfCAyNCArKysrKysrKysrKysrKysrKy0tLS0tLS0KIDMgZmlsZXMgY2hhbmdlZCwgNTIg
aW5zZXJ0aW9ucygrKSwgNTEgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvc2VydmVyL3JlZC1z
dHJlYW0uYyBiL3NlcnZlci9yZWQtc3RyZWFtLmMKaW5kZXggNGI4OTkyNDExLi5kNmEwMGRkOWYg
MTAwNjQ0Ci0tLSBhL3NlcnZlci9yZWQtc3RyZWFtLmMKKysrIGIvc2VydmVyL3JlZC1zdHJlYW0u
YwpAQCAtNzgsMTcgKzc4LDYgQEAgdHlwZWRlZiBzdHJ1Y3QgUmVkU0FTTCB7CiB9IFJlZFNBU0w7
CiAjZW5kaWYKIAotdHlwZWRlZiBzdHJ1Y3QgewotICAgIGludCBjbG9zZWQ7Ci0KLSAgICB3ZWJz
b2NrZXRfZnJhbWVfdCByZWFkX2ZyYW1lOwotICAgIHVpbnQ2NF90IHdyaXRlX3JlbWFpbmRlcjsK
LQotICAgIHNzaXplX3QgKCpyYXdfcmVhZCkoUmVkU3RyZWFtICpzLCB2b2lkICpidWYsIHNpemVf
dCBuYnl0ZSk7Ci0gICAgc3NpemVfdCAoKnJhd193cml0ZSkoUmVkU3RyZWFtICpzLCBjb25zdCB2
b2lkICpidWYsIHNpemVfdCBuYnl0ZSk7Ci0gICAgc3NpemVfdCAoKnJhd193cml0ZXYpKFJlZFN0
cmVhbSAqcywgY29uc3Qgc3RydWN0IGlvdmVjICppb3YsIGludCBpb3ZjbnQpOwotfSBSZWRzV2Vi
U29ja2V0OwotCiBzdHJ1Y3QgUmVkU3RyZWFtUHJpdmF0ZSB7CiAgICAgU1NMICpzc2w7CiAKQEAg
LTExNzQsMzkgKzExNjMsMTcgQEAgZXJyb3I6CiAKIHN0YXRpYyBzc2l6ZV90IHN0cmVhbV93ZWJz
b2NrZXRfcmVhZChSZWRTdHJlYW0gKnMsIHZvaWQgKmJ1Ziwgc2l6ZV90IHNpemUpCiB7Ci0gICAg
aW50IHJjOwotCi0gICAgaWYgKHMtPnByaXYtPndzLT5jbG9zZWQpCi0gICAgICAgIHJldHVybiAw
OwotCi0gICAgcmMgPSB3ZWJzb2NrZXRfcmVhZCgodm9pZCAqKXMsIGJ1Ziwgc2l6ZSwgJnMtPnBy
aXYtPndzLT5yZWFkX2ZyYW1lLAotICAgICAgICAod2Vic29ja2V0X3JlYWRfY2JfdCkgcy0+cHJp
di0+d3MtPnJhd19yZWFkLAotICAgICAgICAod2Vic29ja2V0X3dyaXRlX2NiX3QpIHMtPnByaXYt
PndzLT5yYXdfd3JpdGUpOwotCi0gICAgaWYgKHJjID09IDApCi0gICAgICAgIHMtPnByaXYtPndz
LT5jbG9zZWQgPSAxOwotCi0gICAgcmV0dXJuIHJjOworICAgIHJldHVybiB3ZWJzb2NrZXRfcmVh
ZChzLT5wcml2LT53cywgYnVmLCBzaXplKTsKIH0KIAogc3RhdGljIHNzaXplX3Qgc3RyZWFtX3dl
YnNvY2tldF93cml0ZShSZWRTdHJlYW0gKnMsIGNvbnN0IHZvaWQgKmJ1Ziwgc2l6ZV90IHNpemUp
CiB7Ci0gICAgaWYgKHMtPnByaXYtPndzLT5jbG9zZWQpIHsKLSAgICAgICAgZXJybm8gPSBFUElQ
RTsKLSAgICAgICAgcmV0dXJuIC0xOwotICAgIH0KLSAgICByZXR1cm4gd2Vic29ja2V0X3dyaXRl
KCh2b2lkICopcywgYnVmLCBzaXplLCAmcy0+cHJpdi0+d3MtPndyaXRlX3JlbWFpbmRlciwKLSAg
ICAgICAgKHdlYnNvY2tldF93cml0ZV9jYl90KSBzLT5wcml2LT53cy0+cmF3X3dyaXRlKTsKKyAg
ICByZXR1cm4gd2Vic29ja2V0X3dyaXRlKHMtPnByaXYtPndzLCBidWYsIHNpemUpOwogfQogCiBz
dGF0aWMgc3NpemVfdCBzdHJlYW1fd2Vic29ja2V0X3dyaXRldihSZWRTdHJlYW0gKnMsIGNvbnN0
IHN0cnVjdCBpb3ZlYyAqaW92LCBpbnQgaW92Y250KQogewotICAgIGlmIChzLT5wcml2LT53cy0+
Y2xvc2VkKSB7Ci0gICAgICAgIGVycm5vID0gRVBJUEU7Ci0gICAgICAgIHJldHVybiAtMTsKLSAg
ICB9Ci0gICAgcmV0dXJuIHdlYnNvY2tldF93cml0ZXYoKHZvaWQgKilzLCAoc3RydWN0IGlvdmVj
ICopIGlvdiwgaW92Y250LCAmcy0+cHJpdi0+d3MtPndyaXRlX3JlbWFpbmRlciwKLSAgICAgICAg
KHdlYnNvY2tldF93cml0ZXZfY2JfdCkgcy0+cHJpdi0+d3MtPnJhd193cml0ZXYpOworICAgIHJl
dHVybiB3ZWJzb2NrZXRfd3JpdGV2KHMtPnByaXYtPndzLCAoc3RydWN0IGlvdmVjICopIGlvdiwg
aW92Y250KTsKIH0KIAogLyoKQEAgLTEyNTYsNiArMTIyMyw3IEBAIGJvb2wgcmVkX3N0cmVhbV9p
c193ZWJzb2NrZXQoUmVkU3RyZWFtICpzdHJlYW0sIGNvbnN0IHZvaWQgKmJ1Ziwgc2l6ZV90IGxl
bikKICAgICAgICAgaWYgKHJjID09IHN0cmxlbihvdXRidWYpKSB7CiAgICAgICAgICAgICBzdHJl
YW0tPnByaXYtPndzID0gZ19tYWxsb2MwKHNpemVvZigqc3RyZWFtLT5wcml2LT53cykpOwogCisg
ICAgICAgICAgICBzdHJlYW0tPnByaXYtPndzLT5yYXdfc3RyZWFtID0gc3RyZWFtOwogICAgICAg
ICAgICAgc3RyZWFtLT5wcml2LT53cy0+cmF3X3JlYWQgPSBzdHJlYW0tPnByaXYtPnJlYWQ7CiAg
ICAgICAgICAgICBzdHJlYW0tPnByaXYtPndzLT5yYXdfd3JpdGUgPSBzdHJlYW0tPnByaXYtPndy
aXRlOwogCmRpZmYgLS1naXQgYS9zZXJ2ZXIvd2Vic29ja2V0LmMgYi9zZXJ2ZXIvd2Vic29ja2V0
LmMKaW5kZXggZmMxZDgyYzI4Li4xNDVkODI5ZjQgMTAwNjQ0Ci0tLSBhL3NlcnZlci93ZWJzb2Nr
ZXQuYworKysgYi9zZXJ2ZXIvd2Vic29ja2V0LmMKQEAgLTIyNiwxNyArMjI2LDIzIEBAIHN0YXRp
YyBpbnQgcmVsYXlfZGF0YSh1aW50OF90KiBidWYsIHNpemVfdCBzaXplLCB3ZWJzb2NrZXRfZnJh
bWVfdCAqZnJhbWUpCiAgICAgcmV0dXJuIG47CiB9CiAKLWludCB3ZWJzb2NrZXRfcmVhZCh2b2lk
ICpvcGFxdWUsIHVpbnQ4X3QgKmJ1ZiwgaW50IHNpemUsIHdlYnNvY2tldF9mcmFtZV90ICpmcmFt
ZSwKLSAgICAgICAgICAgICAgICAgICAgd2Vic29ja2V0X3JlYWRfY2JfdCByZWFkX2NiLAotICAg
ICAgICAgICAgICAgICAgICB3ZWJzb2NrZXRfd3JpdGVfY2JfdCB3cml0ZV9jYikKK2ludCB3ZWJz
b2NrZXRfcmVhZChSZWRzV2ViU29ja2V0ICp3cywgdWludDhfdCAqYnVmLCBpbnQgc2l6ZSkKIHsK
ICAgICBpbnQgbiA9IDA7CiAgICAgaW50IHJjOworICAgIHdlYnNvY2tldF9mcmFtZV90ICpmcmFt
ZSA9ICZ3cy0+cmVhZF9mcmFtZTsKKyAgICB2b2lkICpvcGFxdWUgPSB3cy0+cmF3X3N0cmVhbTsK
KyAgICB3ZWJzb2NrZXRfcmVhZF9jYl90IHJlYWRfY2IgPSAod2Vic29ja2V0X3JlYWRfY2JfdCkg
d3MtPnJhd19yZWFkOworICAgIHdlYnNvY2tldF93cml0ZV9jYl90IHdyaXRlX2NiID0gKHdlYnNv
Y2tldF93cml0ZV9jYl90KSB3cy0+cmF3X3dyaXRlOworCisgICAgaWYgKHdzLT5jbG9zZWQpIHsK
KyAgICAgICAgcmV0dXJuIDA7CisgICAgfQogCiAgICAgd2hpbGUgKHNpemUgPiAwKSB7CiAgICAg
ICAgIC8vIG1ha2Ugc3VyZSB3ZSBoYXZlIGEgcHJvcGVyIGZyYW1lIHJlYWR5CiAgICAgICAgIGlm
ICghZnJhbWUtPmZyYW1lX3JlYWR5KSB7Ci0gICAgICAgICAgICByYyA9IHJlYWRfY2Iob3BhcXVl
LCBmcmFtZS0+aGVhZGVyICsgZnJhbWUtPmhlYWRlcl9wb3MsIGZyYW1lX2J5dGVzX25lZWRlZChm
cmFtZSkpOworICAgICAgICAgICAgcmMgPSByZWFkX2NiKHdzLT5yYXdfc3RyZWFtLCBmcmFtZS0+
aGVhZGVyICsgZnJhbWUtPmhlYWRlcl9wb3MsIGZyYW1lX2J5dGVzX25lZWRlZChmcmFtZSkpOwog
ICAgICAgICAgICAgaWYgKHJjIDw9IDApIHsKICAgICAgICAgICAgICAgICBnb3RvIHJlYWRfZXJy
b3I7CiAgICAgICAgICAgICB9CkBAIC0yNDYsNiArMjUyLDcgQEAgaW50IHdlYnNvY2tldF9yZWFk
KHZvaWQgKm9wYXF1ZSwgdWludDhfdCAqYnVmLCBpbnQgc2l6ZSwgd2Vic29ja2V0X2ZyYW1lX3Qg
KmZyYW0KICAgICAgICAgfSBlbHNlIGlmIChmcmFtZS0+dHlwZSA9PSBDTE9TRV9GUkFNRSkgewog
ICAgICAgICAgICAgd2Vic29ja2V0X2Fja19jbG9zZShvcGFxdWUsIHdyaXRlX2NiKTsKICAgICAg
ICAgICAgIHdlYnNvY2tldF9jbGVhcl9mcmFtZShmcmFtZSk7CisgICAgICAgICAgICB3cy0+Y2xv
c2VkID0gdHJ1ZTsKICAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICB9IGVsc2UgaWYgKGZy
YW1lLT50eXBlID09IEJJTkFSWV9GUkFNRSkgewogICAgICAgICAgICAgcmMgPSByZWFkX2NiKG9w
YXF1ZSwgYnVmLCBNSU4oc2l6ZSwgZnJhbWUtPmV4cGVjdGVkX2xlbiAtIGZyYW1lLT5yZWxheWVk
KSk7CkBAIC0yNzQsNiArMjgxLDkgQEAgcmVhZF9lcnJvcjoKICAgICBpZiAobiA+IDAgJiYgcmMg
PT0gLTEgJiYgKGVycm5vID09IEVJTlRSIHx8IGVycm5vID09IEVBR0FJTikpIHsKICAgICAgICAg
cmV0dXJuIG47CiAgICAgfQorICAgIGlmIChyYyA9PSAwKSB7CisgICAgICAgIHdzLT5jbG9zZWQg
PSB0cnVlOworICAgIH0KICAgICByZXR1cm4gcmM7CiB9CiAKQEAgLTMzMiw4ICszNDIsNyBAQCBz
dGF0aWMgdm9pZCBjb25zdHJhaW5faW92KHN0cnVjdCBpb3ZlYyAqaW92LCBpbnQgaW92Y250LAog
CiAKIC8qIFdyaXRlIGEgV2ViU29ja2V0IGZyYW1lIHdpdGggdGhlIGVuY2xvc2VkIGRhdGEgb3V0
LiAqLwotaW50IHdlYnNvY2tldF93cml0ZXYodm9pZCAqb3BhcXVlLCBzdHJ1Y3QgaW92ZWMgKmlv
diwgaW50IGlvdmNudCwgdWludDY0X3QgKnJlbWFpbmRlciwKLSAgICAgICAgIHdlYnNvY2tldF93
cml0ZXZfY2JfdCB3cml0ZXZfY2IpCitpbnQgd2Vic29ja2V0X3dyaXRldihSZWRzV2ViU29ja2V0
ICp3cywgc3RydWN0IGlvdmVjICppb3YsIGludCBpb3ZjbnQpCiB7CiAgICAgdWludDhfdCBoZWFk
ZXJbV0VCU09DS0VUX01BWF9IRUFERVJfU0laRV07CiAgICAgdWludDY0X3QgbGVuOwpAQCAtMzQy
LDcgKzM1MSwxNCBAQCBpbnQgd2Vic29ja2V0X3dyaXRldih2b2lkICpvcGFxdWUsIHN0cnVjdCBp
b3ZlYyAqaW92LCBpbnQgaW92Y250LCB1aW50NjRfdCAqcmVtYQogICAgIGludCBpb3Zfb3V0X2Nu
dDsKICAgICBpbnQgaTsKICAgICBpbnQgaGVhZGVyX2xlbjsKKyAgICB2b2lkICpvcGFxdWUgPSB3
cy0+cmF3X3N0cmVhbTsKKyAgICB3ZWJzb2NrZXRfd3JpdGV2X2NiX3Qgd3JpdGV2X2NiID0gKHdl
YnNvY2tldF93cml0ZXZfY2JfdCkgd3MtPnJhd193cml0ZXY7CisgICAgdWludDY0X3QgKnJlbWFp
bmRlciA9ICZ3cy0+d3JpdGVfcmVtYWluZGVyOwogCisgICAgaWYgKHdzLT5jbG9zZWQpIHsKKyAg
ICAgICAgZXJybm8gPSBFUElQRTsKKyAgICAgICAgcmV0dXJuIC0xOworICAgIH0KICAgICBpZiAo
KnJlbWFpbmRlciA+IDApIHsKICAgICAgICAgY29uc3RyYWluX2lvdihpb3YsIGlvdmNudCwgJmlv
dl9vdXQsICZpb3Zfb3V0X2NudCwgKnJlbWFpbmRlcik7CiAgICAgICAgIHJjID0gd3JpdGV2X2Ni
KG9wYXF1ZSwgaW92X291dCwgaW92X291dF9jbnQpOwpAQCAtMzg1LDEyICs0MDEsMTkgQEAgaW50
IHdlYnNvY2tldF93cml0ZXYodm9pZCAqb3BhcXVlLCBzdHJ1Y3QgaW92ZWMgKmlvdiwgaW50IGlv
dmNudCwgdWludDY0X3QgKnJlbWEKICAgICByZXR1cm4gcmM7CiB9CiAKLWludCB3ZWJzb2NrZXRf
d3JpdGUodm9pZCAqb3BhcXVlLCBjb25zdCB1aW50OF90ICpidWYsIGludCBsZW4sIHVpbnQ2NF90
ICpyZW1haW5kZXIsCi0gICAgICAgICB3ZWJzb2NrZXRfd3JpdGVfY2JfdCB3cml0ZV9jYikKK2lu
dCB3ZWJzb2NrZXRfd3JpdGUoUmVkc1dlYlNvY2tldCAqd3MsIGNvbnN0IHVpbnQ4X3QgKmJ1Ziwg
aW50IGxlbikKIHsKICAgICB1aW50OF90IGhlYWRlcltXRUJTT0NLRVRfTUFYX0hFQURFUl9TSVpF
XTsKICAgICBpbnQgcmM7CiAgICAgaW50IGhlYWRlcl9sZW47CisgICAgdm9pZCAqb3BhcXVlID0g
d3MtPnJhd19zdHJlYW07CisgICAgd2Vic29ja2V0X3dyaXRlX2NiX3Qgd3JpdGVfY2IgPSAod2Vi
c29ja2V0X3dyaXRlX2NiX3QpIHdzLT5yYXdfd3JpdGU7CisgICAgdWludDY0X3QgKnJlbWFpbmRl
ciA9ICZ3cy0+d3JpdGVfcmVtYWluZGVyOworCisgICAgaWYgKHdzLT5jbG9zZWQpIHsKKyAgICAg
ICAgZXJybm8gPSBFUElQRTsKKyAgICAgICAgcmV0dXJuIC0xOworICAgIH0KIAogICAgIGlmICgq
cmVtYWluZGVyID09IDApIHsKICAgICAgICAgaGVhZGVyX2xlbiA9IGZpbGxfaGVhZGVyKGhlYWRl
ciwgbGVuKTsKZGlmZiAtLWdpdCBhL3NlcnZlci93ZWJzb2NrZXQuaCBiL3NlcnZlci93ZWJzb2Nr
ZXQuaAppbmRleCA2M2Q3YjEwYzIuLmY2NWI0ZTNkMCAxMDA2NDQKLS0tIGEvc2VydmVyL3dlYnNv
Y2tldC5oCisrKyBiL3NlcnZlci93ZWJzb2NrZXQuaApAQCAtMTcsNiArMTcsOCBAQAogCiAjZGVm
aW5lIFdFQlNPQ0tFVF9NQVhfSEVBREVSX1NJWkUgKDEgKyA5ICsgNCkKIAorc3RydWN0IFJlZFN0
cmVhbTsKKwogdHlwZWRlZiBzdHJ1Y3QgewogICAgIGludCB0eXBlOwogICAgIGludCBtYXNrZWQ7
CkBAIC0zMiwxMyArMzQsMjEgQEAgdHlwZWRlZiBzc2l6ZV90ICgqd2Vic29ja2V0X3JlYWRfY2Jf
dCkodm9pZCAqb3BhcXVlLCB2b2lkICpidWYsIHNpemVfdCBuYnl0ZSk7CiB0eXBlZGVmIHNzaXpl
X3QgKCp3ZWJzb2NrZXRfd3JpdGVfY2JfdCkodm9pZCAqb3BhcXVlLCBjb25zdCB2b2lkICpidWYs
IHNpemVfdCBuYnl0ZSk7CiB0eXBlZGVmIHNzaXplX3QgKCp3ZWJzb2NrZXRfd3JpdGV2X2NiX3Qp
KHZvaWQgKm9wYXF1ZSwgc3RydWN0IGlvdmVjICppb3YsIGludCBpb3ZjbnQpOwogCit0eXBlZGVm
IHN0cnVjdCB7CisgICAgaW50IGNsb3NlZDsKKworICAgIHdlYnNvY2tldF9mcmFtZV90IHJlYWRf
ZnJhbWU7CisgICAgdWludDY0X3Qgd3JpdGVfcmVtYWluZGVyOworCisgICAgc3RydWN0IFJlZFN0
cmVhbSAqcmF3X3N0cmVhbTsKKyAgICBzc2l6ZV90ICgqcmF3X3JlYWQpKHN0cnVjdCBSZWRTdHJl
YW0gKnMsIHZvaWQgKmJ1Ziwgc2l6ZV90IG5ieXRlKTsKKyAgICBzc2l6ZV90ICgqcmF3X3dyaXRl
KShzdHJ1Y3QgUmVkU3RyZWFtICpzLCBjb25zdCB2b2lkICpidWYsIHNpemVfdCBuYnl0ZSk7Cisg
ICAgc3NpemVfdCAoKnJhd193cml0ZXYpKHN0cnVjdCBSZWRTdHJlYW0gKnMsIGNvbnN0IHN0cnVj
dCBpb3ZlYyAqaW92LCBpbnQgaW92Y250KTsKK30gUmVkc1dlYlNvY2tldDsKKwogYm9vbCB3ZWJz
b2NrZXRfaXNfc3RhcnQoY2hhciAqYnVmKTsKIHZvaWQgd2Vic29ja2V0X2NyZWF0ZV9yZXBseShj
aGFyICpidWYsIGNoYXIgKm91dGJ1Zik7Ci1pbnQgd2Vic29ja2V0X3JlYWQodm9pZCAqb3BhcXVl
LCB1aW50OF90ICpidWYsIGludCBsZW4sIHdlYnNvY2tldF9mcmFtZV90ICpmcmFtZSwKLSAgICAg
ICAgIHdlYnNvY2tldF9yZWFkX2NiX3QgcmVhZF9jYiwKLSAgICAgICAgIHdlYnNvY2tldF93cml0
ZV9jYl90IHdyaXRlX2NiKTsKLWludCB3ZWJzb2NrZXRfd3JpdGUodm9pZCAqb3BhcXVlLCBjb25z
dCB1aW50OF90ICpidWYsIGludCBsZW4sIHVpbnQ2NF90ICpyZW1haW5kZXIsCi0gICAgICAgICB3
ZWJzb2NrZXRfd3JpdGVfY2JfdCB3cml0ZV9jYik7Ci1pbnQgd2Vic29ja2V0X3dyaXRldih2b2lk
ICpvcGFxdWUsIHN0cnVjdCBpb3ZlYyAqaW92LCBpbnQgaW92Y250LCB1aW50NjRfdCAqcmVtYWlu
ZGVyLAotICAgICAgICAgd2Vic29ja2V0X3dyaXRldl9jYl90IHdyaXRldl9jYik7CitpbnQgd2Vi
c29ja2V0X3JlYWQoUmVkc1dlYlNvY2tldCAqd3MsIHVpbnQ4X3QgKmJ1ZiwgaW50IGxlbik7Citp
bnQgd2Vic29ja2V0X3dyaXRlKFJlZHNXZWJTb2NrZXQgKndzLCBjb25zdCB1aW50OF90ICpidWYs
IGludCBsZW4pOworaW50IHdlYnNvY2tldF93cml0ZXYoUmVkc1dlYlNvY2tldCAqd3MsIHN0cnVj
dCBpb3ZlYyAqaW92LCBpbnQgaW92Y250KTsKIHZvaWQgd2Vic29ja2V0X2Fja19jbG9zZSh2b2lk
ICpvcGFxdWUsIHdlYnNvY2tldF93cml0ZV9jYl90IHdyaXRlX2NiKTsKLS0gCjIuMjAuMQoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KU3BpY2UtZGV2ZWwg
bWFpbGluZyBsaXN0ClNwaWNlLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xp
c3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL3NwaWNlLWRldmVs
