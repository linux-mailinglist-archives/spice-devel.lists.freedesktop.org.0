Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id CFC9D7A782
	for <lists+spice-devel@lfdr.de>; Tue, 30 Jul 2019 14:04:16 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3A2386E4EA;
	Tue, 30 Jul 2019 12:04:15 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0AE3C6E4E6
 for <spice-devel@lists.freedesktop.org>; Tue, 30 Jul 2019 12:04:14 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx05.intmail.prod.int.phx2.redhat.com
 [10.5.11.15])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 9F36730B8DE1
 for <spice-devel@lists.freedesktop.org>; Tue, 30 Jul 2019 12:04:13 +0000 (UTC)
Received: from fziglio.remote.csb (unknown [10.33.32.10])
 by smtp.corp.redhat.com (Postfix) with ESMTP id B30DD5D6B0;
 Tue, 30 Jul 2019 12:04:12 +0000 (UTC)
From: Frediano Ziglio <fziglio@redhat.com>
To: spice-devel@lists.freedesktop.org
Date: Tue, 30 Jul 2019 13:03:10 +0100
Message-Id: <20190730120331.17967-22-fziglio@redhat.com>
In-Reply-To: <20190730120331.17967-1-fziglio@redhat.com>
References: <20190730120331.17967-1-fziglio@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.15
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.47]); Tue, 30 Jul 2019 12:04:13 +0000 (UTC)
Subject: [Spice-devel] [PATCH spice-gtk 22/44] fixup! usb-redir: add files
 for SCSI and USB MSC implementation
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

TGltaXQgbGluZXMgdG8gMTAwIGNoYXJhY3RlcnMuCi0tLQogc3JjL2NkLXNjc2kuYyB8IDQ4ICsr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0tLS0tLS0tLS0tLQogMSBmaWxlIGNo
YW5nZWQsIDMyIGluc2VydGlvbnMoKyksIDE2IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3Ny
Yy9jZC1zY3NpLmMgYi9zcmMvY2Qtc2NzaS5jCmluZGV4IDM5NjkyNTc2Li45OTYzNzYyZiAxMDA2
NDQKLS0tIGEvc3JjL2NkLXNjc2kuYworKysgYi9zcmMvY2Qtc2NzaS5jCkBAIC01Miw3ICs1Miw4
IEBAIHR5cGVkZWYgc3RydWN0IFNjc2lTaG9ydFNlbnNlIHsKIH0gU2NzaVNob3J0U2Vuc2U7CiAK
ICNkZWZpbmUgQ0RfTUVESUFfRVZFTlRfTk9fQ0hBTkdFICAgICAgICAgICAgMHgwCi0jZGVmaW5l
IENEX01FRElBX0VWRU5UX0VKRUNUX1JFUSAgICAgICAgICAgIDB4MSAvKiB1c2VyIHJlcXVlc3Qg
KG1lY2hhbmljYWwgc3dpdGNoKSB0byBlamVjdCB0aGUgbWVkaWEgKi8KKyNkZWZpbmUgQ0RfTUVE
SUFfRVZFTlRfRUpFQ1RfUkVRICAgICAgICAgICAgMHgxIC8qIHVzZXIgcmVxdWVzdCAobWVjaGFu
aWNhbCBzd2l0Y2gpIHRvCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgKiBlamVjdCB0aGUgbWVkaWEgKi8KICNkZWZpbmUgQ0RfTUVESUFfRVZFTlRfTkVX
X01FRElBICAgICAgICAgICAgMHgyIC8qIG5ldyBtZWRpYSByZWNlaXZlZCAqLwogI2RlZmluZSBD
RF9NRURJQV9FVkVOVF9NRURJQV9SRU1PVkFMICAgICAgICAweDMgLyogbWVkaWEgcmVtb3ZlZCAq
LwogI2RlZmluZSBDRF9NRURJQV9FVkVOVF9NRURJQV9DSEFOR0VEICAgICAgICAweDQgLyogdXNl
ciByZXF1ZXN0IHRvIGxvYWQgbmV3IG1lZGlhICovCkBAIC0xMDcxLDcgKzEwNzIsOCBAQCBzdGF0
aWMgdm9pZCBjZF9zY3NpX2NtZF9pbnF1aXJ5X3N0YW5kYXJkX25vX2x1bihDZFNjc2lMVSAqZGV2
LCBDZFNjc2lSZXF1ZXN0ICpyZQogc3RhdGljIHZvaWQgY2Rfc2NzaV9jbWRfaW5xdWlyeV9zdGFu
ZGFyZChDZFNjc2lMVSAqZGV2LCBDZFNjc2lSZXF1ZXN0ICpyZXEpCiB7CiAgICAgdWludDhfdCAq
b3V0YnVmID0gcmVxLT5idWY7Ci0gICAgdWludDMyX3QgcmVzcF9sZW4gPSAoZGV2LT5jbGFpbV92
ZXJzaW9uID09IDApID8gSU5RVUlSWV9TVEFOREFSRF9MRU5fTk9fVkVSIDogSU5RVUlSWV9TVEFO
REFSRF9MRU47CisgICAgdWludDMyX3QgcmVzcF9sZW4gPQorICAgICAgICAoZGV2LT5jbGFpbV92
ZXJzaW9uID09IDApID8gSU5RVUlSWV9TVEFOREFSRF9MRU5fTk9fVkVSIDogSU5RVUlSWV9TVEFO
REFSRF9MRU47CiAKICAgICBvdXRidWZbMF0gPSAoUEVSSUZfUVVBTElGSUVSX0NPTk5FQ1RFRCA8
PCA1KSB8IFRZUEVfUk9NOwogICAgIG91dGJ1ZlsxXSA9IChkZXYtPnJlbW92YWJsZSkgPyBJTlFV
SVJZX1JFTU9WQUJMRV9NRURJVU0gOiAwOwpAQCAtMTQ0MCw3ICsxNDQyLDggQEAgc3RhdGljIHVp
bnQzMl90IGNkX3Njc2lfYWRkX21vZGVfcGFnZV9jYXBzX21lY2hfc3RhdHVzKENkU2NzaUxVICpk
ZXYsIHVpbnQ4X3QgKm8KICAgICBvdXRidWZbMl0gPSBDRF9NT0RFX1BBR0VfQ0FQU19DRF9SX1JF
QUQgfCBDRF9NT0RFX1BBR0VfQ0FQU19DRF9SV19SRUFEIHwKICAgICAgICAgICAgICAgICBDRF9N
T0RFX1BBR0VfQ0FQU19EVkRfUk9NX1JFQUQgfCBDRF9NT0RFX1BBR0VfQ0FQU19EVkRfUl9SRUFE
IHwKICAgICAgICAgICAgICAgICBDRF9NT0RFX1BBR0VfQ0FQU19EVkRfUkFNX1JFQUQ7Ci0gICAg
b3V0YnVmWzZdID0gQ0RfTU9ERV9QQUdFX0NBUFNfTE9BRElOR19UUkFZIHwgQ0RfTU9ERV9QQUdF
X0NBUFNfRUpFQ1QgfCBDRF9NT0RFX1BBR0VfQ0FQU19MT0NLX1NVUFBPUlQ7CisgICAgb3V0YnVm
WzZdID0gQ0RfTU9ERV9QQUdFX0NBUFNfTE9BRElOR19UUkFZIHwgQ0RfTU9ERV9QQUdFX0NBUFNf
RUpFQ1QgfAorICAgICAgICAgICAgICAgIENEX01PREVfUEFHRV9DQVBTX0xPQ0tfU1VQUE9SVDsK
ICAgICBpZiAoZGV2LT5wcmV2ZW50X21lZGlhX3JlbW92YWwpIHsKICAgICAgICAgb3V0YnVmWzZd
IHw9IENEX01PREVfUEFHRV9DQVBTX0xPQ0tfU1RBVEU7CiAgICAgfQpAQCAtMTYzMyw3ICsxNjM2
LDggQEAgc3RhdGljIHZvaWQgY2Rfc2NzaV9jbWRfbW9kZV9zZWxlY3RfMTAoQ2RTY3NpTFUgKmRl
diwgQ2RTY3NpUmVxdWVzdCAqcmVxKQogI2RlZmluZSBDRF9GRUFUVVJFX1JFTU9WQUJMRV9OT19Q
UlZOVF9KTVBSICAoMHgwMSA8PCAyKQogI2RlZmluZSBDRF9GRUFUVVJFX1JFTU9WQUJMRV9MT0NL
ICAgICAgICAgICAoMHgwMSkKIAotc3RhdGljIGdib29sZWFuIGNkX3Njc2lfZmVhdHVyZV9yZXBv
cnRhYmxlKHVpbnQzMl90IGZlYXR1cmUsIHVpbnQzMl90IHN0YXJ0X2ZlYXR1cmUsIHVpbnQzMl90
IHJlcV90eXBlKQorc3RhdGljIGdib29sZWFuIGNkX3Njc2lfZmVhdHVyZV9yZXBvcnRhYmxlKHVp
bnQzMl90IGZlYXR1cmUsIHVpbnQzMl90IHN0YXJ0X2ZlYXR1cmUsCisgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QgcmVxX3R5cGUpCiB7CiAgICAgcmV0
dXJuIChyZXFfdHlwZSA9PSBDRF9GRUFUVVJFX1JFUV9TSU5HTEUgJiYgc3RhcnRfZmVhdHVyZSA9
PSBmZWF0dXJlKSB8fAogICAgICAgICAgICAoZmVhdHVyZSA+PSBzdGFydF9mZWF0dXJlKTsKQEAg
LTE4NjMsMTEgKzE4NjcsMTMgQEAgc3RhdGljIHZvaWQgY2Rfc2NzaV9jbWRfZ2V0X2NvbmZpZ3Vy
YXRpb24oQ2RTY3NpTFUgKmRldiwgQ2RTY3NpUmVxdWVzdCAqcmVxKQogICAgIHN3aXRjaCAocmVx
X3R5cGUpIHsKICAgICBjYXNlIENEX0ZFQVRVUkVfUkVRX0FMTDoKICAgICBjYXNlIENEX0ZFQVRV
UkVfUkVRX0NVUlJFTlQ6Ci0gICAgICAgIHJlc3BfbGVuICs9IGNkX3Njc2lfYWRkX2ZlYXR1cmVf
cHJvZmlsZXNfbGlzdChkZXYsIG91dGJ1ZiArIHJlc3BfbGVuLCBzdGFydF9mZWF0dXJlLCByZXFf
dHlwZSk7CisgICAgICAgIHJlc3BfbGVuICs9IGNkX3Njc2lfYWRkX2ZlYXR1cmVfcHJvZmlsZXNf
bGlzdChkZXYsIG91dGJ1ZiArIHJlc3BfbGVuLCBzdGFydF9mZWF0dXJlLAorICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxX3R5cGUpOwogICAg
ICAgICByZXNwX2xlbiArPSBjZF9zY3NpX2FkZF9mZWF0dXJlX2NvcmUoZGV2LCBvdXRidWYgKyBy
ZXNwX2xlbiwgc3RhcnRfZmVhdHVyZSwgcmVxX3R5cGUpOwogICAgICAgICByZXNwX2xlbiArPSBj
ZF9zY3NpX2FkZF9mZWF0dXJlX21vcnBoKGRldiwgb3V0YnVmICsgcmVzcF9sZW4sIHN0YXJ0X2Zl
YXR1cmUsIHJlcV90eXBlKTsKICAgICAgICAgcmVzcF9sZW4gKz0gY2Rfc2NzaV9hZGRfZmVhdHVy
ZV9yZW1vdmFibGUoZGV2LCBvdXRidWYgKyByZXNwX2xlbiwgc3RhcnRfZmVhdHVyZSwgcmVxX3R5
cGUpOwotICAgICAgICByZXNwX2xlbiArPSBjZF9zY3NpX2FkZF9mZWF0dXJlX3JhbmRvbV9yZWFk
KGRldiwgb3V0YnVmICsgcmVzcF9sZW4sIHN0YXJ0X2ZlYXR1cmUsIHJlcV90eXBlKTsKKyAgICAg
ICAgcmVzcF9sZW4gKz0gY2Rfc2NzaV9hZGRfZmVhdHVyZV9yYW5kb21fcmVhZChkZXYsIG91dGJ1
ZiArIHJlc3BfbGVuLCBzdGFydF9mZWF0dXJlLAorICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHJlcV90eXBlKTsKICAgICAgICAgcmVzcF9sZW4gKz0g
Y2Rfc2NzaV9hZGRfZmVhdHVyZV9jZF9yZWFkKGRldiwgb3V0YnVmICsgcmVzcF9sZW4sIHN0YXJ0
X2ZlYXR1cmUsIHJlcV90eXBlKTsKICAgICAgICAgcmVzcF9sZW4gKz0gY2Rfc2NzaV9hZGRfZmVh
dHVyZV9kdmRfcmVhZChkZXYsIG91dGJ1ZiArIHJlc3BfbGVuLCBzdGFydF9mZWF0dXJlLCByZXFf
dHlwZSk7CiAgICAgICAgIHJlc3BfbGVuICs9IGNkX3Njc2lfYWRkX2ZlYXR1cmVfcG93ZXJfbWdt
dChkZXYsIG91dGJ1ZiArIHJlc3BfbGVuLCBzdGFydF9mZWF0dXJlLCByZXFfdHlwZSk7CkBAIC0x
ODgyLDIyICsxODg4LDI4IEBAIHN0YXRpYyB2b2lkIGNkX3Njc2lfY21kX2dldF9jb25maWd1cmF0
aW9uKENkU2NzaUxVICpkZXYsIENkU2NzaVJlcXVlc3QgKnJlcSkKICAgICAgICAgICAgIHJlc3Bf
bGVuICs9IGNkX3Njc2lfYWRkX2ZlYXR1cmVfbW9ycGgoZGV2LCBvdXRidWYgKyByZXNwX2xlbiwg
c3RhcnRfZmVhdHVyZSwgcmVxX3R5cGUpOwogICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgIGNh
c2UgQ0RfRkVBVFVSRV9OVU1fUkVNT1ZBQkxFOgotICAgICAgICAgICAgcmVzcF9sZW4gKz0gY2Rf
c2NzaV9hZGRfZmVhdHVyZV9yZW1vdmFibGUoZGV2LCBvdXRidWYgKyByZXNwX2xlbiwgc3RhcnRf
ZmVhdHVyZSwgcmVxX3R5cGUpOworICAgICAgICAgICAgcmVzcF9sZW4gKz0gY2Rfc2NzaV9hZGRf
ZmVhdHVyZV9yZW1vdmFibGUoZGV2LCBvdXRidWYgKyByZXNwX2xlbiwgc3RhcnRfZmVhdHVyZSwK
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJl
cV90eXBlKTsKICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICBjYXNlIENEX0ZFQVRVUkVfTlVN
X1JBTkRPTV9SRUFEOgotICAgICAgICAgICAgcmVzcF9sZW4gKz0gY2Rfc2NzaV9hZGRfZmVhdHVy
ZV9yYW5kb21fcmVhZChkZXYsIG91dGJ1ZiArIHJlc3BfbGVuLCBzdGFydF9mZWF0dXJlLCByZXFf
dHlwZSk7CisgICAgICAgICAgICByZXNwX2xlbiArPSBjZF9zY3NpX2FkZF9mZWF0dXJlX3JhbmRv
bV9yZWFkKGRldiwgb3V0YnVmICsgcmVzcF9sZW4sIHN0YXJ0X2ZlYXR1cmUsCisgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcV90eXBlKTsK
ICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICBjYXNlIENEX0ZFQVRVUkVfTlVNX0NEX1JFQUQ6
Ci0gICAgICAgICAgICByZXNwX2xlbiArPSBjZF9zY3NpX2FkZF9mZWF0dXJlX2NkX3JlYWQoZGV2
LCBvdXRidWYgKyByZXNwX2xlbiwgc3RhcnRfZmVhdHVyZSwgcmVxX3R5cGUpOworICAgICAgICAg
ICAgcmVzcF9sZW4gKz0gY2Rfc2NzaV9hZGRfZmVhdHVyZV9jZF9yZWFkKGRldiwgb3V0YnVmICsg
cmVzcF9sZW4sIHN0YXJ0X2ZlYXR1cmUsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgcmVxX3R5cGUpOwogICAgICAgICAgICAgYnJlYWs7CiAgICAg
ICAgIGNhc2UgQ0RfRkVBVFVSRV9OVU1fRFZEX1JFQUQ6Ci0gICAgICAgICAgICByZXNwX2xlbiAr
PSBjZF9zY3NpX2FkZF9mZWF0dXJlX2R2ZF9yZWFkKGRldiwgb3V0YnVmICsgcmVzcF9sZW4sIHN0
YXJ0X2ZlYXR1cmUsIHJlcV90eXBlKTsKKyAgICAgICAgICAgIHJlc3BfbGVuICs9IGNkX3Njc2lf
YWRkX2ZlYXR1cmVfZHZkX3JlYWQoZGV2LCBvdXRidWYgKyByZXNwX2xlbiwgc3RhcnRfZmVhdHVy
ZSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
cmVxX3R5cGUpOwogICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgIGNhc2UgQ0RfRkVBVFVSRV9O
VU1fUE9XRVJfTU5HVDoKLSAgICAgICAgICAgIHJlc3BfbGVuICs9IGNkX3Njc2lfYWRkX2ZlYXR1
cmVfcG93ZXJfbWdtdChkZXYsIG91dGJ1ZiArIHJlc3BfbGVuLCBzdGFydF9mZWF0dXJlLCByZXFf
dHlwZSk7CisgICAgICAgICAgICByZXNwX2xlbiArPSBjZF9zY3NpX2FkZF9mZWF0dXJlX3Bvd2Vy
X21nbXQoZGV2LCBvdXRidWYgKyByZXNwX2xlbiwgc3RhcnRfZmVhdHVyZSwKKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXFfdHlwZSk7CiAg
ICAgICAgICAgICBicmVhazsKICAgICAgICAgY2FzZSBDRF9GRUFUVVJFX05VTV9USU1FT1VUOgot
ICAgICAgICAgICAgcmVzcF9sZW4gKz0gY2Rfc2NzaV9hZGRfZmVhdHVyZV90aW1lb3V0KGRldiwg
b3V0YnVmICsgcmVzcF9sZW4sIHN0YXJ0X2ZlYXR1cmUsIHJlcV90eXBlKTsKKyAgICAgICAgICAg
IHJlc3BfbGVuICs9IGNkX3Njc2lfYWRkX2ZlYXR1cmVfdGltZW91dChkZXYsIG91dGJ1ZiArIHJl
c3BfbGVuLCBzdGFydF9mZWF0dXJlLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHJlcV90eXBlKTsKICAgICAgICAgICAgIGJyZWFrOwogICAgICAg
ICBkZWZhdWx0OgogICAgICAgICAgICAgYnJlYWs7CkBAIC0yMDMxLDcgKzIwNDMsOCBAQCBzdGF0
aWMgdm9pZCBjZF9zY3NpX2NtZF9nZXRfZXZlbnRfc3RhdHVzX25vdGlmaWNhdGlvbihDZFNjc2lM
VSAqZGV2LCBDZFNjc2lSZXF1ZQogICAgICAgICAgICAgICAgICAgICAgICAgIiBub25lIG9mIHJl
cXVlc3RlZCBldmVudHMgc3VwcG9ydGVkIiwKICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS0+
bHVuLCBpbW1lZCwgY2xhc3Nlc19yZXF1ZXN0ZWQsIGNsYXNzZXNfc3VwcG9ydGVkKTsKICAgICB9
Ci0gICAgb3V0YnVmWzFdID0gKHVpbnQ4X3QpKHJlc3BfbGVuIC0gMik7IC8qIEV2ZW50IERhdGEg
TGVuZ3RoIExTQiwgbGVuZ3RoIGV4Y2x1ZGluZyB0aGUgZmllbGQgaXRzZWxmICovCisgICAgb3V0
YnVmWzFdID0gKHVpbnQ4X3QpKHJlc3BfbGVuIC0gMik7IC8qIEV2ZW50IERhdGEgTGVuZ3RoIExT
QiwgbGVuZ3RoIGV4Y2x1ZGluZyB0aGUKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICogZmllbGQgaXRzZWxmICovCiAgICAgb3V0YnVmWzNdID0gKHVpbnQ4X3QpY2xh
c3Nlc19zdXBwb3J0ZWQ7CiAKICAgICByZXEtPmluX2xlbiA9IChyZXEtPnJlcV9sZW4gPCByZXNw
X2xlbikgPyByZXEtPnJlcV9sZW4gOiByZXNwX2xlbjsKQEAgLTIyMTcsNyArMjIzMCw4IEBAIHN0
YXRpYyB2b2lkIGNkX3Njc2lfY21kX3N0YXJ0X3N0b3BfdW5pdChDZFNjc2lMVSAqZGV2LCBDZFNj
c2lSZXF1ZXN0ICpyZXEpCiAgICAgICAgICAgICBTUElDRV9ERUJVRygic3RhcnRfc3RvcF91bml0
LCBsdW46MHglIiBHX0dVSU5UMzJfRk9STUFUICIgc3RhcnRlZCIsIHJlcS0+bHVuKTsKIAogICAg
ICAgICAgICAgaWYgKGxvYWRfZWplY3QpIHsgLyogbG9hZCBtZWRpdW0gKi8KLSAgICAgICAgICAg
ICAgICBTUElDRV9ERUJVRygic3RhcnRfc3RvcF91bml0LCBsdW46MHglIiBHX0dVSU5UMzJfRk9S
TUFUICIgbG9hZCB3aXRoIG5vIG1lZGlhIiwgcmVxLT5sdW4pOworICAgICAgICAgICAgICAgIFNQ
SUNFX0RFQlVHKCJzdGFydF9zdG9wX3VuaXQsIGx1bjoweCUiIEdfR1VJTlQzMl9GT1JNQVQgIiBs
b2FkIHdpdGggbm8gbWVkaWEiLAorICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS0+bHVu
KTsKICAgICAgICAgICAgICAgICBjZF9zY3NpX2x1X2xvYWQoZGV2LCBOVUxMKTsKICAgICAgICAg
ICAgICAgICBjZF9zY3NpX2Rldl9jaGFuZ2VkKGRldi0+dGd0LT51c2VyX2RhdGEsIHJlcS0+bHVu
KTsKICAgICAgICAgICAgIH0KQEAgLTI1MDAsNyArMjUxNCw4IEBAIHN0YXRpYyB2b2lkIGNkX3Nj
c2lfcmVhZF9hc3luY19jYW5jZWxlZChHQ2FuY2VsbGFibGUgKmNhbmNlbGxhYmxlLCBncG9pbnRl
ciB1c2VyCiAgICAgZ19jYW5jZWxsYWJsZV9kaXNjb25uZWN0KGNhbmNlbGxhYmxlLCByZXEtPmNh
bmNlbF9pZCk7CiAgICAgcmVxLT5jYW5jZWxfaWQgPSAwOwogCi0gICAgcmVxLT5yZXFfc3RhdGUg
PSAoc3QtPnN0YXRlID09IENEX1NDU0lfVEdUX1NUQVRFX1JVTk5JTkcpID8gU0NTSV9SRVFfQ0FO
Q0VMRUQgOiBTQ1NJX1JFUV9ESVNQT1NFRDsKKyAgICByZXEtPnJlcV9zdGF0ZSA9CisgICAgICAg
IChzdC0+c3RhdGUgPT0gQ0RfU0NTSV9UR1RfU1RBVEVfUlVOTklORykgPyBTQ1NJX1JFUV9DQU5D
RUxFRCA6IFNDU0lfUkVRX0RJU1BPU0VEOwogICAgIHJlcS0+aW5fbGVuID0gMDsKICAgICByZXEt
PnN0YXR1cyA9IEdPT0Q7CiAKQEAgLTI3MTUsNyArMjczMCw4IEBAIHZvaWQgY2Rfc2NzaV9kZXZf
cmVxdWVzdF9zdWJtaXQoQ2RTY3NpVGFyZ2V0ICpzdCwgQ2RTY3NpUmVxdWVzdCAqcmVxKQogZG9u
ZToKICAgICBTUElDRV9ERUJVRygicmVxdWVzdF9zdWJtaXQgZG9uZSwgbHVuOiAlIiBHX0dVSU5U
MzJfRk9STUFUCiAgICAgICAgICAgICAgICAgIiBvcDogMHglMDJ4ICVzLCBzdGF0ZTogJXMgc3Rh
dHVzOiAlIiBHX0dVSU5UMzJfRk9STUFUICIgbGVuOiAlIiBHX0dVSU5UNjRfRk9STUFULAotICAg
ICAgICAgICAgICAgIGx1biwgb3Bjb2RlLCBjbWRfbmFtZSwgQ2RTY3NpUmVxU3RhdGVfc3RyKHJl
cS0+cmVxX3N0YXRlKSwgcmVxLT5zdGF0dXMsIHJlcS0+aW5fbGVuKTsKKyAgICAgICAgICAgICAg
ICBsdW4sIG9wY29kZSwgY21kX25hbWUsIENkU2NzaVJlcVN0YXRlX3N0cihyZXEtPnJlcV9zdGF0
ZSksIHJlcS0+c3RhdHVzLAorICAgICAgICAgICAgICAgIHJlcS0+aW5fbGVuKTsKIAogICAgIGlm
IChyZXEtPnJlcV9zdGF0ZSA9PSBTQ1NJX1JFUV9DT01QTEVURSkgewogICAgICAgICBjZF9zY3Np
X2Rldl9yZXF1ZXN0X2NvbXBsZXRlKHN0LT51c2VyX2RhdGEsIHJlcSk7Ci0tIAoyLjIwLjEKCl9f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClNwaWNlLWRldmVs
IG1haWxpbmcgbGlzdApTcGljZS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9s
aXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9zcGljZS1kZXZlbA==
