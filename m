Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id E383783457
	for <lists+spice-devel@lfdr.de>; Tue,  6 Aug 2019 16:53:04 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 48EE46E3B2;
	Tue,  6 Aug 2019 14:53:03 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 8B15A6E3B0
 for <spice-devel@lists.freedesktop.org>; Tue,  6 Aug 2019 14:53:01 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx07.intmail.prod.int.phx2.redhat.com
 [10.5.11.22])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 3746A30BD1BD
 for <spice-devel@lists.freedesktop.org>; Tue,  6 Aug 2019 14:53:01 +0000 (UTC)
Received: from fziglio.remote.csb (unknown [10.33.32.14])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 82D6A10016E8;
 Tue,  6 Aug 2019 14:52:59 +0000 (UTC)
From: Frediano Ziglio <fziglio@redhat.com>
To: spice-devel@lists.freedesktop.org
Date: Tue,  6 Aug 2019 15:52:50 +0100
Message-Id: <20190806145250.31813-2-fziglio@redhat.com>
In-Reply-To: <20190806145250.31813-1-fziglio@redhat.com>
References: <20190806145250.31813-1-fziglio@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.84 on 10.5.11.22
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.49]); Tue, 06 Aug 2019 14:53:01 +0000 (UTC)
Subject: [Spice-devel] [PATCH spice-server 2/2] event-loop: Change internal
 core interface
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

QWxsb3cgdG8gbW9kaWZ5L2NhbmNlbCB0aW1lcnMvd2F0Y2hlcyB3aXRob3V0IGhhdmluZyB0byBy
ZXRyaWV2ZQp0aGUgY29kZSBpbnRlcmZhY2UuClRoaXMgd2lsbCBtYWtlIHN1cmUgdGhhdCB5b3Ug
YXJlIG5vdCB1c2luZyB0aGUgd3JvbmcgaW50ZXJmYWNlLgpTaW1wbGlmeSBjb2RlIHRvIGRlYWwg
d2l0aCB0aW1lcnMvd2F0Y2hlcy4KUmVtb3ZlIHRoZSByZXF1aXJlbWVudCB0byBoYXZlIHRoZSBj
b3JlIGludGVyZmFjZSBhdmFpbGFibGUKZm9yIHJlbW92aW5nIHRpbWVycy93YXRjaGVzLgoKU2ln
bmVkLW9mZi1ieTogRnJlZGlhbm8gWmlnbGlvIDxmemlnbGlvQHJlZGhhdC5jb20+Ci0tLQogc2Vy
dmVyL2NoYXItZGV2aWNlLmMgICAgICAgICAgICB8ICAyOCArKy0tLQogc2VydmVyL2V2ZW50LWxv
b3AuYyAgICAgICAgICAgICB8IDIwNiArKysrKysrKysrKysrKysrKysrKysrKystLS0tLS0tLQog
c2VydmVyL2lucHV0cy1jaGFubmVsLmMgICAgICAgICB8ICAgNiArLQogc2VydmVyL21haW4tZGlz
cGF0Y2hlci5jICAgICAgICB8ICAgMiArLQogc2VydmVyL3JlZC1jaGFubmVsLWNsaWVudC5jICAg
ICB8ICA0MyArKystLS0tCiBzZXJ2ZXIvcmVkLWNvbW1vbi5oICAgICAgICAgICAgIHwgIDE1ICsr
LQogc2VydmVyL3JlZC1zdHJlYW0tZGV2aWNlLmMgICAgICB8ICAgNSArLQogc2VydmVyL3JlZC1z
dHJlYW0uYyAgICAgICAgICAgICB8ICAgMiArLQogc2VydmVyL3JlZC13b3JrZXIuYyAgICAgICAg
ICAgICB8ICAgMiArLQogc2VydmVyL3JlZHMuYyAgICAgICAgICAgICAgICAgICB8ICA2OSArKy0t
LS0tLS0tLQogc2VydmVyL3JlZHMuaCAgICAgICAgICAgICAgICAgICB8ICAxMiAtLQogc2VydmVy
L3Rlc3RzL2Jhc2ljLWV2ZW50LWxvb3AuYyB8ICAzNSArLS0tLS0KIDEyIGZpbGVzIGNoYW5nZWQs
IDIxMSBpbnNlcnRpb25zKCspLCAyMTQgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvc2VydmVy
L2NoYXItZGV2aWNlLmMgYi9zZXJ2ZXIvY2hhci1kZXZpY2UuYwppbmRleCBjZmNjMjlkYTAuLjFh
YzU0ZDVjNSAxMDA2NDQKLS0tIGEvc2VydmVyL2NoYXItZGV2aWNlLmMKKysrIGIvc2VydmVyL2No
YXItZGV2aWNlLmMKQEAgLTE2Myw3ICsxNjMsNyBAQCBzdGF0aWMgdm9pZCByZWRfY2hhcl9kZXZp
Y2VfY2xpZW50X2ZyZWUoUmVkQ2hhckRldmljZSAqZGV2LAogewogICAgIEdMaXN0ICpsLCAqbmV4
dDsKIAotICAgIHJlZHNfY29yZV90aW1lcl9yZW1vdmUoZGV2LT5wcml2LT5yZWRzLCBkZXZfY2xp
ZW50LT53YWl0X2Zvcl90b2tlbnNfdGltZXIpOworICAgIHJlZF90aW1lcl9yZW1vdmUoZGV2X2Ns
aWVudC0+d2FpdF9mb3JfdG9rZW5zX3RpbWVyKTsKICAgICBkZXZfY2xpZW50LT53YWl0X2Zvcl90
b2tlbnNfdGltZXIgPSBOVUxMOwogCiAgICAgZ19xdWV1ZV9mcmVlX2Z1bGwoZGV2X2NsaWVudC0+
c2VuZF9xdWV1ZSwgKEdEZXN0cm95Tm90aWZ5KXJlZF9waXBlX2l0ZW1fdW5yZWYpOwpAQCAtMjQ5
LDggKzI0OSw2IEBAIHN0YXRpYyB1aW50NjRfdCByZWRfY2hhcl9kZXZpY2VfbWF4X3NlbmRfdG9r
ZW5zKFJlZENoYXJEZXZpY2UgKmRldikKIHN0YXRpYyB2b2lkIHJlZF9jaGFyX2RldmljZV9hZGRf
bXNnX3RvX2NsaWVudF9xdWV1ZShSZWRDaGFyRGV2aWNlQ2xpZW50ICpkZXZfY2xpZW50LAogICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlZFBpcGVJ
dGVtICptc2cpCiB7Ci0gICAgUmVkQ2hhckRldmljZSAqZGV2ID0gZGV2X2NsaWVudC0+ZGV2Owot
CiAgICAgaWYgKGdfcXVldWVfZ2V0X2xlbmd0aChkZXZfY2xpZW50LT5zZW5kX3F1ZXVlKSA+PSBk
ZXZfY2xpZW50LT5tYXhfc2VuZF9xdWV1ZV9zaXplKSB7CiAgICAgICAgIHJlZF9jaGFyX2Rldmlj
ZV9oYW5kbGVfY2xpZW50X292ZXJmbG93KGRldl9jbGllbnQpOwogICAgICAgICByZXR1cm47CkBA
IC0yNTksOCArMjU3LDggQEAgc3RhdGljIHZvaWQgcmVkX2NoYXJfZGV2aWNlX2FkZF9tc2dfdG9f
Y2xpZW50X3F1ZXVlKFJlZENoYXJEZXZpY2VDbGllbnQgKmRldl9jbGkKICAgICByZWRfcGlwZV9p
dGVtX3JlZihtc2cpOwogICAgIGdfcXVldWVfcHVzaF9oZWFkKGRldl9jbGllbnQtPnNlbmRfcXVl
dWUsIG1zZyk7CiAgICAgaWYgKCFkZXZfY2xpZW50LT53YWl0X2Zvcl90b2tlbnNfc3RhcnRlZCkg
ewotICAgICAgICByZWRzX2NvcmVfdGltZXJfc3RhcnQoZGV2LT5wcml2LT5yZWRzLCBkZXZfY2xp
ZW50LT53YWl0X2Zvcl90b2tlbnNfdGltZXIsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBSRURfQ0hBUl9ERVZJQ0VfV0FJVF9UT0tFTlNfVElNRU9VVCk7CisgICAgICAgIHJlZF90aW1l
cl9zdGFydChkZXZfY2xpZW50LT53YWl0X2Zvcl90b2tlbnNfdGltZXIsCisgICAgICAgICAgICAg
ICAgICAgICAgICBSRURfQ0hBUl9ERVZJQ0VfV0FJVF9UT0tFTlNfVElNRU9VVCk7CiAgICAgICAg
IGRldl9jbGllbnQtPndhaXRfZm9yX3Rva2Vuc19zdGFydGVkID0gVFJVRTsKICAgICB9CiB9CkBA
IC0zNzIsMTIgKzM3MCwxMiBAQCByZWRfY2hhcl9kZXZpY2Vfc2VuZF90b19jbGllbnRfdG9rZW5z
X2Fic29yYihSZWRDaGFyRGV2aWNlICpkZXYsCiAgICAgfQogCiAgICAgaWYgKHJlZF9jaGFyX2Rl
dmljZV9jYW5fc2VuZF90b19jbGllbnQoZGV2X2NsaWVudCkpIHsKLSAgICAgICAgcmVkc19jb3Jl
X3RpbWVyX2NhbmNlbChkZXYtPnByaXYtPnJlZHMsIGRldl9jbGllbnQtPndhaXRfZm9yX3Rva2Vu
c190aW1lcik7CisgICAgICAgIHJlZF90aW1lcl9jYW5jZWwoZGV2X2NsaWVudC0+d2FpdF9mb3Jf
dG9rZW5zX3RpbWVyKTsKICAgICAgICAgZGV2X2NsaWVudC0+d2FpdF9mb3JfdG9rZW5zX3N0YXJ0
ZWQgPSBGQUxTRTsKICAgICAgICAgcmVkX2NoYXJfZGV2aWNlX3JlYWRfZnJvbV9kZXZpY2UoZGV2
X2NsaWVudC0+ZGV2KTsKICAgICB9IGVsc2UgaWYgKCFnX3F1ZXVlX2lzX2VtcHR5KGRldl9jbGll
bnQtPnNlbmRfcXVldWUpKSB7Ci0gICAgICAgIHJlZHNfY29yZV90aW1lcl9zdGFydChkZXYtPnBy
aXYtPnJlZHMsIGRldl9jbGllbnQtPndhaXRfZm9yX3Rva2Vuc190aW1lciwKLSAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIFJFRF9DSEFSX0RFVklDRV9XQUlUX1RPS0VOU19USU1FT1VUKTsK
KyAgICAgICAgcmVkX3RpbWVyX3N0YXJ0KGRldl9jbGllbnQtPndhaXRfZm9yX3Rva2Vuc190aW1l
ciwKKyAgICAgICAgICAgICAgICAgICAgICAgIFJFRF9DSEFSX0RFVklDRV9XQUlUX1RPS0VOU19U
SU1FT1VUKTsKICAgICAgICAgZGV2X2NsaWVudC0+d2FpdF9mb3JfdG9rZW5zX3N0YXJ0ZWQgPSBU
UlVFOwogICAgIH0KIH0KQEAgLTQzOCw3ICs0MzYsNyBAQCBzdGF0aWMgaW50IHJlZF9jaGFyX2Rl
dmljZV93cml0ZV90b19kZXZpY2UoUmVkQ2hhckRldmljZSAqZGV2KQogICAgIGdfb2JqZWN0X3Jl
ZihkZXYpOwogCiAgICAgaWYgKGRldi0+cHJpdi0+d3JpdGVfdG9fZGV2X3RpbWVyKSB7Ci0gICAg
ICAgIHJlZHNfY29yZV90aW1lcl9jYW5jZWwoZGV2LT5wcml2LT5yZWRzLCBkZXYtPnByaXYtPndy
aXRlX3RvX2Rldl90aW1lcik7CisgICAgICAgIHJlZF90aW1lcl9jYW5jZWwoZGV2LT5wcml2LT53
cml0ZV90b19kZXZfdGltZXIpOwogICAgIH0KIAogICAgIHNpZiA9IHNwaWNlX2NoYXJfZGV2aWNl
X2dldF9pbnRlcmZhY2UoZGV2LT5wcml2LT5zaW4pOwpAQCAtNDc1LDggKzQ3Myw4IEBAIHN0YXRp
YyBpbnQgcmVkX2NoYXJfZGV2aWNlX3dyaXRlX3RvX2RldmljZShSZWRDaGFyRGV2aWNlICpkZXYp
CiAgICAgaWYgKGRldi0+cHJpdi0+cnVubmluZykgewogICAgICAgICBpZiAoZGV2LT5wcml2LT5j
dXJfd3JpdGVfYnVmKSB7CiAgICAgICAgICAgICBpZiAoZGV2LT5wcml2LT53cml0ZV90b19kZXZf
dGltZXIpIHsKLSAgICAgICAgICAgICAgICByZWRzX2NvcmVfdGltZXJfc3RhcnQoZGV2LT5wcml2
LT5yZWRzLCBkZXYtPnByaXYtPndyaXRlX3RvX2Rldl90aW1lciwKLSAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgQ0hBUl9ERVZJQ0VfV1JJVEVfVE9fVElNRU9VVCk7CisgICAg
ICAgICAgICAgICAgcmVkX3RpbWVyX3N0YXJ0KGRldi0+cHJpdi0+d3JpdGVfdG9fZGV2X3RpbWVy
LAorICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDSEFSX0RFVklDRV9XUklURV9UT19U
SU1FT1VUKTsKICAgICAgICAgICAgIH0KICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgIHNw
aWNlX2Fzc2VydChnX3F1ZXVlX2lzX2VtcHR5KCZkZXYtPnByaXYtPndyaXRlX3F1ZXVlKSk7CkBA
IC00OTMsNyArNDkxLDcgQEAgc3RhdGljIHZvaWQgcmVkX2NoYXJfZGV2aWNlX3dyaXRlX3JldHJ5
KHZvaWQgKm9wYXF1ZSkKICAgICBSZWRDaGFyRGV2aWNlICpkZXYgPSBvcGFxdWU7CiAKICAgICBp
ZiAoZGV2LT5wcml2LT53cml0ZV90b19kZXZfdGltZXIpIHsKLSAgICAgICAgcmVkc19jb3JlX3Rp
bWVyX2NhbmNlbChkZXYtPnByaXYtPnJlZHMsIGRldi0+cHJpdi0+d3JpdGVfdG9fZGV2X3RpbWVy
KTsKKyAgICAgICAgcmVkX3RpbWVyX2NhbmNlbChkZXYtPnByaXYtPndyaXRlX3RvX2Rldl90aW1l
cik7CiAgICAgfQogICAgIHJlZF9jaGFyX2RldmljZV93cml0ZV90b19kZXZpY2UoZGV2KTsKIH0K
QEAgLTc2Miw3ICs3NjAsNyBAQCB2b2lkIHJlZF9jaGFyX2RldmljZV9zdG9wKFJlZENoYXJEZXZp
Y2UgKmRldikKICAgICBkZXYtPnByaXYtPnJ1bm5pbmcgPSBGQUxTRTsKICAgICBkZXYtPnByaXYt
PmFjdGl2ZSA9IEZBTFNFOwogICAgIGlmIChkZXYtPnByaXYtPndyaXRlX3RvX2Rldl90aW1lcikg
ewotICAgICAgICByZWRzX2NvcmVfdGltZXJfY2FuY2VsKGRldi0+cHJpdi0+cmVkcywgZGV2LT5w
cml2LT53cml0ZV90b19kZXZfdGltZXIpOworICAgICAgICByZWRfdGltZXJfY2FuY2VsKGRldi0+
cHJpdi0+d3JpdGVfdG9fZGV2X3RpbWVyKTsKICAgICB9CiB9CiAKQEAgLTk0Nyw3ICs5NDUsNyBA
QCBzdGF0aWMgdm9pZCByZWRfY2hhcl9kZXZpY2VfaW5pdF9kZXZpY2VfaW5zdGFuY2UoUmVkQ2hh
ckRldmljZSAqc2VsZikKIAogICAgIGdfcmV0dXJuX2lmX2ZhaWwoc2VsZi0+cHJpdi0+cmVkcyk7
CiAKLSAgICByZWRzX2NvcmVfdGltZXJfcmVtb3ZlKHNlbGYtPnByaXYtPnJlZHMsIHNlbGYtPnBy
aXYtPndyaXRlX3RvX2Rldl90aW1lcik7CisgICAgcmVkX3RpbWVyX3JlbW92ZShzZWxmLT5wcml2
LT53cml0ZV90b19kZXZfdGltZXIpOwogICAgIHNlbGYtPnByaXYtPndyaXRlX3RvX2Rldl90aW1l
ciA9IE5VTEw7CiAKICAgICBpZiAoc2VsZi0+cHJpdi0+c2luID09IE5VTEwpIHsKQEAgLTEwMzcs
NyArMTAzNSw3IEBAIHJlZF9jaGFyX2RldmljZV9maW5hbGl6ZShHT2JqZWN0ICpvYmplY3QpCiB7
CiAgICAgUmVkQ2hhckRldmljZSAqc2VsZiA9IFJFRF9DSEFSX0RFVklDRShvYmplY3QpOwogCi0g
ICAgcmVkc19jb3JlX3RpbWVyX3JlbW92ZShzZWxmLT5wcml2LT5yZWRzLCBzZWxmLT5wcml2LT53
cml0ZV90b19kZXZfdGltZXIpOworICAgIHJlZF90aW1lcl9yZW1vdmUoc2VsZi0+cHJpdi0+d3Jp
dGVfdG9fZGV2X3RpbWVyKTsKICAgICBzZWxmLT5wcml2LT53cml0ZV90b19kZXZfdGltZXIgPSBO
VUxMOwogCiAgICAgd3JpdGVfYnVmZmVyc19xdWV1ZV9mcmVlKCZzZWxmLT5wcml2LT53cml0ZV9x
dWV1ZSk7CmRpZmYgLS1naXQgYS9zZXJ2ZXIvZXZlbnQtbG9vcC5jIGIvc2VydmVyL2V2ZW50LWxv
b3AuYwppbmRleCAxY2NmZDY3MWYuLjZkMmRlOTVmMiAxMDA2NDQKLS0tIGEvc2VydmVyL2V2ZW50
LWxvb3AuYworKysgYi9zZXJ2ZXIvZXZlbnQtbG9vcC5jCkBAIC0yNSwyOCArMjUsODMgQEAKIAog
I2luY2x1ZGUgInJlZC1jb21tb24uaCIKIAordHlwZWRlZiBzdHJ1Y3QgU3BpY2VDb3JlRnVuY3Mg
eworICAgIHZvaWQgKCp0aW1lcl9zdGFydCkoU3BpY2VUaW1lciAqdGltZXIsIHVpbnQzMl90IG1z
KTsKKyAgICB2b2lkICgqdGltZXJfY2FuY2VsKShTcGljZVRpbWVyICp0aW1lcik7CisgICAgdm9p
ZCAoKnRpbWVyX3JlbW92ZSkoU3BpY2VUaW1lciAqdGltZXIpOworICAgIHZvaWQgKCp3YXRjaF91
cGRhdGVfbWFzaykoU3BpY2VXYXRjaCAqd2F0Y2gsIGludCBldmVudF9tYXNrKTsKKyAgICB2b2lk
ICgqd2F0Y2hfcmVtb3ZlKShTcGljZVdhdGNoICp3YXRjaCk7Cit9IFNwaWNlQ29yZUZ1bmNzOwor
CiBzdHJ1Y3QgU3BpY2VUaW1lciB7CisgICAgY29uc3QgU3BpY2VDb3JlRnVuY3MgKmZ1bmNzOwor
fTsKKworc3RydWN0IFNwaWNlV2F0Y2ggeworICAgIGNvbnN0IFNwaWNlQ29yZUZ1bmNzICpmdW5j
czsKK307CisKK3ZvaWQgcmVkX3RpbWVyX3N0YXJ0KFNwaWNlVGltZXIgKnRpbWVyLCB1aW50MzJf
dCBtcykKK3sKKyAgICBpZiAodGltZXIpIHsKKyAgICAgICAgdGltZXItPmZ1bmNzLT50aW1lcl9z
dGFydCh0aW1lciwgbXMpOworICAgIH0KK30KKwordm9pZCByZWRfdGltZXJfY2FuY2VsKFNwaWNl
VGltZXIgKnRpbWVyKQoreworICAgIGlmICh0aW1lcikgeworICAgICAgICB0aW1lci0+ZnVuY3Mt
PnRpbWVyX2NhbmNlbCh0aW1lcik7CisgICAgfQorfQorCit2b2lkIHJlZF90aW1lcl9yZW1vdmUo
U3BpY2VUaW1lciAqdGltZXIpCit7CisgICAgaWYgKHRpbWVyKSB7CisgICAgICAgIHRpbWVyLT5m
dW5jcy0+dGltZXJfcmVtb3ZlKHRpbWVyKTsKKyAgICB9Cit9CisKK3ZvaWQgcmVkX3dhdGNoX3Vw
ZGF0ZV9tYXNrKFNwaWNlV2F0Y2ggKndhdGNoLCBpbnQgZXZlbnRfbWFzaykKK3sKKyAgICBpZiAo
d2F0Y2gpIHsKKyAgICAgICAgd2F0Y2gtPmZ1bmNzLT53YXRjaF91cGRhdGVfbWFzayh3YXRjaCwg
ZXZlbnRfbWFzayk7CisgICAgfQorfQorCit2b2lkIHJlZF93YXRjaF9yZW1vdmUoU3BpY2VXYXRj
aCAqd2F0Y2gpCit7CisgICAgaWYgKHdhdGNoKSB7CisgICAgICAgIHdhdGNoLT5mdW5jcy0+d2F0
Y2hfcmVtb3ZlKHdhdGNoKTsKKyAgICB9Cit9CisKK3N0YXRpYyBjb25zdCBTcGljZUNvcmVGdW5j
cyBnbGliX2NvcmVfZnVuY3M7CisKK3R5cGVkZWYgc3RydWN0IFNwaWNlVGltZXJHbGliIHsKKyAg
ICBTcGljZVRpbWVyIGJhc2U7CiAgICAgR01haW5Db250ZXh0ICpjb250ZXh0OwogICAgIFNwaWNl
VGltZXJGdW5jIGZ1bmM7CiAgICAgdm9pZCAqb3BhcXVlOwogICAgIEdTb3VyY2UgKnNvdXJjZTsK
LX07Cit9IFNwaWNlVGltZXJHbGliOwogCiBzdGF0aWMgU3BpY2VUaW1lciogdGltZXJfYWRkKGNv
bnN0IFNwaWNlQ29yZUludGVyZmFjZUludGVybmFsICppZmFjZSwKICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgU3BpY2VUaW1lckZ1bmMgZnVuYywgdm9pZCAqb3BhcXVlKQogewotICAgIFNw
aWNlVGltZXIgKnRpbWVyID0gZ19uZXcwKFNwaWNlVGltZXIsIDEpOworICAgIFNwaWNlVGltZXJH
bGliICp0aW1lciA9IGdfbmV3MChTcGljZVRpbWVyR2xpYiwgMSk7CiAKKyAgICB0aW1lci0+YmFz
ZS5mdW5jcyA9ICZnbGliX2NvcmVfZnVuY3M7CiAgICAgdGltZXItPmNvbnRleHQgPSBpZmFjZS0+
bWFpbl9jb250ZXh0OwogICAgIHRpbWVyLT5mdW5jID0gZnVuYzsKICAgICB0aW1lci0+b3BhcXVl
ID0gb3BhcXVlOwogCi0gICAgcmV0dXJuIHRpbWVyOworICAgIHJldHVybiAmdGltZXItPmJhc2U7
CiB9CiAKIHN0YXRpYyBnYm9vbGVhbiB0aW1lcl9mdW5jKGdwb2ludGVyIHVzZXJfZGF0YSkKIHsK
LSAgICBTcGljZVRpbWVyICp0aW1lciA9IHVzZXJfZGF0YTsKKyAgICBTcGljZVRpbWVyR2xpYiAq
dGltZXIgPSAoU3BpY2VUaW1lckdsaWIqKSB1c2VyX2RhdGE7CiAKICAgICB0aW1lci0+ZnVuYyh0
aW1lci0+b3BhcXVlKTsKICAgICAvKiB0aW1lciBtaWdodCBiZSBmcmVlIGFmdGVyIGZ1bmMoKSwg
ZG9uJ3QgdG91Y2ggKi8KQEAgLTU0LDkgKzEwOSw5IEBAIHN0YXRpYyBnYm9vbGVhbiB0aW1lcl9m
dW5jKGdwb2ludGVyIHVzZXJfZGF0YSkKICAgICByZXR1cm4gRkFMU0U7CiB9CiAKLXN0YXRpYyB2
b2lkIHRpbWVyX2NhbmNlbChjb25zdCBTcGljZUNvcmVJbnRlcmZhY2VJbnRlcm5hbCAqaWZhY2Us
Ci0gICAgICAgICAgICAgICAgICAgICAgICAgU3BpY2VUaW1lciAqdGltZXIpCitzdGF0aWMgdm9p
ZCB0aW1lcl9jYW5jZWwoU3BpY2VUaW1lciAqdGltZXJfYmFzZSkKIHsKKyAgICBTcGljZVRpbWVy
R2xpYiAqdGltZXIgPSBTUElDRV9VUENBU1QoU3BpY2VUaW1lckdsaWIsIHRpbWVyX2Jhc2UpOwog
ICAgIGlmICh0aW1lci0+c291cmNlKSB7CiAgICAgICAgIGdfc291cmNlX2Rlc3Ryb3kodGltZXIt
PnNvdXJjZSk7CiAgICAgICAgIGdfc291cmNlX3VucmVmKHRpbWVyLT5zb3VyY2UpOwpAQCAtNjQs
MTAgKzExOSwxMSBAQCBzdGF0aWMgdm9pZCB0aW1lcl9jYW5jZWwoY29uc3QgU3BpY2VDb3JlSW50
ZXJmYWNlSW50ZXJuYWwgKmlmYWNlLAogICAgIH0KIH0KIAotc3RhdGljIHZvaWQgdGltZXJfc3Rh
cnQoY29uc3QgU3BpY2VDb3JlSW50ZXJmYWNlSW50ZXJuYWwgKmlmYWNlLAotICAgICAgICAgICAg
ICAgICAgICAgICAgU3BpY2VUaW1lciAqdGltZXIsIHVpbnQzMl90IG1zKQorc3RhdGljIHZvaWQg
dGltZXJfc3RhcnQoU3BpY2VUaW1lciAqdGltZXJfYmFzZSwgdWludDMyX3QgbXMpCiB7Ci0gICAg
dGltZXJfY2FuY2VsKGlmYWNlLCB0aW1lcik7CisgICAgdGltZXJfY2FuY2VsKHRpbWVyX2Jhc2Up
OworCisgICAgU3BpY2VUaW1lckdsaWIgKnRpbWVyID0gU1BJQ0VfVVBDQVNUKFNwaWNlVGltZXJH
bGliLCB0aW1lcl9iYXNlKTsKIAogICAgIHRpbWVyLT5zb3VyY2UgPSBnX3RpbWVvdXRfc291cmNl
X25ldyhtcyk7CiAgICAgc3BpY2VfYXNzZXJ0KHRpbWVyLT5zb3VyY2UgIT0gTlVMTCk7CkBAIC03
NywxMCArMTMzLDExIEBAIHN0YXRpYyB2b2lkIHRpbWVyX3N0YXJ0KGNvbnN0IFNwaWNlQ29yZUlu
dGVyZmFjZUludGVybmFsICppZmFjZSwKICAgICBnX3NvdXJjZV9hdHRhY2godGltZXItPnNvdXJj
ZSwgdGltZXItPmNvbnRleHQpOwogfQogCi1zdGF0aWMgdm9pZCB0aW1lcl9yZW1vdmUoY29uc3Qg
U3BpY2VDb3JlSW50ZXJmYWNlSW50ZXJuYWwgKmlmYWNlLAotICAgICAgICAgICAgICAgICAgICAg
ICAgIFNwaWNlVGltZXIgKnRpbWVyKQorc3RhdGljIHZvaWQgdGltZXJfcmVtb3ZlKFNwaWNlVGlt
ZXIgKnRpbWVyX2Jhc2UpCiB7Ci0gICAgdGltZXJfY2FuY2VsKGlmYWNlLCB0aW1lcik7CisgICAg
dGltZXJfY2FuY2VsKHRpbWVyX2Jhc2UpOworCisgICAgU3BpY2VUaW1lckdsaWIgKnRpbWVyID0g
U1BJQ0VfVVBDQVNUKFNwaWNlVGltZXJHbGliLCB0aW1lcl9iYXNlKTsKICAgICBzcGljZV9hc3Nl
cnQodGltZXItPnNvdXJjZSA9PSBOVUxMKTsKICAgICBnX2ZyZWUodGltZXIpOwogfQpAQCAtMTEw
LDE4ICsxNjcsMTkgQEAgc3RhdGljIGludCBnaW9jb25kaXRpb25fdG9fc3BpY2VfZXZlbnQoR0lP
Q29uZGl0aW9uIGNvbmRpdGlvbikKIH0KIAogI2lmZGVmIF9XSU4zMgotc3RydWN0IFNwaWNlV2F0
Y2ggewordHlwZWRlZiBzdHJ1Y3QgU3BpY2VXYXRjaEdsaWIgeworICAgIFNwaWNlV2F0Y2ggYmFz
ZTsKICAgICBHTWFpbkNvbnRleHQgKmNvbnRleHQ7CiAgICAgdm9pZCAqb3BhcXVlOwogICAgIEdT
b3VyY2UgKnNvdXJjZTsKICAgICBHSU9DaGFubmVsICpjaGFubmVsOwogICAgIFNwaWNlV2F0Y2hG
dW5jIGZ1bmM7Ci19OworfSBTcGljZVdhdGNoR2xpYjsKIAogc3RhdGljIGdib29sZWFuIHdhdGNo
X2Z1bmMoR0lPQ2hhbm5lbCAqc291cmNlLCBHSU9Db25kaXRpb24gY29uZGl0aW9uLAogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgZ3BvaW50ZXIgZGF0YSkKIHsKLSAgICBTcGljZVdhdGNoICp3
YXRjaCA9IGRhdGE7CisgICAgU3BpY2VXYXRjaEdsaWIgKndhdGNoID0gKFNwaWNlV2F0Y2hHbGli
KikgZGF0YTsKICAgICAvLyB0aGlzIHdvcmtzIGFsc28gdW5kZXIgV2luZG93cyBkZXNwaXRlIHRo
ZSBuYW1lCiAgICAgaW50IGZkID0gZ19pb19jaGFubmVsX3VuaXhfZ2V0X2ZkKHNvdXJjZSk7CiAK
QEAgLTEzMCw5ICsxODgsOSBAQCBzdGF0aWMgZ2Jvb2xlYW4gd2F0Y2hfZnVuYyhHSU9DaGFubmVs
ICpzb3VyY2UsIEdJT0NvbmRpdGlvbiBjb25kaXRpb24sCiAgICAgcmV0dXJuIFRSVUU7CiB9CiAK
LXN0YXRpYyB2b2lkIHdhdGNoX3VwZGF0ZV9tYXNrKGNvbnN0IFNwaWNlQ29yZUludGVyZmFjZUlu
dGVybmFsICppZmFjZSwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwaWNlV2F0Y2gg
KndhdGNoLCBpbnQgZXZlbnRfbWFzaykKK3N0YXRpYyB2b2lkIHdhdGNoX3VwZGF0ZV9tYXNrKFNw
aWNlV2F0Y2ggKndhdGNoX2Jhc2UsIGludCBldmVudF9tYXNrKQogeworICAgIFNwaWNlV2F0Y2hH
bGliICp3YXRjaCA9IFNQSUNFX1VQQ0FTVChTcGljZVdhdGNoR2xpYiwgd2F0Y2hfYmFzZSk7CiAg
ICAgaWYgKHdhdGNoLT5zb3VyY2UpIHsKICAgICAgICAgZ19zb3VyY2VfZGVzdHJveSh3YXRjaC0+
c291cmNlKTsKICAgICAgICAgZ19zb3VyY2VfdW5yZWYod2F0Y2gtPnNvdXJjZSk7CkBAIC0xNTUs
MjYgKzIxMywyNyBAQCBzdGF0aWMgdm9pZCB3YXRjaF91cGRhdGVfbWFzayhjb25zdCBTcGljZUNv
cmVJbnRlcmZhY2VJbnRlcm5hbCAqaWZhY2UsCiBzdGF0aWMgU3BpY2VXYXRjaCAqd2F0Y2hfYWRk
KGNvbnN0IFNwaWNlQ29yZUludGVyZmFjZUludGVybmFsICppZmFjZSwKICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgaW50IGZkLCBpbnQgZXZlbnRfbWFzaywgU3BpY2VXYXRjaEZ1bmMgZnVu
Yywgdm9pZCAqb3BhcXVlKQogewotICAgIFNwaWNlV2F0Y2ggKndhdGNoOworICAgIFNwaWNlV2F0
Y2hHbGliICp3YXRjaDsKIAogICAgIHNwaWNlX3JldHVybl92YWxfaWZfZmFpbChmZCAhPSAtMSwg
TlVMTCk7CiAgICAgc3BpY2VfcmV0dXJuX3ZhbF9pZl9mYWlsKGZ1bmMgIT0gTlVMTCwgTlVMTCk7
CiAKLSAgICB3YXRjaCA9IGdfbmV3MChTcGljZVdhdGNoLCAxKTsKKyAgICB3YXRjaCA9IGdfbmV3
MChTcGljZVdhdGNoR2xpYiwgMSk7CisgICAgd2F0Y2gtPmJhc2UuZnVuY3MgPSAmZ2xpYl9jb3Jl
X2Z1bmNzOwogICAgIHdhdGNoLT5jb250ZXh0ID0gaWZhY2UtPm1haW5fY29udGV4dDsKICAgICB3
YXRjaC0+Y2hhbm5lbCA9IGdfaW9fY2hhbm5lbF93aW4zMl9uZXdfc29ja2V0KGZkKTsKICAgICB3
YXRjaC0+ZnVuYyA9IGZ1bmM7CiAgICAgd2F0Y2gtPm9wYXF1ZSA9IG9wYXF1ZTsKIAotICAgIHdh
dGNoX3VwZGF0ZV9tYXNrKGlmYWNlLCB3YXRjaCwgZXZlbnRfbWFzayk7CisgICAgd2F0Y2hfdXBk
YXRlX21hc2soJndhdGNoLT5iYXNlLCBldmVudF9tYXNrKTsKIAotICAgIHJldHVybiB3YXRjaDsK
KyAgICByZXR1cm4gJndhdGNoLT5iYXNlOwogfQogCi1zdGF0aWMgdm9pZCB3YXRjaF9yZW1vdmUo
Y29uc3QgU3BpY2VDb3JlSW50ZXJmYWNlSW50ZXJuYWwgKmlmYWNlLAotICAgICAgICAgICAgICAg
ICAgICAgICAgIFNwaWNlV2F0Y2ggKndhdGNoKQorc3RhdGljIHZvaWQgd2F0Y2hfcmVtb3ZlKFNw
aWNlV2F0Y2ggKndhdGNoX2Jhc2UpCiB7Ci0gICAgd2F0Y2hfdXBkYXRlX21hc2soaWZhY2UsIHdh
dGNoLCAwKTsKKyAgICBTcGljZVdhdGNoR2xpYiAqd2F0Y2ggPSBTUElDRV9VUENBU1QoU3BpY2VX
YXRjaEdsaWIsIHdhdGNoX2Jhc2UpOworICAgIHdhdGNoX3VwZGF0ZV9tYXNrKHdhdGNoX2Jhc2Us
IDApOwogICAgIHNwaWNlX2Fzc2VydCh3YXRjaC0+c291cmNlID09IE5VTEwpOwogCiAgICAgZ19p
b19jaGFubmVsX3VucmVmKHdhdGNoLT5jaGFubmVsKTsKQEAgLTE4MywxNiArMjQyLDE3IEBAIHN0
YXRpYyB2b2lkIHdhdGNoX3JlbW92ZShjb25zdCBTcGljZUNvcmVJbnRlcmZhY2VJbnRlcm5hbCAq
aWZhY2UsCiAKICNlbHNlCiAKLXN0cnVjdCBTcGljZVdhdGNoIHsKK3R5cGVkZWYgc3RydWN0IFNw
aWNlV2F0Y2hHbGliIHsKICAgICBHU291cmNlIHNvdXJjZTsKKyAgICBTcGljZVdhdGNoIHNwaWNl
X2Jhc2U7CiAgICAgZ3BvaW50ZXIgdW5peF9mZDsKICAgICBpbnQgZmQ7Ci19OworfSBTcGljZVdh
dGNoR2xpYjsKIAogc3RhdGljIGdib29sZWFuCiBzcGljZV93YXRjaF9jaGVjayhHU291cmNlICpz
b3VyY2UpCiB7Ci0gICAgU3BpY2VXYXRjaCAqd2F0Y2ggPSBTUElDRV9DT05UQUlORVJPRihzb3Vy
Y2UsIFNwaWNlV2F0Y2gsIHNvdXJjZSk7CisgICAgU3BpY2VXYXRjaEdsaWIgKndhdGNoID0gU1BJ
Q0VfQ09OVEFJTkVST0Yoc291cmNlLCBTcGljZVdhdGNoR2xpYiwgc291cmNlKTsKIAogICAgIHJl
dHVybiBnX3NvdXJjZV9xdWVyeV91bml4X2ZkKCZ3YXRjaC0+c291cmNlLCB3YXRjaC0+dW5peF9m
ZCkgIT0gMDsKIH0KQEAgLTIwMiw3ICsyNjIsNyBAQCBzcGljZV93YXRjaF9kaXNwYXRjaChHU291
cmNlICAgICAqc291cmNlLAogICAgICAgICAgICAgICAgICAgICAgR1NvdXJjZUZ1bmMgIGNhbGxi
YWNrLAogICAgICAgICAgICAgICAgICAgICAgZ3BvaW50ZXIgICAgIHVzZXJfZGF0YSkKIHsKLSAg
ICBTcGljZVdhdGNoICp3YXRjaCA9IFNQSUNFX0NPTlRBSU5FUk9GKHNvdXJjZSwgU3BpY2VXYXRj
aCwgc291cmNlKTsKKyAgICBTcGljZVdhdGNoR2xpYiAqd2F0Y2ggPSBTUElDRV9DT05UQUlORVJP
Rihzb3VyY2UsIFNwaWNlV2F0Y2hHbGliLCBzb3VyY2UpOwogICAgIFNwaWNlV2F0Y2hGdW5jIGZ1
bmMgPSAoU3BpY2VXYXRjaEZ1bmMpKHZvaWQqKSBjYWxsYmFjazsKICAgICBHSU9Db25kaXRpb24g
Y29uZGl0aW9uID0gZ19zb3VyY2VfcXVlcnlfdW5peF9mZCgmd2F0Y2gtPnNvdXJjZSwgd2F0Y2gt
PnVuaXhfZmQpOwogCkBAIC0yMTcsOSArMjc3LDkgQEAgc3RhdGljIEdTb3VyY2VGdW5jcyBzcGlj
ZV93YXRjaF9mdW5jcyA9IHsKICAgICAuZGlzcGF0Y2ggPSBzcGljZV93YXRjaF9kaXNwYXRjaCwK
IH07CiAKLXN0YXRpYyB2b2lkIHdhdGNoX3VwZGF0ZV9tYXNrKGNvbnN0IFNwaWNlQ29yZUludGVy
ZmFjZUludGVybmFsICppZmFjZSwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwaWNl
V2F0Y2ggKndhdGNoLCBpbnQgZXZlbnRfbWFzaykKK3N0YXRpYyB2b2lkIHdhdGNoX3VwZGF0ZV9t
YXNrKFNwaWNlV2F0Y2ggKndhdGNoX2Jhc2UsIGludCBldmVudF9tYXNrKQogeworICAgIFNwaWNl
V2F0Y2hHbGliICp3YXRjaCA9IFNQSUNFX0NPTlRBSU5FUk9GKHdhdGNoX2Jhc2UsIFNwaWNlV2F0
Y2hHbGliLCBzcGljZV9iYXNlKTsKICAgICBHSU9Db25kaXRpb24gY29uZGl0aW9uID0gc3BpY2Vf
ZXZlbnRfdG9fZ2lvY29uZGl0aW9uKGV2ZW50X21hc2spOwogCiAgICAgZ19zb3VyY2VfbW9kaWZ5
X3VuaXhfZmQoJndhdGNoLT5zb3VyY2UsIHdhdGNoLT51bml4X2ZkLCBjb25kaXRpb24pOwpAQCAt
MjI4LDExICsyODgsMTQgQEAgc3RhdGljIHZvaWQgd2F0Y2hfdXBkYXRlX21hc2soY29uc3QgU3Bp
Y2VDb3JlSW50ZXJmYWNlSW50ZXJuYWwgKmlmYWNlLAogc3RhdGljIFNwaWNlV2F0Y2ggKndhdGNo
X2FkZChjb25zdCBTcGljZUNvcmVJbnRlcmZhY2VJbnRlcm5hbCAqaWZhY2UsCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGludCBmZCwgaW50IGV2ZW50X21hc2ssIFNwaWNlV2F0Y2hGdW5j
IGZ1bmMsIHZvaWQgKm9wYXF1ZSkKIHsKLSAgICBTcGljZVdhdGNoICp3YXRjaCA9IChTcGljZVdh
dGNoICopIGdfc291cmNlX25ldygmc3BpY2Vfd2F0Y2hfZnVuY3MsIHNpemVvZihTcGljZVdhdGNo
KSk7CisgICAgU1BJQ0VfVkVSSUZZKFNQSUNFX09GRlNFVE9GKFNwaWNlV2F0Y2hHbGliLCBzb3Vy
Y2UpID09IDApOworICAgIFNwaWNlV2F0Y2hHbGliICp3YXRjaCA9CisgICAgICAgIChTcGljZVdh
dGNoR2xpYiAqKSBnX3NvdXJjZV9uZXcoJnNwaWNlX3dhdGNoX2Z1bmNzLCBzaXplb2YoU3BpY2VX
YXRjaEdsaWIpKTsKIAogICAgIHNwaWNlX3JldHVybl92YWxfaWZfZmFpbChmZCAhPSAtMSwgTlVM
TCk7CiAgICAgc3BpY2VfcmV0dXJuX3ZhbF9pZl9mYWlsKGZ1bmMgIT0gTlVMTCwgTlVMTCk7CiAK
KyAgICB3YXRjaC0+c3BpY2VfYmFzZS5mdW5jcyA9ICZnbGliX2NvcmVfZnVuY3M7CiAgICAgd2F0
Y2gtPmZkID0gZmQ7CiAKICAgICBnX3NvdXJjZV9zZXRfY2FsbGJhY2soJndhdGNoLT5zb3VyY2Us
IChHU291cmNlRnVuYykodm9pZCopKFNwaWNlV2F0Y2hGdW5jKSBmdW5jLCBvcGFxdWUsIE5VTEwp
OwpAQCAtMjQyLDY4ICszMDUsMTAzIEBAIHN0YXRpYyBTcGljZVdhdGNoICp3YXRjaF9hZGQoY29u
c3QgU3BpY2VDb3JlSW50ZXJmYWNlSW50ZXJuYWwgKmlmYWNlLAogICAgIEdJT0NvbmRpdGlvbiBj
b25kaXRpb24gPSBzcGljZV9ldmVudF90b19naW9jb25kaXRpb24oZXZlbnRfbWFzayk7CiAgICAg
d2F0Y2gtPnVuaXhfZmQgPSBnX3NvdXJjZV9hZGRfdW5peF9mZCgmd2F0Y2gtPnNvdXJjZSwgd2F0
Y2gtPmZkLCBjb25kaXRpb24pOwogCi0gICAgcmV0dXJuIHdhdGNoOworICAgIHJldHVybiAmd2F0
Y2gtPnNwaWNlX2Jhc2U7CiB9CiAKLXN0YXRpYyB2b2lkIHdhdGNoX3JlbW92ZShjb25zdCBTcGlj
ZUNvcmVJbnRlcmZhY2VJbnRlcm5hbCAqaWZhY2UsCi0gICAgICAgICAgICAgICAgICAgICAgICAg
U3BpY2VXYXRjaCAqd2F0Y2gpCitzdGF0aWMgdm9pZCB3YXRjaF9yZW1vdmUoU3BpY2VXYXRjaCAq
d2F0Y2hfYmFzZSkKIHsKKyAgICBTcGljZVdhdGNoR2xpYiAqd2F0Y2ggPSBTUElDRV9DT05UQUlO
RVJPRih3YXRjaF9iYXNlLCBTcGljZVdhdGNoR2xpYiwgc3BpY2VfYmFzZSk7CisKICAgICBnX3Nv
dXJjZV9yZW1vdmVfdW5peF9mZCgmd2F0Y2gtPnNvdXJjZSwgd2F0Y2gtPnVuaXhfZmQpOwogICAg
IGdfc291cmNlX2Rlc3Ryb3koJndhdGNoLT5zb3VyY2UpOwogICAgIGdfc291cmNlX3VucmVmKCZ3
YXRjaC0+c291cmNlKTsKIH0KICNlbmRpZgogCi1jb25zdCBTcGljZUNvcmVJbnRlcmZhY2VJbnRl
cm5hbCBldmVudF9sb29wX2NvcmUgPSB7Ci0gICAgLnRpbWVyX2FkZCA9IHRpbWVyX2FkZCwKK3N0
YXRpYyBjb25zdCBTcGljZUNvcmVGdW5jcyBnbGliX2NvcmVfZnVuY3MgPSB7CiAgICAgLnRpbWVy
X3N0YXJ0ID0gdGltZXJfc3RhcnQsCiAgICAgLnRpbWVyX2NhbmNlbCA9IHRpbWVyX2NhbmNlbCwK
ICAgICAudGltZXJfcmVtb3ZlID0gdGltZXJfcmVtb3ZlLAogCi0gICAgLndhdGNoX2FkZCA9IHdh
dGNoX2FkZCwKICAgICAud2F0Y2hfdXBkYXRlX21hc2sgPSB3YXRjaF91cGRhdGVfbWFzaywKICAg
ICAud2F0Y2hfcmVtb3ZlID0gd2F0Y2hfcmVtb3ZlLAogfTsKIAorY29uc3QgU3BpY2VDb3JlSW50
ZXJmYWNlSW50ZXJuYWwgZXZlbnRfbG9vcF9jb3JlID0geworICAgIC50aW1lcl9hZGQgPSB0aW1l
cl9hZGQsCisgICAgLndhdGNoX2FkZCA9IHdhdGNoX2FkZCwKK307CisKIC8qCiAgKiBBZGFwdGVy
IGZvciBTcGljZUNvZGVJbnRlcmZhY2UKICAqLwogCitzdGF0aWMgY29uc3QgU3BpY2VDb3JlRnVu
Y3MgcWVtdV9jb3JlX2Z1bmNzOworCit0eXBlZGVmIHN0cnVjdCBTcGljZVRpbWVyUWVtdSB7Cisg
ICAgU3BpY2VUaW1lciBiYXNlOworICAgIFNwaWNlQ29yZUludGVyZmFjZSAqY29yZTsKKyAgICBT
cGljZVRpbWVyICpxZW11X3RpbWVyOworfSBTcGljZVRpbWVyUWVtdTsKKwogc3RhdGljIFNwaWNl
VGltZXIgKmFkYXB0ZXJfdGltZXJfYWRkKGNvbnN0IFNwaWNlQ29yZUludGVyZmFjZUludGVybmFs
ICppZmFjZSwgU3BpY2VUaW1lckZ1bmMgZnVuYywgdm9pZCAqb3BhcXVlKQogewotICAgIHJldHVy
biBpZmFjZS0+cHVibGljX2ludGVyZmFjZS0+dGltZXJfYWRkKGZ1bmMsIG9wYXF1ZSk7CisgICAg
U3BpY2VUaW1lclFlbXUgKnRpbWVyID0gZ19uZXcwKFNwaWNlVGltZXJRZW11LCAxKTsKKworICAg
IHRpbWVyLT5iYXNlLmZ1bmNzID0gJnFlbXVfY29yZV9mdW5jczsKKyAgICB0aW1lci0+Y29yZSA9
IGlmYWNlLT5wdWJsaWNfaW50ZXJmYWNlOworICAgIHRpbWVyLT5xZW11X3RpbWVyID0gdGltZXIt
PmNvcmUtPnRpbWVyX2FkZChmdW5jLCBvcGFxdWUpOworICAgIHJldHVybiAmdGltZXItPmJhc2U7
CiB9CiAKLXN0YXRpYyB2b2lkIGFkYXB0ZXJfdGltZXJfc3RhcnQoY29uc3QgU3BpY2VDb3JlSW50
ZXJmYWNlSW50ZXJuYWwgKmlmYWNlLCBTcGljZVRpbWVyICp0aW1lciwgdWludDMyX3QgbXMpCitz
dGF0aWMgdm9pZCBhZGFwdGVyX3RpbWVyX3N0YXJ0KFNwaWNlVGltZXIgKnRpbWVyXywgdWludDMy
X3QgbXMpCiB7Ci0gICAgaWZhY2UtPnB1YmxpY19pbnRlcmZhY2UtPnRpbWVyX3N0YXJ0KHRpbWVy
LCBtcyk7CisgICAgU3BpY2VUaW1lclFlbXUgKnRpbWVyID0gU1BJQ0VfVVBDQVNUKFNwaWNlVGlt
ZXJRZW11LCB0aW1lcl8pOworICAgIHRpbWVyLT5jb3JlLT50aW1lcl9zdGFydCh0aW1lci0+cWVt
dV90aW1lciwgbXMpOwogfQogCi1zdGF0aWMgdm9pZCBhZGFwdGVyX3RpbWVyX2NhbmNlbChjb25z
dCBTcGljZUNvcmVJbnRlcmZhY2VJbnRlcm5hbCAqaWZhY2UsIFNwaWNlVGltZXIgKnRpbWVyKQor
c3RhdGljIHZvaWQgYWRhcHRlcl90aW1lcl9jYW5jZWwoU3BpY2VUaW1lciAqdGltZXJfKQogewot
ICAgIGlmYWNlLT5wdWJsaWNfaW50ZXJmYWNlLT50aW1lcl9jYW5jZWwodGltZXIpOworICAgIFNw
aWNlVGltZXJRZW11ICp0aW1lciA9IFNQSUNFX1VQQ0FTVChTcGljZVRpbWVyUWVtdSwgdGltZXJf
KTsKKyAgICB0aW1lci0+Y29yZS0+dGltZXJfY2FuY2VsKHRpbWVyLT5xZW11X3RpbWVyKTsKIH0K
IAotc3RhdGljIHZvaWQgYWRhcHRlcl90aW1lcl9yZW1vdmUoY29uc3QgU3BpY2VDb3JlSW50ZXJm
YWNlSW50ZXJuYWwgKmlmYWNlLCBTcGljZVRpbWVyICp0aW1lcikKK3N0YXRpYyB2b2lkIGFkYXB0
ZXJfdGltZXJfcmVtb3ZlKFNwaWNlVGltZXIgKnRpbWVyXykKIHsKLSAgICBpZmFjZS0+cHVibGlj
X2ludGVyZmFjZS0+dGltZXJfcmVtb3ZlKHRpbWVyKTsKKyAgICBTcGljZVRpbWVyUWVtdSAqdGlt
ZXIgPSBTUElDRV9VUENBU1QoU3BpY2VUaW1lclFlbXUsIHRpbWVyXyk7CisgICAgdGltZXItPmNv
cmUtPnRpbWVyX3JlbW92ZSh0aW1lci0+cWVtdV90aW1lcik7CisgICAgZ19mcmVlKHRpbWVyKTsK
IH0KIAordHlwZWRlZiBzdHJ1Y3QgU3BpY2VXYXRjaFFlbXUgeworICAgIFNwaWNlV2F0Y2ggYmFz
ZTsKKyAgICBTcGljZUNvcmVJbnRlcmZhY2UgKmNvcmU7CisgICAgU3BpY2VXYXRjaCAqcWVtdV93
YXRjaDsKK30gU3BpY2VXYXRjaFFlbXU7CisKIHN0YXRpYyBTcGljZVdhdGNoICphZGFwdGVyX3dh
dGNoX2FkZChjb25zdCBTcGljZUNvcmVJbnRlcmZhY2VJbnRlcm5hbCAqaWZhY2UsCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50IGZkLCBpbnQgZXZlbnRfbWFzaywgU3Bp
Y2VXYXRjaEZ1bmMgZnVuYywgdm9pZCAqb3BhcXVlKQogewogICAgIC8vIG5vdGU6IFFlbXUgQVBJ
IGlzIGZpbmUgaGF2aW5nIGEgU09DS0VUIG9uIFdpbmRvd3MKLSAgICByZXR1cm4gaWZhY2UtPnB1
YmxpY19pbnRlcmZhY2UtPndhdGNoX2FkZChmZCwgZXZlbnRfbWFzaywgZnVuYywgb3BhcXVlKTsK
KyAgICBTcGljZVdhdGNoUWVtdSAqd2F0Y2ggPSBnX25ldzAoU3BpY2VXYXRjaFFlbXUsIDEpOwor
CisgICAgd2F0Y2gtPmJhc2UuZnVuY3MgPSAmcWVtdV9jb3JlX2Z1bmNzOworICAgIHdhdGNoLT5j
b3JlID0gaWZhY2UtPnB1YmxpY19pbnRlcmZhY2U7CisgICAgd2F0Y2gtPnFlbXVfd2F0Y2ggPSB3
YXRjaC0+Y29yZS0+d2F0Y2hfYWRkKGZkLCBldmVudF9tYXNrLCBmdW5jLCBvcGFxdWUpOworICAg
IHJldHVybiAmd2F0Y2gtPmJhc2U7CiB9CiAKLXN0YXRpYyB2b2lkIGFkYXB0ZXJfd2F0Y2hfdXBk
YXRlX21hc2soY29uc3QgU3BpY2VDb3JlSW50ZXJmYWNlSW50ZXJuYWwgKmlmYWNlLCBTcGljZVdh
dGNoICp3YXRjaCwgaW50IGV2ZW50X21hc2spCitzdGF0aWMgdm9pZCBhZGFwdGVyX3dhdGNoX3Vw
ZGF0ZV9tYXNrKFNwaWNlV2F0Y2ggKndhdGNoXywgaW50IGV2ZW50X21hc2spCiB7Ci0gICAgaWZh
Y2UtPnB1YmxpY19pbnRlcmZhY2UtPndhdGNoX3VwZGF0ZV9tYXNrKHdhdGNoLCBldmVudF9tYXNr
KTsKKyAgICBTcGljZVdhdGNoUWVtdSAqd2F0Y2ggPSBTUElDRV9VUENBU1QoU3BpY2VXYXRjaFFl
bXUsIHdhdGNoXyk7CisgICAgd2F0Y2gtPmNvcmUtPndhdGNoX3VwZGF0ZV9tYXNrKHdhdGNoLT5x
ZW11X3dhdGNoLCBldmVudF9tYXNrKTsKIH0KIAotc3RhdGljIHZvaWQgYWRhcHRlcl93YXRjaF9y
ZW1vdmUoY29uc3QgU3BpY2VDb3JlSW50ZXJmYWNlSW50ZXJuYWwgKmlmYWNlLCBTcGljZVdhdGNo
ICp3YXRjaCkKK3N0YXRpYyB2b2lkIGFkYXB0ZXJfd2F0Y2hfcmVtb3ZlKFNwaWNlV2F0Y2ggKndh
dGNoXykKIHsKLSAgICBpZmFjZS0+cHVibGljX2ludGVyZmFjZS0+d2F0Y2hfcmVtb3ZlKHdhdGNo
KTsKKyAgICBTcGljZVdhdGNoUWVtdSAqd2F0Y2ggPSBTUElDRV9VUENBU1QoU3BpY2VXYXRjaFFl
bXUsIHdhdGNoXyk7CisgICAgd2F0Y2gtPmNvcmUtPndhdGNoX3JlbW92ZSh3YXRjaC0+cWVtdV93
YXRjaCk7CisgICAgZ19mcmVlKHdhdGNoKTsKIH0KIAogc3RhdGljIHZvaWQgYWRhcHRlcl9jaGFu
bmVsX2V2ZW50KGNvbnN0IFNwaWNlQ29yZUludGVyZmFjZUludGVybmFsICppZmFjZSwgaW50IGV2
ZW50LCBTcGljZUNoYW5uZWxFdmVudEluZm8gKmluZm8pCkBAIC0zMTIsMTMgKzQxMCwxNyBAQCBz
dGF0aWMgdm9pZCBhZGFwdGVyX2NoYW5uZWxfZXZlbnQoY29uc3QgU3BpY2VDb3JlSW50ZXJmYWNl
SW50ZXJuYWwgKmlmYWNlLCBpbnQgZQogICAgICAgICBpZmFjZS0+cHVibGljX2ludGVyZmFjZS0+
Y2hhbm5lbF9ldmVudChldmVudCwgaW5mbyk7CiB9CiAKLWNvbnN0IFNwaWNlQ29yZUludGVyZmFj
ZUludGVybmFsIGNvcmVfaW50ZXJmYWNlX2FkYXB0ZXIgPSB7Ci0gICAgLnRpbWVyX2FkZCA9IGFk
YXB0ZXJfdGltZXJfYWRkLAorc3RhdGljIGNvbnN0IFNwaWNlQ29yZUZ1bmNzIHFlbXVfY29yZV9m
dW5jcyA9IHsKICAgICAudGltZXJfc3RhcnQgPSBhZGFwdGVyX3RpbWVyX3N0YXJ0LAogICAgIC50
aW1lcl9jYW5jZWwgPSBhZGFwdGVyX3RpbWVyX2NhbmNlbCwKICAgICAudGltZXJfcmVtb3ZlID0g
YWRhcHRlcl90aW1lcl9yZW1vdmUsCi0gICAgLndhdGNoX2FkZCA9IGFkYXB0ZXJfd2F0Y2hfYWRk
LAorCiAgICAgLndhdGNoX3VwZGF0ZV9tYXNrID0gYWRhcHRlcl93YXRjaF91cGRhdGVfbWFzaywK
ICAgICAud2F0Y2hfcmVtb3ZlID0gYWRhcHRlcl93YXRjaF9yZW1vdmUsCit9OworCitjb25zdCBT
cGljZUNvcmVJbnRlcmZhY2VJbnRlcm5hbCBjb3JlX2ludGVyZmFjZV9hZGFwdGVyID0geworICAg
IC50aW1lcl9hZGQgPSBhZGFwdGVyX3RpbWVyX2FkZCwKKyAgICAud2F0Y2hfYWRkID0gYWRhcHRl
cl93YXRjaF9hZGQsCiAgICAgLmNoYW5uZWxfZXZlbnQgPSBhZGFwdGVyX2NoYW5uZWxfZXZlbnQs
CiB9OwpkaWZmIC0tZ2l0IGEvc2VydmVyL2lucHV0cy1jaGFubmVsLmMgYi9zZXJ2ZXIvaW5wdXRz
LWNoYW5uZWwuYwppbmRleCBhMWMzNTU2NWMuLjI4MDc4M2MxNyAxMDA2NDQKLS0tIGEvc2VydmVy
L2lucHV0cy1jaGFubmVsLmMKKysrIGIvc2VydmVyL2lucHV0cy1jaGFubmVsLmMKQEAgLTE2Miw4
ICsxNjIsNyBAQCBjb25zdCBWREFnZW50TW91c2VTdGF0ZSAqaW5wdXRzX2NoYW5uZWxfZ2V0X21v
dXNlX3N0YXRlKElucHV0c0NoYW5uZWwgKmlucHV0cykKIAogc3RhdGljIHZvaWQgYWN0aXZhdGVf
bW9kaWZpZXJzX3dhdGNoKElucHV0c0NoYW5uZWwgKmlucHV0cykKIHsKLSAgICBTcGljZUNvcmVJ
bnRlcmZhY2VJbnRlcm5hbCAqY29yZSA9IHJlZF9jaGFubmVsX2dldF9jb3JlX2ludGVyZmFjZShS
RURfQ0hBTk5FTChpbnB1dHMpKTsKLSAgICBjb3JlLT50aW1lcl9zdGFydChjb3JlLCBpbnB1dHMt
PmtleV9tb2RpZmllcnNfdGltZXIsIEtFWV9NT0RJRklFUlNfVFRMKTsKKyAgICByZWRfdGltZXJf
c3RhcnQoaW5wdXRzLT5rZXlfbW9kaWZpZXJzX3RpbWVyLCBLRVlfTU9ESUZJRVJTX1RUTCk7CiB9
CiAKIHN0YXRpYyB2b2lkIGtiZF9wdXNoX3NjYW4oU3BpY2VLYmRJbnN0YW5jZSAqc2luLCB1aW50
OF90IHNjYW4pCkBAIC02MDAsMTAgKzU5OSw5IEBAIHN0YXRpYyB2b2lkCiBpbnB1dHNfY2hhbm5l
bF9maW5hbGl6ZShHT2JqZWN0ICpvYmplY3QpCiB7CiAgICAgSW5wdXRzQ2hhbm5lbCAqc2VsZiA9
IElOUFVUU19DSEFOTkVMKG9iamVjdCk7Ci0gICAgU3BpY2VDb3JlSW50ZXJmYWNlSW50ZXJuYWwg
KmNvcmUgPSByZWRfY2hhbm5lbF9nZXRfY29yZV9pbnRlcmZhY2UoUkVEX0NIQU5ORUwoc2VsZikp
OwogCiAgICAgaW5wdXRzX2NoYW5uZWxfZGV0YWNoX3RhYmxldChzZWxmLCBzZWxmLT50YWJsZXQp
OwotICAgIGNvcmUtPnRpbWVyX3JlbW92ZShjb3JlLCBzZWxmLT5rZXlfbW9kaWZpZXJzX3RpbWVy
KTsKKyAgICByZWRfdGltZXJfcmVtb3ZlKHNlbGYtPmtleV9tb2RpZmllcnNfdGltZXIpOwogCiAg
ICAgR19PQkpFQ1RfQ0xBU1MoaW5wdXRzX2NoYW5uZWxfcGFyZW50X2NsYXNzKS0+ZmluYWxpemUo
b2JqZWN0KTsKIH0KZGlmZiAtLWdpdCBhL3NlcnZlci9tYWluLWRpc3BhdGNoZXIuYyBiL3NlcnZl
ci9tYWluLWRpc3BhdGNoZXIuYwppbmRleCAyY2E2OGE0ZDEuLjc1NzlmZDM3OSAxMDA2NDQKLS0t
IGEvc2VydmVyL21haW4tZGlzcGF0Y2hlci5jCisrKyBiL3NlcnZlci9tYWluLWRpc3BhdGNoZXIu
YwpAQCAtMjg4LDcgKzI4OCw3IEBAIHN0YXRpYyB2b2lkIG1haW5fZGlzcGF0Y2hlcl9maW5hbGl6
ZShHT2JqZWN0ICpvYmplY3QpCiB7CiAgICAgTWFpbkRpc3BhdGNoZXIgKnNlbGYgPSBNQUlOX0RJ
U1BBVENIRVIob2JqZWN0KTsKIAotICAgIHJlZHNfY29yZV93YXRjaF9yZW1vdmUoc2VsZi0+cHJp
di0+cmVkcywgc2VsZi0+cHJpdi0+d2F0Y2gpOworICAgIHJlZF93YXRjaF9yZW1vdmUoc2VsZi0+
cHJpdi0+d2F0Y2gpOwogICAgIHNlbGYtPnByaXYtPndhdGNoID0gTlVMTDsKICAgICBHX09CSkVD
VF9DTEFTUyhtYWluX2Rpc3BhdGNoZXJfcGFyZW50X2NsYXNzKS0+ZmluYWxpemUob2JqZWN0KTsK
IH0KZGlmZiAtLWdpdCBhL3NlcnZlci9yZWQtY2hhbm5lbC1jbGllbnQuYyBiL3NlcnZlci9yZWQt
Y2hhbm5lbC1jbGllbnQuYwppbmRleCAzMzc3MzNkNWQuLmQxOWVhZmU3OCAxMDA2NDQKLS0tIGEv
c2VydmVyL3JlZC1jaGFubmVsLWNsaWVudC5jCisrKyBiL3NlcnZlci9yZWQtY2hhbm5lbC1jbGll
bnQuYwpAQCAtMjE2LDggKzIxNiw2IEBAIHR5cGVkZWYgc3RydWN0IE1hcmtlclBpcGVJdGVtIHsK
IAogc3RhdGljIHZvaWQgcmVkX2NoYW5uZWxfY2xpZW50X3N0YXJ0X3BpbmdfdGltZXIoUmVkQ2hh
bm5lbENsaWVudCAqcmNjLCB1aW50MzJfdCB0aW1lb3V0KQogewotICAgIFNwaWNlQ29yZUludGVy
ZmFjZUludGVybmFsICpjb3JlOwotCiAgICAgaWYgKCFyY2MtPnByaXYtPmxhdGVuY3lfbW9uaXRv
ci50aW1lcikgewogICAgICAgICByZXR1cm47CiAgICAgfQpAQCAtMjI2LDE0ICsyMjQsMTEgQEAg
c3RhdGljIHZvaWQgcmVkX2NoYW5uZWxfY2xpZW50X3N0YXJ0X3BpbmdfdGltZXIoUmVkQ2hhbm5l
bENsaWVudCAqcmNjLCB1aW50MzJfdAogICAgIH0KICAgICByY2MtPnByaXYtPmxhdGVuY3lfbW9u
aXRvci5zdGF0ZSA9IFBJTkdfU1RBVEVfVElNRVI7CiAKLSAgICBjb3JlID0gcmVkX2NoYW5uZWxf
Z2V0X2NvcmVfaW50ZXJmYWNlKHJjYy0+cHJpdi0+Y2hhbm5lbCk7Ci0gICAgY29yZS0+dGltZXJf
c3RhcnQoY29yZSwgcmNjLT5wcml2LT5sYXRlbmN5X21vbml0b3IudGltZXIsIHRpbWVvdXQpOwor
ICAgIHJlZF90aW1lcl9zdGFydChyY2MtPnByaXYtPmxhdGVuY3lfbW9uaXRvci50aW1lciwgdGlt
ZW91dCk7CiB9CiAKIHN0YXRpYyB2b2lkIHJlZF9jaGFubmVsX2NsaWVudF9jYW5jZWxfcGluZ190
aW1lcihSZWRDaGFubmVsQ2xpZW50ICpyY2MpCiB7Ci0gICAgU3BpY2VDb3JlSW50ZXJmYWNlSW50
ZXJuYWwgKmNvcmU7Ci0KICAgICBpZiAoIXJjYy0+cHJpdi0+bGF0ZW5jeV9tb25pdG9yLnRpbWVy
KSB7CiAgICAgICAgIHJldHVybjsKICAgICB9CkBAIC0yNDEsOCArMjM2LDcgQEAgc3RhdGljIHZv
aWQgcmVkX2NoYW5uZWxfY2xpZW50X2NhbmNlbF9waW5nX3RpbWVyKFJlZENoYW5uZWxDbGllbnQg
KnJjYykKICAgICAgICAgcmV0dXJuOwogICAgIH0KIAotICAgIGNvcmUgPSByZWRfY2hhbm5lbF9n
ZXRfY29yZV9pbnRlcmZhY2UocmNjLT5wcml2LT5jaGFubmVsKTsKLSAgICBjb3JlLT50aW1lcl9j
YW5jZWwoY29yZSwgcmNjLT5wcml2LT5sYXRlbmN5X21vbml0b3IudGltZXIpOworICAgIHJlZF90
aW1lcl9jYW5jZWwocmNjLT5wcml2LT5sYXRlbmN5X21vbml0b3IudGltZXIpOwogICAgIHJjYy0+
cHJpdi0+bGF0ZW5jeV9tb25pdG9yLnN0YXRlID0gUElOR19TVEFURV9OT05FOwogfQogCkBAIC0z
MzIsMTMgKzMyNiwxMiBAQCByZWRfY2hhbm5lbF9jbGllbnRfZmluYWxpemUoR09iamVjdCAqb2Jq
ZWN0KQogewogICAgIFJlZENoYW5uZWxDbGllbnQgKnNlbGYgPSBSRURfQ0hBTk5FTF9DTElFTlQo
b2JqZWN0KTsKIAotICAgIFNwaWNlQ29yZUludGVyZmFjZUludGVybmFsICpjb3JlID0gcmVkX2No
YW5uZWxfZ2V0X2NvcmVfaW50ZXJmYWNlKHNlbGYtPnByaXYtPmNoYW5uZWwpOwogICAgIGlmIChz
ZWxmLT5wcml2LT5sYXRlbmN5X21vbml0b3IudGltZXIpIHsKLSAgICAgICAgY29yZS0+dGltZXJf
cmVtb3ZlKGNvcmUsIHNlbGYtPnByaXYtPmxhdGVuY3lfbW9uaXRvci50aW1lcik7CisgICAgICAg
IHJlZF90aW1lcl9yZW1vdmUoc2VsZi0+cHJpdi0+bGF0ZW5jeV9tb25pdG9yLnRpbWVyKTsKICAg
ICAgICAgc2VsZi0+cHJpdi0+bGF0ZW5jeV9tb25pdG9yLnRpbWVyID0gTlVMTDsKICAgICB9CiAg
ICAgaWYgKHNlbGYtPnByaXYtPmNvbm5lY3Rpdml0eV9tb25pdG9yLnRpbWVyKSB7Ci0gICAgICAg
IGNvcmUtPnRpbWVyX3JlbW92ZShjb3JlLCBzZWxmLT5wcml2LT5jb25uZWN0aXZpdHlfbW9uaXRv
ci50aW1lcik7CisgICAgICAgIHJlZF90aW1lcl9yZW1vdmUoc2VsZi0+cHJpdi0+Y29ubmVjdGl2
aXR5X21vbml0b3IudGltZXIpOwogICAgICAgICBzZWxmLT5wcml2LT5jb25uZWN0aXZpdHlfbW9u
aXRvci50aW1lciA9IE5VTEw7CiAgICAgfQogCkBAIC03NTYsNyArNzQ5LDYgQEAgc3RhdGljIHZv
aWQgcmVkX2NoYW5uZWxfY2xpZW50X2Nvbm5lY3Rpdml0eV90aW1lcih2b2lkICpvcGFxdWUpCiAg
ICAgfQogCiAgICAgaWYgKGlzX2FsaXZlKSB7Ci0gICAgICAgIFNwaWNlQ29yZUludGVyZmFjZUlu
dGVybmFsICpjb3JlID0gcmVkX2NoYW5uZWxfZ2V0X2NvcmVfaW50ZXJmYWNlKHJjYy0+cHJpdi0+
Y2hhbm5lbCk7CiAgICAgICAgIG1vbml0b3ItPnJlY2VpdmVkX2J5dGVzID0gZmFsc2U7CiAgICAg
ICAgIG1vbml0b3ItPnNlbnRfYnl0ZXMgPSBmYWxzZTsKICAgICAgICAgaWYgKHJlZF9jaGFubmVs
X2NsaWVudF9pc19ibG9ja2VkKHJjYykgfHwgcmVkX2NoYW5uZWxfY2xpZW50X3dhaXRpbmdfZm9y
X2FjayhyY2MpKSB7CkBAIC03NjcsNyArNzU5LDcgQEAgc3RhdGljIHZvaWQgcmVkX2NoYW5uZWxf
Y2xpZW50X2Nvbm5lY3Rpdml0eV90aW1lcih2b2lkICpvcGFxdWUpCiAgICAgICAgIH0gZWxzZSB7
CiAgICAgICAgICAgICAgbW9uaXRvci0+c3RhdGUgPSBDT05ORUNUSVZJVFlfU1RBVEVfQ09OTkVD
VEVEOwogICAgICAgICB9Ci0gICAgICAgIGNvcmUtPnRpbWVyX3N0YXJ0KGNvcmUsIHJjYy0+cHJp
di0+Y29ubmVjdGl2aXR5X21vbml0b3IudGltZXIsCisgICAgICAgIHJlZF90aW1lcl9zdGFydChy
Y2MtPnByaXYtPmNvbm5lY3Rpdml0eV9tb25pdG9yLnRpbWVyLAogICAgICAgICAgICAgICAgICAg
ICAgICAgICByY2MtPnByaXYtPmNvbm5lY3Rpdml0eV9tb25pdG9yLnRpbWVvdXQpOwogICAgIH0g
ZWxzZSB7CiAgICAgICAgIG1vbml0b3ItPnN0YXRlID0gQ09OTkVDVElWSVRZX1NUQVRFX0RJU0NP
Tk5FQ1RFRDsKQEAgLTgwNiw3ICs3OTgsNyBAQCB2b2lkIHJlZF9jaGFubmVsX2NsaWVudF9zdGFy
dF9jb25uZWN0aXZpdHlfbW9uaXRvcmluZyhSZWRDaGFubmVsQ2xpZW50ICpyY2MsIHVpbgogICAg
ICAgICAgICAgY29yZSwgcmVkX2NoYW5uZWxfY2xpZW50X2Nvbm5lY3Rpdml0eV90aW1lciwgcmNj
KTsKICAgICAgICAgcmNjLT5wcml2LT5jb25uZWN0aXZpdHlfbW9uaXRvci50aW1lb3V0ID0gdGlt
ZW91dF9tczsKICAgICAgICAgaWYgKCFyZWRfY2xpZW50X2R1cmluZ19taWdyYXRlX2F0X3Rhcmdl
dChyY2MtPnByaXYtPmNsaWVudCkpIHsKLSAgICAgICAgICAgIGNvcmUtPnRpbWVyX3N0YXJ0KGNv
cmUsIHJjYy0+cHJpdi0+Y29ubmVjdGl2aXR5X21vbml0b3IudGltZXIsCisgICAgICAgICAgICBy
ZWRfdGltZXJfc3RhcnQocmNjLT5wcml2LT5jb25uZWN0aXZpdHlfbW9uaXRvci50aW1lciwKICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJjYy0+cHJpdi0+Y29ubmVjdGl2aXR5X21vbml0
b3IudGltZW91dCk7CiAgICAgICAgIH0KICAgICB9CkBAIC05NjQsMTQgKzk1NiwxMSBAQCBjbGVh
bnVwOgogc3RhdGljIHZvaWQKIHJlZF9jaGFubmVsX2NsaWVudF93YXRjaF91cGRhdGVfbWFzayhS
ZWRDaGFubmVsQ2xpZW50ICpyY2MsIGludCBldmVudF9tYXNrKQogewotICAgIFNwaWNlQ29yZUlu
dGVyZmFjZUludGVybmFsICpjb3JlOwotCiAgICAgaWYgKCFyY2MtPnByaXYtPnN0cmVhbS0+d2F0
Y2gpIHsKICAgICAgICAgcmV0dXJuOwogICAgIH0KIAotICAgIGNvcmUgPSByZWRfY2hhbm5lbF9n
ZXRfY29yZV9pbnRlcmZhY2UocmNjLT5wcml2LT5jaGFubmVsKTsKLSAgICBjb3JlLT53YXRjaF91
cGRhdGVfbWFzayhjb3JlLCByY2MtPnByaXYtPnN0cmVhbS0+d2F0Y2gsIGV2ZW50X21hc2spOwor
ICAgIHJlZF93YXRjaF91cGRhdGVfbWFzayhyY2MtPnByaXYtPnN0cmVhbS0+d2F0Y2gsIGV2ZW50
X21hc2spOwogfQogCiBzdGF0aWMgdm9pZCByZWRfY2hhbm5lbF9jbGllbnRfc2VhbWxlc3NfbWln
cmF0aW9uX2RvbmUoUmVkQ2hhbm5lbENsaWVudCAqcmNjKQpAQCAtOTgxLDggKzk3MCw3IEBAIHN0
YXRpYyB2b2lkIHJlZF9jaGFubmVsX2NsaWVudF9zZWFtbGVzc19taWdyYXRpb25fZG9uZShSZWRD
aGFubmVsQ2xpZW50ICpyY2MpCiAgICAgaWYgKHJlZF9jbGllbnRfc2VhbWxlc3NfbWlncmF0aW9u
X2RvbmVfZm9yX2NoYW5uZWwocmNjLT5wcml2LT5jbGllbnQpKSB7CiAgICAgICAgIHJlZF9jaGFu
bmVsX2NsaWVudF9zdGFydF9waW5nX3RpbWVyKHJjYywgUElOR19URVNUX0lETEVfTkVUX1RJTUVP
VVRfTVMpOwogICAgICAgICBpZiAocmNjLT5wcml2LT5jb25uZWN0aXZpdHlfbW9uaXRvci50aW1l
cikgewotICAgICAgICAgICAgU3BpY2VDb3JlSW50ZXJmYWNlSW50ZXJuYWwgKmNvcmUgPSByZWRf
Y2hhbm5lbF9nZXRfY29yZV9pbnRlcmZhY2UocmNjLT5wcml2LT5jaGFubmVsKTsKLSAgICAgICAg
ICAgIGNvcmUtPnRpbWVyX3N0YXJ0KGNvcmUsIHJjYy0+cHJpdi0+Y29ubmVjdGl2aXR5X21vbml0
b3IudGltZXIsCisgICAgICAgICAgICByZWRfdGltZXJfc3RhcnQocmNjLT5wcml2LT5jb25uZWN0
aXZpdHlfbW9uaXRvci50aW1lciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJjYy0+
cHJpdi0+Y29ubmVjdGl2aXR5X21vbml0b3IudGltZW91dCk7CiAgICAgICAgIH0KICAgICB9CkBA
IC0xMDAwLDE0ICs5ODgsMTMgQEAgYm9vbCByZWRfY2hhbm5lbF9jbGllbnRfaXNfd2FpdGluZ19m
b3JfbWlncmF0ZV9kYXRhKFJlZENoYW5uZWxDbGllbnQgKnJjYykKIAogdm9pZCByZWRfY2hhbm5l
bF9jbGllbnRfZGVmYXVsdF9taWdyYXRlKFJlZENoYW5uZWxDbGllbnQgKnJjYykKIHsKLSAgICBT
cGljZUNvcmVJbnRlcmZhY2VJbnRlcm5hbCAqY29yZSA9IHJlZF9jaGFubmVsX2dldF9jb3JlX2lu
dGVyZmFjZShyY2MtPnByaXYtPmNoYW5uZWwpOwogICAgIGlmIChyY2MtPnByaXYtPmxhdGVuY3lf
bW9uaXRvci50aW1lcikgewogICAgICAgICByZWRfY2hhbm5lbF9jbGllbnRfY2FuY2VsX3Bpbmdf
dGltZXIocmNjKTsKLSAgICAgICAgY29yZS0+dGltZXJfcmVtb3ZlKGNvcmUsIHJjYy0+cHJpdi0+
bGF0ZW5jeV9tb25pdG9yLnRpbWVyKTsKKyAgICAgICAgcmVkX3RpbWVyX3JlbW92ZShyY2MtPnBy
aXYtPmxhdGVuY3lfbW9uaXRvci50aW1lcik7CiAgICAgICAgIHJjYy0+cHJpdi0+bGF0ZW5jeV9t
b25pdG9yLnRpbWVyID0gTlVMTDsKICAgICB9CiAgICAgaWYgKHJjYy0+cHJpdi0+Y29ubmVjdGl2
aXR5X21vbml0b3IudGltZXIpIHsKLSAgICAgICAgY29yZS0+dGltZXJfcmVtb3ZlKGNvcmUsIHJj
Yy0+cHJpdi0+Y29ubmVjdGl2aXR5X21vbml0b3IudGltZXIpOworICAgICAgICByZWRfdGltZXJf
cmVtb3ZlKHJjYy0+cHJpdi0+Y29ubmVjdGl2aXR5X21vbml0b3IudGltZXIpOwogICAgICAgICBy
Y2MtPnByaXYtPmNvbm5lY3Rpdml0eV9tb25pdG9yLnRpbWVyID0gTlVMTDsKICAgICB9CiAgICAg
cmVkX2NoYW5uZWxfY2xpZW50X3BpcGVfYWRkX3R5cGUocmNjLCBSRURfUElQRV9JVEVNX1RZUEVf
TUlHUkFURSk7CkBAIC0xMDI0LDggKzEwMTEsNyBAQCB2b2lkIHJlZF9jaGFubmVsX2NsaWVudF9k
ZXN0cm95KFJlZENoYW5uZWxDbGllbnQgKnJjYykKIHZvaWQgcmVkX2NoYW5uZWxfY2xpZW50X3No
dXRkb3duKFJlZENoYW5uZWxDbGllbnQgKnJjYykKIHsKICAgICBpZiAocmNjLT5wcml2LT5zdHJl
YW0gJiYgcmNjLT5wcml2LT5zdHJlYW0tPndhdGNoKSB7Ci0gICAgICAgIFNwaWNlQ29yZUludGVy
ZmFjZUludGVybmFsICpjb3JlID0gcmVkX2NoYW5uZWxfZ2V0X2NvcmVfaW50ZXJmYWNlKHJjYy0+
cHJpdi0+Y2hhbm5lbCk7Ci0gICAgICAgIGNvcmUtPndhdGNoX3JlbW92ZShjb3JlLCByY2MtPnBy
aXYtPnN0cmVhbS0+d2F0Y2gpOworICAgICAgICByZWRfd2F0Y2hfcmVtb3ZlKHJjYy0+cHJpdi0+
c3RyZWFtLT53YXRjaCk7CiAgICAgICAgIHJjYy0+cHJpdi0+c3RyZWFtLT53YXRjaCA9IE5VTEw7
CiAgICAgICAgIHNodXRkb3duKHJjYy0+cHJpdi0+c3RyZWFtLT5zb2NrZXQsIFNIVVRfUkRXUik7
CiAgICAgfQpAQCAtMTcxOSwyMiArMTcwNSwyMSBAQCBzdGF0aWMgdm9pZCByZWRfY2hhbm5lbF9j
bGllbnRfb25fZGlzY29ubmVjdChSZWRDaGFubmVsQ2xpZW50ICpyY2MpCiB2b2lkIHJlZF9jaGFu
bmVsX2NsaWVudF9kaXNjb25uZWN0KFJlZENoYW5uZWxDbGllbnQgKnJjYykKIHsKICAgICBSZWRD
aGFubmVsICpjaGFubmVsID0gcmNjLT5wcml2LT5jaGFubmVsOwotICAgIFNwaWNlQ29yZUludGVy
ZmFjZUludGVybmFsICpjb3JlID0gcmVkX2NoYW5uZWxfZ2V0X2NvcmVfaW50ZXJmYWNlKGNoYW5u
ZWwpOwogCiAgICAgaWYgKCFyZWRfY2hhbm5lbF9jbGllbnRfaXNfY29ubmVjdGVkKHJjYykpIHsK
ICAgICAgICAgcmV0dXJuOwogICAgIH0KICAgICByZWRfY2hhbm5lbF9jbGllbnRfcGlwZV9jbGVh
cihyY2MpOwogICAgIGlmIChyY2MtPnByaXYtPnN0cmVhbS0+d2F0Y2gpIHsKLSAgICAgICAgY29y
ZS0+d2F0Y2hfcmVtb3ZlKGNvcmUsIHJjYy0+cHJpdi0+c3RyZWFtLT53YXRjaCk7CisgICAgICAg
IHJlZF93YXRjaF9yZW1vdmUocmNjLT5wcml2LT5zdHJlYW0tPndhdGNoKTsKICAgICAgICAgcmNj
LT5wcml2LT5zdHJlYW0tPndhdGNoID0gTlVMTDsKICAgICB9CiAgICAgaWYgKHJjYy0+cHJpdi0+
bGF0ZW5jeV9tb25pdG9yLnRpbWVyKSB7Ci0gICAgICAgIGNvcmUtPnRpbWVyX3JlbW92ZShjb3Jl
LCByY2MtPnByaXYtPmxhdGVuY3lfbW9uaXRvci50aW1lcik7CisgICAgICAgIHJlZF90aW1lcl9y
ZW1vdmUocmNjLT5wcml2LT5sYXRlbmN5X21vbml0b3IudGltZXIpOwogICAgICAgICByY2MtPnBy
aXYtPmxhdGVuY3lfbW9uaXRvci50aW1lciA9IE5VTEw7CiAgICAgfQogICAgIGlmIChyY2MtPnBy
aXYtPmNvbm5lY3Rpdml0eV9tb25pdG9yLnRpbWVyKSB7Ci0gICAgICAgIGNvcmUtPnRpbWVyX3Jl
bW92ZShjb3JlLCByY2MtPnByaXYtPmNvbm5lY3Rpdml0eV9tb25pdG9yLnRpbWVyKTsKKyAgICAg
ICAgcmVkX3RpbWVyX3JlbW92ZShyY2MtPnByaXYtPmNvbm5lY3Rpdml0eV9tb25pdG9yLnRpbWVy
KTsKICAgICAgICAgcmNjLT5wcml2LT5jb25uZWN0aXZpdHlfbW9uaXRvci50aW1lciA9IE5VTEw7
CiAgICAgfQogICAgIHJlZF9jaGFubmVsX3JlbW92ZV9jbGllbnQoY2hhbm5lbCwgcmNjKTsKZGlm
ZiAtLWdpdCBhL3NlcnZlci9yZWQtY29tbW9uLmggYi9zZXJ2ZXIvcmVkLWNvbW1vbi5oCmluZGV4
IDIyZWE4ZmMzNy4uNGIyZTlmODdjIDEwMDY0NAotLS0gYS9zZXJ2ZXIvcmVkLWNvbW1vbi5oCisr
KyBiL3NlcnZlci9yZWQtY29tbW9uLmgKQEAgLTQwLDE3ICs0MCwyMCBAQAogI2RlZmluZSBTUElD
RV9VUENBU1QodHlwZSwgcHRyKSBcCiAgICAgKHZlcmlmeV9leHByKFNQSUNFX09GRlNFVE9GKHR5
cGUsIGJhc2UpID09IDAsU1BJQ0VfQ09OVEFJTkVST0YocHRyLCB0eXBlLCBiYXNlKSkpCiAKK1NQ
SUNFX0JFR0lOX0RFQ0xTCisKK3ZvaWQgcmVkX3RpbWVyX3N0YXJ0KFNwaWNlVGltZXIgKnRpbWVy
LCB1aW50MzJfdCBtcyk7Cit2b2lkIHJlZF90aW1lcl9jYW5jZWwoU3BpY2VUaW1lciAqdGltZXIp
Owordm9pZCByZWRfdGltZXJfcmVtb3ZlKFNwaWNlVGltZXIgKnRpbWVyKTsKK3ZvaWQgcmVkX3dh
dGNoX3VwZGF0ZV9tYXNrKFNwaWNlV2F0Y2ggKndhdGNoLCBpbnQgZXZlbnRfbWFzayk7Cit2b2lk
IHJlZF93YXRjaF9yZW1vdmUoU3BpY2VXYXRjaCAqd2F0Y2gpOworCiB0eXBlZGVmIHN0cnVjdCBT
cGljZUNvcmVJbnRlcmZhY2VJbnRlcm5hbCBTcGljZUNvcmVJbnRlcmZhY2VJbnRlcm5hbDsKIAog
c3RydWN0IFNwaWNlQ29yZUludGVyZmFjZUludGVybmFsIHsKICAgICBTcGljZVRpbWVyICooKnRp
bWVyX2FkZCkoY29uc3QgU3BpY2VDb3JlSW50ZXJmYWNlSW50ZXJuYWwgKmlmYWNlLCBTcGljZVRp
bWVyRnVuYyBmdW5jLCB2b2lkICpvcGFxdWUpOwotICAgIHZvaWQgKCp0aW1lcl9zdGFydCkoY29u
c3QgU3BpY2VDb3JlSW50ZXJmYWNlSW50ZXJuYWwgKmlmYWNlLCBTcGljZVRpbWVyICp0aW1lciwg
dWludDMyX3QgbXMpOwotICAgIHZvaWQgKCp0aW1lcl9jYW5jZWwpKGNvbnN0IFNwaWNlQ29yZUlu
dGVyZmFjZUludGVybmFsICppZmFjZSwgU3BpY2VUaW1lciAqdGltZXIpOwotICAgIHZvaWQgKCp0
aW1lcl9yZW1vdmUpKGNvbnN0IFNwaWNlQ29yZUludGVyZmFjZUludGVybmFsICppZmFjZSwgU3Bp
Y2VUaW1lciAqdGltZXIpOwogCiAgICAgU3BpY2VXYXRjaCAqKCp3YXRjaF9hZGQpKGNvbnN0IFNw
aWNlQ29yZUludGVyZmFjZUludGVybmFsICppZmFjZSwgaW50IGZkLCBpbnQgZXZlbnRfbWFzaywg
U3BpY2VXYXRjaEZ1bmMgZnVuYywgdm9pZCAqb3BhcXVlKTsKLSAgICB2b2lkICgqd2F0Y2hfdXBk
YXRlX21hc2spKGNvbnN0IFNwaWNlQ29yZUludGVyZmFjZUludGVybmFsICppZmFjZSwgU3BpY2VX
YXRjaCAqd2F0Y2gsIGludCBldmVudF9tYXNrKTsKLSAgICB2b2lkICgqd2F0Y2hfcmVtb3ZlKShj
b25zdCBTcGljZUNvcmVJbnRlcmZhY2VJbnRlcm5hbCAqaWZhY2UsIFNwaWNlV2F0Y2ggKndhdGNo
KTsKIAogICAgIHZvaWQgKCpjaGFubmVsX2V2ZW50KShjb25zdCBTcGljZUNvcmVJbnRlcmZhY2VJ
bnRlcm5hbCAqaWZhY2UsIGludCBldmVudCwgU3BpY2VDaGFubmVsRXZlbnRJbmZvICppbmZvKTsK
IApAQCAtMTI2LDQgKzEyOSw2IEBAIHR5cGVkZWYgc3RydWN0IEdMaXN0SXRlciB7CiAgICAgeyBy
ZXR1cm4gR19UWVBFX0lOU1RBTkNFX0dFVF9DTEFTUyhvYmosIFwKICAgICAgICAgICAgICBtb2R1
bGVfb2JqX25hbWUgIyMgX2dldF90eXBlKCksIE1vZHVsZU9iak5hbWUgIyMgQ2xhc3MpOyB9CiAK
K1NQSUNFX0VORF9ERUNMUworCiAjZW5kaWYgLyogUkVEX0NPTU1PTl9IXyAqLwpkaWZmIC0tZ2l0
IGEvc2VydmVyL3JlZC1zdHJlYW0tZGV2aWNlLmMgYi9zZXJ2ZXIvcmVkLXN0cmVhbS1kZXZpY2Uu
YwppbmRleCA2MjBlNTgxZWYuLjQ0ZDljZDA5ZCAxMDA2NDQKLS0tIGEvc2VydmVyL3JlZC1zdHJl
YW0tZGV2aWNlLmMKKysrIGIvc2VydmVyL3JlZC1zdHJlYW0tZGV2aWNlLmMKQEAgLTEyMCw3ICsx
MjAsNyBAQCBzdHJlYW1fZGV2aWNlX3BhcnRpYWxfcmVhZChTdHJlYW1EZXZpY2UgKmRldiwgU3Bp
Y2VDaGFyRGV2aWNlSW5zdGFuY2UgKnNpbikKICAgICAgICAgaWYgKCFkZXYtPmNsb3NlX3RpbWVy
KSB7CiAgICAgICAgICAgICBkZXYtPmNsb3NlX3RpbWVyID0gcmVkc19jb3JlX3RpbWVyX2FkZChy
ZWRzLCBjbG9zZV90aW1lcl9mdW5jLCBkZXYpOwogICAgICAgICB9Ci0gICAgICAgIHJlZHNfY29y
ZV90aW1lcl9zdGFydChyZWRzLCBkZXYtPmNsb3NlX3RpbWVyLCAwKTsKKyAgICAgICAgcmVkX3Rp
bWVyX3N0YXJ0KGRldi0+Y2xvc2VfdGltZXIsIDApOwogICAgICAgICByZXR1cm4gZmFsc2U7CiAg
ICAgfQogCkBAIC02NDksOCArNjQ5LDcgQEAgc3RyZWFtX2RldmljZV9kaXNwb3NlKEdPYmplY3Qg
Km9iamVjdCkKIHsKICAgICBTdHJlYW1EZXZpY2UgKmRldiA9IFNUUkVBTV9ERVZJQ0Uob2JqZWN0
KTsKIAotICAgIFJlZHNTdGF0ZSAqcmVkcyA9IHJlZF9jaGFyX2RldmljZV9nZXRfc2VydmVyKFJF
RF9DSEFSX0RFVklDRShkZXYpKTsKLSAgICByZWRzX2NvcmVfdGltZXJfcmVtb3ZlKHJlZHMsIGRl
di0+Y2xvc2VfdGltZXIpOworICAgIHJlZF90aW1lcl9yZW1vdmUoZGV2LT5jbG9zZV90aW1lcik7
CiAKICAgICBpZiAoZGV2LT5zdHJlYW1fY2hhbm5lbCkgewogICAgICAgICAvLyBjbG9zZSBhbGwg
Y3VycmVudCBjb25uZWN0aW9ucyBhbmQgZHJvcCB0aGUgcmVmZXJlbmNlCmRpZmYgLS1naXQgYS9z
ZXJ2ZXIvcmVkLXN0cmVhbS5jIGIvc2VydmVyL3JlZC1zdHJlYW0uYwppbmRleCAwNGJlM2FmMzcu
LmFlYzQ4MmZiOCAxMDA2NDQKLS0tIGEvc2VydmVyL3JlZC1zdHJlYW0uYworKysgYi9zZXJ2ZXIv
cmVkLXN0cmVhbS5jCkBAIC0yMTMsNyArMjEzLDcgQEAgc3RhdGljIHNzaXplX3Qgc3RyZWFtX3Nz
bF9yZWFkX2NiKFJlZFN0cmVhbSAqcywgdm9pZCAqYnVmLCBzaXplX3Qgc2l6ZSkKIHZvaWQgcmVk
X3N0cmVhbV9yZW1vdmVfd2F0Y2goUmVkU3RyZWFtKiBzKQogewogICAgIGlmIChzLT53YXRjaCkg
ewotICAgICAgICBzLT5wcml2LT5jb3JlLT53YXRjaF9yZW1vdmUocy0+cHJpdi0+Y29yZSwgcy0+
d2F0Y2gpOworICAgICAgICByZWRfd2F0Y2hfcmVtb3ZlKHMtPndhdGNoKTsKICAgICAgICAgcy0+
d2F0Y2ggPSBOVUxMOwogICAgIH0KIH0KZGlmZiAtLWdpdCBhL3NlcnZlci9yZWQtd29ya2VyLmMg
Yi9zZXJ2ZXIvcmVkLXdvcmtlci5jCmluZGV4IDk4YTRhOWRjMy4uMTJhOGU3Mzk4IDEwMDY0NAot
LS0gYS9zZXJ2ZXIvcmVkLXdvcmtlci5jCisrKyBiL3NlcnZlci9yZWQtd29ya2VyLmMKQEAgLTEx
ODUsNyArMTE4NSw3IEBAIHZvaWQgcmVkX3dvcmtlcl9mcmVlKFJlZFdvcmtlciAqd29ya2VyKQog
ICAgIHdvcmtlci0+ZGlzcGxheV9jaGFubmVsID0gTlVMTDsKIAogICAgIGlmICh3b3JrZXItPmRp
c3BhdGNoX3dhdGNoKSB7Ci0gICAgICAgIHdvcmtlci0+Y29yZS53YXRjaF9yZW1vdmUoJndvcmtl
ci0+Y29yZSwgd29ya2VyLT5kaXNwYXRjaF93YXRjaCk7CisgICAgICAgIHJlZF93YXRjaF9yZW1v
dmUod29ya2VyLT5kaXNwYXRjaF93YXRjaCk7CiAgICAgfQogCiAgICAgZ19tYWluX2NvbnRleHRf
dW5yZWYod29ya2VyLT5jb3JlLm1haW5fY29udGV4dCk7CmRpZmYgLS1naXQgYS9zZXJ2ZXIvcmVk
cy5jIGIvc2VydmVyL3JlZHMuYwppbmRleCBmNDMyZjU1YTQuLjk2ZGQ1ODQzMyAxMDA2NDQKLS0t
IGEvc2VydmVyL3JlZHMuYworKysgYi9zZXJ2ZXIvcmVkcy5jCkBAIC00MTAsNyArNDEwLDcgQEAg
c3RhdGljIHZvaWQgcmVkc19taWdfY2xlYW51cChSZWRzU3RhdGUgKnJlZHMpCiAgICAgICAgIHJl
ZHMtPm1pZ19pbnByb2dyZXNzID0gRkFMU0U7CiAgICAgICAgIHJlZHMtPm1pZ193YWl0X2Nvbm5l
Y3QgPSBGQUxTRTsKICAgICAgICAgcmVkcy0+bWlnX3dhaXRfZGlzY29ubmVjdCA9IEZBTFNFOwot
ICAgICAgICByZWRzX2NvcmVfdGltZXJfY2FuY2VsKHJlZHMsIHJlZHMtPm1pZ190aW1lcik7Cisg
ICAgICAgIHJlZF90aW1lcl9jYW5jZWwocmVkcy0+bWlnX3RpbWVyKTsKICAgICAgICAgcmVkc19t
aWdfY2xlYW51cF93YWl0X2Rpc2Nvbm5lY3QocmVkcyk7CiAgICAgfQogfQpAQCAtMjQyOSw3ICsy
NDI5LDYgQEAgc3RhdGljIHZvaWQgcmVkc19oYW5kbGVfbmV3X2xpbmsoUmVkTGlua0luZm8gKmxp
bmspCiBzdGF0aWMgdm9pZCByZWRzX2hhbmRsZV9zc2xfYWNjZXB0KGludCBmZCwgaW50IGV2ZW50
LCB2b2lkICpkYXRhKQogewogICAgIFJlZExpbmtJbmZvICpsaW5rID0gKFJlZExpbmtJbmZvICop
ZGF0YTsKLSAgICBSZWRzU3RhdGUgKnJlZHMgPSBsaW5rLT5yZWRzOwogICAgIFJlZFN0cmVhbVNz
bFN0YXR1cyByZXR1cm5fY29kZSA9IHJlZF9zdHJlYW1fc3NsX2FjY2VwdChsaW5rLT5zdHJlYW0p
OwogCiAgICAgc3dpdGNoIChyZXR1cm5fY29kZSkgewpAQCAtMjQzNywxMiArMjQzNiwxMCBAQCBz
dGF0aWMgdm9pZCByZWRzX2hhbmRsZV9zc2xfYWNjZXB0KGludCBmZCwgaW50IGV2ZW50LCB2b2lk
ICpkYXRhKQogICAgICAgICAgICAgcmVkc19saW5rX2ZyZWUobGluayk7CiAgICAgICAgICAgICBy
ZXR1cm47CiAgICAgICAgIGNhc2UgUkVEX1NUUkVBTV9TU0xfU1RBVFVTX1dBSVRfRk9SX1JFQUQ6
Ci0gICAgICAgICAgICByZWRzX2NvcmVfd2F0Y2hfdXBkYXRlX21hc2socmVkcywgbGluay0+c3Ry
ZWFtLT53YXRjaCwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTUElD
RV9XQVRDSF9FVkVOVF9SRUFEKTsKKyAgICAgICAgICAgIHJlZF93YXRjaF91cGRhdGVfbWFzayhs
aW5rLT5zdHJlYW0tPndhdGNoLCBTUElDRV9XQVRDSF9FVkVOVF9SRUFEKTsKICAgICAgICAgICAg
IHJldHVybjsKICAgICAgICAgY2FzZSBSRURfU1RSRUFNX1NTTF9TVEFUVVNfV0FJVF9GT1JfV1JJ
VEU6Ci0gICAgICAgICAgICByZWRzX2NvcmVfd2F0Y2hfdXBkYXRlX21hc2socmVkcywgbGluay0+
c3RyZWFtLT53YXRjaCwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBT
UElDRV9XQVRDSF9FVkVOVF9XUklURSk7CisgICAgICAgICAgICByZWRfd2F0Y2hfdXBkYXRlX21h
c2sobGluay0+c3RyZWFtLT53YXRjaCwgU1BJQ0VfV0FUQ0hfRVZFTlRfV1JJVEUpOwogICAgICAg
ICAgICAgcmV0dXJuOwogICAgICAgICBjYXNlIFJFRF9TVFJFQU1fU1NMX1NUQVRVU19PSzoKICAg
ICAgICAgICAgIHJlZF9zdHJlYW1fcmVtb3ZlX3dhdGNoKGxpbmstPnN0cmVhbSk7CkBAIC0yNzAy
LDcgKzI2OTksNyBAQCB2b2lkIHJlZHNfc2V0X2NsaWVudF9tbV90aW1lX2xhdGVuY3koUmVkc1N0
YXRlICpyZWRzLCBSZWRDbGllbnQgKmNsaWVudCwgdWludDMyXwogc3RhdGljIHZvaWQgcmVkc19j
bGVhbnVwX25ldChTcGljZVNlcnZlciAqcmVkcykKIHsKICAgICBpZiAocmVkcy0+bGlzdGVuX3Nv
Y2tldCAhPSAtMSkgewotICAgICAgIHJlZHNfY29yZV93YXRjaF9yZW1vdmUocmVkcywgcmVkcy0+
bGlzdGVuX3dhdGNoKTsKKyAgICAgICByZWRfd2F0Y2hfcmVtb3ZlKHJlZHMtPmxpc3Rlbl93YXRj
aCk7CiAgICAgICAgaWYgKHJlZHMtPmNvbmZpZy0+c3BpY2VfbGlzdGVuX3NvY2tldF9mZCAhPSBy
ZWRzLT5saXN0ZW5fc29ja2V0KSB7CiAgICAgICAgICAgc29ja2V0X2Nsb3NlKHJlZHMtPmxpc3Rl
bl9zb2NrZXQpOwogICAgICAgIH0KQEAgLTI3MTAsNyArMjcwNyw3IEBAIHN0YXRpYyB2b2lkIHJl
ZHNfY2xlYW51cF9uZXQoU3BpY2VTZXJ2ZXIgKnJlZHMpCiAgICAgICAgcmVkcy0+bGlzdGVuX3Nv
Y2tldCA9IC0xOwogICAgIH0KICAgICBpZiAocmVkcy0+c2VjdXJlX2xpc3Rlbl9zb2NrZXQgIT0g
LTEpIHsKLSAgICAgICByZWRzX2NvcmVfd2F0Y2hfcmVtb3ZlKHJlZHMsIHJlZHMtPnNlY3VyZV9s
aXN0ZW5fd2F0Y2gpOworICAgICAgIHJlZF93YXRjaF9yZW1vdmUocmVkcy0+c2VjdXJlX2xpc3Rl
bl93YXRjaCk7CiAgICAgICAgc29ja2V0X2Nsb3NlKHJlZHMtPnNlY3VyZV9saXN0ZW5fc29ja2V0
KTsKICAgICAgICByZWRzLT5zZWN1cmVfbGlzdGVuX3dhdGNoID0gTlVMTDsKICAgICAgICByZWRz
LT5zZWN1cmVfbGlzdGVuX3NvY2tldCA9IC0xOwpAQCAtMzAzMSw3ICszMDI4LDcgQEAgc3RhdGlj
IHZvaWQgcmVkc19taWdfc3RhcnRlZChSZWRzU3RhdGUgKnJlZHMpCiAKICAgICByZWRzLT5taWdf
aW5wcm9ncmVzcyA9IFRSVUU7CiAgICAgcmVkcy0+bWlnX3dhaXRfY29ubmVjdCA9IFRSVUU7Ci0g
ICAgcmVkc19jb3JlX3RpbWVyX3N0YXJ0KHJlZHMsIHJlZHMtPm1pZ190aW1lciwgTUlHUkFURV9U
SU1FT1VUKTsKKyAgICByZWRfdGltZXJfc3RhcnQocmVkcy0+bWlnX3RpbWVyLCBNSUdSQVRFX1RJ
TUVPVVQpOwogfQogCiBzdGF0aWMgdm9pZCByZWRzX21pZ19maWxsX3dhaXRfZGlzY29ubmVjdChS
ZWRzU3RhdGUgKnJlZHMpCkBAIC0zMDQ2LDcgKzMwNDMsNyBAQCBzdGF0aWMgdm9pZCByZWRzX21p
Z19maWxsX3dhaXRfZGlzY29ubmVjdChSZWRzU3RhdGUgKnJlZHMpCiAgICAgfQogICAgIHJlZHMt
Pm1pZ193YWl0X2Nvbm5lY3QgPSBGQUxTRTsKICAgICByZWRzLT5taWdfd2FpdF9kaXNjb25uZWN0
ID0gVFJVRTsKLSAgICByZWRzX2NvcmVfdGltZXJfc3RhcnQocmVkcywgcmVkcy0+bWlnX3RpbWVy
LCBNSUdSQVRFX1RJTUVPVVQpOworICAgIHJlZF90aW1lcl9zdGFydChyZWRzLT5taWdfdGltZXIs
IE1JR1JBVEVfVElNRU9VVCk7CiB9CiAKIHN0YXRpYyB2b2lkIHJlZHNfbWlnX2NsZWFudXBfd2Fp
dF9kaXNjb25uZWN0KFJlZHNTdGF0ZSAqcmVkcykKQEAgLTM4NjMsNyArMzg2MCw3IEBAIFNQSUNF
X0dOVUNfVklTSUJMRSB2b2lkIHNwaWNlX3NlcnZlcl9kZXN0cm95KFNwaWNlU2VydmVyICpyZWRz
KQogICAgIGlmIChyZWRzLT5tYWluX2NoYW5uZWwpIHsKICAgICAgICAgcmVkX2NoYW5uZWxfZGVz
dHJveShSRURfQ0hBTk5FTChyZWRzLT5tYWluX2NoYW5uZWwpKTsKICAgICB9Ci0gICAgcmVkc19j
b3JlX3RpbWVyX3JlbW92ZShyZWRzLCByZWRzLT5taWdfdGltZXIpOworICAgIHJlZF90aW1lcl9y
ZW1vdmUocmVkcy0+bWlnX3RpbWVyKTsKIAogICAgIGlmIChyZWRzLT5jdHgpIHsKICAgICAgICAg
U1NMX0NUWF9mcmVlKHJlZHMtPmN0eCk7CkBAIC00NDM3LDI0ICs0NDM0LDYgQEAgU3BpY2VXYXRj
aCAqcmVkc19jb3JlX3dhdGNoX2FkZChSZWRzU3RhdGUgKnJlZHMsCiAgICByZXR1cm4gcmVkcy0+
Y29yZS53YXRjaF9hZGQoJnJlZHMtPmNvcmUsIGZkLCBldmVudF9tYXNrLCBmdW5jLCBvcGFxdWUp
OwogfQogCi12b2lkIHJlZHNfY29yZV93YXRjaF91cGRhdGVfbWFzayhSZWRzU3RhdGUgKnJlZHMs
Ci0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGljZVdhdGNoICp3YXRjaCwKLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBldmVudF9tYXNrKQotewotICAgZ19y
ZXR1cm5faWZfZmFpbChyZWRzICE9IE5VTEwpOwotICAgZ19yZXR1cm5faWZfZmFpbChyZWRzLT5j
b3JlLndhdGNoX3VwZGF0ZV9tYXNrICE9IE5VTEwpOwotCi0gICByZWRzLT5jb3JlLndhdGNoX3Vw
ZGF0ZV9tYXNrKCZyZWRzLT5jb3JlLCB3YXRjaCwgZXZlbnRfbWFzayk7Ci19Ci0KLXZvaWQgcmVk
c19jb3JlX3dhdGNoX3JlbW92ZShSZWRzU3RhdGUgKnJlZHMsIFNwaWNlV2F0Y2ggKndhdGNoKQot
ewotICAgZ19yZXR1cm5faWZfZmFpbChyZWRzICE9IE5VTEwpOwotICAgZ19yZXR1cm5faWZfZmFp
bChyZWRzLT5jb3JlLndhdGNoX3JlbW92ZSAhPSBOVUxMKTsKLQotICAgcmVkcy0+Y29yZS53YXRj
aF9yZW1vdmUoJnJlZHMtPmNvcmUsIHdhdGNoKTsKLX0KLQogU3BpY2VUaW1lciAqcmVkc19jb3Jl
X3RpbWVyX2FkZChSZWRzU3RhdGUgKnJlZHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIFNwaWNlVGltZXJGdW5jIGZ1bmMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHZvaWQgKm9wYXF1ZSkKQEAgLTQ0NjYsMzggKzQ0NDUsNiBAQCBTcGljZVRpbWVyICpyZWRzX2Nv
cmVfdGltZXJfYWRkKFJlZHNTdGF0ZSAqcmVkcywKIAogfQogCi12b2lkIHJlZHNfY29yZV90aW1l
cl9zdGFydChSZWRzU3RhdGUgKnJlZHMsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICBTcGlj
ZVRpbWVyICp0aW1lciwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQzMl90IG1zKQot
ewotICAgZ19yZXR1cm5faWZfZmFpbChyZWRzICE9IE5VTEwpOwotICAgZ19yZXR1cm5faWZfZmFp
bChyZWRzLT5jb3JlLnRpbWVyX3N0YXJ0ICE9IE5VTEwpOwotCi0gICByZXR1cm4gcmVkcy0+Y29y
ZS50aW1lcl9zdGFydCgmcmVkcy0+Y29yZSwgdGltZXIsIG1zKTsKLX0KLQotdm9pZCByZWRzX2Nv
cmVfdGltZXJfY2FuY2VsKFJlZHNTdGF0ZSAqcmVkcywKLSAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBTcGljZVRpbWVyICp0aW1lcikKLXsKLSAgIGdfcmV0dXJuX2lmX2ZhaWwocmVkcyAhPSBO
VUxMKTsKLSAgIGdfcmV0dXJuX2lmX2ZhaWwocmVkcy0+Y29yZS50aW1lcl9jYW5jZWwgIT0gTlVM
TCk7Ci0KLSAgIHJldHVybiByZWRzLT5jb3JlLnRpbWVyX2NhbmNlbCgmcmVkcy0+Y29yZSwgdGlt
ZXIpOwotfQotCi12b2lkIHJlZHNfY29yZV90aW1lcl9yZW1vdmUoUmVkc1N0YXRlICpyZWRzLAot
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwaWNlVGltZXIgKnRpbWVyKQotewotICAgIGlm
ICh0aW1lciA9PSBOVUxMKSB7Ci0gICAgICAgIHJldHVybjsKLSAgICB9Ci0KLSAgICBnX3JldHVy
bl9pZl9mYWlsKHJlZHMgIT0gTlVMTCk7Ci0gICAgZ19yZXR1cm5faWZfZmFpbChyZWRzLT5jb3Jl
LnRpbWVyX3JlbW92ZSAhPSBOVUxMKTsKLQotICAgIHJlZHMtPmNvcmUudGltZXJfcmVtb3ZlKCZy
ZWRzLT5jb3JlLCB0aW1lcik7Ci19Ci0KIHZvaWQgcmVkc191cGRhdGVfY2xpZW50X21vdXNlX2Fs
bG93ZWQoUmVkc1N0YXRlICpyZWRzKQogewogICAgIGludCBhbGxvd19ub3cgPSBGQUxTRTsKZGlm
ZiAtLWdpdCBhL3NlcnZlci9yZWRzLmggYi9zZXJ2ZXIvcmVkcy5oCmluZGV4IGUzMzU1ZjgxNy4u
ZTJiNjkwNGFiIDEwMDY0NAotLS0gYS9zZXJ2ZXIvcmVkcy5oCisrKyBiL3NlcnZlci9yZWRzLmgK
QEAgLTExNSwyMCArMTE1LDggQEAgU3BpY2VXYXRjaCAqcmVkc19jb3JlX3dhdGNoX2FkZChSZWRz
U3RhdGUgKnJlZHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBmZCwgaW50
IGV2ZW50X21hc2ssCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwaWNlV2F0Y2hG
dW5jIGZ1bmMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgKm9wYXF1ZSk7
Ci12b2lkIHJlZHNfY29yZV93YXRjaF91cGRhdGVfbWFzayhSZWRzU3RhdGUgKnJlZHMsCi0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGljZVdhdGNoICp3YXRjaCwKLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGludCBldmVudF9tYXNrKTsKLXZvaWQgcmVkc19jb3Jl
X3dhdGNoX3JlbW92ZShSZWRzU3RhdGUgKnJlZHMsIFNwaWNlV2F0Y2ggKndhdGNoKTsKLQogU3Bp
Y2VUaW1lciAqcmVkc19jb3JlX3RpbWVyX2FkZChSZWRzU3RhdGUgKnJlZHMsCiAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIFNwaWNlVGltZXJGdW5jIGZ1bmMsCiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHZvaWQgKm9wYXF1ZSk7Ci12b2lkIHJlZHNfY29yZV90aW1lcl9z
dGFydChSZWRzU3RhdGUgKnJlZHMsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICBTcGljZVRp
bWVyICp0aW1lciwKLSAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQzMl90IG1zKTsKLXZv
aWQgcmVkc19jb3JlX3RpbWVyX2NhbmNlbChSZWRzU3RhdGUgKnJlZHMsCi0gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgU3BpY2VUaW1lciAqdGltZXIpOwotdm9pZCByZWRzX2NvcmVfdGltZXJf
cmVtb3ZlKFJlZHNTdGF0ZSAqcmVkcywKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGlj
ZVRpbWVyICp0aW1lcik7CiAKICNlbmRpZiAvKiBSRURTX0hfICovCmRpZmYgLS1naXQgYS9zZXJ2
ZXIvdGVzdHMvYmFzaWMtZXZlbnQtbG9vcC5jIGIvc2VydmVyL3Rlc3RzL2Jhc2ljLWV2ZW50LWxv
b3AuYwppbmRleCBlMzMxZTg1MjIuLjcwYzlhNGRmNSAxMDA2NDQKLS0tIGEvc2VydmVyL3Rlc3Rz
L2Jhc2ljLWV2ZW50LWxvb3AuYworKysgYi9zZXJ2ZXIvdGVzdHMvYmFzaWMtZXZlbnQtbG9vcC5j
CkBAIC04Myw0OCArODMsMjMgQEAgc3RhdGljIFNwaWNlVGltZXIqIGJhc2VfdGltZXJfYWRkKFNw
aWNlVGltZXJGdW5jIGZ1bmMsIHZvaWQgKm9wYXF1ZSkKICAgICByZXR1cm4gYmFzZV9jb3JlX2lu
dGVyZmFjZS50aW1lcl9hZGQoJmJhc2VfY29yZV9pbnRlcmZhY2UsIGZ1bmMsIG9wYXF1ZSk7CiB9
CiAKLXN0YXRpYyB2b2lkIGJhc2VfdGltZXJfc3RhcnQoU3BpY2VUaW1lciAqdGltZXIsIHVpbnQz
Ml90IG1zKQotewotICAgIGJhc2VfY29yZV9pbnRlcmZhY2UudGltZXJfc3RhcnQoJmJhc2VfY29y
ZV9pbnRlcmZhY2UsIHRpbWVyLCBtcyk7Ci19Ci0KLXN0YXRpYyB2b2lkIGJhc2VfdGltZXJfY2Fu
Y2VsKFNwaWNlVGltZXIgKnRpbWVyKQotewotICAgIGJhc2VfY29yZV9pbnRlcmZhY2UudGltZXJf
Y2FuY2VsKCZiYXNlX2NvcmVfaW50ZXJmYWNlLCB0aW1lcik7Ci19Ci0KLXN0YXRpYyB2b2lkIGJh
c2VfdGltZXJfcmVtb3ZlKFNwaWNlVGltZXIgKnRpbWVyKQotewotICAgIGJhc2VfY29yZV9pbnRl
cmZhY2UudGltZXJfcmVtb3ZlKCZiYXNlX2NvcmVfaW50ZXJmYWNlLCB0aW1lcik7Ci19Ci0KIHN0
YXRpYyBTcGljZVdhdGNoICpiYXNlX3dhdGNoX2FkZChpbnQgZmQsIGludCBldmVudF9tYXNrLCBT
cGljZVdhdGNoRnVuYyBmdW5jLCB2b2lkICpvcGFxdWUpCiB7CiAgICAgcmV0dXJuIGJhc2VfY29y
ZV9pbnRlcmZhY2Uud2F0Y2hfYWRkKCZiYXNlX2NvcmVfaW50ZXJmYWNlLCBmZCwgZXZlbnRfbWFz
aywgZnVuYywgb3BhcXVlKTsKIH0KIAotc3RhdGljIHZvaWQgYmFzZV93YXRjaF91cGRhdGVfbWFz
ayhTcGljZVdhdGNoICp3YXRjaCwgaW50IGV2ZW50X21hc2spCi17Ci0gICAgYmFzZV9jb3JlX2lu
dGVyZmFjZS53YXRjaF91cGRhdGVfbWFzaygmYmFzZV9jb3JlX2ludGVyZmFjZSwgd2F0Y2gsIGV2
ZW50X21hc2spOwotfQotCi1zdGF0aWMgdm9pZCBiYXNlX3dhdGNoX3JlbW92ZShTcGljZVdhdGNo
ICp3YXRjaCkKLXsKLSAgICBiYXNlX2NvcmVfaW50ZXJmYWNlLndhdGNoX3JlbW92ZSgmYmFzZV9j
b3JlX2ludGVyZmFjZSwgd2F0Y2gpOwotfQotCiBzdGF0aWMgU3BpY2VDb3JlSW50ZXJmYWNlIGNv
cmUgPSB7CiAgICAgLmJhc2UgPSB7CiAgICAgICAgIC5tYWpvcl92ZXJzaW9uID0gU1BJQ0VfSU5U
RVJGQUNFX0NPUkVfTUFKT1IsCiAgICAgICAgIC5taW5vcl92ZXJzaW9uID0gU1BJQ0VfSU5URVJG
QUNFX0NPUkVfTUlOT1IsCiAgICAgfSwKICAgICAudGltZXJfYWRkID0gYmFzZV90aW1lcl9hZGQs
Ci0gICAgLnRpbWVyX3N0YXJ0ID0gYmFzZV90aW1lcl9zdGFydCwKLSAgICAudGltZXJfY2FuY2Vs
ID0gYmFzZV90aW1lcl9jYW5jZWwsCi0gICAgLnRpbWVyX3JlbW92ZSA9IGJhc2VfdGltZXJfcmVt
b3ZlLAorICAgIC50aW1lcl9zdGFydCA9IHJlZF90aW1lcl9zdGFydCwKKyAgICAudGltZXJfY2Fu
Y2VsID0gcmVkX3RpbWVyX2NhbmNlbCwKKyAgICAudGltZXJfcmVtb3ZlID0gcmVkX3RpbWVyX3Jl
bW92ZSwKICAgICAud2F0Y2hfYWRkID0gYmFzZV93YXRjaF9hZGQsCi0gICAgLndhdGNoX3VwZGF0
ZV9tYXNrID0gYmFzZV93YXRjaF91cGRhdGVfbWFzaywKLSAgICAud2F0Y2hfcmVtb3ZlID0gYmFz
ZV93YXRjaF9yZW1vdmUsCisgICAgLndhdGNoX3VwZGF0ZV9tYXNrID0gcmVkX3dhdGNoX3VwZGF0
ZV9tYXNrLAorICAgIC53YXRjaF9yZW1vdmUgPSByZWRfd2F0Y2hfcmVtb3ZlLAogICAgIC5jaGFu
bmVsX2V2ZW50ID0gZXZlbnRfbG9vcF9jaGFubmVsX2V2ZW50LAogfTsKIAotLSAKMi4yMC4xCgpf
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpTcGljZS1kZXZl
bCBtYWlsaW5nIGxpc3QKU3BpY2UtZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8v
bGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vc3BpY2UtZGV2ZWw=
