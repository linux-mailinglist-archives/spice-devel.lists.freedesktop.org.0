Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 8D94C644AC
	for <lists+spice-devel@lfdr.de>; Wed, 10 Jul 2019 11:49:40 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0207989B20;
	Wed, 10 Jul 2019 09:49:39 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 2E5D689949
 for <spice-devel@lists.freedesktop.org>; Wed, 10 Jul 2019 09:49:35 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx03.intmail.prod.int.phx2.redhat.com
 [10.5.11.13])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id CA2493091782;
 Wed, 10 Jul 2019 09:49:34 +0000 (UTC)
Received: from fziglio.remote.csb (unknown [10.33.32.10])
 by smtp.corp.redhat.com (Postfix) with ESMTP id C50D092D3B;
 Wed, 10 Jul 2019 09:49:33 +0000 (UTC)
From: Frediano Ziglio <fziglio@redhat.com>
To: spice-devel@lists.freedesktop.org
Date: Wed, 10 Jul 2019 10:49:24 +0100
Message-Id: <20190710094924.17350-4-fziglio@redhat.com>
In-Reply-To: <20190710094924.17350-1-fziglio@redhat.com>
References: <20190710094924.17350-1-fziglio@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.13
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.41]); Wed, 10 Jul 2019 09:49:34 +0000 (UTC)
Subject: [Spice-devel] [PATCH spice-gtk v3 3/3] usb-device-manager: Define
 _SpiceUsbDevice instead of SpiceUsbDeviceInfo
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

RnJvbTogWXVyaSBCZW5kaXRvdmljaCA8eXVyaS5iZW5kaXRvdmljaEBkYXluaXguY29tPgoKU3Bp
Y2VVc2JEZXZpY2UqIHdhcyBjb252ZXJ0ZWQgdG8gU3BpY2VVc2JEZXZpY2VJbmZvKiBhcyBfU3Bp
Y2VVc2JEZXZpY2UKd2FzIG5ldmVyIGRlZmluZWQuIERlZmluZSBpbnN0ZWFkIHRoZSBzdHJ1Y3R1
cmUgdG8gYXZvaWQgdXNlbGVzcwpjYXN0cy4KClNpZ25lZC1vZmYtYnk6IEZyZWRpYW5vIFppZ2xp
byA8ZnppZ2xpb0ByZWRoYXQuY29tPgpTaWduZWQtb2ZmLWJ5OiBZdXJpIEJlbmRpdG92aWNoIDx5
dXJpLmJlbmRpdG92aWNoQGRheW5peC5jb20+Ci0tLQogc3JjL3VzYi1kZXZpY2UtbWFuYWdlci5j
IHwgNTQgKysrKysrKysrKysrKystLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogMSBmaWxlIGNo
YW5nZWQsIDE5IGluc2VydGlvbnMoKyksIDM1IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3Ny
Yy91c2ItZGV2aWNlLW1hbmFnZXIuYyBiL3NyYy91c2ItZGV2aWNlLW1hbmFnZXIuYwppbmRleCA2
ODk4NDcyYS4uODYwZjVjMTkgMTAwNjQ0Ci0tLSBhL3NyYy91c2ItZGV2aWNlLW1hbmFnZXIuYwor
KysgYi9zcmMvdXNiLWRldmljZS1tYW5hZ2VyLmMKQEAgLTEyOCwxMSArMTI4LDExIEBAIGVudW0g
ewogCiAjaWZkZWYgVVNFX1VTQlJFRElSCiAKLXR5cGVkZWYgc3RydWN0IF9TcGljZVVzYkRldmlj
ZUluZm8geworc3RydWN0IF9TcGljZVVzYkRldmljZSB7CiAgICAgU3BpY2VVc2JCYWNrZW5kRGV2
aWNlICpiZGV2OwogICAgIGdpbnQgICAgcmVmOwogICAgIGdib29sZWFuIGlzb2Nocm9ub3VzOwot
fSBTcGljZVVzYkRldmljZUluZm87Cit9OwogCiAKIHN0YXRpYyB2b2lkIGNoYW5uZWxfbmV3KFNw
aWNlU2Vzc2lvbiAqc2Vzc2lvbiwgU3BpY2VDaGFubmVsICpjaGFubmVsLApAQCAtMTU0LDcgKzE1
NCw3IEBAIHN0YXRpYyB2b2lkIHNwaWNlX3VzYl9kZXZpY2VfbWFuYWdlcl9ob3RwbHVnX2NiKHZv
aWQgKnVzZXJfZGF0YSwKIHN0YXRpYyB2b2lkIHNwaWNlX3VzYl9kZXZpY2VfbWFuYWdlcl9jaGVj
a19yZWRpcl9vbl9jb25uZWN0KAogICAgIFNwaWNlVXNiRGV2aWNlTWFuYWdlciAqc2VsZiwgU3Bp
Y2VDaGFubmVsICpjaGFubmVsKTsKIAotc3RhdGljIFNwaWNlVXNiRGV2aWNlSW5mbyAqc3BpY2Vf
dXNiX2RldmljZV9uZXcoU3BpY2VVc2JCYWNrZW5kRGV2aWNlICpiZGV2KTsKK3N0YXRpYyBTcGlj
ZVVzYkRldmljZSAqc3BpY2VfdXNiX2RldmljZV9uZXcoU3BpY2VVc2JCYWNrZW5kRGV2aWNlICpi
ZGV2KTsKIHN0YXRpYyBTcGljZVVzYkRldmljZSAqc3BpY2VfdXNiX2RldmljZV9yZWYoU3BpY2VV
c2JEZXZpY2UgKmRldmljZSk7CiBzdGF0aWMgdm9pZCBzcGljZV91c2JfZGV2aWNlX3VucmVmKFNw
aWNlVXNiRGV2aWNlICpkZXZpY2UpOwogCkBAIC02OTYsMTEgKzY5Niw5IEBAIHN0YXRpYyB2b2lk
IHNwaWNlX3VzYl9kZXZpY2VfbWFuYWdlcl9jbGFzc19pbml0KFNwaWNlVXNiRGV2aWNlTWFuYWdl
ckNsYXNzICprbGFzCiAgKiBTaW5jZTogMC4yNwogICoqLwogZ2NvbnN0cG9pbnRlcgotc3BpY2Vf
dXNiX2RldmljZV9nZXRfbGlidXNiX2RldmljZShjb25zdCBTcGljZVVzYkRldmljZSAqZGV2aWNl
IEdfR05VQ19VTlVTRUQpCitzcGljZV91c2JfZGV2aWNlX2dldF9saWJ1c2JfZGV2aWNlKGNvbnN0
IFNwaWNlVXNiRGV2aWNlICppbmZvIEdfR05VQ19VTlVTRUQpCiB7CiAjaWZkZWYgVVNFX1VTQlJF
RElSCi0gICAgY29uc3QgU3BpY2VVc2JEZXZpY2VJbmZvICppbmZvID0gKGNvbnN0IFNwaWNlVXNi
RGV2aWNlSW5mbyAqKWRldmljZTsKLQogICAgIGdfcmV0dXJuX3ZhbF9pZl9mYWlsKGluZm8gIT0g
TlVMTCwgRkFMU0UpOwogCiAgICAgcmV0dXJuIHNwaWNlX3VzYl9iYWNrZW5kX2RldmljZV9nZXRf
bGliZGV2KGluZm8tPmJkZXYpOwpAQCAtMTYwNCwxNSArMTYwMiwxNSBAQCBnY2hhciAqc3BpY2Vf
dXNiX2RldmljZV9nZXRfZGVzY3JpcHRpb24oU3BpY2VVc2JEZXZpY2UgKmRldmljZSwgY29uc3Qg
Z2NoYXIgKmZvcgogCiAjaWZkZWYgVVNFX1VTQlJFRElSCiAvKgotICogU3BpY2VVc2JEZXZpY2VJ
bmZvCisgKiBTcGljZVVzYkRldmljZQogICovCi1zdGF0aWMgU3BpY2VVc2JEZXZpY2VJbmZvICpz
cGljZV91c2JfZGV2aWNlX25ldyhTcGljZVVzYkJhY2tlbmREZXZpY2UgKmJkZXYpCitzdGF0aWMg
U3BpY2VVc2JEZXZpY2UgKnNwaWNlX3VzYl9kZXZpY2VfbmV3KFNwaWNlVXNiQmFja2VuZERldmlj
ZSAqYmRldikKIHsKLSAgICBTcGljZVVzYkRldmljZUluZm8gKmluZm87CisgICAgU3BpY2VVc2JE
ZXZpY2UgKmluZm87CiAKICAgICBnX3JldHVybl92YWxfaWZfZmFpbChiZGV2ICE9IE5VTEwsIE5V
TEwpOwogCi0gICAgaW5mbyA9IGdfbmV3MChTcGljZVVzYkRldmljZUluZm8sIDEpOworICAgIGlu
Zm8gPSBnX25ldzAoU3BpY2VVc2JEZXZpY2UsIDEpOwogCiAgICAgaW5mby0+cmVmID0gMTsKICAg
ICBpbmZvLT5iZGV2ID0gc3BpY2VfdXNiX2JhY2tlbmRfZGV2aWNlX3JlZihiZGV2KTsKQEAgLTE2
MjEsOSArMTYxOSw4IEBAIHN0YXRpYyBTcGljZVVzYkRldmljZUluZm8gKnNwaWNlX3VzYl9kZXZp
Y2VfbmV3KFNwaWNlVXNiQmFja2VuZERldmljZSAqYmRldikKICAgICByZXR1cm4gaW5mbzsKIH0K
IAotZ3VpbnQ4IHNwaWNlX3VzYl9kZXZpY2VfZ2V0X2J1c251bShjb25zdCBTcGljZVVzYkRldmlj
ZSAqZGV2aWNlKQorZ3VpbnQ4IHNwaWNlX3VzYl9kZXZpY2VfZ2V0X2J1c251bShjb25zdCBTcGlj
ZVVzYkRldmljZSAqaW5mbykKIHsKLSAgICBjb25zdCBTcGljZVVzYkRldmljZUluZm8gKmluZm8g
PSAoY29uc3QgU3BpY2VVc2JEZXZpY2VJbmZvICopZGV2aWNlOwogICAgIGNvbnN0IFVzYkRldmlj
ZUluZm9ybWF0aW9uICpiX2luZm87CiAKICAgICBnX3JldHVybl92YWxfaWZfZmFpbChpbmZvICE9
IE5VTEwsIDApOwpAQCAtMTYzMiw5ICsxNjI5LDggQEAgZ3VpbnQ4IHNwaWNlX3VzYl9kZXZpY2Vf
Z2V0X2J1c251bShjb25zdCBTcGljZVVzYkRldmljZSAqZGV2aWNlKQogICAgIHJldHVybiBiX2lu
Zm8tPmJ1czsKIH0KIAotZ3VpbnQ4IHNwaWNlX3VzYl9kZXZpY2VfZ2V0X2RldmFkZHIoY29uc3Qg
U3BpY2VVc2JEZXZpY2UgKmRldmljZSkKK2d1aW50OCBzcGljZV91c2JfZGV2aWNlX2dldF9kZXZh
ZGRyKGNvbnN0IFNwaWNlVXNiRGV2aWNlICppbmZvKQogewotICAgIGNvbnN0IFNwaWNlVXNiRGV2
aWNlSW5mbyAqaW5mbyA9IChjb25zdCBTcGljZVVzYkRldmljZUluZm8gKilkZXZpY2U7CiAgICAg
Y29uc3QgVXNiRGV2aWNlSW5mb3JtYXRpb24gKmJfaW5mbzsKIAogICAgIGdfcmV0dXJuX3ZhbF9p
Zl9mYWlsKGluZm8gIT0gTlVMTCwgMCk7CkBAIC0xNjQzLDkgKzE2MzksOCBAQCBndWludDggc3Bp
Y2VfdXNiX2RldmljZV9nZXRfZGV2YWRkcihjb25zdCBTcGljZVVzYkRldmljZSAqZGV2aWNlKQog
ICAgIHJldHVybiBiX2luZm8tPmFkZHJlc3M7CiB9CiAKLWd1aW50MTYgc3BpY2VfdXNiX2Rldmlj
ZV9nZXRfdmlkKGNvbnN0IFNwaWNlVXNiRGV2aWNlICpkZXZpY2UpCitndWludDE2IHNwaWNlX3Vz
Yl9kZXZpY2VfZ2V0X3ZpZChjb25zdCBTcGljZVVzYkRldmljZSAqaW5mbykKIHsKLSAgICBjb25z
dCBTcGljZVVzYkRldmljZUluZm8gKmluZm8gPSAoY29uc3QgU3BpY2VVc2JEZXZpY2VJbmZvICop
ZGV2aWNlOwogICAgIGNvbnN0IFVzYkRldmljZUluZm9ybWF0aW9uICpiX2luZm87CiAKICAgICBn
X3JldHVybl92YWxfaWZfZmFpbChpbmZvICE9IE5VTEwsIDApOwpAQCAtMTY1NCw5ICsxNjQ5LDgg
QEAgZ3VpbnQxNiBzcGljZV91c2JfZGV2aWNlX2dldF92aWQoY29uc3QgU3BpY2VVc2JEZXZpY2Ug
KmRldmljZSkKICAgICByZXR1cm4gYl9pbmZvLT52aWQ7CiB9CiAKLWd1aW50MTYgc3BpY2VfdXNi
X2RldmljZV9nZXRfcGlkKGNvbnN0IFNwaWNlVXNiRGV2aWNlICpkZXZpY2UpCitndWludDE2IHNw
aWNlX3VzYl9kZXZpY2VfZ2V0X3BpZChjb25zdCBTcGljZVVzYkRldmljZSAqaW5mbykKIHsKLSAg
ICBjb25zdCBTcGljZVVzYkRldmljZUluZm8gKmluZm8gPSAoY29uc3QgU3BpY2VVc2JEZXZpY2VJ
bmZvICopZGV2aWNlOwogICAgIGNvbnN0IFVzYkRldmljZUluZm9ybWF0aW9uICpiX2luZm87CiAK
ICAgICBnX3JldHVybl92YWxfaWZfZmFpbChpbmZvICE9IE5VTEwsIDApOwpAQCAtMTY2NSwxMCAr
MTY1OSw4IEBAIGd1aW50MTYgc3BpY2VfdXNiX2RldmljZV9nZXRfcGlkKGNvbnN0IFNwaWNlVXNi
RGV2aWNlICpkZXZpY2UpCiAgICAgcmV0dXJuIGJfaW5mby0+cGlkOwogfQogCi1nYm9vbGVhbiBz
cGljZV91c2JfZGV2aWNlX2lzX2lzb2Nocm9ub3VzKGNvbnN0IFNwaWNlVXNiRGV2aWNlICpkZXZp
Y2UpCitnYm9vbGVhbiBzcGljZV91c2JfZGV2aWNlX2lzX2lzb2Nocm9ub3VzKGNvbnN0IFNwaWNl
VXNiRGV2aWNlICppbmZvKQogewotICAgIGNvbnN0IFNwaWNlVXNiRGV2aWNlSW5mbyAqaW5mbyA9
IChjb25zdCBTcGljZVVzYkRldmljZUluZm8gKilkZXZpY2U7Ci0KICAgICBnX3JldHVybl92YWxf
aWZfZmFpbChpbmZvICE9IE5VTEwsIDApOwogCiAgICAgcmV0dXJuIGluZm8tPmlzb2Nocm9ub3Vz
OwpAQCAtMTc0MSwyMSArMTczMywxNyBAQCB2b2lkIF91c2Jka19oaWRlcl91cGRhdGUoU3BpY2VV
c2JEZXZpY2VNYW5hZ2VyICptYW5hZ2VyKQogCiAjZW5kaWYKIAotc3RhdGljIFNwaWNlVXNiRGV2
aWNlICpzcGljZV91c2JfZGV2aWNlX3JlZihTcGljZVVzYkRldmljZSAqZGV2aWNlKQorc3RhdGlj
IFNwaWNlVXNiRGV2aWNlICpzcGljZV91c2JfZGV2aWNlX3JlZihTcGljZVVzYkRldmljZSAqaW5m
bykKIHsKLSAgICBTcGljZVVzYkRldmljZUluZm8gKmluZm8gPSAoU3BpY2VVc2JEZXZpY2VJbmZv
ICopZGV2aWNlOwotCiAgICAgZ19yZXR1cm5fdmFsX2lmX2ZhaWwoaW5mbyAhPSBOVUxMLCBOVUxM
KTsKICAgICBnX2F0b21pY19pbnRfaW5jKCZpbmZvLT5yZWYpOwotICAgIHJldHVybiBkZXZpY2U7
CisgICAgcmV0dXJuIGluZm87CiB9CiAKLXN0YXRpYyB2b2lkIHNwaWNlX3VzYl9kZXZpY2VfdW5y
ZWYoU3BpY2VVc2JEZXZpY2UgKmRldmljZSkKK3N0YXRpYyB2b2lkIHNwaWNlX3VzYl9kZXZpY2Vf
dW5yZWYoU3BpY2VVc2JEZXZpY2UgKmluZm8pCiB7CiAgICAgZ2Jvb2xlYW4gcmVmX2NvdW50X2lz
XzA7CiAKLSAgICBTcGljZVVzYkRldmljZUluZm8gKmluZm8gPSAoU3BpY2VVc2JEZXZpY2VJbmZv
ICopZGV2aWNlOwotCiAgICAgZ19yZXR1cm5faWZfZmFpbChpbmZvICE9IE5VTEwpOwogCiAgICAg
cmVmX2NvdW50X2lzXzAgPSBnX2F0b21pY19pbnRfZGVjX2FuZF90ZXN0KCZpbmZvLT5yZWYpOwpA
QCAtMTc2NywxMiArMTc1NSwxMCBAQCBzdGF0aWMgdm9pZCBzcGljZV91c2JfZGV2aWNlX3VucmVm
KFNwaWNlVXNiRGV2aWNlICpkZXZpY2UpCiAKIHN0YXRpYyBnYm9vbGVhbgogc3BpY2VfdXNiX21h
bmFnZXJfZGV2aWNlX2VxdWFsX2JkZXYoU3BpY2VVc2JEZXZpY2VNYW5hZ2VyICptYW5hZ2VyLAot
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BpY2VVc2JEZXZpY2UgKmRldmlj
ZSwKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNwaWNlVXNiRGV2aWNlICpp
bmZvLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BpY2VVc2JCYWNrZW5k
RGV2aWNlICpiZGV2KQogewotICAgIFNwaWNlVXNiRGV2aWNlSW5mbyAqaW5mbyA9IChTcGljZVVz
YkRldmljZUluZm8gKilkZXZpY2U7Ci0KLSAgICBpZiAoKGRldmljZSA9PSBOVUxMKSB8fCAoYmRl
diA9PSBOVUxMKSkKKyAgICBpZiAoKGluZm8gPT0gTlVMTCkgfHwgKGJkZXYgPT0gTlVMTCkpCiAg
ICAgICAgIHJldHVybiBGQUxTRTsKIAogICAgIHJldHVybiBpbmZvLT5iZGV2ID09IGJkZXY7CkBA
IC0xNzg0LDExICsxNzcwLDkgQEAgc3BpY2VfdXNiX21hbmFnZXJfZGV2aWNlX2VxdWFsX2JkZXYo
U3BpY2VVc2JEZXZpY2VNYW5hZ2VyICptYW5hZ2VyLAogICovCiBzdGF0aWMgU3BpY2VVc2JCYWNr
ZW5kRGV2aWNlICoKIHNwaWNlX3VzYl9kZXZpY2VfbWFuYWdlcl9kZXZpY2VfdG9fYmRldihTcGlj
ZVVzYkRldmljZU1hbmFnZXIgKnNlbGYsCi0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgU3BpY2VVc2JEZXZpY2UgKmRldmljZSkKKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBTcGljZVVzYkRldmljZSAqaW5mbykKIHsKICAgICAvKiBTaW1wbHkg
cmV0dXJuIGEgcmVmIHRvIHRoZSBjYWNoZWQgbGliZGV2ICovCi0gICAgU3BpY2VVc2JEZXZpY2VJ
bmZvICppbmZvID0gKFNwaWNlVXNiRGV2aWNlSW5mbyAqKWRldmljZTsKLQogICAgIHJldHVybiBz
cGljZV91c2JfYmFja2VuZF9kZXZpY2VfcmVmKGluZm8tPmJkZXYpOwogfQogI2VuZGlmIC8qIFVT
RV9VU0JSRURJUiAqLwotLSAKMi4yMC4xCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fXwpTcGljZS1kZXZlbCBtYWlsaW5nIGxpc3QKU3BpY2UtZGV2ZWxAbGlz
dHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4v
bGlzdGluZm8vc3BpY2UtZGV2ZWw=
