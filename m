Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id E3628603F5
	for <lists+spice-devel@lfdr.de>; Fri,  5 Jul 2019 12:08:29 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D15B46E472;
	Fri,  5 Jul 2019 10:08:27 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mail-wr1-f67.google.com (mail-wr1-f67.google.com
 [209.85.221.67])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E3C836E472
 for <spice-devel@lists.freedesktop.org>; Fri,  5 Jul 2019 10:08:26 +0000 (UTC)
Received: by mail-wr1-f67.google.com with SMTP id n9so167624wrr.4
 for <spice-devel@lists.freedesktop.org>; Fri, 05 Jul 2019 03:08:26 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:in-reply-to
 :references:reply-to:mime-version:content-transfer-encoding;
 bh=eXJIW/Swv1SP/a2Dcn8dAgs48ABptSZD7SefOY924ww=;
 b=Cykzik/yqb7pZZOLtGzO/uLaLACQBUH3+2SgcmVOxrunRg8aYsMH0qP4xVTqpEn7qC
 kKNNVX6AxPrbMUAauWhVINjeHS0sjTWTKrnqebnPONOGpcNXkX/VDU6NlH9HLjCS0a1a
 DZ+MzBd8GSC9411THIxzDLgxjTQNcDlYPhlQYwETuJyL0MksKCD2m+0uqMfgCUBqbMd+
 YijNhw7Tg0cjcMAzirhpp104I9EtFNy+j4dHHhT4vET8e1oi+kKWZvfNkdjFR+6WmEz+
 C9ev9QCmApjpu9IvcipOBwmn4wRxoEDs8wRst8W09rYN8uiHME5z/BES/PCIuKN2/nFX
 Pa2A==
X-Gm-Message-State: APjAAAURu7vLNcEEq+nGrnBsebL7JeqcLEf+prtfraHPAbFzy7Jbobq5
 pxppOHO4Wl2LBqty14EbJz0S3WPmTD8=
X-Google-Smtp-Source: APXvYqx9Ln8Ds9CLcszbgOOs0Af64qeZPqiiHlePcTH47B72e/fB6eLyv6bRq5gE9BjeArjtnDi3Zg==
X-Received: by 2002:adf:f50f:: with SMTP id q15mr293775wro.45.1562321305191;
 Fri, 05 Jul 2019 03:08:25 -0700 (PDT)
Received: from pinea.redhat.com ([2001:861:3440:6a0:71b6:dd5f:657d:58e3])
 by smtp.gmail.com with ESMTPSA id h14sm7724840wrs.66.2019.07.05.03.08.24
 for <spice-devel@lists.freedesktop.org>
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Fri, 05 Jul 2019 03:08:24 -0700 (PDT)
From: Kevin Pouget <kpouget@redhat.com>
To: spice-devel@lists.freedesktop.org
Date: Fri,  5 Jul 2019 12:08:23 +0200
Message-Id: <20190705100823.27121-1-kpouget@redhat.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190705082259.10991-1-fziglio@redhat.com>
References: <20190705082259.10991-1-fziglio@redhat.com>
MIME-Version: 1.0
Subject: [Spice-devel] [PATCH] reds: Add ability to query the video-codecs
 currently enabled
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Reply-To: 20190705082259.10991-1-fziglio@redhat.com
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

c3BpY2Vfc2VydmVyX2dldF92aWRlb19jb2RlY3M6IG5ldyBwdWJsaWMgZnVuY3Rpb24gdG8gcXVl
cnkgdGhlIHZpZGVvCmVuY29kZXJzL2NvZGVjcyBjdXJyZW50bHkgZW5hYmxlZCBpbiB0aGUgc3Bp
Y2Ugc2VydmVyLiBJdCByZXR1cm5zIGEKc3RyaW5nIHRoYXQgY2FuIGJlIGZlZCB0byB0aGUgc2V0
dGVyIGNvdW50ZXIKKHNwaWNlX3NlcnZlcl9zZXRfdmlkZW9fY29kZWNzKS4gVGhlIHN0cmluZyBy
ZXR1cm5lZCBieSB0aGlzIGZ1bmN0aW9uCnNob3VsZCBiZSByZWxlYXNlZCB3aXRoIHNwaWNlX3Nl
cnZlcl9mcmVlX3ZpZGVvX2NvZGVjcy4KCnNwaWNlX3NlcnZlcl9mcmVlX3ZpZGVvX2NvZGVjczog
bmV3IHB1YmxpYyBmdW5jdGlvbiB0byBmcmVlIHRoZSB0aGUKdmlkZW8gY29kZWMgbGlzdCByZXR1
cm5lZCBieSBzcGljZV9zZXJ2ZXJfZ2V0X3ZpZGVvX2NvZGVjcy4KCnZpZGVvX2NvZGVjc190b19z
dHJpbmc6IG5ldyBwcml2YXRlIGZ1bmN0aW9uIHRvIHRyYW5zZm9ybSBhbiBhcnJheSBvZgpSZWRW
aWRlb0NvZGVjIGludG8gYSBzdHJpbmcuCgpTaWduZWQtb2ZmLWJ5OiBLZXZpbiBQb3VnZXQgPGtw
b3VnZXRAcmVkaGF0LmNvbT4KLS0tCgpyZXNlbmRpbmcgd2l0aCBGcmVkaWFubydzIGZpeGVzIGFw
cGxpZWQKCi0tLQogc2VydmVyL2RjYy5jICAgICAgICAgICAgIHwgMTMgKysrKy0tLS0tLS0tLQog
c2VydmVyL3JlZHMuYyAgICAgICAgICAgIHwgMzggKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysKIHNlcnZlci9yZWRzLmggICAgICAgICAgICB8ICAyICsrCiBzZXJ2ZXIvc3Bp
Y2Utc2VydmVyLmggICAgfCAxNiArKysrKysrKysrKysrKysrCiBzZXJ2ZXIvc3BpY2Utc2VydmVy
LnN5bXMgfCAgNiArKysrKysKIHNlcnZlci92aWRlby1lbmNvZGVyLmggICB8ICAyICsrCiBzZXJ2
ZXIvdmlkZW8tc3RyZWFtLmMgICAgfCAyMyArKysrKysrKysrKysrKysrKysrKysrKwogNyBmaWxl
cyBjaGFuZ2VkLCA5MSBpbnNlcnRpb25zKCspLCA5IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBh
L3NlcnZlci9kY2MuYyBiL3NlcnZlci9kY2MuYwppbmRleCBiZDM5M2UwNC4uYjM2NGE4ZTEgMTAw
NjQ0Ci0tLSBhL3NlcnZlci9kY2MuYworKysgYi9zZXJ2ZXIvZGNjLmMKQEAgLTExMjAsOSArMTEy
MCw4IEBAIHN0YXRpYyBnaW50IHNvcnRfdmlkZW9fY29kZWNzX2J5X2NsaWVudF9wcmVmZXJlbmNl
KGdjb25zdHBvaW50ZXIgYV9wb2ludGVyLAoKIHN0YXRpYyB2b2lkIGRjY191cGRhdGVfcHJlZmVy
cmVkX3ZpZGVvX2NvZGVjcyhEaXNwbGF5Q2hhbm5lbENsaWVudCAqZGNjKQogewotICAgIGd1aW50
IGk7CiAgICAgR0FycmF5ICp2aWRlb19jb2RlY3MsICpzZXJ2ZXJfY29kZWNzOwotICAgIEdTdHJp
bmcgKm1zZzsKKyAgICBjaGFyICpjb2RlY3Nfc3RyOwoKICAgICBzZXJ2ZXJfY29kZWNzID0gZGlz
cGxheV9jaGFubmVsX2dldF92aWRlb19jb2RlY3MoRENDX1RPX0RDKGRjYykpOwogICAgIHNwaWNl
X3JldHVybl9pZl9mYWlsKHNlcnZlcl9jb2RlY3MgIT0gTlVMTCk7CkBAIC0xMTM3LDEzICsxMTM2
LDkgQEAgc3RhdGljIHZvaWQgZGNjX3VwZGF0ZV9wcmVmZXJyZWRfdmlkZW9fY29kZWNzKERpc3Bs
YXlDaGFubmVsQ2xpZW50ICpkY2MpCiAgICAgZ19jbGVhcl9wb2ludGVyKCZkY2MtPnByaXYtPnBy
ZWZlcnJlZF92aWRlb19jb2RlY3MsIGdfYXJyYXlfdW5yZWYpOwogICAgIGRjYy0+cHJpdi0+cHJl
ZmVycmVkX3ZpZGVvX2NvZGVjcyA9IHZpZGVvX2NvZGVjczsKCi0gICAgbXNnID0gZ19zdHJpbmdf
bmV3KCJQcmVmZXJyZWQgdmlkZW8tY29kZWNzOiIpOwotICAgIGZvciAoaSA9IDA7IGkgPCB2aWRl
b19jb2RlY3MtPmxlbjsgaSsrKSB7Ci0gICAgICAgIFJlZFZpZGVvQ29kZWMgY29kZWMgPSBnX2Fy
cmF5X2luZGV4KHZpZGVvX2NvZGVjcywgUmVkVmlkZW9Db2RlYywgaSk7Ci0gICAgICAgIGdfc3Ry
aW5nX2FwcGVuZF9wcmludGYobXNnLCAiICVkIiwgY29kZWMudHlwZSk7Ci0gICAgfQotICAgIHNw
aWNlX2RlYnVnKCIlcyIsIG1zZy0+c3RyKTsKLSAgICBnX3N0cmluZ19mcmVlKG1zZywgVFJVRSk7
CisgICAgY29kZWNzX3N0ciA9IHZpZGVvX2NvZGVjc190b19zdHJpbmcodmlkZW9fY29kZWNzLCAi
ICIpOworICAgIHNwaWNlX2RlYnVnKCJQcmVmZXJyZWQgdmlkZW8tY29kZWNzOiAlcyIsIGNvZGVj
c19zdHIpOworICAgIGdfZnJlZShjb2RlY3Nfc3RyKTsKIH0KCiBzdGF0aWMgdm9pZCBvbl9kaXNw
bGF5X3ZpZGVvX2NvZGVjc191cGRhdGUoR09iamVjdCAqZ29iamVjdCwgR1BhcmFtU3BlYyAqcHNw
ZWMsIGdwb2ludGVyIHVzZXJfZGF0YSkKZGlmZiAtLWdpdCBhL3NlcnZlci9yZWRzLmMgYi9zZXJ2
ZXIvcmVkcy5jCmluZGV4IGFhYmZlOTE5Li43NzgzYWIwYiAxMDA2NDQKLS0tIGEvc2VydmVyL3Jl
ZHMuYworKysgYi9zZXJ2ZXIvcmVkcy5jCkBAIC0zNzA4LDYgKzM3MDgsMTYgQEAgc3RhdGljIGdi
b29sZWFuIGdldF9uYW1lX2luZGV4KGNvbnN0IEVudW1OYW1lcyBuYW1lc1tdLCBjb25zdCBjaGFy
ICpuYW1lLCB1aW50MzIKICAgICByZXR1cm4gRkFMU0U7CiB9CgorLyogcmV0dXJucyBOVUxMIGlm
IGluZGV4IGlzIGludmFsaWQuICovCitzdGF0aWMgY29uc3QgY2hhciAqZ2V0X2luZGV4X25hbWUo
Y29uc3QgRW51bU5hbWVzIG5hbWVzW10sIHVpbnQzMl90IGluZGV4KQoreworICAgIHdoaWxlIChu
YW1lcy0+bmFtZSAhPSBOVUxMICYmIG5hbWVzLT5pZCAhPSBpbmRleCkgeworICAgICAgICBuYW1l
cysrOworICAgIH0KKworICAgIHJldHVybiBuYW1lcy0+bmFtZTsKK30KKwogc3RhdGljIGNvbnN0
IEVudW1OYW1lcyByZW5kZXJlcl9uYW1lc1tdID0gewogICAgIHtSRURfUkVOREVSRVJfU1csICJz
dyJ9LAogICAgIHtSRURfUkVOREVSRVJfSU5WQUxJRCwgTlVMTH0sCkBAIC0zNzU1LDYgKzM3NjUs
MjQgQEAgc3RhdGljIGNvbnN0IGludCB2aWRlb19jb2RlY19jYXBzW10gPSB7CiAgICAgU1BJQ0Vf
RElTUExBWV9DQVBfQ09ERUNfVlA5LAogfTsKCitjaGFyICpyZWRzX2dldF92aWRlb19jb2RlY19m
dWxsbmFtZShSZWRWaWRlb0NvZGVjICpjb2RlYykKK3sKKyAgICBpbnQgaTsKKyAgICBjb25zdCBj
aGFyICplbmNvZGVyX25hbWUgPSBOVUxMOworICAgIGNvbnN0IGNoYXIgKmNvZGVjX25hbWUgPSBn
ZXRfaW5kZXhfbmFtZSh2aWRlb19jb2RlY19uYW1lcywgY29kZWMtPnR5cGUpOworCisgICAgc3Bp
Y2VfYXNzZXJ0KGNvZGVjX25hbWUpOworCisgICAgZm9yIChpID0gMDsgaSA8IEdfTl9FTEVNRU5U
Uyh2aWRlb19lbmNvZGVyX3Byb2NzKTsgaSsrKSB7CisgICAgICAgIGlmICh2aWRlb19lbmNvZGVy
X3Byb2NzW2ldID09IGNvZGVjLT5jcmVhdGUpIHsKKyAgICAgICAgICAgIGVuY29kZXJfbmFtZSA9
IGdldF9pbmRleF9uYW1lKHZpZGVvX2VuY29kZXJfbmFtZXMsIGkpOworICAgICAgICAgICAgYnJl
YWs7CisgICAgICAgIH0KKyAgICB9CisgICAgc3BpY2VfYXNzZXJ0KGVuY29kZXJfbmFtZSk7CisK
KyAgICByZXR1cm4gZ19zdHJkdXBfcHJpbnRmKCIlczolcyIsIGVuY29kZXJfbmFtZSwgY29kZWNf
bmFtZSk7Cit9CgogLyogUGFyc2VzIHRoZSBnaXZlbiBjb2RlYyBzdHJpbmcgYW5kIHJldHVybnMg
bmV3bHktYWxsb2NhdGVkIHN0cmluZ3MgZGVzY3JpYmluZwogICogdGhlIG5leHQgZW5jb2RlciBh
bmQgY29kZWMgaW4gdGhlIGxpc3QuIFRoZXNlIHN0cmluZ3MgbXVzdCBiZSBmcmVlZCBieSB0aGUK
QEAgLTQyMjMsNiArNDI1MSwxNiBAQCBTUElDRV9HTlVDX1ZJU0lCTEUgaW50IHNwaWNlX3NlcnZl
cl9zZXRfdmlkZW9fY29kZWNzKFNwaWNlU2VydmVyICpyZWRzLCBjb25zdCBjaAogICAgIHJldHVy
biAwOwogfQoKK1NQSUNFX0dOVUNfVklTSUJMRSBjb25zdCBjaGFyICpzcGljZV9zZXJ2ZXJfZ2V0
X3ZpZGVvX2NvZGVjcyhTcGljZVNlcnZlciAqcmVkcykKK3sKKyAgICByZXR1cm4gdmlkZW9fY29k
ZWNzX3RvX3N0cmluZyhyZWRzX2dldF92aWRlb19jb2RlY3MocmVkcyksICI7Iik7Cit9CisKK1NQ
SUNFX0dOVUNfVklTSUJMRSB2b2lkIHNwaWNlX3NlcnZlcl9mcmVlX3ZpZGVvX2NvZGVjcyhTcGlj
ZVNlcnZlciAqcmVkcywgY29uc3QgY2hhciAqdmlkZW9fY29kZWNzKQoreworICAgIGdfZnJlZSgo
Y2hhciAqKSB2aWRlb19jb2RlY3MpOworfQorCiBHQXJyYXkqIHJlZHNfZ2V0X3ZpZGVvX2NvZGVj
cyhjb25zdCBSZWRzU3RhdGUgKnJlZHMpCiB7CiAgICAgcmV0dXJuIHJlZHMtPmNvbmZpZy0+dmlk
ZW9fY29kZWNzOwpkaWZmIC0tZ2l0IGEvc2VydmVyL3JlZHMuaCBiL3NlcnZlci9yZWRzLmgKaW5k
ZXggOGM1ZWU4NGQuLmUzMzU1ZjgxIDEwMDY0NAotLS0gYS9zZXJ2ZXIvcmVkcy5oCisrKyBiL3Nl
cnZlci9yZWRzLmgKQEAgLTI3LDYgKzI3LDcgQEAKICNpbmNsdWRlICJjaGFyLWRldmljZS5oIgog
I2luY2x1ZGUgInNwaWNlLmgiCiAjaW5jbHVkZSAicmVkLWNoYW5uZWwuaCIKKyNpbmNsdWRlICJ2
aWRlby1lbmNvZGVyLmgiCiAjaW5jbHVkZSAibWFpbi1kaXNwYXRjaGVyLmgiCiAjaW5jbHVkZSAi
bWlncmF0aW9uLXByb3RvY29sLmgiCgpAQCAtNTQsNiArNTUsNyBAQCB2b2lkIHJlZHNfc2VuZF9k
ZXZpY2VfZGlzcGxheV9pbmZvKFJlZHNTdGF0ZSAqcmVkcyk7CiB2b2lkIHJlZHNfaGFuZGxlX2Fn
ZW50X21vdXNlX2V2ZW50KFJlZHNTdGF0ZSAqcmVkcywgY29uc3QgVkRBZ2VudE1vdXNlU3RhdGUg
Km1vdXNlX3N0YXRlKTsgLy8gdXNlZCBieSBpbnB1dHNfY2hhbm5lbAoKIEdBcnJheSogcmVkc19n
ZXRfcmVuZGVyZXJzKFJlZHNTdGF0ZSAqcmVkcyk7CitjaGFyICpyZWRzX2dldF92aWRlb19jb2Rl
Y19mdWxsbmFtZShSZWRWaWRlb0NvZGVjICpjb2RlYyk7CgogZW51bSB7CiAgICAgUkVEX1JFTkRF
UkVSX0lOVkFMSUQsCmRpZmYgLS1naXQgYS9zZXJ2ZXIvc3BpY2Utc2VydmVyLmggYi9zZXJ2ZXIv
c3BpY2Utc2VydmVyLmgKaW5kZXggNWY1NzJmNGYuLmM2Yzg2NDZhIDEwMDY0NAotLS0gYS9zZXJ2
ZXIvc3BpY2Utc2VydmVyLmgKKysrIGIvc2VydmVyL3NwaWNlLXNlcnZlci5oCkBAIC0xMzYsNiAr
MTM2LDIyIEBAIGVudW0gewogfTsKCiBpbnQgc3BpY2Vfc2VydmVyX3NldF92aWRlb19jb2RlY3Mo
U3BpY2VTZXJ2ZXIgKnMsIGNvbnN0IGNoYXIqIHZpZGVvX2NvZGVjcyk7CisKKy8qKgorICogUmV0
dXJucyBhIG5ld2x5IGFsbG9jYXRlZCBzdHJpbmcgZGVzY3JpYmluZyB2aWRlbyBlbmNvZGVycy9j
b2RlY3MKKyAqIGN1cnJlbnRseSBhbGxvd2VkIGluIEBzIFNwaWNlIHNlcnZlci4gVGhlIHN0cmlu
ZyByZXR1cm5lZCBieQorICogdGhpcyBmdW5jdGlvbiBtdXN0IGJlIHJlbGVhc2VkIHdpdGggc3Bp
Y2Vfc2VydmVyX2ZyZWVfdmlkZW9fY29kZWNzLgorICoKKyAqIEBzOiB0aGUgU3BpY2Ugc2VydmVy
IHRvIHF1ZXJ5CisgKiBAcmV0dXJuIHRoZSBzdHJpbmcgZGVzY3JpYmluZyB0aGUgdmlkZW8gZW5j
b2RlcnMvY29kZWNzIGN1cnJlbnRseSBlbmFibGVkCisgKi8KK2NvbnN0IGNoYXIgKnNwaWNlX3Nl
cnZlcl9nZXRfdmlkZW9fY29kZWNzKFNwaWNlU2VydmVyICpzKTsKKworLyoqCisgKiBSZWxlYXNl
cyB0aGUgbWVtb3J5IG9mIHRoZSB2aWRlby1jb2RlYyBzdHJpbmcgcmV0dXJuZWQgYnkKKyAqIHNw
aWNlX3NlcnZlcl9nZXRfdmlkZW9fY29kZWNzLgorICovCit2b2lkIHNwaWNlX3NlcnZlcl9mcmVl
X3ZpZGVvX2NvZGVjcyhTcGljZVNlcnZlciAqcywgY29uc3QgY2hhciAqdmlkZW9fY29kZWNzKTsK
IGludCBzcGljZV9zZXJ2ZXJfc2V0X3BsYXliYWNrX2NvbXByZXNzaW9uKFNwaWNlU2VydmVyICpz
LCBpbnQgZW5hYmxlKTsKIGludCBzcGljZV9zZXJ2ZXJfc2V0X2FnZW50X21vdXNlKFNwaWNlU2Vy
dmVyICpzLCBpbnQgZW5hYmxlKTsKIGludCBzcGljZV9zZXJ2ZXJfc2V0X2FnZW50X2NvcHlwYXN0
ZShTcGljZVNlcnZlciAqcywgaW50IGVuYWJsZSk7CmRpZmYgLS1naXQgYS9zZXJ2ZXIvc3BpY2Ut
c2VydmVyLnN5bXMgYi9zZXJ2ZXIvc3BpY2Utc2VydmVyLnN5bXMKaW5kZXggYWM0ZDliMTQuLmUz
MzUyNmYzIDEwMDY0NAotLS0gYS9zZXJ2ZXIvc3BpY2Utc2VydmVyLnN5bXMKKysrIGIvc2VydmVy
L3NwaWNlLXNlcnZlci5zeW1zCkBAIC0xNzgsMyArMTc4LDkgQEAgU1BJQ0VfU0VSVkVSXzAuMTQu
MiB7CiBnbG9iYWw6CiAgICAgc3BpY2VfcXhsX3NldF9kZXZpY2VfaW5mbzsKIH0gU1BJQ0VfU0VS
VkVSXzAuMTMuMjsKKworU1BJQ0VfU0VSVkVSXzAuMTQuMyB7CitnbG9iYWw6CisgICAgc3BpY2Vf
c2VydmVyX2dldF92aWRlb19jb2RlY3M7CisgICAgc3BpY2Vfc2VydmVyX2ZyZWVfdmlkZW9fY29k
ZWNzOworfSBTUElDRV9TRVJWRVJfMC4xNC4yOwpkaWZmIC0tZ2l0IGEvc2VydmVyL3ZpZGVvLWVu
Y29kZXIuaCBiL3NlcnZlci92aWRlby1lbmNvZGVyLmgKaW5kZXggNzFmNDEzMWEuLjkwZDIxMzEy
IDEwMDY0NAotLS0gYS9zZXJ2ZXIvdmlkZW8tZW5jb2Rlci5oCisrKyBiL3NlcnZlci92aWRlby1l
bmNvZGVyLmgKQEAgLTIxMyw0ICsyMTMsNiBAQCB0eXBlZGVmIHN0cnVjdCBSZWRWaWRlb0NvZGVj
IHsKICAgICB1aW50MzJfdCBjYXA7CiB9IFJlZFZpZGVvQ29kZWM7CgorY2hhciAqdmlkZW9fY29k
ZWNzX3RvX3N0cmluZyhHQXJyYXkgKnZpZGVvX2NvZGVjcywgY29uc3QgY2hhciAqc2VwKTsKKwog
I2VuZGlmIC8qIFZJREVPX0VOQ09ERVJfSF8gKi8KZGlmZiAtLWdpdCBhL3NlcnZlci92aWRlby1z
dHJlYW0uYyBiL3NlcnZlci92aWRlby1zdHJlYW0uYwppbmRleCA0YWMyNWFmOC4uNmFhODU5YTAg
MTAwNjQ0Ci0tLSBhL3NlcnZlci92aWRlby1zdHJlYW0uYworKysgYi9zZXJ2ZXIvdmlkZW8tc3Ry
ZWFtLmMKQEAgLTk3MCwzICs5NzAsMjYgQEAgdm9pZCB2aWRlb19zdHJlYW1fdHJhY2VfYWRkX2Ry
YXdhYmxlKERpc3BsYXlDaGFubmVsICpkaXNwbGF5LAogICAgIHRyYWNlLT5oZWlnaHQgPSBzcmNf
YXJlYS0+Ym90dG9tIC0gc3JjX2FyZWEtPnRvcDsKICAgICB0cmFjZS0+ZGVzdF9hcmVhID0gaXRl
bS0+cmVkX2RyYXdhYmxlLT5iYm94OwogfQorCisvKgorICogdmlkZW9fY29kZWNzOiBhbiBhcnJh
eSBvZiBSZWRWaWRlb0NvZGVjCisgKiBzZXA6IGEgc3RyaW5nIGZvciBzZXBhcmF0aW5nIHRoZSBs
aXN0IGVsZW1lbnRzCisgKgorICogcmV0dXJucyBhIHN0cmluZyBvZiAiZW5jOmNvZGVjPHNlcD4i
KiB0aGF0IG11c3QgYmUgcmVsZWFzZWQKKyAqICAgICAgICAgd2l0aCBnX2ZyZWUuCisgKi8KK2No
YXIgKnZpZGVvX2NvZGVjc190b19zdHJpbmcoR0FycmF5ICp2aWRlb19jb2RlY3MsIGNvbnN0IGNo
YXIgKnNlcCkKK3sKKyAgICBpbnQgaTsKKyAgICBHU3RyaW5nICptc2cgPSBnX3N0cmluZ19uZXco
IiIpOworCisgICAgZm9yIChpID0gMDsgaSA8IHZpZGVvX2NvZGVjcy0+bGVuOyBpKyspIHsKKyAg
ICAgICAgUmVkVmlkZW9Db2RlYyBjb2RlYyA9IGdfYXJyYXlfaW5kZXgodmlkZW9fY29kZWNzLCBS
ZWRWaWRlb0NvZGVjLCBpKTsKKyAgICAgICAgY2hhciAqY29kZWNfbmFtZSA9IHJlZHNfZ2V0X3Zp
ZGVvX2NvZGVjX2Z1bGxuYW1lKCZjb2RlYyk7CisKKyAgICAgICAgZ19zdHJpbmdfYXBwZW5kX3By
aW50Zihtc2csICIlcyVzIiwgaSA/IHNlcCA6ICIiLCBjb2RlY19uYW1lKTsKKyAgICAgICAgZ19m
cmVlKGNvZGVjX25hbWUpOworICAgIH0KKworICAgIHJldHVybiBnX3N0cmluZ19mcmVlKG1zZywg
RkFMU0UpOworfQotLQoyLjIxLjAKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX18KU3BpY2UtZGV2ZWwgbWFpbGluZyBsaXN0ClNwaWNlLWRldmVsQGxpc3RzLmZy
ZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3Rp
bmZvL3NwaWNlLWRldmVs
