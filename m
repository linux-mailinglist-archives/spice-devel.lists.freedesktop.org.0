Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D6B3276B9E
	for <lists+spice-devel@lfdr.de>; Fri, 26 Jul 2019 16:29:08 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5DE426ED8E;
	Fri, 26 Jul 2019 14:29:07 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id BD7C86ED8E
 for <spice-devel@lists.freedesktop.org>; Fri, 26 Jul 2019 14:29:05 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx08.intmail.prod.int.phx2.redhat.com
 [10.5.11.23])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 5ED1030A8853
 for <spice-devel@lists.freedesktop.org>; Fri, 26 Jul 2019 14:29:05 +0000 (UTC)
Received: from fziglio.remote.csb (unknown [10.33.32.15])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 785C618525;
 Fri, 26 Jul 2019 14:28:44 +0000 (UTC)
From: Frediano Ziglio <fziglio@redhat.com>
To: spice-devel@lists.freedesktop.org
Date: Fri, 26 Jul 2019 15:28:36 +0100
Message-Id: <20190726142836.10982-2-fziglio@redhat.com>
In-Reply-To: <20190726142836.10982-1-fziglio@redhat.com>
References: <20190726142836.10982-1-fziglio@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.84 on 10.5.11.23
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.42]); Fri, 26 Jul 2019 14:29:05 +0000 (UTC)
Subject: [Spice-devel] [PATCH 2/2] Add a test for options
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

U2lnbmVkLW9mZi1ieTogRnJlZGlhbm8gWmlnbGlvIDxmemlnbGlvQHJlZGhhdC5jb20+Ci0tLQog
LmdpdGlnbm9yZSAgICAgICAgICAgICAgIHwgIDEgKwogY29uZmlndXJlLmFjICAgICAgICAgICAg
IHwgIDIgKy0KIHNyYy90ZXN0cy9NYWtlZmlsZS5hbSAgICB8ICA1ICsrKwogc3JjL3Rlc3RzL29w
dGlvbnNfdGVzdC5jIHwgOTMgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KwogNCBmaWxlcyBjaGFuZ2VkLCAxMDAgaW5zZXJ0aW9ucygrKSwgMSBkZWxldGlvbigtKQogY3Jl
YXRlIG1vZGUgMTAwNjQ0IHNyYy90ZXN0cy9vcHRpb25zX3Rlc3QuYwoKZGlmZiAtLWdpdCBhLy5n
aXRpZ25vcmUgYi8uZ2l0aWdub3JlCmluZGV4IDc0ZTJhODcuLmFlZTZjOTMgMTAwNjQ0Ci0tLSBh
Ly5naXRpZ25vcmUKKysrIGIvLmdpdGlnbm9yZQpAQCAtMjQsNiArMjQsNyBAQCBzcmMvdGVzdHMv
cnVuCiAqLmxvZwogKi50cnMKIHgxMXNwaWNlX3Rlc3QKK29wdGlvbnNfdGVzdAogCiAqLmdjbm8K
ICouZ2NkYQpkaWZmIC0tZ2l0IGEvY29uZmlndXJlLmFjIGIvY29uZmlndXJlLmFjCmluZGV4IGZh
MjM0ODMuLjE3ODY0MTYgMTAwNjQ0Ci0tLSBhL2NvbmZpZ3VyZS5hYworKysgYi9jb25maWd1cmUu
YWMKQEAgLTEsNSArMSw1IEBACiBBQ19JTklUKFt4MTFzcGljZV0sIDEuMSkKLUFNX0lOSVRfQVVU
T01BS0UKK0FNX0lOSVRfQVVUT01BS0UoW3N1YmRpci1vYmplY3RzXSkKIAogUEtHX0NIRUNLX01P
RFVMRVMoWENCLCB4Y2IpCiBQS0dfQ0hFQ0tfTU9EVUxFUyhEQU1BR0UsIHhjYi1kYW1hZ2UpCmRp
ZmYgLS1naXQgYS9zcmMvdGVzdHMvTWFrZWZpbGUuYW0gYi9zcmMvdGVzdHMvTWFrZWZpbGUuYW0K
aW5kZXggMzhiNzM1ZC4uMmI3MTFiYiAxMDA2NDQKLS0tIGEvc3JjL3Rlc3RzL01ha2VmaWxlLmFt
CisrKyBiL3NyYy90ZXN0cy9NYWtlZmlsZS5hbQpAQCAtMTYsNiArMTYsMTEgQEAgeDExc3BpY2Vf
dGVzdF9TT1VSQ0VTID0gXAogICAgIHV0aWwuaCBcCiAgICAgbWFpbi5jCiAKK1RFU1RTICs9IG9w
dGlvbnNfdGVzdAorb3B0aW9uc190ZXN0X0NQUEZMQUdTID0gLUkkKHRvcF9zcmNkaXIpL3NyYwor
b3B0aW9uc190ZXN0X0xEQUREID0gJChHTElCMl9MSUJTKQorb3B0aW9uc190ZXN0X1NPVVJDRVMg
PSBvcHRpb25zX3Rlc3QuYyAuLi9vcHRpb25zLmMKKwogbm9pbnN0X1BST0dSQU1TID0gJChURVNU
UykKIAogLlBIT05ZOiBsZWFrY2hlY2subG9nIGNhbGxncmluZC5vdXQueApkaWZmIC0tZ2l0IGEv
c3JjL3Rlc3RzL29wdGlvbnNfdGVzdC5jIGIvc3JjL3Rlc3RzL29wdGlvbnNfdGVzdC5jCm5ldyBm
aWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAuLjJkYzViN2YKLS0tIC9kZXYvbnVsbAorKysg
Yi9zcmMvdGVzdHMvb3B0aW9uc190ZXN0LmMKQEAgLTAsMCArMSw5MyBAQAorI3VuZGVmIE5ERUJV
RworI2luY2x1ZGUgPHN0ZGlvLmg+CisjaW5jbHVkZSA8c3RkbGliLmg+CisjaW5jbHVkZSA8c3Ry
aW5nLmg+CisjaW5jbHVkZSA8dW5pc3RkLmg+CisjaW5jbHVkZSA8YXNzZXJ0Lmg+CisjaW5jbHVk
ZSA8Z2xpYi5oPgorCisjaW5jbHVkZSAib3B0aW9ucy5oIgorCitzdGF0aWMgdm9pZCB0ZXN0KGNv
bnN0IGNoYXIgKmNtZF9saW5lLCBjb25zdCBjaGFyICpleHBlY3RlZCkKK3sKKyAgICBvcHRpb25z
X3Qgb3B0aW9uczsKKyAgICBpbnQgYXJnYyA9IDA7CisgICAgaW50IHJjOworCisgICAgY2hhciAq
KmFyZ3YgPSBnX3N0cnNwbGl0X3NldChjbWRfbGluZSwgIiAiLCAwKTsKKyAgICB3aGlsZSAoYXJn
dlthcmdjXSkgeworICAgICAgICArK2FyZ2M7CisgICAgfQorCisgICAgb3B0aW9uc19pbml0KCZv
cHRpb25zKTsKKyAgICByYyA9IG9wdGlvbnNfbG9hZCgmb3B0aW9ucywgYXJnYywgYXJndik7Cisg
ICAgZ19zdHJmcmVldihhcmd2KTsKKyAgICBpZiAocmMgIT0gMCkgeworICAgICAgICBmcHJpbnRm
KHN0ZGVyciwgIlVuYWJsZSB0byBsb2FkIG9wdGlvbnMsIHJjICVkXG4iLCByYyk7CisgICAgICAg
IG9wdGlvbnNfZnJlZSgmb3B0aW9ucyk7CisgICAgICAgIGV4aXQoMSk7CisgICAgfQorCisgICAg
Ly8gcGFyc2UgZXhwZWN0ZWQgZmllbGRzCisgICAgZm9yICg7OykgeworICAgICAgICBjaGFyIG5h
bWVbMTAyXSwgdmFsdWVbMTAyXSwgYnVmWzEwMl07CisgICAgICAgIGludCBwb3MgPSAtMTsKKyAg
ICAgICAgLy8gMiBuZXh0IHRva2VuIGFyZSBjb3VwbGUgPE5BTUU+IDxWQUxVRT4KKyAgICAgICAg
aWYgKHNzY2FuZihleHBlY3RlZCwgIiAlMTAwcyAlMTAwcyAlbiIsIG5hbWUsIHZhbHVlLCAmcG9z
KSA8IDIpCisgICAgICAgICAgICBicmVhazsKKyAgICAgICAgYXNzZXJ0KHBvcyA+IDApOworCisj
ZGVmaW5lIFZBTChmbXQsIGZsZCkgXAorICAgICAgICBpZiAoc3RyY21wKG5hbWUsICNmbGQpID09
IDApIFwKKyAgICAgICAgICAgIHNucHJpbnRmKGJ1Ziwgc2l6ZW9mKGJ1ZiksIGZtdCwgb3B0aW9u
cy5mbGQpOyBcCisgICAgICAgIGVsc2UKKworICAgICAgICAvLyBleHRyYWN0IGV4cGVjdGVkIHZh
bHVlCisgICAgICAgIFZBTCgiJXMiLCBkaXNwbGF5KQorICAgICAgICBWQUwoIiVkIiwgYWxsb3df
Y29udHJvbCkKKyAgICAgICAgVkFMKCIlcyIsIGxpc3RlbikKKyAgICAgICAgVkFMKCIlcyIsIHNz
bC5jYV9jZXJ0X2ZpbGUpCisgICAgICAgIHsKKyAgICAgICAgICAgIGZwcmludGYoc3RkZXJyLCAi
bmFtZSAnJXMnIG5vdCByZWNvZ25pemVkXG4iLCBuYW1lKTsKKyAgICAgICAgICAgIGV4aXQoMSk7
CisgICAgICAgIH0KKworICAgICAgICAvLyBjb21wYXJlIGV4cGVjdGVkIGFuZCBwYXJzZWQKKyAg
ICAgICAgaWYgKHN0cmNtcChidWYsIHZhbHVlKSAhPSAwKSB7CisgICAgICAgICAgICBmcHJpbnRm
KHN0ZGVyciwgIlVuZXhwZWN0ZWQgcmVzdWx0czpcblx0Y21kOiclcydcblx0ZmxkOiVzXG5cdG91
dDolc1xuXHRleHA6JXNcbiIsCisgICAgICAgICAgICAgICAgICAgIGNtZF9saW5lLCBuYW1lLCBi
dWYsIHZhbHVlKTsKKyAgICAgICAgICAgIGV4aXQoMSk7CisgICAgICAgIH0KKyAgICAgICAgZXhw
ZWN0ZWQgKz0gcG9zOworICAgIH0KKyAgICBvcHRpb25zX2ZyZWUoJm9wdGlvbnMpOworfQorCisj
ZGVmaW5lIFRFU1QoY21kLCBleHApIHRlc3QoIlBST0dSQU0gIiBjbWQsIGV4cCkKKworaW50IG1h
aW4oaW50IGFyZ2MsIGNoYXIgKiphcmd2KQoreworICAgIEZJTEUgKmYgPSBmb3BlbigidGVzdC5j
b25mIiwgInciKTsKKworICAgIGZwcmludGYoZiwgIltzcGljZV1cbmRpc3BsYXk9Y29uZmlnX2Rp
c3BsYXlcbmxpc3Rlbj04NzY1XG5hbGxvdy1jb250cm9sPXRydWUiKTsKKyAgICBmY2xvc2UoZik7
CisKKyAgICAvLyBzb21lIHRlc3QsIGlucHV0IGFuZCBvdXRwdXQKKyAgICB0ZXN0KCJQUk9HUkFN
IiwgImRpc3BsYXkgKG51bGwpIGFsbG93X2NvbnRyb2wgMCBsaXN0ZW4gNTkwMCBzc2wuY2FfY2Vy
dF9maWxlIChudWxsKSIpOworICAgIFRFU1QoIi0taGlkZSIsICJkaXNwbGF5IChudWxsKSBhbGxv
d19jb250cm9sIDAgbGlzdGVuIDU5MDAgc3NsLmNhX2NlcnRfZmlsZSAobnVsbCkiKTsKKyAgICBU
RVNUKCIxMjM0IiwKKyAgICAgICAgICJkaXNwbGF5IChudWxsKSBhbGxvd19jb250cm9sIDAgbGlz
dGVuIDEyMzQiKTsKKyAgICBURVNUKCItLWNvbmZpZz10ZXN0LmNvbmYiLAorICAgICAgICAgImRp
c3BsYXkgY29uZmlnX2Rpc3BsYXkgYWxsb3dfY29udHJvbCAxIGxpc3RlbiA4NzY1Iik7CisgICAg
VEVTVCgiLS1jb25maWc9dGVzdC5jb25mIDEyMyIsCisgICAgICAgICAiZGlzcGxheSBjb25maWdf
ZGlzcGxheSBhbGxvd19jb250cm9sIDEgbGlzdGVuIDEyMyIpOworICAgIFRFU1QoIi0tbm8tYWxs
b3ctY29udHJvbCAtLWNvbmZpZz10ZXN0LmNvbmYgMTIzIiwKKyAgICAgICAgICJkaXNwbGF5IGNv
bmZpZ19kaXNwbGF5IGFsbG93X2NvbnRyb2wgMCBsaXN0ZW4gMTIzIik7CisgICAgVEVTVCgiLS1k
aXNwbGF5IERJU1BMQVkgLS1jb25maWc9dGVzdC5jb25mIDEyMyIsCisgICAgICAgICAiZGlzcGxh
eSBESVNQTEFZIGFsbG93X2NvbnRyb2wgMSBsaXN0ZW4gMTIzIHNzbC5jYV9jZXJ0X2ZpbGUgKG51
bGwpIik7CisgICAgVEVTVCgiLS1zc2w9Zm9vIiwKKyAgICAgICAgICJkaXNwbGF5IChudWxsKSBh
bGxvd19jb250cm9sIDAgbGlzdGVuIDU5MDAgc3NsLmNhX2NlcnRfZmlsZSBmb28iKTsKKworICAg
IHVubGluaygidGVzdC5jb25mIik7CisgICAgcmV0dXJuIDA7Cit9Ci0tIAoyLjIwLjEKCl9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClNwaWNlLWRldmVsIG1h
aWxpbmcgbGlzdApTcGljZS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0
cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9zcGljZS1kZXZlbA==
