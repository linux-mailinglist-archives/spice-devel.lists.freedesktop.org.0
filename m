Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 663977A9D6
	for <lists+spice-devel@lfdr.de>; Tue, 30 Jul 2019 15:38:38 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id EE4176E514;
	Tue, 30 Jul 2019 13:38:36 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mail-io1-xd33.google.com (mail-io1-xd33.google.com
 [IPv6:2607:f8b0:4864:20::d33])
 by gabe.freedesktop.org (Postfix) with ESMTPS id C7B496E514
 for <spice-devel@lists.freedesktop.org>; Tue, 30 Jul 2019 13:38:34 +0000 (UTC)
Received: by mail-io1-xd33.google.com with SMTP id q22so8308678iog.4
 for <spice-devel@lists.freedesktop.org>; Tue, 30 Jul 2019 06:38:34 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=qGA6trB5qHPjkgiLq3Uo6i30QoAMGlTmlBO9x9VCM6g=;
 b=LTFBNe6gWFg04bfkRsqgg6E7q7sSK3ZP6W2ouxLhJpfowpQENQmadE466h+pcZZBvg
 oi/Y+YLxy4IZlY0hMMTNPQ0a90sWnfnOjFlzdcMzQA1zsiKyhM6tuXjAt6AujLzlzFFp
 VttoExYGaEgEd3W/G+nEcP8zS/Fb72wUmbmLgKaex4yM3iPG4U70WFEnfieJLE92TV+o
 yQEDnjmHowGKM9d2zVs0/Ho5BWoQHIksc8MGMkZcV6OcxFzMQGHH5be6UQkhuziQ0kxX
 iJ5/ZkKBv0iS5xP/SN4rWtp6YUls5mIfomZBlyCBnMZz+GEW85qt5BueKuU+VcyioiEf
 GqCw==
X-Gm-Message-State: APjAAAWHKMYgUAJlNM8K7Nm4HaVt92FHouEkqYz0e5NZYEOsQoNtPQ/g
 zzGcQqiNThPPyqMM2VftveTe4F9IV/kQCc3uh6c=
X-Google-Smtp-Source: APXvYqyL4iyA8OoL+kXxzqHTf7CeU+kgVu0rrPovoPYzOiMLoCGH8JwFCgAn/xImU/mjZqH8SXiwGrIo9Utq5n+Mi6c=
X-Received: by 2002:a6b:b214:: with SMTP id b20mr51542466iof.149.1564493913911; 
 Tue, 30 Jul 2019 06:38:33 -0700 (PDT)
MIME-Version: 1.0
References: <20190724105351.13753-1-yuri.benditovich@daynix.com>
 <20190724105351.13753-9-yuri.benditovich@daynix.com>
 <1039725951.3474044.1564483429122.JavaMail.zimbra@redhat.com>
In-Reply-To: <1039725951.3474044.1564483429122.JavaMail.zimbra@redhat.com>
From: Yuri Benditovich <yuri.benditovich@daynix.com>
Date: Tue, 30 Jul 2019 16:38:19 +0300
Message-ID: <CAOEp5OfDHLcfLL4z7QtH7iUvB3Ldk+ASZjkyVevAgr6rm5C0Uw@mail.gmail.com>
To: Frediano Ziglio <fziglio@redhat.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=daynix-com.20150623.gappssmtp.com; s=20150623;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=qGA6trB5qHPjkgiLq3Uo6i30QoAMGlTmlBO9x9VCM6g=;
 b=osz8mmQvrjVFqvueicSgqdp3vIqhfv78DVoYvjS1aoN8soEahAZZ+EPwpSlAenFkEc
 8ESYGAkD62V/lCZdL830TK4CPL750xzmbOWwVAxagK7zWh/T0qTzM3ekxX4P9+8ICGDw
 ZnIiO6nbfAXARSQyBndHKExM1uxZKodKbGEugQ3bQvCNrF1uHOubIGE2ichiZ2Y+jQyr
 px3YYc35keZzrFdDyjYfE0vofw/NNL4kNhjfW/FWt+C3JQ9iBoWpL2SJRp4PdjB59uZ5
 m58uwZ6hAUbNUi2bNZFTUICRqx1fIY/oRdFOIjXoMKfJytH/jH/iXLG+WDnbixBm1jsC
 aG5Q==
Subject: Re: [Spice-devel] [spice-gtk 8/9] usb-redir: add implementation of
 emulated CD device
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Yan Vugenfirer <yan@daynix.com>,
 Spice List <spice-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

T24gVHVlLCBKdWwgMzAsIDIwMTkgYXQgMTo0MyBQTSBGcmVkaWFubyBaaWdsaW8gPGZ6aWdsaW9A
cmVkaGF0LmNvbT4gd3JvdGU6Cj4KPiA+Cj4gPiBUaGlzIG1vZHVsZSBjb250YWlucyBpbXBsZW1l
bnRhdGlvbiBvZiBlbXVsYXRlZCBkZXZpY2UKPiA+IGludGVyZmFjZSBmb3Igc2hhcmVkIENELgo+
ID4KPiA+IFNpZ25lZC1vZmYtYnk6IFl1cmkgQmVuZGl0b3ZpY2ggPHl1cmkuYmVuZGl0b3ZpY2hA
ZGF5bml4LmNvbT4KPiA+IC0tLQo+ID4gIHNyYy91c2ItZGV2aWNlLWNkLmMgfCA3OTQgKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysKPiA+ICAxIGZpbGUgY2hhbmdl
ZCwgNzk0IGluc2VydGlvbnMoKykKPiA+ICBjcmVhdGUgbW9kZSAxMDA2NDQgc3JjL3VzYi1kZXZp
Y2UtY2QuYwo+ID4KPiA+IGRpZmYgLS1naXQgYS9zcmMvdXNiLWRldmljZS1jZC5jIGIvc3JjL3Vz
Yi1kZXZpY2UtY2QuYwo+ID4gbmV3IGZpbGUgbW9kZSAxMDA2NDQKPiA+IGluZGV4IDAwMDAwMDAu
LjE4ZGJjZWEKPiA+IC0tLSAvZGV2L251bGwKPiA+ICsrKyBiL3NyYy91c2ItZGV2aWNlLWNkLmMK
PiA+IEBAIC0wLDAgKzEsNzk0IEBACj4gPiArLyogLSotIE1vZGU6IEM7IGMtYmFzaWMtb2Zmc2V0
OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovCj4gPiArLyoKPiA+ICsgICAgQ29weXJp
Z2h0IChDKSAyMDE5IFJlZCBIYXQsIEluYy4KPiA+ICsKPiA+ICsgICAgUmVkIEhhdCBBdXRob3Jz
Ogo+ID4gKyAgICBZdXJpIEJlbmRpdG92aWNoPHliZW5kaXRvQHJlZGhhdC5jb20+Cj4gPiArCj4g
PiArICAgIFRoaXMgbGlicmFyeSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0
ZSBpdCBhbmQvb3IKPiA+ICsgICAgbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05V
IExlc3NlciBHZW5lcmFsIFB1YmxpYwo+ID4gKyAgICBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieSB0
aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIKPiA+ICsgICAgdmVyc2lvbiAyLjEg
b2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCj4g
PiArCj4gPiArICAgIFRoaXMgbGlicmFyeSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0
IGl0IHdpbGwgYmUgdXNlZnVsLAo+ID4gKyAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdp
dGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgo+ID4gKyAgICBNRVJDSEFOVEFCSUxJ
VFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlIEdOVQo+ID4g
KyAgICBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgo+ID4g
Kwo+ID4gKyAgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgTGVz
c2VyIEdlbmVyYWwgUHVibGljCj4gPiArICAgIExpY2Vuc2UgYWxvbmcgd2l0aCB0aGlzIGxpYnJh
cnk7IGlmIG5vdCwgc2VlCj4gPiA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCj4gPiAr
Ki8KPiA+ICsKPiA+ICsjaW5jbHVkZSAiY29uZmlnLmgiCj4gPiArCj4gPiArI2lmZGVmIFVTRV9V
U0JSRURJUgo+ID4gKwo+ID4gKyNpbmNsdWRlIDxnbGliLW9iamVjdC5oPgo+ID4gKyNpbmNsdWRl
IDxpbnR0eXBlcy5oPgo+ID4gKyNpbmNsdWRlIDxnaW8vZ2lvLmg+Cj4gPiArI2luY2x1ZGUgPGds
aWIvZ2kxOG4tbGliLmg+Cj4gPiArI2luY2x1ZGUgPGVycm5vLmg+Cj4gPiArI2luY2x1ZGUgPGxp
YnVzYi5oPgo+ID4gKyNpbmNsdWRlIDxmY250bC5oPgo+ID4gKwo+ID4gKyNpZmRlZiBHX09TX1dJ
TjMyCj4gPiArI2luY2x1ZGUgPHdpbmRvd3MuaD4KPiA+ICsjaW5jbHVkZSA8bnRkZGNkcm0uaD4K
PiA+ICsjaW5jbHVkZSA8bnRkZG1tYy5oPgo+ID4gKyNlbHNlCj4gPiArI2luY2x1ZGUgPHN5cy9z
dGF0Lmg+Cj4gPiArI2luY2x1ZGUgPHN5cy9pb2N0bC5oPgo+ID4gKyNpbmNsdWRlIDxsaW51eC9m
cy5oPgo+ID4gKyNpbmNsdWRlIDxsaW51eC9jZHJvbS5oPgo+ID4gKyNlbmRpZgo+ID4gKwo+ID4g
KyNpbmNsdWRlICJ1c2ItZW11bGF0aW9uLmgiCj4gPiArI2luY2x1ZGUgImNkLXVzYi1idWxrLW1z
ZC5oIgo+ID4gKwo+ID4gK3R5cGVkZWYgc3RydWN0IFNwaWNlQ2RMVQo+ID4gK3sKPiA+ICsgICAg
Y2hhciAqZmlsZW5hbWU7Cj4gPiArICAgIEdGaWxlICpmaWxlX29iamVjdDsKPiA+ICsgICAgR0Zp
bGVJbnB1dFN0cmVhbSAqc3RyZWFtOwo+ID4gKyAgICB1aW50NjRfdCBzaXplOwo+ID4gKyAgICB1
aW50MzJfdCBibG9ja1NpemU7Cj4gPiArICAgIHVpbnQzMl90IGxvYWRlZCA6IDE7Cj4gPiArICAg
IHVpbnQzMl90IGRldmljZSA6IDE7Cj4gPiArfSBTcGljZUNkTFU7Cj4gPiArCj4gPiArI2RlZmlu
ZSBNQVhfTFVOX1BFUl9ERVZJQ0UgICAgICAgICAgICAgIDEKPiA+ICsjZGVmaW5lIFVTQjJfQkNE
ICAgICAgICAgICAgICAgICAgICAgICAgMHgyMDAKPiA+ICsjZGVmaW5lIENEX0RFVl9WSUQgICAg
ICAgICAgICAgICAgICAgICAgMHgyYjIzCj4gPiArI2RlZmluZSBDRF9ERVZfUElEICAgICAgICAg
ICAgICAgICAgICAgIDB4Q0RDRAo+Cj4gV2hlcmUgdGhlc2UgdmFsdWVzIGNhbWU/IExhdGVyIHlv
dSBhcmUgc3RhdGluZyB2ZW5kb3IKPiBpcyAiUmVkIEhhdCIgYnV0IFJlZCBIYXQgaXMgMHgxYjM2
IGFuZCBRdW1yYW5ldCBpcyAweDFhZjQuCj4gQXJlIHRoZXNlIHRlbXBvcmFyeSB2YWx1ZXM/CgpJ
IHN1cHBvc2UgeW91IG1lYW4gUENJIHZlbmRvciBJRHMuIFVTQiBvbmUgY29tZSBmcm9tIGFub3Ro
ZXIgc291cmNlLgpodHRwczovL2J1Z3ppbGxhLnJlZGhhdC5jb20vc2hvd19idWcuY2dpP2lkPTEx
MzIzMzAKCj4KPiA+ICsjZGVmaW5lIENEX0RFVl9DTEFTUyAgICAgICAgICAgICAgICAgICAgOAo+
ID4gKyNkZWZpbmUgQ0RfREVWX1NVQkNMQVNTICAgICAgICAgICAgICAgICA2Cj4gPiArI2RlZmlu
ZSBDRF9ERVZfUFJPVE9DT0wgICAgICAgICAgICAgICAgIDB4NTAKPiA+ICsjZGVmaW5lIENEX0RF
Vl9CTE9DS19TSVpFICAgICAgICAgICAgICAgMHgyMDAKPgo+IEkgZGlkbid0IGV4cGVjdGVkIHRo
aXMuIEkgdGhvdWdoIGFsbCBDRHMgd2VyZSAyMDQ4IHNlY3RvciBzaXplZC4KCkFzIGZhciBhcyBJ
IHJlbWVtYmVyLCBJJ3ZlIGNoZWNrZWQgdGhhdCBkdXJpbmcgZGV2ZWxvcG1lbnQsIENERlMgaGFz
CnNlY3RvciBvZiA1MTIgYnl0ZXMuCgo+Cj4gPiArI2RlZmluZSBDRF9ERVZfTUFYX1NJWkUgICAg
ICAgICAgICAgICAgIDczNzI4MDAwMAo+Cj4gVGhpcyBpcyB1bnVzZWQuIEkgd291bGQgcmVtb3Zl
IEkgc3VwcG9zZSBEVkQgZGV2aWNlcyBvciBpbWFnZXMKPiB3b24ndCBmaXQgaGVyZSBhbnl3YXku
CgpXaGVuIHRoZSBzaXplIGlzIGJpZ2dlciB0aGFuIHJlZ3VsYXIgQ0QgaW1hZ2UsIHNlY3RvciBz
aXplIGlzIDJLLgpBcyBmYXIgYXMgSSByZW1lbWJlciwgb3RoZXIgRlMgdXNlZCBpbiB0aGlzIGNh
c2UgKFVERiBldGMpCndvbid0IGZpciB3aGVyZT8gVGhpcyBpcyBDRC1EVkQgcmVhZGVyLCB3ZSB1
c2VkIGl0IHdpdGggbGFyZ2UgaW1hZ2VzLgoKPgo+ID4gKyNkZWZpbmUgRFZEX0RFVl9CTE9DS19T
SVpFICAgICAgICAgICAgICAweDgwMAo+ID4gKyNkZWZpbmUgTUFYX0JVTEtfSU5fUkVRVUVTVFMg
ICAgICAgICAgICA2NAo+ID4gKwo+ID4gK3N0cnVjdCBCdWZmZXJlZEJ1bGtSZWFkCj4gPiArewo+
ID4gKyAgICBzdHJ1Y3QgdXNiX3JlZGlyX2J1bGtfcGFja2V0X2hlYWRlciBob3V0Owo+ID4gKyAg
ICB1aW50NjRfdCBpZDsKPiA+ICt9Owo+ID4gKwo+ID4gK3N0cnVjdCBfU3BpY2VVc2JFbXVsYXRl
ZERldmljZQo+ID4gK3sKPiA+ICsgICAgVXNiRGV2aWNlT3BzIGRldl9vcHM7Cj4gPiArICAgIFNw
aWNlVXNiQmFja2VuZCAqYmFja2VuZDsKPiA+ICsgICAgU3BpY2VVc2JCYWNrZW5kRGV2aWNlICpw
YXJlbnQ7Cj4gPiArICAgIHN0cnVjdCB1c2JyZWRpcnBhcnNlciAqcGFyc2VyOwo+ID4gKyAgICB2
b2lkICogbXNjOwo+ID4gKyAgICBTcGljZUNkTFUgdW5pdHNbTUFYX0xVTl9QRVJfREVWSUNFXTsK
PiA+ICsgICAgZ2Jvb2xlYW4gbG9ja2VkOwo+ID4gKyAgICBnYm9vbGVhbiBkZWxldGVfb25fZWpl
Y3Q7Cj4gPiArICAgIGdib29sZWFuIGRlbGV0aW5nOwo+ID4gKyAgICB1aW50MzJfdCBudW1fcmVh
ZHM7Cj4gPiArICAgIHN0cnVjdCBCdWZmZXJlZEJ1bGtSZWFkIHJlYWRfYnVsa1tNQVhfQlVMS19J
Tl9SRVFVRVNUU107Cj4gPiArICAgIHVpbnQxNl90IHNlcmlhbFs0XTsKPgo+IFNwZWNpZmljYXRp
b25zIHN0YXRlIHRoYXQgc2VyaWFsIHNob3VsZCBiZSBhdCBsZWFzdCAxMiBjaGFyYWN0ZXJzLgoK
V2hpY2ggc3BlY2lmaWNhdGlvbj8gSSBkbyBub3QgcmVtZW1iZXIgaW4gVVNCIHNwZWMgc3VjaCBy
ZXF1aXJlbWVudC4KCj4KPiA+ICsgICAgdWludDhfdCAgbWF4X2x1bl9pbmRleDsKPiA+ICt9Owo+
ID4gKwo+ID4gK3R5cGVkZWYgU3BpY2VVc2JFbXVsYXRlZERldmljZSBVc2JDZDsKPiA+ICsKPiA+
ICsjaWZuZGVmIEdfT1NfV0lOMzIKPiA+ICsKPiA+ICtzdGF0aWMgaW50IGNkX2RldmljZV9vcGVu
X3N0cmVhbShTcGljZUNkTFUgKnVuaXQsIGNvbnN0IGNoYXIgKmZpbGVuYW1lKQo+ID4gK3sKPiA+
ICsgICAgaW50IGVycm9yID0gMDsKPiA+ICsgICAgdW5pdC0+ZGV2aWNlID0gMDsKPiA+ICsKPiA+
ICsgICAgaWYgKCF1bml0LT5maWxlbmFtZSAmJiAhZmlsZW5hbWUpIHsKPiA+ICsgICAgICAgIFNQ
SUNFX0RFQlVHKCIlczogZmlsZSBuYW1lIG5vdCBwcm92aWRlZCIsIF9fRlVOQ1RJT05fXyk7Cj4g
PiArICAgICAgICByZXR1cm4gLTE7Cj4gPiArICAgIH0KPiA+ICsgICAgaWYgKHVuaXQtPmZpbGVu
YW1lICYmIGZpbGVuYW1lKSB7Cj4gPiArICAgICAgICBnX2ZyZWUodW5pdC0+ZmlsZW5hbWUpOwo+
ID4gKyAgICAgICAgdW5pdC0+ZmlsZW5hbWUgPSBOVUxMOwo+ID4gKyAgICB9Cj4gPiArICAgIGlm
IChmaWxlbmFtZSkgewo+ID4gKyAgICAgICAgdW5pdC0+ZmlsZW5hbWUgPSBnX3N0cmR1cChmaWxl
bmFtZSk7Cj4gPiArICAgIH0KPiA+ICsKPiA+ICsgICAgaW50IGZkID0gb3Blbih1bml0LT5maWxl
bmFtZSwgT19SRE9OTFkgfCBPX05PTkJMT0NLKTsKPiA+ICsgICAgaWYgKGZkID4gMCkgewo+ID4g
KyAgICAgICAgc3RydWN0IHN0YXQgZmlsZV9zdGF0ID0geyAwIH07Cj4gPiArICAgICAgICBpZiAo
ZnN0YXQoZmQsICZmaWxlX3N0YXQpIHx8IGZpbGVfc3RhdC5zdF9zaXplID09IDApIHsKPiA+ICsg
ICAgICAgICAgICBmaWxlX3N0YXQuc3Rfc2l6ZSA9IDA7Cj4gPiArICAgICAgICAgICAgdW5pdC0+
ZGV2aWNlID0gMTsKPiA+ICsgICAgICAgICAgICBpZiAoIWlvY3RsKGZkLCBCTEtHRVRTSVpFNjQs
ICZmaWxlX3N0YXQuc3Rfc2l6ZSkgJiYKPiA+ICsgICAgICAgICAgICAgICAgIWlvY3RsKGZkLCBC
TEtTU1pHRVQsICZ1bml0LT5ibG9ja1NpemUpKSB7Cj4gPiArICAgICAgICAgICAgfQo+ID4gKyAg
ICAgICAgfQo+ID4gKyAgICAgICAgdW5pdC0+c2l6ZSA9IGZpbGVfc3RhdC5zdF9zaXplOwo+ID4g
KyAgICAgICAgY2xvc2UoZmQpOwo+ID4gKyAgICAgICAgaWYgKHVuaXQtPnNpemUpIHsKPiA+ICsg
ICAgICAgICAgICB1bml0LT5maWxlX29iamVjdCA9IGdfZmlsZV9uZXdfZm9yX3BhdGgodW5pdC0+
ZmlsZW5hbWUpOwo+ID4gKyAgICAgICAgICAgIHVuaXQtPnN0cmVhbSA9IGdfZmlsZV9yZWFkKHVu
aXQtPmZpbGVfb2JqZWN0LCBOVUxMLCBOVUxMKTsKPiA+ICsgICAgICAgIH0KPiA+ICsgICAgICAg
IGlmICghdW5pdC0+c3RyZWFtKSB7Cj4gPiArICAgICAgICAgICAgU1BJQ0VfREVCVUcoIiVzOiBj
YW4ndCBvcGVuIHN0cmVhbSBvbiAlcyIsIF9fRlVOQ1RJT05fXywKPiA+IHVuaXQtPmZpbGVuYW1l
KTsKPiA+ICsgICAgICAgICAgICBnX29iamVjdF91bnJlZih1bml0LT5maWxlX29iamVjdCk7Cj4g
PiArICAgICAgICAgICAgdW5pdC0+ZmlsZV9vYmplY3QgPSBOVUxMOwo+ID4gKyAgICAgICAgICAg
IGVycm9yID0gLTE7Cj4gPiArICAgICAgICB9Cj4gPiArICAgIH0KPiA+ICsgICAgZWxzZSB7Cj4g
PiArICAgICAgICBTUElDRV9ERUJVRygiJXM6IGNhbid0IG9wZW4gZmlsZSAlcyIsIF9fRlVOQ1RJ
T05fXywgdW5pdC0+ZmlsZW5hbWUpOwo+ID4gKyAgICAgICAgZXJyb3IgPSAtMTsKPiA+ICsgICAg
fQo+ID4gKwo+ID4gKyAgICByZXR1cm4gZXJyb3I7Cj4gPiArfQo+ID4gKwo+ID4gK3N0YXRpYyBp
bnQgY2RfZGV2aWNlX2xvYWQoU3BpY2VDZExVICp1bml0LCBnYm9vbGVhbiBsb2FkKQo+ID4gK3sK
PiA+ICsgICAgaW50IGVycm9yOwo+ID4gKyAgICBpZiAoIXVuaXQtPmRldmljZSB8fCAhdW5pdC0+
ZmlsZW5hbWUpIHsKPiA+ICsgICAgICAgIHJldHVybiAtMTsKPiA+ICsgICAgfQo+ID4gKyAgICBp
bnQgZmQgPSBvcGVuKHVuaXQtPmZpbGVuYW1lLCBPX1JET05MWSB8IE9fTk9OQkxPQ0spOwo+ID4g
KyAgICBpZiAoZmQgPCAwKSB7Cj4gPiArICAgICAgICByZXR1cm4gLTE7Cj4gPiArICAgIH0KPiA+
ICsgICAgaWYgKGxvYWQpIHsKPiA+ICsgICAgICAgIGVycm9yID0gaW9jdGwoZmQsIENEUk9NQ0xP
U0VUUkFZLCAwKTsKPiA+ICsgICAgfSBlbHNlIHsKPiA+ICsgICAgICAgIGVycm9yID0gaW9jdGwo
ZmQsIENEUk9NX0xPQ0tET09SLCAwKTsKPiA+ICsgICAgICAgIGVycm9yID0gaW9jdGwoZmQsIENE
Uk9NRUpFQ1QsIDApOwo+ID4gKyAgICB9Cj4gPiArICAgIGlmIChlcnJvcikgewo+ID4gKyAgICAg
ICAgLy8gbm90ZSB0aGF0IGVqZWN0aW5nIG1pZ2h0IGJlIGF2YWlsYWJsZSBvbmx5IGZvciByb290
Cj4gPiArICAgICAgICAvLyBsb2FkaW5nIG1pZ2h0IGJlIGF2YWlsYWJsZSBhbHNvIGZvciByZWd1
bGFyIHVzZXIKPiA+ICsgICAgICAgIFNQSUNFX0RFQlVHKCIlczogY2FuJ3QgJXNsb2FkICVzLCBy
ZXMgJWQsIGVycm5vICVkIiwKPiA+ICsgICAgICAgICAgICBfX0ZVTkNUSU9OX18sIGxvYWQgPyAi
IiA6ICJ1biIsIHVuaXQtPmZpbGVuYW1lLCBlcnJvciwgZXJybm8pOwo+ID4gKyAgICB9Cj4gPiAr
ICAgIGNsb3NlKGZkKTsKPiA+ICsgICAgcmV0dXJuIGVycm9yOwo+ID4gK30KPiA+ICsKPiA+ICtz
dGF0aWMgaW50IGNkX2RldmljZV9jaGVjayhTcGljZUNkTFUgKnVuaXQpCj4gPiArewo+ID4gKyAg
ICBpbnQgZXJyb3I7Cj4gPiArICAgIGlmICghdW5pdC0+ZGV2aWNlIHx8ICF1bml0LT5maWxlbmFt
ZSkgewo+ID4gKyAgICAgICAgcmV0dXJuIC0xOwo+ID4gKyAgICB9Cj4gPiArICAgIGludCBmZCA9
IG9wZW4odW5pdC0+ZmlsZW5hbWUsIE9fUkRPTkxZIHwgT19OT05CTE9DSyk7Cj4gPiArICAgIGlm
IChmZCA8IDApIHsKPiA+ICsgICAgICAgIHJldHVybiAtMTsKPiA+ICsgICAgfQo+ID4gKyAgICBl
cnJvciA9IGlvY3RsKGZkLCBDRFJPTV9EUklWRV9TVEFUVVMsIDApOwo+ID4gKyAgICBlcnJvciA9
IChlcnJvciA9PSBDRFNfRElTQ19PSykgPyAwIDogLTE7Cj4gPiArICAgIGlmICghZXJyb3IpIHsK
PiA+ICsgICAgICAgIGVycm9yID0gaW9jdGwoZmQsIENEUk9NX0RJU0NfU1RBVFVTLCAwKTsKPiA+
ICsgICAgICAgIGVycm9yID0gKGVycm9yID09IENEU19EQVRBXzEpID8gMCA6IC0xOwo+ID4gKyAg
ICB9Cj4gPiArICAgIGNsb3NlKGZkKTsKPiA+ICsgICAgcmV0dXJuIGVycm9yOwo+ID4gK30KPiA+
ICsKPiA+ICsjZWxzZQo+ID4gKwo+ID4gK3N0YXRpYyBnYm9vbGVhbiBpc19kZXZpY2VfbmFtZShj
b25zdCBjaGFyICpmaWxlbmFtZSkKPiA+ICt7Cj4gPiArICAgIGdib29sZWFuIGIgPSBzdHJsZW4o
ZmlsZW5hbWUpID09IDIgJiYgZmlsZW5hbWVbMV0gPT0gJzonOwo+ID4gKyAgICByZXR1cm4gYjsK
Pgo+IEhlcmUgIjo6IiBvciAiMDoiIGFyZSBhY2NlcHRlZC4gSSBoYXZlIGEgZm9sbG93IHVwIGZv
ciB0aGlzLgo+Cj4gPiArfQo+ID4gKwo+ID4gK3N0YXRpYyBIQU5ETEUgb3Blbl9maWxlKGNvbnN0
IGNoYXIgKmZpbGVuYW1lKQo+ID4gK3sKPiA+ICsgICAgSEFORExFIGggPSBDcmVhdGVGaWxlQShm
aWxlbmFtZSwKPgo+IE1pbm9yIGJ1dCBtYXliZSB3ZSB3YW50IHRvIGNvbnZlcnQgZnJvbSB1dGY4
ICh1c3VhbGx5IHVzZWQgYnkKPiBHTGliKSB0byB1dGYxNiBhbmQgdXNlIENyZWF0ZUZpbGVXLgo+
Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgR0VORVJJQ19SRUFELAo+ID4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgIEZJTEVfU0hBUkVfUkVBRCB8IEZJTEVfU0hBUkVfV1JJVEUs
Cj4KPiBUaGlzIHdpbGwgYWxsb3cgb3RoZXIgcHJvZ3JhbSB0byBjaGFuZ2UgdGhlIElTTyB3aGls
ZSB0aGUgcHJvZ3JhbSBpcwo+IHJ1bm5pbmcuIElzIHRoaXMgd2FudGVkPyBJIGtub3cgaXQncyBj
b21wYXRpYmxlIHdpdGggVW5peCBzb21laG93IGJ1dAo+IEkgdGhpbmsgdXN1YWxseSBvbiBXaW5k
b3dzIHlvdSBkb24ndCBleHBlY3QgdGhpcy4KPiBCdXQgaG9uZXN0bHkgaXMganVzdCBhIG1pbm9y
Lgo+Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgTlVMTCwgT1BFTl9FWElTVElORywK
PiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAwLAo+ID4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgIE5VTEwpOwo+ID4gKyAgICBpZiAoaCA9PSBJTlZBTElEX0hBTkRMRV9WQUxVRSkg
ewo+ID4gKyAgICAgICAgaCA9IE5VTEw7Cj4gPiArICAgIH0KPiA+ICsgICAgcmV0dXJuIGg7Cj4g
PiArfQo+ID4gKwo+ID4gK3N0YXRpYyB1aW50MzJfdCBpb2N0bF9vdXQoSEFORExFIGgsIHVpbnQz
Ml90IGNvZGUsIHZvaWQgKm91dF9idWZmZXIsCj4gPiB1aW50MzJfdCBvdXRfc2l6ZSkKPiA+ICt7
Cj4gPiArICAgIHVpbnQzMl90IGVycm9yOwo+ID4gKyAgICBEV09SRCByZXQ7Cj4gPiArICAgIEJP
T0wgYiA9IERldmljZUlvQ29udHJvbChoLCBjb2RlLCBOVUxMLCAwLCBvdXRfYnVmZmVyLCBvdXRf
c2l6ZSwgJnJldCwKPiA+IE5VTEwpOwo+ID4gKyAgICBlcnJvciA9IGIgPyAwIDogR2V0TGFzdEVy
cm9yKCk7Cj4gPiArICAgIHJldHVybiBlcnJvcjsKPiA+ICt9Cj4gPiArCj4gPiArc3RhdGljIHVp
bnQzMl90IGlvY3RsX25vbmUoSEFORExFIGgsIHVpbnQzMl90IGNvZGUpCj4gPiArewo+ID4gKyAg
ICByZXR1cm4gaW9jdGxfb3V0KGgsIGNvZGUsIE5VTEwsIDApOwo+ID4gK30KPiA+ICsKPiA+ICtz
dGF0aWMgZ2Jvb2xlYW4gY2hlY2tfZGV2aWNlKEhBTkRMRSBoKQo+ID4gK3sKPiA+ICsgICAgR0VU
X0NPTkZJR1VSQVRJT05fSU9DVExfSU5QVVQgY2ZnSW4gPQo+ID4gKyAgICAgICAgeyBGZWF0dXJl
Q2RSZWFkLCBTQ1NJX0dFVF9DT05GSUdVUkFUSU9OX1JFUVVFU1RfVFlQRV9BTEwsIHt9IH07Cj4g
PiArICAgIERXT1JEIHJldDsKPiA+ICsgICAgR0VUX0NPTkZJR1VSQVRJT05fSEVBREVSIGNmZ091
dDsKPiA+ICsgICAgcmV0dXJuIERldmljZUlvQ29udHJvbChoLCBJT0NUTF9DRFJPTV9HRVRfQ09O
RklHVVJBVElPTiwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAmY2ZnSW4sIHNpemVv
ZihjZmdJbiksICZjZmdPdXQsIHNpemVvZihjZmdPdXQpLAo+ID4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICZyZXQsIE5VTEwpOwo+ID4gK30KPiA+ICsKPiA+ICtzdGF0aWMgaW50IGNkX2Rl
dmljZV9vcGVuX3N0cmVhbShTcGljZUNkTFUgKnVuaXQsIGNvbnN0IGNoYXIgKmZpbGVuYW1lKQo+
ID4gK3sKPiA+ICsgICAgaW50IGVycm9yID0gMDsKPiA+ICsgICAgSEFORExFIGg7Cj4gPiArICAg
IHVuaXQtPmRldmljZSA9IDA7Cj4gPiArICAgIGlmICghdW5pdC0+ZmlsZW5hbWUgJiYgIWZpbGVu
YW1lKSB7Cj4gPiArICAgICAgICBTUElDRV9ERUJVRygiJXM6IHVubmFtZWQgZmlsZSIsIF9fRlVO
Q1RJT05fXyk7Cj4gPiArICAgICAgICByZXR1cm4gLTE7Cj4gPiArICAgIH0KPiA+ICsgICAgaWYg
KHVuaXQtPmZpbGVuYW1lICYmIGZpbGVuYW1lKSB7Cj4gPiArICAgICAgICBnX2ZyZWUodW5pdC0+
ZmlsZW5hbWUpOwo+ID4gKyAgICAgICAgdW5pdC0+ZmlsZW5hbWUgPSBOVUxMOwo+ID4gKyAgICB9
Cj4gPiArICAgIGlmICghZmlsZW5hbWUpIHsKPiA+ICsgICAgICAgIC8vIHJlb3BlbmluZyB0aGUg
c3RyZWFtIG9uIGV4aXN0aW5nIGZpbGUgbmFtZQo+ID4gKyAgICB9IGVsc2UgaWYgKGlzX2Rldmlj
ZV9uYW1lKGZpbGVuYW1lKSkgewo+ID4gKyAgICAgICAgdW5pdC0+ZmlsZW5hbWUgPSBnX3N0cmR1
cF9wcmludGYoIlxcXFwuXFwlcyIsIGZpbGVuYW1lKTsKPiA+ICsgICAgfSBlbHNlIHsKPiA+ICsg
ICAgICAgIHVuaXQtPmZpbGVuYW1lID0gZ19zdHJkdXAoZmlsZW5hbWUpOwo+ID4gKyAgICB9Cj4g
PiArICAgIGggPSBvcGVuX2ZpbGUodW5pdC0+ZmlsZW5hbWUpOwo+ID4gKyAgICBpZiAoaCkgewo+
ID4gKyAgICAgICAgTEFSR0VfSU5URUdFUiBzaXplID0geyAwIH07Cj4gPiArICAgICAgICBpZiAo
IUdldEZpbGVTaXplRXgoaCwgJnNpemUpKSB7Cj4gPiArICAgICAgICAgICAgdWludDY0X3QgYnVm
ZmVyWzI1Nl07Cj4gPiArICAgICAgICAgICAgdWludDMyX3QgcmVzOwo+ID4gKyAgICAgICAgICAg
IHVuaXQtPmRldmljZSA9IGNoZWNrX2RldmljZShoKTsKPiA+ICsgICAgICAgICAgICBTUElDRV9E
RUJVRygiJXM6IENEIGRldmljZSAlc3JlY29nbml6ZWQgb24gJXMiLAo+ID4gKyAgICAgICAgICAg
ICAgICBfX0ZVTkNUSU9OX18sIHVuaXQtPmRldmljZSA/ICIiIDogIk5PVCAiLCB1bml0LT5maWxl
bmFtZSk7Cj4gPiArICAgICAgICAgICAgcmVzID0gaW9jdGxfb3V0KGgsIElPQ1RMX0RJU0tfR0VU
X0RSSVZFX0dFT01FVFJZX0VYLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZm
ZXIsIHNpemVvZihidWZmZXIpKTsKPiA+ICsgICAgICAgICAgICBpZiAoIXJlcykKPiA+ICsgICAg
ICAgICAgICB7Cj4gPiArICAgICAgICAgICAgICAgIERJU0tfR0VPTUVUUllfRVggKnBnID0gKERJ
U0tfR0VPTUVUUllfRVggKilidWZmZXI7Cj4gPiArICAgICAgICAgICAgICAgIHVuaXQtPmJsb2Nr
U2l6ZSA9IHBnLT5HZW9tZXRyeS5CeXRlc1BlclNlY3RvcjsKPiA+ICsgICAgICAgICAgICAgICAg
c2l6ZSA9IHBnLT5EaXNrU2l6ZTsKPiA+ICsgICAgICAgICAgICB9IGVsc2Ugewo+ID4gKyAgICAg
ICAgICAgICAgICBTUElDRV9ERUJVRygiJXM6IGNhbid0IG9idGFpbiBzaXplIG9mICVzIChlcnJv
ciAldSkiLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgX19GVU5DVElPTl9fLCB1bml0LT5maWxl
bmFtZSwgcmVzKTsKPiA+ICsgICAgICAgICAgICB9Cj4gPiArICAgICAgICB9Cj4gPiArICAgICAg
ICB1bml0LT5zaXplID0gc2l6ZS5RdWFkUGFydDsKPiA+ICsgICAgICAgIENsb3NlSGFuZGxlKGgp
Owo+ID4gKyAgICAgICAgaWYgKHVuaXQtPnNpemUpIHsKPiA+ICsgICAgICAgICAgICB1bml0LT5m
aWxlX29iamVjdCA9IGdfZmlsZV9uZXdfZm9yX3BhdGgodW5pdC0+ZmlsZW5hbWUpOwo+ID4gKyAg
ICAgICAgICAgIHVuaXQtPnN0cmVhbSA9IGdfZmlsZV9yZWFkKHVuaXQtPmZpbGVfb2JqZWN0LCBO
VUxMLCBOVUxMKTsKPiA+ICsgICAgICAgIH0KPiA+ICsgICAgICAgIGlmICghdW5pdC0+c3RyZWFt
KSB7Cj4gPiArICAgICAgICAgICAgU1BJQ0VfREVCVUcoIiVzOiBjYW4ndCBvcGVuIHN0cmVhbSBv
biAlcyIsIF9fRlVOQ1RJT05fXywKPiA+IHVuaXQtPmZpbGVuYW1lKTsKPiA+ICsgICAgICAgICAg
ICBnX29iamVjdF91bnJlZih1bml0LT5maWxlX29iamVjdCk7Cj4gPiArICAgICAgICAgICAgdW5p
dC0+ZmlsZV9vYmplY3QgPSBOVUxMOwo+ID4gKyAgICAgICAgICAgIGVycm9yID0gLTE7Cj4gPiAr
ICAgICAgICB9Cj4gPiArICAgIH0gZWxzZSB7Cj4gPiArICAgICAgICBTUElDRV9ERUJVRygiJXM6
IGNhbid0IG9wZW4gZmlsZSAlcyIsIF9fRlVOQ1RJT05fXywgdW5pdC0+ZmlsZW5hbWUpOwo+ID4g
KyAgICAgICAgZXJyb3IgPSAtMTsKPiA+ICsgICAgfQo+ID4gKyAgICByZXR1cm4gZXJyb3I7Cj4g
PiArfQo+ID4gKwo+ID4gK3N0YXRpYyBpbnQgY2RfZGV2aWNlX2xvYWQoU3BpY2VDZExVICp1bml0
LCBnYm9vbGVhbiBsb2FkKQo+ID4gK3sKPiA+ICsgICAgaW50IGVycm9yID0gMDsKPiA+ICsgICAg
SEFORExFIGg7Cj4gPiArICAgIGlmICghdW5pdC0+ZGV2aWNlIHx8ICF1bml0LT5maWxlbmFtZSkg
ewo+ID4gKyAgICAgICAgcmV0dXJuIC0xOwo+ID4gKyAgICB9Cj4gPiArICAgIGggPSBvcGVuX2Zp
bGUodW5pdC0+ZmlsZW5hbWUpOwo+ID4gKyAgICBpZiAoaCkgewo+ID4gKyAgICAgICAgdWludDMy
X3QgcmVzID0gaW9jdGxfbm9uZShoLCBsb2FkID8gSU9DVExfU1RPUkFHRV9MT0FEX01FRElBIDoK
PiA+IElPQ1RMX1NUT1JBR0VfRUpFQ1RfTUVESUEpOwo+ID4gKyAgICAgICAgaWYgKHJlcykgewo+
ID4gKyAgICAgICAgICAgIFNQSUNFX0RFQlVHKCIlczogY2FuJ3QgJXNsb2FkICVzLCB3aW4gZXJy
b3IgJXUiLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgIF9fRlVOQ1RJT05fXywgbG9hZCA/
ICIiIDogInVuIiwgdW5pdC0+ZmlsZW5hbWUsCj4gPiByZXMpOwo+ID4gKyAgICAgICAgICAgIGVy
cm9yID0gLTE7Cj4gPiArICAgICAgICB9IGVsc2Ugewo+ID4gKyAgICAgICAgICAgIFNQSUNFX0RF
QlVHKCIlczogZGV2aWNlICVzIFslc10iLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgIF9f
RlVOQ1RJT05fXywgbG9hZCA/ICJsb2FkZWQiIDogImVqZWN0ZWQiLAo+ID4gdW5pdC0+ZmlsZW5h
bWUpOwo+ID4gKyAgICAgICAgfQo+ID4gKyAgICAgICAgQ2xvc2VIYW5kbGUoaCk7Cj4gPiArICAg
IH0KPiA+ICsgICAgcmV0dXJuIGVycm9yOwo+ID4gK30KPiA+ICsKPiA+ICtzdGF0aWMgaW50IGNk
X2RldmljZV9jaGVjayhTcGljZUNkTFUgKnVuaXQpCj4gPiArewo+ID4gKyAgICBpbnQgZXJyb3Ig
PSAwOwo+ID4gKyAgICBDRFJPTV9ESVNLX0RBVEEgZGF0YTsKPiA+ICsgICAgSEFORExFIGg7Cj4g
PiArICAgIGlmICghdW5pdC0+ZGV2aWNlIHx8ICF1bml0LT5maWxlbmFtZSkgewo+ID4gKyAgICAg
ICAgcmV0dXJuIC0xOwo+ID4gKyAgICB9Cj4gPiArICAgIGggPSBvcGVuX2ZpbGUodW5pdC0+Zmls
ZW5hbWUpOwo+ID4gKyAgICBpZiAoaCkgewo+ID4gKyAgICAgICAgdWludDMyX3QgcmVzID0gaW9j
dGxfbm9uZShoLCBJT0NUTF9TVE9SQUdFX0NIRUNLX1ZFUklGWSk7Cj4gPiArICAgICAgICBpZiAo
IXJlcykgewo+ID4gKyAgICAgICAgICAgIHJlcyA9IGlvY3RsX291dChoLCBJT0NUTF9DRFJPTV9E
SVNLX1RZUEUsICZkYXRhLCBzaXplb2YoZGF0YSkpOwo+ID4gKyAgICAgICAgfQo+ID4gKyAgICAg
ICAgaWYgKHJlcyAhPSAwIHx8IGRhdGEuRGlza0RhdGEgIT0gQ0RST01fRElTS19EQVRBX1RSQUNL
KSB7Cj4gPiArICAgICAgICAgICAgZXJyb3IgPSAtMTsKPiA+ICsgICAgICAgIH0KPiA+ICsgICAg
ICAgIENsb3NlSGFuZGxlKGgpOwo+ID4gKyAgICB9Cj4gPiArICAgIHJldHVybiBlcnJvcjsKPiA+
ICt9Cj4gPiArCj4gPiArI2VuZGlmCj4gPiArCj4gPiArc3RhdGljIGdib29sZWFuIG9wZW5fc3Ry
ZWFtKFNwaWNlQ2RMVSAqdW5pdCwgY29uc3QgY2hhciAqZmlsZW5hbWUpCj4gPiArewo+ID4gKyAg
ICBnYm9vbGVhbiBiID0gRkFMU0U7Cj4gPiArICAgIGIgPSBjZF9kZXZpY2Vfb3Blbl9zdHJlYW0o
dW5pdCwgZmlsZW5hbWUpID09IDA7Cj4gPiArICAgIHJldHVybiBiOwo+ID4gK30KPiA+ICsKPiA+
ICtzdGF0aWMgdm9pZCBjbG9zZV9zdHJlYW0oU3BpY2VDZExVICp1bml0KQo+ID4gK3sKPiA+ICsg
ICAgaWYgKHVuaXQtPnN0cmVhbSkgewo+ID4gKyAgICAgICAgZ19vYmplY3RfdW5yZWYodW5pdC0+
c3RyZWFtKTsKPiA+ICsgICAgICAgIHVuaXQtPnN0cmVhbSA9IE5VTEw7Cj4gPiArICAgIH0KPiA+
ICsgICAgaWYgKHVuaXQtPmZpbGVfb2JqZWN0KSB7Cj4gPiArICAgICAgICBnX29iamVjdF91bnJl
Zih1bml0LT5maWxlX29iamVjdCk7Cj4gPiArICAgICAgICB1bml0LT5maWxlX29iamVjdCA9IE5V
TEw7Cj4gPiArICAgIH0KPiA+ICt9Cj4gPiArCj4gPiArc3RhdGljIGdib29sZWFuIGxvYWRfbHVu
KFVzYkNkICpkLCBpbnQgdW5pdCwgZ2Jvb2xlYW4gbG9hZCkKPiA+ICt7Cj4gPiArICAgIGdib29s
ZWFuIGIgPSBUUlVFOwo+ID4gKyAgICBpZiAobG9hZCAmJiBkLT51bml0c1t1bml0XS5kZXZpY2Up
IHsKPiA+ICsgICAgICAgIC8vIHRoZXJlIGlzIG9uZSBwb3NzaWJsZSBwcm9ibGVtIGluIGNhc2Ug
b3VyIGJhY2tlbmQgaXMgdGhlCj4gPiArICAgICAgICAvLyBsb2NhbCBDRCBkZXZpY2UgYW5kIGl0
IGlzIGVqZWN0ZWQKPiA+ICsgICAgICAgIGNkX2RldmljZV9sb2FkKCZkLT51bml0c1t1bml0XSwg
VFJVRSk7Cj4gPiArICAgICAgICBjbG9zZV9zdHJlYW0oJmQtPnVuaXRzW3VuaXRdKTsKPiA+ICsg
ICAgICAgIGlmIChjZF9kZXZpY2VfY2hlY2soJmQtPnVuaXRzW3VuaXRdKSB8fAo+ID4gIW9wZW5f
c3RyZWFtKCZkLT51bml0c1t1bml0XSwgTlVMTCkpIHsKPiA+ICsgICAgICAgICAgICByZXR1cm4g
RkFMU0U7Cj4gPiArICAgICAgICB9Cj4gPiArICAgIH0KPiA+ICsKPiA+ICsgICAgaWYgKGxvYWQp
IHsKPiA+ICsgICAgICAgIENkU2NzaU1lZGlhUGFyYW1ldGVycyBtZWRpYV9wYXJhbXMgPSB7IDAg
fTsKPiA+ICsKPiA+ICsgICAgICAgIG1lZGlhX3BhcmFtcy5zdHJlYW0gPSBkLT51bml0c1t1bml0
XS5zdHJlYW07Cj4gPiArICAgICAgICBtZWRpYV9wYXJhbXMuc2l6ZSA9IGQtPnVuaXRzW3VuaXRd
LnNpemU7Cj4gPiArICAgICAgICBtZWRpYV9wYXJhbXMuYmxvY2tfc2l6ZSA9IGQtPnVuaXRzW3Vu
aXRdLmJsb2NrU2l6ZTsKPiA+ICsgICAgICAgIGlmIChtZWRpYV9wYXJhbXMuYmxvY2tfc2l6ZSA9
PSBDRF9ERVZfQkxPQ0tfU0laRSAmJgo+ID4gKyAgICAgICAgICAgIG1lZGlhX3BhcmFtcy5zaXpl
ICUgRFZEX0RFVl9CTE9DS19TSVpFID09IDApIHsKPiA+ICsgICAgICAgICAgICBtZWRpYV9wYXJh
bXMuYmxvY2tfc2l6ZSA9IERWRF9ERVZfQkxPQ0tfU0laRTsKPiA+ICsgICAgICAgIH0KPiA+ICsg
ICAgICAgIFNQSUNFX0RFQlVHKCIlczogbG9hZGluZyAlcywgc2l6ZSAlIiBQUkl1NjQgIiwgYmxv
Y2sgJXUiLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgX19GVU5DVElPTl9fLCBkLT51bml0c1t1
bml0XS5maWxlbmFtZSwKPiA+IG1lZGlhX3BhcmFtcy5zaXplLCBtZWRpYV9wYXJhbXMuYmxvY2tf
c2l6ZSk7Cj4gPiArCj4gPiArICAgICAgICBiID0gIWNkX3VzYl9idWxrX21zZF9sb2FkKGQtPm1z
YywgdW5pdCwgJm1lZGlhX3BhcmFtcyk7Cj4gPiArCj4gPiArICAgICAgICBkLT51bml0c1t1bml0
XS5sb2FkZWQgPSAhIWI7Cj4gPiArCj4gPiArICAgIH0gZWxzZSB7Cj4gPiArICAgICAgICBTUElD
RV9ERUJVRygiJXM6IHVubG9hZGluZyAlcyIsIF9fRlVOQ1RJT05fXywKPiA+IGQtPnVuaXRzW3Vu
aXRdLmZpbGVuYW1lKTsKPiA+ICsgICAgICAgIGNkX3VzYl9idWxrX21zZF91bmxvYWQoZC0+bXNj
LCB1bml0KTsKPiA+ICsgICAgICAgIGQtPnVuaXRzW3VuaXRdLmxvYWRlZCA9IEZBTFNFOwo+ID4g
KyAgICB9Cj4gPiArICAgIHJldHVybiBiOwo+ID4gK30KPiA+ICsKPiA+ICtzdGF0aWMgdm9pZCB1
c2JfY2RfZGVsZXRlKFVzYkNkICpkKQo+ID4gK3sKPiA+ICsgICAgdWludDMyX3QgdW5pdCA9IDA7
Cj4KPiBXaHkgdW5pdCBpcyBhbHdheXMgMD8gSGVyZSBhbmQgaW4gb3RoZXIgcGxhY2VzLgo+IE1h
eWJlIHdvcnRoIGFkZGluZyBhIG1uZW1vbmljPwoKQmVjYXVzZSBjdXJyZW50bHkgd2UgZGVmaW5l
IHRoZSBkZXZpY2UgYXMgc2luZ2xlLXVuaXQuCkJ1dCB0aGUgY29kZSBvZiBNU0QvU0NTSSBpbiBn
ZW5lcmFsIHN1cHBvcnRzIG11bHRpcGxlIHVuaXRzLgoKPgo+ID4gKyAgICBjZF91c2JfYnVsa19t
c2RfdW5yZWFsaXplKGQtPm1zYywgdW5pdCk7Cj4gPiArICAgIGdfY2xlYXJfcG9pbnRlcigmZC0+
dW5pdHNbdW5pdF0uZmlsZW5hbWUsIGdfZnJlZSk7Cj4gPiArICAgIGNsb3NlX3N0cmVhbSgmZC0+
dW5pdHNbdW5pdF0pOwo+ID4gKyAgICBnX2NsZWFyX3BvaW50ZXIoJmQtPm1zYywgY2RfdXNiX2J1
bGtfbXNkX2ZyZWUpOwo+ID4gKyAgICBnX2ZyZWUoZCk7Cj4gPiArfQo+ID4gKwo+ID4gK3N0YXRp
YyBnYm9vbGVhbiB1c2JfY2RfZ2V0X2Rlc2NyaXB0b3IoVXNiQ2QgKmQsIHVpbnQ4X3QgdHlwZSwg
dWludDhfdCBpbmRleCwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHZvaWQgKipidWZmZXIsIHVpbnQxNl90ICpzaXplKQo+ID4gK3sKPiA+ICsgICAgc3RhdGljIHN0
cnVjdCBsaWJ1c2JfZGV2aWNlX2Rlc2NyaXB0b3IgZGVzYyA9Cj4gPiArICAgIHsKPiA+ICsgICAg
ICAgIC5iTGVuZ3RoID0gMTgsCj4gPiArICAgICAgICAuYkRlc2NyaXB0b3JUeXBlID0gTElCVVNC
X0RUX0RFVklDRSwKPiA+ICsgICAgICAgIC5iY2RVU0IgPSBVU0IyX0JDRCwKPiA+ICsgICAgICAg
IC5iRGV2aWNlQ2xhc3MgPSAwLAo+ID4gKyAgICAgICAgLmJEZXZpY2VTdWJDbGFzcyA9IDAsCj4g
PiArICAgICAgICAuYkRldmljZVByb3RvY29sID0gMCwKPiA+ICsgICAgICAgIC5iTWF4UGFja2V0
U2l6ZTAgPSA2NCwKPiA+ICsgICAgICAgIC5pZFZlbmRvciA9IENEX0RFVl9WSUQsCj4gPiArICAg
ICAgICAuaWRQcm9kdWN0ID0gQ0RfREVWX1BJRCwKPiA+ICsgICAgICAgIC5iY2REZXZpY2UgPSAw
eDEwMCwKPiA+ICsgICAgICAgIC5pTWFudWZhY3R1cmVyID0gMSwKPiA+ICsgICAgICAgIC5pUHJv
ZHVjdCA9IDIsCj4gPiArICAgICAgICAuaVNlcmlhbE51bWJlciA9IDMsCj4gPiArICAgICAgICAu
Yk51bUNvbmZpZ3VyYXRpb25zID0gMQo+ID4gKyAgICB9Owo+Cj4gU28gYXJlIHdlIGV4cGVjdGlu
ZyB0aGUgY2FsbGVyIHRvIGJlIGFibGUgdG8gY2hhbmdlIHRoZXNlIHN0YXRpYyBzdHJ1Y3R1cmVz
Pwo+IEJvdGggZnVuY3Rpb24gZGVjbGFyYXRpb24gYW5kIGRhdGEgb25lcyBhcmUgc3VnZ2VzdGlu
ZyBpdC4KPgo+ID4gKyAgICBzdGF0aWMgdWludDhfdCBjZmdbXSA9Cj4gPiArICAgIHsKPiA+ICsg
ICAgICAgIDksIC8vbGVuIG9mIGNmZyBkZXNjCj4gPiArICAgICAgICBMSUJVU0JfRFRfQ09ORklH
LCAvLyBkZXNjIHR5cGUKPiA+ICsgICAgICAgIDB4MjAsIC8vIHdsZW4KPiA+ICsgICAgICAgIDAs
Cj4gPiArICAgICAgICAxLCAvLyBudW0gaWYKPiA+ICsgICAgICAgIDEsIC8vIGNmZyB2YWwKPiA+
ICsgICAgICAgIDAsIC8vIGNmZyBuYW1lCj4gPiArICAgICAgICAweDgwLCAvLyBidXMgcG93ZXJl
ZAo+ID4gKyAgICAgICAgMHgzMiwgLy8gMTAwIG1hCj4gPiArICAgICAgICA5LCAvLyBsZW4gb2Yg
SUYgZGVzYwo+ID4gKyAgICAgICAgTElCVVNCX0RUX0lOVEVSRkFDRSwKPiA+ICsgICAgICAgIDAs
IC8vIG51bSBpZgo+ID4gKyAgICAgICAgMCwgLy8gYWx0IHNldHRpbmcKPiA+ICsgICAgICAgIDIs
IC8vIG51bSBvZiBlbmRwb2ludHMKPiA+ICsgICAgICAgIENEX0RFVl9DTEFTUywKPiA+ICsgICAg
ICAgIENEX0RFVl9TVUJDTEFTUywKPiA+ICsgICAgICAgIENEX0RFVl9QUk9UT0NPTCwKPiA+ICsg
ICAgICAgIDAsIC8vIGlmIG5hbWUKPiA+ICsgICAgICAgIDcsCj4gPiArICAgICAgICBMSUJVU0Jf
RFRfRU5EUE9JTlQsCj4gPiArICAgICAgICAweDgxLCAvLy0+RGlyZWN0aW9uIDogSU4gLSBFbmRw
b2ludElEIDogMQo+ID4gKyAgICAgICAgMHgwMiwgLy8tPkJ1bGsgVHJhbnNmZXIgVHlwZQo+ID4g
KyAgICAgICAgMCwgICAgLy93TWF4UGFja2V0U2l6ZSA6IDB4MDIwMCA9IDB4MjAwIG1heCBieXRl
cwo+ID4gKyAgICAgICAgMiwKPiA+ICsgICAgICAgIDAsICAgIC8vYkludGVydmFsCj4gPiArICAg
ICAgICA3LAo+ID4gKyAgICAgICAgTElCVVNCX0RUX0VORFBPSU5ULAo+ID4gKyAgICAgICAgMHgw
MiwgLy8tPkRpcmVjdGlvbiA6IE9VVCAtIEVuZHBvaW50SUQgOiAyCj4gPiArICAgICAgICAweDAy
LCAvLy0+QnVsayBUcmFuc2ZlciBUeXBlCj4gPiArICAgICAgICAwLCAgICAvL3dNYXhQYWNrZXRT
aXplIDogMHgwMjAwID0gMHgyMDAgbWF4IGJ5dGVzCj4gPiArICAgICAgICAyLAo+ID4gKyAgICAg
ICAgMCwgICAgLy9iSW50ZXJ2YWwKPiA+ICsgICAgfTsKPiA+ICsgICAgc3RhdGljIHVpbnQxNl90
IHMwWzJdID0geyAweDMwNCwgMHg0MDkgfTsKPiA+ICsgICAgc3RhdGljIHVpbnQxNl90IHMxWzhd
ID0geyAweDMxMCwgJ1InLCAnZScsICdkJywgJyAnLCAnSCcsICdhJywgJ3QnIH07Cj4gPiArICAg
IHN0YXRpYyB1aW50MTZfdCBzMls5XSA9IHsgMHgzMTIsICdTJywgJ3AnLCAnaScsICdjJywgJ2Un
LCAnICcsICdDJywgJ0QnCj4KPiBNaW5vcjogdGhlc2Ugd2lsbCB3b3JrIG9ubHkgb24gbGl0dGxl
IGVuZGlhbiwgbm90IGEgYmlnIGlzc3VlIGF0IHRoZSBtb21lbnQgYnV0Cj4gSSBzYXcgb3RoZXIg
Y29kZSBkZWFsaW5nIHdpdGggYmlnIGVuZGlhbiBtYWNoaW5lcy4KPgpDdXJyZW50bHkgSSBkbyBu
b3QgaGF2ZSBhbnkgcG9zc2liaWxpdHkgdG8gdGVzdCB0aGUgY29kZSBvbiBiaWctZW5kaWFuIG1h
Y2hpbmUuCgo+ID4gfTsKPiA+ICsKPiA+ICsgICAgdm9pZCAqcCA9IE5VTEw7Cj4gPiArICAgIHVp
bnQxNl90IGxlbiA9IDA7Cj4gPiArCj4gPiArICAgIHN3aXRjaCAodHlwZSkKPiA+ICsgICAgewo+
ID4gKyAgICAgICAgY2FzZSBMSUJVU0JfRFRfREVWSUNFOgo+ID4gKyAgICAgICAgICAgIHAgPSAm
ZGVzYzsKPiA+ICsgICAgICAgICAgICBsZW4gPSBzaXplb2YoZGVzYyk7Cj4gPiArICAgICAgICAg
ICAgYnJlYWs7Cj4gPiArICAgICAgICBjYXNlIExJQlVTQl9EVF9DT05GSUc6Cj4gPiArICAgICAg
ICAgICAgcCA9IGNmZzsKPiA+ICsgICAgICAgICAgICBsZW4gPSBzaXplb2YoY2ZnKTsKPiA+ICsg
ICAgICAgICAgICBicmVhazsKPiA+ICsgICAgICAgIGNhc2UgTElCVVNCX0RUX1NUUklORzoKPiA+
ICsgICAgICAgICAgICBpZiAoaW5kZXggPT0gMCkgewo+ID4gKyAgICAgICAgICAgICAgICBwID0g
czA7IGxlbiA9IHNpemVvZihzMCk7Cj4gPiArICAgICAgICAgICAgfSBlbHNlIGlmIChpbmRleCA9
PSAxKSB7Cj4gPiArICAgICAgICAgICAgICAgIHAgPSBzMTsgbGVuID0gc2l6ZW9mKHMxKTsKPiA+
ICsgICAgICAgICAgICB9IGVsc2UgaWYgKGluZGV4ID09IDIpIHsKPiA+ICsgICAgICAgICAgICAg
ICAgcCA9IHMyOyBsZW4gPSBzaXplb2YoczIpOwo+ID4gKyAgICAgICAgICAgIH0gZWxzZSBpZiAo
aW5kZXggPT0gMykgewo+ID4gKyAgICAgICAgICAgICAgICBwID0gZC0+c2VyaWFsOyBsZW4gPSBz
aXplb2YoZC0+c2VyaWFsKTsKPiA+ICsgICAgICAgICAgICB9Cj4gPiArICAgICAgICAgICAgYnJl
YWs7Cj4gPiArICAgIH0KPiA+ICsKPiA+ICsgICAgaWYgKHApIHsKPiA+ICsgICAgICAgICpidWZm
ZXIgPSBwOwo+ID4gKyAgICAgICAgKnNpemUgPSBsZW47Cj4gPiArICAgIH0KPiA+ICsKPiA+ICsg
ICAgcmV0dXJuIHAgIT0gTlVMTDsKPiA+ICt9Cj4gPiArCj4gPiArc3RhdGljIHZvaWQgdXNiX2Nk
X2F0dGFjaChVc2JDZCAqZGV2aWNlLCBzdHJ1Y3QgdXNicmVkaXJwYXJzZXIgKnBhcnNlcikKPiA+
ICt7Cj4gPiArICAgIGRldmljZS0+cGFyc2VyID0gcGFyc2VyOwo+ID4gK30KPiA+ICsKPiA+ICtz
dGF0aWMgdm9pZCB1c2JfY2RfZGV0YWNoKFVzYkNkICpkZXZpY2UpCj4gPiArewo+ID4gKyAgICBk
ZXZpY2UtPnBhcnNlciA9IE5VTEw7Cj4gPiArfQo+ID4gKwo+ID4gK3N0YXRpYyB2b2lkIHVzYl9j
ZF9yZXNldChVc2JDZCAqZGV2aWNlKQo+ID4gK3sKPiA+ICsgICAgY2RfdXNiX2J1bGtfbXNkX3Jl
c2V0KGRldmljZS0+bXNjKTsKPiA+ICt9Cj4gPiArCj4gPiArc3RhdGljIHZvaWQgdXNiX2NkX2Nv
bnRyb2xfcmVxdWVzdChVc2JDZCAqZGV2aWNlLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgdWludDhfdCAqZGF0YSwgaW50IGRhdGFfbGVuLAo+ID4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHVzYl9yZWRpcl9jb250cm9sX3BhY2tldF9o
ZWFkZXIKPiA+ICpoLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9p
ZCAqKmJ1ZmZlcikKPiA+ICt7Cj4gPiArICAgIHVpbnQ4X3QgcmVxdHlwZSA9IGgtPnJlcXVlc3R0
eXBlICYgMHg3ZjsKPiA+ICsgICAgaWYgKCFkZXZpY2UtPm1zYykgewo+ID4gKyAgICAgICAgcmV0
dXJuOwo+ID4gKyAgICB9Cj4gPiArICAgIGlmIChyZXF0eXBlID09IChMSUJVU0JfUkVRVUVTVF9U
WVBFX1NUQU5EQVJEIHwKPiA+IExJQlVTQl9SRUNJUElFTlRfRU5EUE9JTlQpKSB7Cj4gPiArICAg
ICAgICAvLyBtaWdodCBiZSBjbGVhciBzdGFsbCByZXF1ZXN0Cj4gPiArICAgICAgICBoLT5sZW5n
dGggPSAwOwo+ID4gKyAgICAgICAgaC0+c3RhdHVzID0gdXNiX3JlZGlyX3N1Y2Nlc3M7Owo+ID4g
KyAgICAgICAgcmV0dXJuOwo+ID4gKyAgICB9Cj4gPiArCj4gPiArICAgIGlmIChyZXF0eXBlID09
IChMSUJVU0JfUkVRVUVTVF9UWVBFX0NMQVNTIHwgTElCVVNCX1JFQ0lQSUVOVF9JTlRFUkZBQ0Up
KQo+ID4gewo+ID4gKyAgICAgICAgc3dpdGNoIChoLT5yZXF1ZXN0KSB7Cj4gPiArICAgICAgICAg
ICAgY2FzZSAweEZGOgo+ID4gKyAgICAgICAgICAgICAgICAvLyBtYXNzLXN0b3JhZ2UgY2xhc3Mg
cmVxdWVzdCAncmVzZXQnCj4gPiArICAgICAgICAgICAgICAgIHVzYl9jZF9yZXNldChkZXZpY2Up
Owo+ID4gKyAgICAgICAgICAgICAgICBoLT5sZW5ndGggPSAwOwo+ID4gKyAgICAgICAgICAgICAg
ICBoLT5zdGF0dXMgPSB1c2JfcmVkaXJfc3VjY2VzczsKPiA+ICsgICAgICAgICAgICAgICAgYnJl
YWs7Cj4gPiArICAgICAgICAgICAgY2FzZSAweEZFOgo+ID4gKyAgICAgICAgICAgICAgICAvLyBt
YXNzLXN0b3JhZ2UgY2xhc3MgcmVxdWVzdCAnZ2V0IG1heCBsdW4nCj4gPiArICAgICAgICAgICAg
ICAgIC8vIHJldHVybmluZyBvbmUgYnl0ZQo+ID4gKyAgICAgICAgICAgICAgICBpZiAoaC0+bGVu
Z3RoKSB7Cj4gPiArICAgICAgICAgICAgICAgICAgICBoLT5sZW5ndGggPSAxOwo+ID4gKyAgICAg
ICAgICAgICAgICAgICAgaC0+c3RhdHVzID0gdXNiX3JlZGlyX3N1Y2Nlc3M7Owo+ID4gKyAgICAg
ICAgICAgICAgICAgICAgKmJ1ZmZlciA9ICZkZXZpY2UtPm1heF9sdW5faW5kZXg7Cj4gPiArICAg
ICAgICAgICAgICAgIH0KPiA+ICsgICAgICAgICAgICAgICAgYnJlYWs7Cj4gPiArICAgICAgICB9
Cj4gPiArICAgIH0KPiA+ICt9Cj4gPiArCj4gPiArc3RhdGljIHZvaWQgdXNiX2NkX2J1bGtfb3V0
X3JlcXVlc3QoVXNiQ2QgKmRldmljZSwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICB1aW50OF90IGVwLCB1aW50OF90ICpkYXRhLCBpbnQgZGF0YV9sZW4sCj4gPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDhfdCAqc3RhdHVzKQo+ID4gK3sK
PiA+ICsgICAgaWYgKCFjZF91c2JfYnVsa19tc2Rfd3JpdGUoZGV2aWNlLT5tc2MsIGRhdGEsIGRh
dGFfbGVuKSkgewo+ID4gKyAgICAgICAgKnN0YXR1cyA9IHVzYl9yZWRpcl9zdWNjZXNzOwo+ID4g
KyAgICB9Cj4gPiArfQo+ID4gKwo+ID4gK3ZvaWQgY2RfdXNiX2J1bGtfbXNkX3JlYWRfY29tcGxl
dGUodm9pZCAqdXNlcl9kYXRhLAo+ID4gKyAgICB1aW50OF90ICpkYXRhLCB1aW50MzJfdCBsZW5n
dGgsIENkVXNiQnVsa1N0YXR1cyBzdGF0dXMpCj4gPiArewo+ID4gKyAgICBVc2JDZCAqZCA9IChV
c2JDZCAqKXVzZXJfZGF0YTsKPiA+ICsKPiA+ICsgICAgaWYgKGQtPmRlbGV0aW5nKSB7Cj4gPiAr
ICAgICAgICBkLT5kZWxldGluZyA9IEZBTFNFOwo+ID4gKyAgICAgICAgc3BpY2VfdXNiX2JhY2tl
bmRfZGV2aWNlX2VqZWN0KGQtPmJhY2tlbmQsIGQtPnBhcmVudCk7Cj4KPiBJIHdvdWxkIHBsYWNl
IGEgcmV0dXJuIGFmdGVyIHRoaXMsIHRoZSBwYXJlbnQgaXMgZGVsZXRlZCBhbmQgcG90ZW50aWFs
bHkKPiBhbGwgdGhpcyBzdHJ1Y3R1cmUgdG9vLgoKTm9ib2R5IGlzIGRlbGV0ZWQsIGp1c3QgaW5k
aWNhdGlvbiBpc3N1ZWQgYW5kIHRoZSBkZWxldGUgd2lsbCBoYXBwZW4Kb24gbmV4dCBpZGxlLgpX
ZSBuZWVkIHRvIHJlc3BvbmQgdGhlIFVTQiByZXF1ZXN0LgoKPgo+ID4gKyAgICB9Cj4gPiArCj4g
PiArICAgIGlmIChkLT5wYXJzZXIpIHsKPiA+ICsgICAgICAgIGludCBucmVhZDsKPiA+ICsgICAg
ICAgIHVpbnQzMl90IG9mZnNldCA9IDA7Cj4gPiArCj4gPiArICAgICAgICBmb3IgKG5yZWFkID0g
MDsgbnJlYWQgPCBkLT5udW1fcmVhZHM7IG5yZWFkKyspIHsKPiA+ICsgICAgICAgICAgICB1aW50
MzJfdCBtYXhfbGVuOwo+ID4gKyAgICAgICAgICAgIG1heF9sZW4gPSAoZC0+cmVhZF9idWxrW25y
ZWFkXS5ob3V0Lmxlbmd0aF9oaWdoIDw8IDE2KSB8Cj4gPiArICAgICAgICAgICAgICAgICAgICAg
ICAgZC0+cmVhZF9idWxrW25yZWFkXS5ob3V0Lmxlbmd0aDsKPiA+ICsgICAgICAgICAgICBpZiAo
bWF4X2xlbiA+IGxlbmd0aCkgewo+ID4gKyAgICAgICAgICAgICAgICBtYXhfbGVuID0gbGVuZ3Ro
Owo+ID4gKyAgICAgICAgICAgICAgICBkLT5yZWFkX2J1bGtbbnJlYWRdLmhvdXQubGVuZ3RoID0g
bGVuZ3RoOwo+ID4gKyAgICAgICAgICAgICAgICBkLT5yZWFkX2J1bGtbbnJlYWRdLmhvdXQubGVu
Z3RoX2hpZ2ggPSBsZW5ndGggPj4gMTY7Cj4gPiArICAgICAgICAgICAgfQo+ID4gKwo+ID4gKyAg
ICAgICAgICAgIHN3aXRjaCAoc3RhdHVzKSB7Cj4gPiArICAgICAgICAgICAgY2FzZSBCVUxLX1NU
QVRVU19HT09EOgo+ID4gKyAgICAgICAgICAgICAgICBkLT5yZWFkX2J1bGtbbnJlYWRdLmhvdXQu
c3RhdHVzID0gdXNiX3JlZGlyX3N1Y2Nlc3M7Cj4gPiArICAgICAgICAgICAgICAgIGJyZWFrOwo+
ID4gKyAgICAgICAgICAgIGNhc2UgQlVMS19TVEFUVVNfQ0FOQ0VMRUQ6Cj4gPiArICAgICAgICAg
ICAgICAgIGQtPnJlYWRfYnVsa1tucmVhZF0uaG91dC5zdGF0dXMgPSB1c2JfcmVkaXJfY2FuY2Vs
bGVkOwo+ID4gKyAgICAgICAgICAgICAgICBicmVhazsKPiA+ICsgICAgICAgICAgICBjYXNlIEJV
TEtfU1RBVFVTX0VSUk9SOgo+ID4gKyAgICAgICAgICAgICAgICBkLT5yZWFkX2J1bGtbbnJlYWRd
LmhvdXQuc3RhdHVzID0gdXNiX3JlZGlyX2lvZXJyb3I7Cj4gPiArICAgICAgICAgICAgICAgIGJy
ZWFrOwo+ID4gKyAgICAgICAgICAgIGNhc2UgQlVMS19TVEFUVVNfU1RBTEw6Cj4gPiArICAgICAg
ICAgICAgZGVmYXVsdDoKPiA+ICsgICAgICAgICAgICAgICAgZC0+cmVhZF9idWxrW25yZWFkXS5o
b3V0LnN0YXR1cyA9IHVzYl9yZWRpcl9zdGFsbDsKPiA+ICsgICAgICAgICAgICAgICAgYnJlYWs7
Cj4gPiArICAgICAgICAgICAgfQo+ID4gKwo+ID4gKyAgICAgICAgICAgIFNQSUNFX0RFQlVHKCIl
czogcmVzcG9uZGluZyAlIiBQUkl1NjQgIiB3aXRoIGxlbiAldSBvdXQgb2YgJXUsCj4gPiBzdGF0
dXMgJWQiLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgIF9fRlVOQ1RJT05fXywgZC0+cmVh
ZF9idWxrW25yZWFkXS5pZCwgbWF4X2xlbiwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICBs
ZW5ndGgsIGQtPnJlYWRfYnVsa1tucmVhZF0uaG91dC5zdGF0dXMpOwo+ID4gKyAgICAgICAgICAg
IHVzYnJlZGlycGFyc2VyX3NlbmRfYnVsa19wYWNrZXQoZC0+cGFyc2VyLAo+ID4gZC0+cmVhZF9i
dWxrW25yZWFkXS5pZCwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICZkLT5yZWFkX2J1bGtbbnJlYWRdLmhvdXQsCj4gPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhfbGVuID8gKGRhdGEgKyBvZmZzZXQpIDoKPiA+
IE5VTEwsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBt
YXhfbGVuKTsKPiA+ICsgICAgICAgICAgICBvZmZzZXQgKz0gbWF4X2xlbjsKPiA+ICsgICAgICAg
ICAgICBsZW5ndGggLT0gbWF4X2xlbjsKPiA+ICsgICAgICAgIH0KPiA+ICsgICAgICAgIGQtPm51
bV9yZWFkcyA9IDA7Cj4gPiArICAgICAgICB1c2JyZWRpcnBhcnNlcl9kb193cml0ZShkLT5wYXJz
ZXIpOwo+ID4gKwo+ID4gKyAgICAgICAgaWYgKGxlbmd0aCkgewo+ID4gKyAgICAgICAgICAgIFNQ
SUNFX0RFQlVHKCIlczogRVJST1I6ICV1IGJ5dGVzIHdlcmUgbm90IHJlcG9ydGVkISIsCj4gPiBf
X0ZVTkNUSU9OX18sIGxlbmd0aCk7Cj4gPiArICAgICAgICB9Cj4gPiArCj4gPiArICAgIH0gZWxz
ZSB7Cj4gPiArICAgICAgICBTUElDRV9ERUJVRygiJXM6IGJyb2tlbiBkZXZpY2U8LT5jaGFubmVs
IHJlbGF0aW9uc2hpcCEiLAo+ID4gX19GVU5DVElPTl9fKTsKPiA+ICsgICAgfQo+ID4gK30KPiA+
ICsKPiA+ICsvKiBkZXZpY2UgcmVzZXQgY29tcGxldGlvbiBjYWxsYmFjayAqLwo+ID4gK3ZvaWQg
Y2RfdXNiX2J1bGtfbXNkX3Jlc2V0X2NvbXBsZXRlKHZvaWQgKnVzZXJfZGF0YSwgaW50IHN0YXR1
cykKPiA+ICt7Cj4gPiArICAgIC8vIFVzYkNkICpkID0gKFVzYkNkICopdXNlcl9kYXRhOwo+ID4g
K30KPiA+ICsKPiA+ICtzdGF0aWMgZ2Jvb2xlYW4gdXNiX2NkX2J1bGtfaW5fcmVxdWVzdChVc2JD
ZCAqZCwgdWludDY0X3QgaWQsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBzdHJ1Y3QgdXNiX3JlZGlyX2J1bGtfcGFja2V0X2hlYWRlciAqaCkKPiA+ICt7Cj4gPiArICAg
IGludCByZXM7Cj4gPiArICAgIHVpbnQzMl90IGxlbiA9IChoLT5sZW5ndGhfaGlnaCA8PCAxNikg
fCBoLT5sZW5ndGg7Cj4gPiArICAgIGlmIChkLT5udW1fcmVhZHMgPj0gTUFYX0JVTEtfSU5fUkVR
VUVTVFMpIHsKPiA+ICsgICAgICAgIGgtPmxlbmd0aCA9IGgtPmxlbmd0aF9oaWdoID0gMDsKPiA+
ICsgICAgICAgIFNQSUNFX0RFQlVHKCIlczogdG9vIG1hbnkgcGVuZGluZyByZWFkcyIsIF9fRlVO
Q1RJT05fXyk7Cj4gPiArICAgICAgICBoLT5zdGF0dXMgPSB1c2JfcmVkaXJfYmFiYmxlOwo+ID4g
KyAgICAgICAgcmV0dXJuIEZBTFNFOwo+ID4gKyAgICB9Cj4gPiArCj4gPiArICAgIGlmIChkLT5u
dW1fcmVhZHMpIHsKPiA+ICsgICAgICAgIFNQSUNFX0RFQlVHKCIlczogYWxyZWFkeSBoYXMgJXUg
cGVuZGluZyByZWFkcyIsIF9fRlVOQ1RJT05fXywKPiA+IGQtPm51bV9yZWFkcyk7Cj4gPiArICAg
IH0KPiA+ICsKPiA+ICsgICAgZC0+cmVhZF9idWxrW2QtPm51bV9yZWFkc10uaG91dCA9ICpoOwo+
ID4gKyAgICBkLT5yZWFkX2J1bGtbZC0+bnVtX3JlYWRzXS5pZCA9IGlkOwo+ID4gKyAgICBkLT5u
dW1fcmVhZHMrKzsKPiA+ICsgICAgcmVzID0gY2RfdXNiX2J1bGtfbXNkX3JlYWQoZC0+bXNjLCBs
ZW4pOwo+ID4gKyAgICBpZiAoIXJlcykgewo+ID4gKyAgICAgICAgcmV0dXJuIFRSVUU7Cj4gPiAr
ICAgIH0KPiA+ICsKPiA+ICsgICAgU1BJQ0VfREVCVUcoIiVzOiBlcnJvciBvbiBidWxrIHJlYWQi
LCBfX0ZVTkNUSU9OX18pOwo+ID4gKyAgICBkLT5udW1fcmVhZHMtLTsKPiA+ICsgICAgaC0+bGVu
Z3RoID0gaC0+bGVuZ3RoX2hpZ2ggPSAwOwo+ID4gKyAgICBoLT5zdGF0dXMgPSB1c2JfcmVkaXJf
aW9lcnJvcjsKPiA+ICsKPiA+ICsgICAgcmV0dXJuIEZBTFNFOwo+ID4gK30KPiA+ICsKPiA+ICtz
dGF0aWMgdm9pZCB1c2JfY2RfY2FuY2VsX3JlcXVlc3QoVXNiQ2QgKmQsIHVpbnQ2NF90IGlkKQo+
ID4gK3sKPiA+ICsgICAgdWludDMyX3QgbnJlYWQ7Cj4gPiArCj4gPiArICAgIGZvciAobnJlYWQg
PSAwOyBucmVhZCA8IGQtPm51bV9yZWFkczsgbnJlYWQrKykgewo+ID4gKyAgICAgICAgaWYgKGQt
PnJlYWRfYnVsa1tucmVhZF0uaWQgPT0gaWQpIHsKPiA+ICsgICAgICAgICAgICBpZiAoY2RfdXNi
X2J1bGtfbXNkX2NhbmNlbF9yZWFkKGQtPm1zYykpIHsKPiA+ICsgICAgICAgICAgICAgICAgY2Rf
dXNiX2J1bGtfbXNkX3JlYWRfY29tcGxldGUoZCwgTlVMTCwgMCwKPiA+IEJVTEtfU1RBVFVTX0NB
TkNFTEVEKTsKPiA+ICsgICAgICAgICAgICB9Cj4gPiArICAgICAgICAgICAgcmV0dXJuOwo+ID4g
KyAgICAgICAgfQo+ID4gKyAgICB9Cj4gPiArICAgIFNQSUNFX0RFQlVHKCIlczogRVJST1I6IG5v
IHN1Y2ggaWQgdG8gY2FuY2VsISIsIF9fRlVOQ1RJT05fXyk7Cj4gPiArfQo+ID4gKwo+ID4gKy8v
IGNhbGxlZCB3aGVuIGEgY2hhbmdlIGhhcHBlbnMgb24gU0NTSSBsYXllcgo+ID4gK3ZvaWQgY2Rf
dXNiX2J1bGtfbXNkX2x1bl9jaGFuZ2VkKHZvaWQgKnVzZXJfZGF0YSwgdWludDMyX3QgbHVuKQo+
ID4gK3sKPiA+ICsgICAgVXNiQ2QgKmQgPSAoVXNiQ2QgKil1c2VyX2RhdGE7Cj4gPiArICAgIENk
U2NzaURldmljZUluZm8gY2RfaW5mbzsKPiA+ICsKPiA+ICsgICAgaWYgKCFjZF91c2JfYnVsa19t
c2RfZ2V0X2luZm8oZC0+bXNjLCBsdW4sICZjZF9pbmZvKSkgewo+ID4gKyAgICAgICAgLy8gbG9h
ZCBvciB1bmxvYWQgY29tbWFuZCByZWNlaXZlZCBmcm9tIFNDU0kKPiA+ICsgICAgICAgIGlmIChk
LT51bml0c1tsdW5dLmxvYWRlZCAhPSBjZF9pbmZvLmxvYWRlZCkgewo+ID4gKyAgICAgICAgICAg
IGlmICghbG9hZF9sdW4oZCwgbHVuLCBjZF9pbmZvLmxvYWRlZCkpIHsKPiA+ICsgICAgICAgICAg
ICAgICAgU1BJQ0VfREVCVUcoIiVzOiBsb2FkIGZhaWxlZCwgdW5sb2FkaW5nIHVuaXQiLAo+ID4g
X19GVU5DVElPTl9fKTsKPiA+ICsgICAgICAgICAgICAgICAgY2RfdXNiX2J1bGtfbXNkX3VubG9h
ZChkLT5tc2MsIGx1bik7Cj4gPiArICAgICAgICAgICAgfQo+ID4gKyAgICAgICAgfQo+ID4gKyAg
ICB9Cj4gPiArCj4gPiArICAgIGlmIChkLT5kZWxldGVfb25fZWplY3QpIHsKPiA+ICsgICAgICAg
IGQtPmRlbGV0ZV9vbl9lamVjdCA9IEZBTFNFOwo+ID4gKyAgICAgICAgZC0+ZGVsZXRpbmcgPSBU
UlVFOwo+ID4gKyAgICB9IGVsc2Ugewo+ID4gKyAgICAgICAgc3BpY2VfdXNiX2JhY2tlbmRfZGV2
aWNlX3JlcG9ydF9jaGFuZ2UoZC0+YmFja2VuZCwgZC0+cGFyZW50KTsKPiA+ICsgICAgfQo+ID4g
K30KPiA+ICsKPiA+ICtzdGF0aWMgZ2NoYXIgKnVzYl9jZF9nZXRfcHJvZHVjdF9kZXNjcmlwdGlv
bihVc2JDZCAqZGV2aWNlKQo+ID4gK3sKPiA+ICsgICAgZ2NoYXIgKmJhc2VfbmFtZSA9IGdfcGF0
aF9nZXRfYmFzZW5hbWUoZGV2aWNlLT51bml0c1swXS5maWxlbmFtZSk7Cj4gPiArICAgIGdjaGFy
ICpyZXMgPSBnX3N0cmR1cF9wcmludGYoIlNQSUNFIENEKCVzKSIsIGJhc2VfbmFtZSk7Cj4KPiBN
YXliZSBsZWF2ZSBhIHNwYWNlIGJldHdlZW4gIlNQSUNFIENEIiBhbmQgdGhlIGZpbGUgbmFtZT8K
PiBPbiB0aGUgR1VJIGRvZXMgbm90IGFwcGVhciB0aGF0IGdyZWF0IHdpdGhvdXQuCgpObyBwcm9i
bGVtCgo+Cj4gPiArICAgIGdfZnJlZShiYXNlX25hbWUpOwo+ID4gKyAgICByZXR1cm4gcmVzOwo+
ID4gK30KPiA+ICsKPiA+ICtzdGF0aWMgY29uc3QgVXNiRGV2aWNlT3BzIGRldm9wcyA9Cj4gPiAr
ewo+ID4gKyAgICAuZ2V0X2Rlc2NyaXB0b3IgPSB1c2JfY2RfZ2V0X2Rlc2NyaXB0b3IsCj4gPiAr
ICAgIC5nZXRfcHJvZHVjdF9kZXNjcmlwdGlvbiA9IHVzYl9jZF9nZXRfcHJvZHVjdF9kZXNjcmlw
dGlvbiwKPiA+ICsgICAgLmF0dGFjaCA9IHVzYl9jZF9hdHRhY2gsCj4gPiArICAgIC5yZXNldCA9
IHVzYl9jZF9yZXNldCwKPiA+ICsgICAgLmRldGFjaCA9IHVzYl9jZF9kZXRhY2gsCj4gPiArICAg
IC5jb250cm9sX3JlcXVlc3QgPSB1c2JfY2RfY29udHJvbF9yZXF1ZXN0LAo+ID4gKyAgICAuYnVs
a19vdXRfcmVxdWVzdCA9IHVzYl9jZF9idWxrX291dF9yZXF1ZXN0LAo+ID4gKyAgICAuYnVsa19p
bl9yZXF1ZXN0ID0gdXNiX2NkX2J1bGtfaW5fcmVxdWVzdCwKPiA+ICsgICAgLmNhbmNlbF9yZXF1
ZXN0ID0gdXNiX2NkX2NhbmNlbF9yZXF1ZXN0LAo+ID4gKyAgICAuZGVsZXRlID0gdXNiX2NkX2Rl
bGV0ZSwKPiA+ICt9Owo+ID4gKwo+ID4gK3N0YXRpYyBpbnQgdXNiX2NkX2NyZWF0ZShTcGljZVVz
YkJhY2tlbmQgKmJlLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICBTcGljZVVzYkJhY2tl
bmREZXZpY2UgKnBhcmVudCwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgVXNiQ3JlYXRl
RGV2aWNlUGFyYW1ldGVycyAqcGFyYW0sCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgIFVz
YkNkICoqZGV2KQo+ID4gK3sKPiA+ICsgICAgaW50IGVycm9yID0gMDsKPgo+IElzIHRoaXMgcmVz
dWx0IHZhbHVlIHVzZWQgb3IgcGxhbm5lZCB0byBiZSB1c2VkPyBMb29rcyBsaWtlIHdlIHVzZQo+
IChhbmQgdGhlIGNhbGxlciB0b28pIGxpa2UgYSBib29sZWFuLgo+Cj4gPiArICAgIHVpbnQzMl90
IHVuaXQgPSAwOwo+Cj4gVGhpcyBpcyB0aGUgb3RoZXIgInVuaXQiIGNvbnN0YW50IHNldCB0byAw
IChjb21tZW50IGFib3ZlKS4KClRoZSBjb2RlIGlzIGluIGdlbmVyYWwgd2FzIHByZXBhcmVkIGFs
c28gdG8gd29yayBhbHNvIHdpdGgKbXVsdGlwbGUtdW5pdCBkZXZpY2VzLgpTd2l0Y2ggZnJvbSBz
aW5nbGUtdW5pdCB0byBtdWx0aXBsZS11bml0LCBpZiBuZWVkZWQsIHdpbGwgYmUgdmVyeSBzaW1w
bGUuCgo+Cj4gPiArICAgIFVzYkNkICpkID0gZ19uZXcwKFVzYkNkLCAxKTsKPiA+ICsgICAgQ2RT
Y3NpRGV2aWNlUGFyYW1ldGVycyBkZXZfcGFyYW1zID0geyAwIH07Cj4gPiArCj4gPiArICAgIGQt
PmRldl9vcHMgPSBkZXZvcHM7Cj4gPiArICAgIGQtPmJhY2tlbmQgPSBiZTsKPiA+ICsgICAgZC0+
cGFyZW50ICA9IHBhcmVudDsKPiA+ICsgICAgZC0+ZGVsZXRlX29uX2VqZWN0ID0gISFwYXJhbS0+
ZGV2aWNlX3BhcmFtLmNyZWF0ZV9jZC5kZWxldGVfb25fZWplY3Q7Cj4gPiArICAgIGQtPmxvY2tl
ZCA9ICFkLT5kZWxldGVfb25fZWplY3Q7Cj4gPiArICAgIGQtPnNlcmlhbFswXSA9IDB4MDMwODsK
PiA+ICsgICAgZC0+c2VyaWFsWzFdID0gJ1gnOwo+Cj4gU3BlY2lmaWNhdGlvbnMgc3RhdGUgdGhh
dCB2YWx1ZSBjaGFyYWN0ZXJzIGFyZSAwLTkgYW5kIEEtRiAoY2FwaXRhbCBjYXNlCj4gaGV4YWRl
Y2ltYWwsIHllcyBxdWl0ZSBhIHdhc3RlIG9mIHNwYWNlIEkgd291bGQgc2F5KS4KCldoaWNoIHNw
ZWM/ClRoaXMgaXMgc2VyaWFsIHN0cmluZyBmb3IgVVNCIHRvIGRpc3Rpbmd1aXNoIGJldHdlZW4g
bXVsdGlwbGUgQ0RzLgoKPgo+ID4gKyAgICBkLT5zZXJpYWxbMl0gPSAnMCcgKyBwYXJhbS0+YWRk
cmVzcyAvIDEwOwo+ID4gKyAgICBkLT5zZXJpYWxbM10gPSAnMCcgKyBwYXJhbS0+YWRkcmVzcyAl
IDEwOwo+ID4gKyAgICBkLT5tYXhfbHVuX2luZGV4ID0gTUFYX0xVTl9QRVJfREVWSUNFIC0gMTsK
PiA+ICsKPiA+ICsgICAgZGV2X3BhcmFtcy52ZW5kb3IgPSAiU1BJQ0UiOwo+ID4gKyAgICBkZXZf
cGFyYW1zLnByb2R1Y3QgPSAic2hhcmVkIENEIjsKPgo+IFdoeSBub3QgIlJlZCBIYXQiIGFuZCAi
U1BJQ0UgQ0QiIGV2ZW4gaGVyZT8KCkV2ZXJ5dGhpbmcgeW91IHdhbnQuIFRoZXkgYXJlIFNDU0kg
cGFyYW1ldGVycy4KCj4KPiA+ICsgICAgZGV2X3BhcmFtcy52ZXJzaW9uID0gIjAiOwo+ID4gKwo+
ID4gKyAgICBkLT5tc2MgPSBjZF91c2JfYnVsa19tc2RfYWxsb2MoZCwgTUFYX0xVTl9QRVJfREVW
SUNFKTsKPiA+ICsgICAgaWYgKCFkLT5tc2MpIHsKPiA+ICsgICAgICAgIGdfY2xlYXJfcG9pbnRl
cigmZCwgZ19mcmVlKTsKPiA+ICsgICAgICAgIHBhcmFtLT5lcnJvciA9IGdfZXJyb3JfbmV3KFNQ
SUNFX0NMSUVOVF9FUlJPUiwKPiA+IFNQSUNFX0NMSUVOVF9FUlJPUl9GQUlMRUQsCj4gPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfKCJjYW4ndCBhbGxvY2F0ZSBkZXZpY2Ui
KSk7Cj4gPiArICAgICAgICByZXR1cm4gMTsKPiA+ICsgICAgfQo+ID4gKyAgICBkLT51bml0c1t1
bml0XS5ibG9ja1NpemUgPSBDRF9ERVZfQkxPQ0tfU0laRTsKPiA+ICsgICAgaWYgKCFjZF91c2Jf
YnVsa19tc2RfcmVhbGl6ZShkLT5tc2MsIHVuaXQsICZkZXZfcGFyYW1zKSkgewo+ID4gKyAgICAg
ICAgaWYgKG9wZW5fc3RyZWFtKCZkLT51bml0c1t1bml0XSwKPiA+IHBhcmFtLT5kZXZpY2VfcGFy
YW0uY3JlYXRlX2NkLmZpbGVuYW1lKSAmJgo+ID4gKyAgICAgICAgICAgIGxvYWRfbHVuKGQsIHVu
aXQsIFRSVUUpKSB7Cj4gPiArICAgICAgICAgICAgaWYgKGQtPmxvY2tlZCkgewo+ID4gKyAgICAg
ICAgICAgICAgICBjZF91c2JfYnVsa19tc2RfbG9jayhkLT5tc2MsIHVuaXQsIFRSVUUpOwo+ID4g
KyAgICAgICAgICAgIH0KPiA+ICsgICAgICAgIH0gZWxzZSB7Cj4gPiArICAgICAgICAgICAgY2xv
c2Vfc3RyZWFtKCZkLT51bml0c1t1bml0XSk7Cj4gPiArICAgICAgICAgICAgY2RfdXNiX2J1bGtf
bXNkX3VucmVhbGl6ZShkLT5tc2MsIHVuaXQpOwo+ID4gKyAgICAgICAgICAgIHBhcmFtLT5lcnJv
ciA9IGdfZXJyb3JfbmV3KFNQSUNFX0NMSUVOVF9FUlJPUiwKPiA+IFNQSUNFX0NMSUVOVF9FUlJP
Ul9GQUlMRUQsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXygi
Y2FuJ3QgY3JlYXRlIGRldmljZSB3aXRoICVzIiksCj4gPiArCj4gPiBwYXJhbS0+ZGV2aWNlX3Bh
cmFtLmNyZWF0ZV9jZC5maWxlbmFtZSk7Cj4gPiArICAgICAgICAgICAgZXJyb3IgPSAzOwo+ID4g
KyAgICAgICAgfQo+ID4gKyAgICB9IGVsc2Ugewo+ID4gKyAgICAgICAgZXJyb3IgPSAyOwo+ID4g
KyAgICAgICAgcGFyYW0tPmVycm9yID0gZ19lcnJvcl9uZXcoU1BJQ0VfQ0xJRU5UX0VSUk9SLAo+
ID4gU1BJQ0VfQ0xJRU5UX0VSUk9SX0ZBSUxFRCwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIF8oImNhbid0IGFsbG9jYXRlIGRldmljZSIpKTsKPiA+ICsgICAgfQo+ID4g
KyAgICBpZiAoZXJyb3IpIHsKPiA+ICsgICAgICAgIGdfY2xlYXJfcG9pbnRlcigmZC0+bXNjLCBj
ZF91c2JfYnVsa19tc2RfZnJlZSk7Cj4gPiArICAgICAgICBnX2NsZWFyX3BvaW50ZXIoJmQsIGdf
ZnJlZSk7Cj4gPiArICAgIH0KPiA+ICsKPiA+ICsgICAgKmRldiA9IGQ7Cj4gPiArICAgIHJldHVy
biBlcnJvcjsKPiA+ICt9Cj4gPiArCj4gPiArdm9pZCBzcGljZV91c2JfZGV2aWNlX3JlZ2lzdGVy
X2NkKFNwaWNlVXNiQmFja2VuZCAqYmUpCj4gPiArewo+ID4gKyAgICBzcGljZV91c2JfYmFja2Vu
ZF9yZWdpc3Rlcl9kZXZpY2VfdHlwZShiZSwgVVNCX0RFVl9UWVBFX0NELAo+ID4gdXNiX2NkX2Ny
ZWF0ZSk7Cj4gPiArfQo+ID4gKwo+ID4gKyNlbmRpZiAvKiBVU0VfVVNCUkVESVIgKi8KPgo+IEJ5
IHRoZSB3YXksIHByZXBhcmluZyBzb21lIGZvbGxvdyB1cHMuCj4KPiBGcmVkaWFubwpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpTcGljZS1kZXZlbCBtYWls
aW5nIGxpc3QKU3BpY2UtZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vc3BpY2UtZGV2ZWw=
