Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id D0C921184C
	for <lists+spice-devel@lfdr.de>; Thu,  2 May 2019 13:44:30 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id E6B78892FE;
	Thu,  2 May 2019 11:44:28 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 36282892FE
 for <spice-devel@lists.freedesktop.org>; Thu,  2 May 2019 11:44:28 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx07.intmail.prod.int.phx2.redhat.com
 [10.5.11.22])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id A4B65307D790;
 Thu,  2 May 2019 11:44:27 +0000 (UTC)
Received: from colo-mx.corp.redhat.com
 (colo-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.21])
 by smtp.corp.redhat.com (Postfix) with ESMTPS id 98F891001DD1;
 Thu,  2 May 2019 11:44:27 +0000 (UTC)
Received: from zmail25.collab.prod.int.phx2.redhat.com
 (zmail25.collab.prod.int.phx2.redhat.com [10.5.83.31])
 by colo-mx.corp.redhat.com (Postfix) with ESMTP id 8E2EC3FB10;
 Thu,  2 May 2019 11:44:27 +0000 (UTC)
Date: Thu, 2 May 2019 07:44:26 -0400 (EDT)
From: Frediano Ziglio <fziglio@redhat.com>
To: Jeremy White <jwhite@codeweavers.com>
Message-ID: <1289125181.16003106.1556797466168.JavaMail.zimbra@redhat.com>
In-Reply-To: <20190501161716.15538-3-jwhite@codeweavers.com>
References: <20190501161716.15538-1-jwhite@codeweavers.com>
 <20190501161716.15538-3-jwhite@codeweavers.com>
MIME-Version: 1.0
X-Originating-IP: [10.33.32.3, 10.4.195.25]
Thread-Topic: Initial set of revisions to the dummy driver to add DRI and
 Present.
Thread-Index: AiLTo3OGAeswKmXZnao3JYWJcAUDzw==
X-Scanned-By: MIMEDefang 2.84 on 10.5.11.22
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.45]); Thu, 02 May 2019 11:44:27 +0000 (UTC)
Subject: Re: [Spice-devel] [PATCH v2 x11spice 3/4] Initial set of revisions
 to the dummy driver to add DRI and Present.
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: spice-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

PiAKPiBUaGlzIG1ha2VzIHRoZSBkdW1teSBkcml2ZXIgc2ltaWxhciB0byB0aGUgbW9kZSBzZXR0
aW5nIGRyaXZlci4KPiAKPiBUaGlzIHdvcmsgd2FzIGRvbmUgYnkgSGVucmkgVmVyYmVldCwgd2hp
Y2ggd2FzIGluIHR1cm4gYmFzZWQgaGVhdmlseSBvbgo+IHRoZSBYb3JnIG1vZGVzZXR0aW5nIGRy
aXZlci4KPiAKPiBTaWduZWQtb2ZmLWJ5OiBKZXJlbXkgV2hpdGUgPGp3aGl0ZUBjb2Rld2VhdmVy
cy5jb20+Cj4gLS0tCj4gIHNwaWNlLXZpZGVvLWR1bW15Ly5naXRpZ25vcmUgICAgICAgICAgICAg
ICAgICAgICAgIHwgICA5ICsKPiAgc3BpY2UtdmlkZW8tZHVtbXkvUkVBRE1FLm1kICAgICAgICAg
ICAgICAgICAgICAgICAgfCAgMTUgKy0KPiAgc3BpY2UtdmlkZW8tZHVtbXkvY29uZmlndXJlLmFj
ICAgICAgICAgICAgICAgICAgICAgfCAgMTIgKy0KPiAgc3BpY2UtdmlkZW8tZHVtbXkvc3BpY2Vk
dW1teS5jb25mICAgICAgICAgICAgICAgICAgfCAgMTggKysKPiAgc3BpY2UtdmlkZW8tZHVtbXkv
c3JjL01ha2VmaWxlLmFtICAgICAgICAgICAgICAgICAgfCAgMTYgKy0KPiAgc3BpY2UtdmlkZW8t
ZHVtbXkvc3JjL2RyaTIuYyAgICAgICAgICAgICAgICAgICAgICAgfCAyODgKPiAgKysrKysrKysr
KysrKysrKysrKysrCj4gIHNwaWNlLXZpZGVvLWR1bW15L3NyYy9kdW1teV9jdXJzb3IuYyAgICAg
ICAgICAgICAgIHwgICAyICstCj4gIHNwaWNlLXZpZGVvLWR1bW15L3NyYy9wcmVzZW50LmMgICAg
ICAgICAgICAgICAgICAgIHwgMTA0ICsrKysrKysrCj4gIHNwaWNlLXZpZGVvLWR1bW15L3NyYy97
ZHVtbXkuaCA9PiBzcGljZWR1bW15Lmh9ICAgIHwgIDEwICsKPiAgLi4uL3NyYy97ZHVtbXlfZHJp
dmVyLmMgPT4gc3BpY2VkdW1teV9kcml2ZXIuY30gICAgfCAgODIgKysrKystCj4gIDEwIGZpbGVz
IGNoYW5nZWQsIDUyMyBpbnNlcnRpb25zKCspLCAzMyBkZWxldGlvbnMoLSkKPiAgY3JlYXRlIG1v
ZGUgMTAwNjQ0IHNwaWNlLXZpZGVvLWR1bW15Ly5naXRpZ25vcmUKPiAgY3JlYXRlIG1vZGUgMTAw
NjQ0IHNwaWNlLXZpZGVvLWR1bW15L3NwaWNlZHVtbXkuY29uZgo+ICBjcmVhdGUgbW9kZSAxMDA2
NDQgc3BpY2UtdmlkZW8tZHVtbXkvc3JjL2RyaTIuYwo+ICBjcmVhdGUgbW9kZSAxMDA2NDQgc3Bp
Y2UtdmlkZW8tZHVtbXkvc3JjL3ByZXNlbnQuYwo+ICByZW5hbWUgc3BpY2UtdmlkZW8tZHVtbXkv
c3JjL3tkdW1teS5oID0+IHNwaWNlZHVtbXkuaH0gKDgzJSkKPiAgcmVuYW1lIHNwaWNlLXZpZGVv
LWR1bW15L3NyYy97ZHVtbXlfZHJpdmVyLmMgPT4gc3BpY2VkdW1teV9kcml2ZXIuY30gKDg4JSkK
PiAKPiBkaWZmIC0tZ2l0IGEvc3BpY2UtdmlkZW8tZHVtbXkvLmdpdGlnbm9yZSBiL3NwaWNlLXZp
ZGVvLWR1bW15Ly5naXRpZ25vcmUKPiBuZXcgZmlsZSBtb2RlIDEwMDY0NAo+IGluZGV4IDAwMDAw
MDAuLjliNGIxMWYKPiAtLS0gL2Rldi9udWxsCj4gKysrIGIvc3BpY2UtdmlkZW8tZHVtbXkvLmdp
dGlnbm9yZQo+IEBAIC0wLDAgKzEsOSBAQAo+ICtjb25maWcuaAo+ICtjb25maWcuaC5pbgo+ICts
aWJ0b29sCj4gK2x0bWFpbi5zaAo+ICtzdGFtcC1oMQo+ICtzcmMvLmxpYnMKPiArKi5vCj4gKyou
bG8KPiArKi5sYQo+IGRpZmYgLS1naXQgYS9zcGljZS12aWRlby1kdW1teS9SRUFETUUubWQgYi9z
cGljZS12aWRlby1kdW1teS9SRUFETUUubWQKPiBpbmRleCAyYTg0YmMzLi4zZTc3ZTRkIDEwMDY0
NAo+IC0tLSBhL3NwaWNlLXZpZGVvLWR1bW15L1JFQURNRS5tZAo+ICsrKyBiL3NwaWNlLXZpZGVv
LWR1bW15L1JFQURNRS5tZAo+IEBAIC0xLDE4ICsxLDE1IEBACj4gLXhmODYtdmlkZW8tZHVtbXkg
LSB2aXJ0dWFsL29mZnNjcmVlbiBmcmFtZSBidWZmZXIgZHJpdmVyIGZvciB0aGUgWG9yZyBYCj4g
c2VydmVyCj4gK3NwaWNlLXZpZGVvLWR1bW15IC0gdmlydHVhbC9vZmZzY3JlZW4gZnJhbWUgYnVm
ZmVyIGRyaXZlciBmb3IgdGhlIFhvcmcgWAo+IHNlcnZlcgo+ICAtLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0KPiAgCj4gIEFsbCBxdWVzdGlvbnMgcmVnYXJkaW5nIHRoaXMgc29mdHdhcmUgc2hvdWxkIGJl
IGRpcmVjdGVkIGF0IHRoZQo+IC1Yb3JnIG1haWxpbmcgbGlzdDoKPiArc3BpY2UtZGV2ZWwgbWFp
bGluZyBsaXN0Ogo+ICAKPiAtICBodHRwczovL2xpc3RzLngub3JnL21haWxtYW4vbGlzdGluZm8v
eG9yZwo+ICsgIGh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8v
c3BpY2UtZGV2ZWwKPiAgCj4gLVRoZSBtYXN0ZXIgZGV2ZWxvcG1lbnQgY29kZSByZXBvc2l0b3J5
IGNhbiBiZSBmb3VuZCBhdDoKPiArVGhpcyBkcml2ZXIgb3JpZ2luYXRlZCB3aXRoIHRoZSBkdW1t
eSBkcml2ZXIgZnJvbToKPiAgCj4gICAgaHR0cHM6Ly9naXRsYWIuZnJlZWRlc2t0b3Aub3JnL3hv
cmcvZHJpdmVyL3hmODYtdmlkZW8tZHVtbXkKPiAgCj4gLVBsZWFzZSBzdWJtaXQgYnVnIHJlcG9y
dHMgYW5kIHJlcXVlc3RzIHRvIG1lcmdlIHBhdGNoZXMgdGhlcmUuCj4gLQo+IC1Gb3IgcGF0Y2gg
c3VibWlzc2lvbiBpbnN0cnVjdGlvbnMsIHNlZToKPiAtCj4gLSAgaHR0cHM6Ly93d3cueC5vcmcv
d2lraS9EZXZlbG9wbWVudC9Eb2N1bWVudGF0aW9uL1N1Ym1pdHRpbmdQYXRjaGVzCj4gK2FuZCBt
b2RpZmllZCB0byBiZSBzaW1pbGFyIHRvIHRoZSBtb2RlIHNldHRpbmcgZHJpdmVyOgo+ICAKPiAr
Cj4gaHR0cHM6Ly9naXRsYWIuZnJlZWRlc2t0b3Aub3JnL3hvcmcveHNlcnZlci90cmVlL21hc3Rl
ci9ody94ZnJlZTg2L2RyaXZlcnMvbW9kZXNldHRpbmcKPiBkaWZmIC0tZ2l0IGEvc3BpY2Utdmlk
ZW8tZHVtbXkvY29uZmlndXJlLmFjIGIvc3BpY2UtdmlkZW8tZHVtbXkvY29uZmlndXJlLmFjCj4g
aW5kZXggMmNhMDMyNy4uZTg1YjdlNSAxMDA2NDQKPiAtLS0gYS9zcGljZS12aWRlby1kdW1teS9j
b25maWd1cmUuYWMKPiArKysgYi9zcGljZS12aWRlby1kdW1teS9jb25maWd1cmUuYWMKPiBAQCAt
MjIsMTAgKzIyLDEwIEBACj4gIAo+ICAjIEluaXRpYWxpemUgQXV0b2NvbmYKPiAgQUNfUFJFUkVR
KFsyLjYwXSkKPiAtQUNfSU5JVChbeGY4Ni12aWRlby1kdW1teV0sCj4gLSAgICAgICAgWzAuMy44
XSwKPiAtCj4gW2h0dHBzOi8vZ2l0bGFiLmZyZWVkZXNrdG9wLm9yZy94b3JnL2RyaXZlci94Zjg2
LXZpZGVvLWR1bW15L2lzc3Vlc10sCj4gLSAgICAgICAgW3hmODYtdmlkZW8tZHVtbXldKQo+ICtB
Q19JTklUKFtzcGljZS12aWRlby1kdW1teV0sCj4gKyAgICAgICAgWzEuMV0sCj4gKyAgICAgICAg
W2h0dHBzOi8vZ2l0bGFiLmZyZWVkZXNrdG9wLm9yZy9zcGljZS94MTFzcGljZS9pc3N1ZXNdLAo+
ICsgICAgICAgIFtzcGljZS12aWRlby1kdW1teV0pCj4gIEFDX0NPTkZJR19TUkNESVIoW01ha2Vm
aWxlLmFtXSkKPiAgQUNfQ09ORklHX0hFQURFUlMoW2NvbmZpZy5oXSkKPiAgQUNfQ09ORklHX0FV
WF9ESVIoLikKPiBAQCAtNjEsMTAgKzYxLDYgQEAgUEtHX0NIRUNLX01PRFVMRVMoWE9SRywgW3hv
cmctc2VydmVyID49IDEuNC45OS45MDFdIHhwcm90bwo+IGZvbnRzcHJvdG8gJFJFUVVJUkVEXwo+
ICAKPiAgIyBDaGVja3MgZm9yIGxpYnJhcmllcy4KPiAgCj4gLQo+IC1EUklWRVJfTkFNRT1kdW1t
eQo+IC1BQ19TVUJTVChbRFJJVkVSX05BTUVdKQo+IC0KPiAgQUNfQ09ORklHX0ZJTEVTKFsKPiAg
ICAgICAgICAgICAgICAgIE1ha2VmaWxlCj4gICAgICAgICAgICAgICAgICBzcmMvTWFrZWZpbGUK
PiBkaWZmIC0tZ2l0IGEvc3BpY2UtdmlkZW8tZHVtbXkvc3BpY2VkdW1teS5jb25mCj4gYi9zcGlj
ZS12aWRlby1kdW1teS9zcGljZWR1bW15LmNvbmYKPiBuZXcgZmlsZSBtb2RlIDEwMDY0NAo+IGlu
ZGV4IDAwMDAwMDAuLjk1MGRkNmYKPiAtLS0gL2Rldi9udWxsCj4gKysrIGIvc3BpY2UtdmlkZW8t
ZHVtbXkvc3BpY2VkdW1teS5jb25mCj4gQEAgLTAsMCArMSwxOCBAQAo+ICtTZWN0aW9uICJEZXZp
Y2UiCj4gKyAgICBJZGVudGlmaWVyICJTcGljZUR1bW15Igo+ICsgICAgRHJpdmVyICJzcGljZWR1
bW15Igo+ICsgICAgIyBUaGUgU1djdXJzb3Igb3B0aW9uIGVuYWJsZXMgYSBzb2Z0d2FyZSBjdXJz
b3IuICBEZWZhdWx0IGZhbHNlLgo+ICsgICAgI09wdGlvbiAiU1djdXJzb3IiICJmYWxzZSIKPiAr
ICAgICMgQWNjZWxNZXRob2QgY2FuIGJlIGdsYW1vciAodGhlIGRlZmF1bHQpLCBvciBub25lLgo+
ICsgICAgI09wdGlvbiAiQWNjZWxNZXRob2QiICJnbGFtb3IiCj4gKyAgICAjIGttc2RldiBzcGVj
aWZpZXMgd2hpY2ggZnJhbWVidWZmZXIgZGV2aWNlIHRvIHVzZSwgZGVmYXVsdAo+IC9kZXYvZHJp
L3JlbmRlckQxMjgKPiArICAgICNPcHRpb24gImttc2RldiIgIi9kZXYvZHJpL3JlbmRlckQxMjgi
Cj4gKyAgICBWaWRlb1JhbSAxNjM4NAo+ICtFbmRTZWN0aW9uCj4gKwo+ICtTZWN0aW9uICJTY3Jl
ZW4iCj4gKyAgICBJRGVudGlmaWVyICJTcGljZUR1bW15Igo+ICsgICAgU3ViU2VjdGlvbiAiRGlz
cGxheSIKPiArICAgICAgICBWaXJ0dWFsIDE5MjAgMTIwMAo+ICsgICAgRW5kU3ViU2VjdGlvbgo+
ICtFbmRTZWN0aW9uCj4gZGlmZiAtLWdpdCBhL3NwaWNlLXZpZGVvLWR1bW15L3NyYy9NYWtlZmls
ZS5hbQo+IGIvc3BpY2UtdmlkZW8tZHVtbXkvc3JjL01ha2VmaWxlLmFtCj4gaW5kZXggYzBkODJl
MC4uM2MwMzQwOSAxMDA2NDQKPiAtLS0gYS9zcGljZS12aWRlby1kdW1teS9zcmMvTWFrZWZpbGUu
YW0KPiArKysgYi9zcGljZS12aWRlby1kdW1teS9zcmMvTWFrZWZpbGUuYW0KPiBAQCAtMjcsMTMg
KzI3LDE1IEBACj4gIAo+ICBBTV9DRkxBR1MgPSAkKFhPUkdfQ0ZMQUdTKSAkKFBDSUFDQ0VTU19D
RkxBR1MpCj4gIAo+IC1kdW1teV9kcnZfbGFfTFRMSUJSQVJJRVMgPSBkdW1teV9kcnYubGEKPiAt
ZHVtbXlfZHJ2X2xhX0xERkxBR1MgPSAtbW9kdWxlIC1hdm9pZC12ZXJzaW9uCj4gLWR1bW15X2Ry
dl9sYV9MSUJBREQgPSAkKFhPUkdfTElCUykKPiAtZHVtbXlfZHJ2X2xhZGlyID0gQG1vZHVsZWRp
ckAvZHJpdmVycwo+ICtzcGljZWR1bW15X2Rydl9sYV9MVExJQlJBUklFUyA9IHNwaWNlZHVtbXlf
ZHJ2LmxhCj4gK3NwaWNlZHVtbXlfZHJ2X2xhX0xERkxBR1MgPSAtbW9kdWxlIC1hdm9pZC12ZXJz
aW9uCj4gK3NwaWNlZHVtbXlfZHJ2X2xhX0xJQkFERCA9ICQoWE9SR19MSUJTKQo+ICtzcGljZWR1
bW15X2Rydl9sYWRpciA9IEBtb2R1bGVkaXJAL2RyaXZlcnMKPiAgCj4gLWR1bW15X2Rydl9sYV9T
T1VSQ0VTID0gXAo+ICtzcGljZWR1bW15X2Rydl9sYV9TT1VSQ0VTID0gXAo+ICAgICAgICAgICBj
b21wYXQtYXBpLmggXAo+ICsgICAgICAgICBkcmkyLmMgXAo+ICAgICAgICAgICBkdW1teV9jdXJz
b3IuYyBcCj4gLSAgICAgICAgIGR1bW15X2RyaXZlci5jIFwKPiAtICAgICAgICAgZHVtbXkuaAo+
ICsgICAgICAgICBzcGljZWR1bW15X2RyaXZlci5jIFwKPiArICAgICAgICAgc3BpY2VkdW1teS5o
IFwKPiArICAgICAgICAgcHJlc2VudC5jCj4gZGlmZiAtLWdpdCBhL3NwaWNlLXZpZGVvLWR1bW15
L3NyYy9kcmkyLmMgYi9zcGljZS12aWRlby1kdW1teS9zcmMvZHJpMi5jCj4gbmV3IGZpbGUgbW9k
ZSAxMDA2NDQKPiBpbmRleCAwMDAwMDAwLi4xM2IzMjAwCj4gLS0tIC9kZXYvbnVsbAo+ICsrKyBi
L3NwaWNlLXZpZGVvLWR1bW15L3NyYy9kcmkyLmMKPiBAQCAtMCwwICsxLDI4OCBAQAo+ICsvKgo+
ICsgKiBDb3B5cmlnaHQgMjAxOSBIZW5yaSBWZXJiZWV0Cj4gKyAqCj4gKyAqIFBlcm1pc3Npb24g
dG8gdXNlLCBjb3B5LCBtb2RpZnksIGRpc3RyaWJ1dGUsIGFuZCBzZWxsIHRoaXMgc29mdHdhcmUg
YW5kCj4gaXRzCj4gKyAqIGRvY3VtZW50YXRpb24gZm9yIGFueSBwdXJwb3NlIGlzIGhlcmVieSBn
cmFudGVkIHdpdGhvdXQgZmVlLCBwcm92aWRlZAo+IHRoYXQKPiArICogdGhlIGFib3ZlIGNvcHly
aWdodCBub3RpY2UgYXBwZWFyIGluIGFsbCBjb3BpZXMgYW5kIHRoYXQgYm90aCB0aGF0Cj4gY29w
eXJpZ2h0Cj4gKyAqIG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBhcHBlYXIgaW4g
c3VwcG9ydGluZyBkb2N1bWVudGF0aW9uLCBhbmQKPiArICogdGhhdCB0aGUgbmFtZSBvZiB0aGUg
Y29weXJpZ2h0IGhvbGRlcnMgbm90IGJlIHVzZWQgaW4gYWR2ZXJ0aXNpbmcgb3IKPiArICogcHVi
bGljaXR5IHBlcnRhaW5pbmcgdG8gZGlzdHJpYnV0aW9uIG9mIHRoZSBzb2Z0d2FyZSB3aXRob3V0
IHNwZWNpZmljLAo+ICsgKiB3cml0dGVuIHByaW9yIHBlcm1pc3Npb24uICBUaGUgY29weXJpZ2h0
IGhvbGRlcnMgbWFrZSBubyByZXByZXNlbnRhdGlvbnMKPiArICogYWJvdXQgdGhlIHN1aXRhYmls
aXR5IG9mIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLiAgSXQgaXMgcHJvdmlkZWQKPiAi
YXMKPiArICogaXMiIHdpdGhvdXQgZXhwcmVzcyBvciBpbXBsaWVkIHdhcnJhbnR5Lgo+ICsgKgo+
ICsgKiBUSEUgQ09QWVJJR0hUIEhPTERFUlMgRElTQ0xBSU0gQUxMIFdBUlJBTlRJRVMgV0lUSCBS
RUdBUkQgVE8gVEhJUwo+IFNPRlRXQVJFLAo+ICsgKiBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FS
UkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MsIElOIE5PCj4gKyAqIEVWRU5U
IFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBJ
TkRJUkVDVCBPUgo+ICsgKiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hB
VFNPRVZFUiBSRVNVTFRJTkcgRlJPTSBMT1NTIE9GCj4gVVNFLAo+ICsgKiBEQVRBIE9SIFBST0ZJ
VFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SIE9USEVS
Cj4gKyAqIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBX
SVRIIFRIRSBVU0UgT1IKPiBQRVJGT1JNQU5DRQo+ICsgKiBPRiBUSElTIFNPRlRXQVJFLgo+ICsg
Ki8KPiArCj4gKyNpZmRlZiBIQVZFX0NPTkZJR19ICj4gKyNpbmNsdWRlICJjb25maWcuaCIKPiAr
I2VuZGlmCj4gKwo+ICsjaW5jbHVkZSAic3BpY2VkdW1teS5oIgo+ICsjaW5jbHVkZSAiZHJpMi5o
Igo+ICsjaW5jbHVkZSAieGY4NmRybS5oIgo+ICsKPiArc3RydWN0IGR1bW15X2RyaTJfYnVmZmVy
X3ByaXZhdGUgewo+ICsgICAgUGl4bWFwUmVjICpwaXhtYXA7Cj4gK307Cj4gKwo+ICtzdGF0aWMg
UGl4bWFwUmVjICpkdW1teV9nZXRfZHJhd2FibGVfcGl4bWFwKERyYXdhYmxlUmVjICogZHJhd2Fi
bGUpCj4gK3sKPiArICAgIGNvbnN0IFNjcmVlblJlYyAqc2NyZWVuID0gZHJhd2FibGUtPnBTY3Jl
ZW47Cj4gKwo+ICsgICAgaWYgKGRyYXdhYmxlLT50eXBlID09IERSQVdBQkxFX1BJWE1BUCkKPiAr
ICAgICAgICByZXR1cm4gKFBpeG1hcFJlYyAqKSBkcmF3YWJsZTsKPiArICAgIGVsc2UKPiArICAg
ICAgICByZXR1cm4gc2NyZWVuLT5HZXRXaW5kb3dQaXhtYXAoKFdpbmRvd1JlYyAqKSBkcmF3YWJs
ZSk7Cj4gK30KPiArCj4gK3N0YXRpYyBEUkkyQnVmZmVyMlJlYyAqZHVtbXlfZHJpMl9jcmVhdGVf
YnVmZmVyMihTY3JlZW5SZWMgKiBzY3JlZW4sCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBEcmF3YWJsZVJlYyAqIGRyYXdhYmxlLAo+IHVuc2lnbmVk
IGludCBhdHRhY2htZW50LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgdW5zaWduZWQgaW50IGZvcm1hdCkKPiArewo+ICsgICAgY29uc3QgU2Nybklu
Zm9SZWMgKnNjcm4gPSB4Zjg2U2NyZWVuVG9TY3JuKHNjcmVlbik7Cj4gKyAgICBzdHJ1Y3QgZHVt
bXlfZHJpMl9idWZmZXJfcHJpdmF0ZSAqcHJpdmF0ZTsKPiArICAgIERSSTJCdWZmZXIyUmVjICpi
dWZmZXI7Cj4gKyAgICBQaXhtYXBSZWMgKnBpeG1hcDsKPiArICAgIENBUkQxNiBwaXRjaDsKPiAr
ICAgIENBUkQzMiBzaXplOwo+ICsKPiArICAgIGlmICghKGJ1ZmZlciA9IGNhbGxvYygxLCBzaXpl
b2YoKmJ1ZmZlcikpKSkKPiArICAgICAgICByZXR1cm4gTlVMTDsKPiArCj4gKyAgICBpZiAoIShw
cml2YXRlID0gY2FsbG9jKDEsIHNpemVvZigqcHJpdmF0ZSkpKSkgewo+ICsgICAgICAgIGZyZWUo
YnVmZmVyKTsKPiArICAgICAgICByZXR1cm4gTlVMTDsKPiArICAgIH0KPiArCj4gKyAgICBwaXht
YXAgPSBOVUxMOwo+ICsgICAgaWYgKGF0dGFjaG1lbnQgPT0gRFJJMkJ1ZmZlckZyb250TGVmdCkg
ewo+ICsgICAgICAgIHBpeG1hcCA9IGR1bW15X2dldF9kcmF3YWJsZV9waXhtYXAoZHJhd2FibGUp
Owo+ICsgICAgICAgIGlmIChwaXhtYXAgJiYgcGl4bWFwLT5kcmF3YWJsZS5wU2NyZWVuICE9IHNj
cmVlbikKPiArICAgICAgICAgICAgcGl4bWFwID0gTlVMTDsKPiArICAgICAgICBpZiAocGl4bWFw
KQo+ICsgICAgICAgICAgICArK3BpeG1hcC0+cmVmY250Owo+ICsgICAgfQo+ICsKPiArICAgIGlm
ICghcGl4bWFwKSB7Cj4gKyAgICAgICAgc3dpdGNoIChhdHRhY2htZW50KSB7Cj4gKyAgICAgICAg
ICAgIGNhc2UgRFJJMkJ1ZmZlckFjY3VtOgo+ICsgICAgICAgICAgICBjYXNlIERSSTJCdWZmZXJC
YWNrTGVmdDoKPiArICAgICAgICAgICAgY2FzZSBEUkkyQnVmZmVyQmFja1JpZ2h0Ogo+ICsgICAg
ICAgICAgICBjYXNlIERSSTJCdWZmZXJGYWtlRnJvbnRMZWZ0Ogo+ICsgICAgICAgICAgICBjYXNl
IERSSTJCdWZmZXJGYWtlRnJvbnRSaWdodDoKPiArICAgICAgICAgICAgY2FzZSBEUkkyQnVmZmVy
RnJvbnRMZWZ0Ogo+ICsgICAgICAgICAgICBjYXNlIERSSTJCdWZmZXJGcm9udFJpZ2h0Ogo+ICsg
ICAgICAgICAgICAgICAgYnJlYWs7Cj4gKwo+ICsgICAgICAgICAgICBjYXNlIERSSTJCdWZmZXJT
dGVuY2lsOgo+ICsgICAgICAgICAgICBjYXNlIERSSTJCdWZmZXJEZXB0aDoKPiArICAgICAgICAg
ICAgY2FzZSBEUkkyQnVmZmVyRGVwdGhTdGVuY2lsOgo+ICsgICAgICAgICAgICBjYXNlIERSSTJC
dWZmZXJIaXo6Cj4gKyAgICAgICAgICAgIGRlZmF1bHQ6Cj4gKyAgICAgICAgICAgICAgICB4Zjg2
RHJ2TXNnKHNjcm4tPnNjcm5JbmRleCwgWF9XQVJOSU5HLAo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAiUmVxdWVzdCBmb3IgRFJJMiBidWZmZXIgYXR0YWNobWVudCAlI3gKPiB1bnN1cHBv
cnRlZC5cbiIsIGF0dGFjaG1lbnQpOwo+ICsgICAgICAgICAgICAgICAgZnJlZShwcml2YXRlKTsK
PiArICAgICAgICAgICAgICAgIGZyZWUoYnVmZmVyKTsKPiArICAgICAgICAgICAgICAgIHJldHVy
biBOVUxMOwo+ICsgICAgICAgIH0KPiArCj4gKyAgICAgICAgaWYgKCEocGl4bWFwID0gc2NyZWVu
LT5DcmVhdGVQaXhtYXAoc2NyZWVuLCBkcmF3YWJsZS0+d2lkdGgsCj4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhd2FibGUtPmhlaWdodCwgZm9ybWF0ID8K
PiBmb3JtYXQgOiBkcmF3YWJsZS0+ZGVwdGgsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgMCkpKSB7Cj4gKyAgICAgICAgICAgIGZyZWUocHJpdmF0ZSk7Cj4g
KyAgICAgICAgICAgIGZyZWUoYnVmZmVyKTsKPiArICAgICAgICAgICAgcmV0dXJuIE5VTEw7Cj4g
KyAgICAgICAgfQo+ICsgICAgfQo+ICsKPiArICAgIGJ1ZmZlci0+YXR0YWNobWVudCA9IGF0dGFj
aG1lbnQ7Cj4gKyAgICBidWZmZXItPmNwcCA9IHBpeG1hcC0+ZHJhd2FibGUuYml0c1BlclBpeGVs
IC8gODsKPiArICAgIGJ1ZmZlci0+Zm9ybWF0ID0gZm9ybWF0Owo+ICsgICAgYnVmZmVyLT5mbGFn
cyA9IDA7Cj4gKwo+ICsgICAgYnVmZmVyLT5uYW1lID0gZ2xhbW9yX25hbWVfZnJvbV9waXhtYXAo
cGl4bWFwLCAmcGl0Y2gsICZzaXplKTsKPiArICAgIGJ1ZmZlci0+cGl0Y2ggPSBwaXRjaDsKPiAr
ICAgIGlmIChidWZmZXItPm5hbWUgPT0gLTEpIHsKPiArICAgICAgICB4Zjg2RHJ2TXNnKHNjcm4t
PnNjcm5JbmRleCwgWF9FUlJPUiwgIkZhaWxlZCB0byBnZXQgRFJJMiBuYW1lIGZvcgo+IHBpeG1h
cC5cbiIpOwo+ICsgICAgICAgIHNjcmVlbi0+RGVzdHJveVBpeG1hcChwaXhtYXApOwo+ICsgICAg
ICAgIGZyZWUocHJpdmF0ZSk7Cj4gKyAgICAgICAgZnJlZShidWZmZXIpOwo+ICsgICAgICAgIHJl
dHVybiBOVUxMOwo+ICsgICAgfQo+ICsKPiArICAgIGJ1ZmZlci0+ZHJpdmVyUHJpdmF0ZSA9IHBy
aXZhdGU7Cj4gKyAgICBwcml2YXRlLT5waXhtYXAgPSBwaXhtYXA7Cj4gKwo+ICsgICAgcmV0dXJu
IGJ1ZmZlcjsKPiArfQo+ICsKPiArc3RhdGljIERSSTJCdWZmZXIyUmVjICpkdW1teV9kcmkyX2Ny
ZWF0ZV9idWZmZXIoRHJhd2FibGVSZWMgKiBkcmF3YWJsZSwKPiB1bnNpZ25lZCBpbnQgYXR0YWNo
bWVudCwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
dW5zaWduZWQgaW50IGZvcm1hdCkKPiArewo+ICsgICAgcmV0dXJuIGR1bW15X2RyaTJfY3JlYXRl
X2J1ZmZlcjIoZHJhd2FibGUtPnBTY3JlZW4sIGRyYXdhYmxlLAo+IGF0dGFjaG1lbnQsIGZvcm1h
dCk7Cj4gK30KPiArCj4gK3N0YXRpYyB2b2lkIGR1bW15X2RyaTJfZGVzdHJveV9idWZmZXIyKFNj
cmVlblJlYyAqIHVudXNlZCwgRHJhd2FibGVSZWMgKgo+IHVudXNlZDIsCj4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIERSSTJCdWZmZXIyUmVjICogYnVmZmVyKQo+ICt7
Cj4gKyAgICBzdHJ1Y3QgZHVtbXlfZHJpMl9idWZmZXJfcHJpdmF0ZSAqcHJpdmF0ZTsKPiArICAg
IGNvbnN0IFNjcmVlblJlYyAqc2NyZWVuOwo+ICsKPiArICAgIGlmICghYnVmZmVyKQo+ICsgICAg
ICAgIHJldHVybjsKPiArCj4gKyAgICBpZiAoIShwcml2YXRlID0gYnVmZmVyLT5kcml2ZXJQcml2
YXRlKSkgewo+ICsgICAgICAgIGZyZWUoYnVmZmVyKTsKPiArICAgICAgICByZXR1cm47Cj4gKyAg
ICB9Cj4gKwo+ICsgICAgc2NyZWVuID0gcHJpdmF0ZS0+cGl4bWFwLT5kcmF3YWJsZS5wU2NyZWVu
Owo+ICsgICAgc2NyZWVuLT5EZXN0cm95UGl4bWFwKHByaXZhdGUtPnBpeG1hcCk7Cj4gKyAgICBm
cmVlKHByaXZhdGUpOwo+ICsgICAgZnJlZShidWZmZXIpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9p
ZCBkdW1teV9kcmkyX2Rlc3Ryb3lfYnVmZmVyKERyYXdhYmxlUmVjICogZHJhd2FibGUsIERSSTJC
dWZmZXIyUmVjCj4gKiBidWZmZXIpCj4gK3sKPiArICAgIGR1bW15X2RyaTJfZGVzdHJveV9idWZm
ZXIyKE5VTEwsIGRyYXdhYmxlLCBidWZmZXIpOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdm9pZCBkdW1t
eV9kcmkyX2NvcHlfcmVnaW9uMihTY3JlZW5SZWMgKiBzY3JlZW4sIERyYXdhYmxlUmVjICoKPiBk
cmF3YWJsZSwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVnaW9uUmVj
ICogcmVnaW9uLCBEUkkyQnVmZmVyUmVjICoKPiBkc3RfYnVmZmVyLAo+ICsgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBEUkkyQnVmZmVyUmVjICogc3JjX2J1ZmZlcikKPiArewo+
ICsgICAgY29uc3Qgc3RydWN0IGR1bW15X2RyaTJfYnVmZmVyX3ByaXZhdGUgKnNyY19wcml2ID0K
PiBzcmNfYnVmZmVyLT5kcml2ZXJQcml2YXRlOwo+ICsgICAgY29uc3Qgc3RydWN0IGR1bW15X2Ry
aTJfYnVmZmVyX3ByaXZhdGUgKmRzdF9wcml2ID0KPiBkc3RfYnVmZmVyLT5kcml2ZXJQcml2YXRl
Owo+ICsgICAgaW50IG9mZl94ID0gMCwgb2ZmX3kgPSAwOwo+ICsgICAgQm9vbCB0cmFuc2xhdGUg
PSBGQUxTRTsKPiArICAgIERyYXdhYmxlUmVjICpzcmMsICpkc3Q7Cj4gKyAgICBSZWdpb25SZWMg
KmNsaXBfcmVnaW9uOwo+ICsgICAgR0MgKmdjOwo+ICsKPiArICAgIHNyYyA9IChzcmNfYnVmZmVy
LT5hdHRhY2htZW50ID09IERSSTJCdWZmZXJGcm9udExlZnQpID8gZHJhd2FibGUgOgo+ICZzcmNf
cHJpdi0+cGl4bWFwLT5kcmF3YWJsZTsKPiArICAgIGRzdCA9IChkc3RfYnVmZmVyLT5hdHRhY2ht
ZW50ID09IERSSTJCdWZmZXJGcm9udExlZnQpID8gZHJhd2FibGUgOgo+ICZkc3RfcHJpdi0+cGl4
bWFwLT5kcmF3YWJsZTsKPiArCj4gKyAgICBpZiAoZHN0X2J1ZmZlci0+YXR0YWNobWVudCA9PSBE
UkkyQnVmZmVyRnJvbnRMZWZ0ICYmIGRyYXdhYmxlLT5wU2NyZWVuCj4gIT0gc2NyZWVuKSB7Cj4g
KyAgICAgICAgaWYgKCEoZHN0ID0gRFJJMlVwZGF0ZVByaW1lKGRyYXdhYmxlLCBkc3RfYnVmZmVy
KSkpCj4gKyAgICAgICAgICAgIHJldHVybjsKPiArICAgICAgICBpZiAoZHN0ICE9IGRyYXdhYmxl
KQo+ICsgICAgICAgICAgICB0cmFuc2xhdGUgPSBUUlVFOwo+ICsgICAgfQo+ICsKPiArICAgIGlm
ICh0cmFuc2xhdGUgJiYgZHJhd2FibGUtPnR5cGUgPT0gRFJBV0FCTEVfV0lORE9XKSB7Cj4gKyAg
ICAgICAgY29uc3QgUGl4bWFwUmVjICpwaXhtYXAgPSBkdW1teV9nZXRfZHJhd2FibGVfcGl4bWFw
KGRyYXdhYmxlKTsKPiArICAgICAgICBvZmZfeCA9IC1waXhtYXAtPnNjcmVlbl94Owo+ICsgICAg
ICAgIG9mZl95ID0gLXBpeG1hcC0+c2NyZWVuX3k7Cj4gKyAgICAgICAgb2ZmX3ggKz0gZHJhd2Fi
bGUtPng7Cj4gKyAgICAgICAgb2ZmX3kgKz0gZHJhd2FibGUtPnk7Cj4gKyAgICB9Cj4gKwo+ICsg
ICAgaWYgKCEoZ2MgPSBHZXRTY3JhdGNoR0MoZHN0LT5kZXB0aCwgc2NyZWVuKSkpCj4gKyAgICAg
ICAgcmV0dXJuOwo+ICsKPiArICAgIGNsaXBfcmVnaW9uID0gUkVHSU9OX0NSRUFURShzY3JlZW4s
IE5VTEwsIDApOwo+ICsgICAgUkVHSU9OX0NPUFkoc2NyZWVuLCBjbGlwX3JlZ2lvbiwgcmVnaW9u
KTsKPiArICAgIGlmICh0cmFuc2xhdGUpCj4gKyAgICAgICAgUkVHSU9OX1RSQU5TTEFURShzY3Jl
ZW4sIGNsaXBfcmVnaW9uLCBvZmZfeCwgb2ZmX3kpOwo+ICsgICAgZ2MtPmZ1bmNzLT5DaGFuZ2VD
bGlwKGdjLCBDVF9SRUdJT04sIGNsaXBfcmVnaW9uLCAwKTsKPiArICAgIFZhbGlkYXRlR0MoZHN0
LCBnYyk7Cj4gKwo+ICsgICAgZ2MtPm9wcy0+Q29weUFyZWEoc3JjLCBkc3QsIGdjLCAwLCAwLCBk
cmF3YWJsZS0+d2lkdGgsIGRyYXdhYmxlLT5oZWlnaHQsCj4gb2ZmX3gsIG9mZl95KTsKPiArCj4g
KyAgICBGcmVlU2NyYXRjaEdDKGdjKTsKPiArfQo+ICsKPiArc3RhdGljIHZvaWQgZHVtbXlfZHJp
Ml9jb3B5X3JlZ2lvbihEcmF3YWJsZVJlYyAqIGRyYXdhYmxlLCBSZWdpb25SZWMgKgo+IHJlZ2lv
biwKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEUkkyQnVmZmVyUmVjICog
ZHN0X2J1ZmZlciwgRFJJMkJ1ZmZlclJlYwo+ICogc3JjX2J1ZmZlcikKPiArewo+ICsgICAgZHVt
bXlfZHJpMl9jb3B5X3JlZ2lvbjIoZHJhd2FibGUtPnBTY3JlZW4sIGRyYXdhYmxlLCByZWdpb24s
IGRzdF9idWZmZXIsCj4gc3JjX2J1ZmZlcik7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgZHVtbXlf
ZHJpMl9nZXRfbXNjKERyYXdhYmxlUmVjICogZHJhd2FibGUsIENBUkQ2NCAqIHVzdCwgQ0FSRDY0
ICoKPiBtc2MpCj4gK3sKPiArICAgIHN0cnVjdCB0aW1lc3BlYyB0djsKPiArCj4gKyAgICBpZiAo
Y2xvY2tfZ2V0dGltZShDTE9DS19NT05PVE9OSUMsICZ0dikpCj4gKyAgICAgICAgKnVzdCA9IDA7
Cj4gKyAgICBlbHNlCj4gKyAgICAgICAgKnVzdCA9ICh1aW50NjRfdCkgdHYudHZfc2VjICogMTAw
MDAwMCArIHR2LnR2X25zZWMgLyAxMDAwOwoKVGhpcyBzZWVtcyBhIGJpdCBkdXBsaWNhdGVkIChj
bG9ja19nZXR0aW1lIGFuZCBjb21wdXRhdGlvbiksIG1heWJlCmFuIGlubGluZSBmdW5jdGlvbiBp
biBhbiBoZWFkZXI/Cihub3Qgc3Ryb25nIGFib3V0KS4KCj4gKyAgICAqbXNjID0gMDsKPiArCj4g
KyAgICByZXR1cm4gVFJVRTsKPiArfQo+ICsKPiArc3RhdGljIGludCBkdW1teV9kcmkyX3NjaGVk
dWxlX3dhaXRfbXNjKENsaWVudFJlYyAqIGNsaWVudCwgRHJhd2FibGVSZWMgKgo+IGRyYXdhYmxl
LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ0FSRDY0IHRhcmdl
dF9tc2MsIENBUkQ2NCBkaXZpc29yLAo+IENBUkQ2NCByZW1haW5kZXIpCj4gK3sKPiArICAgIERS
STJXYWl0TVNDQ29tcGxldGUoY2xpZW50LCBkcmF3YWJsZSwgdGFyZ2V0X21zYywgMCwgMCk7Cj4g
Kwo+ICsgICAgcmV0dXJuIFRSVUU7Cj4gK30KPiArCj4gK3N0YXRpYyBpbnQgZHVtbXlfZHJpMl9z
Y2hlZHVsZV9zd2FwKENsaWVudFJlYyAqIGNsaWVudCwgRHJhd2FibGVSZWMgKgo+IGRyYXdhYmxl
LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEUkkyQnVmZmVyUmVjICog
ZnJvbnQsIERSSTJCdWZmZXJSZWMgKgo+IGJhY2ssCj4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIENBUkQ2NCAqIHRhcmdldF9tc2MsIENBUkQ2NCBkaXZpc29yLAo+IENBUkQ2
NCByZW1haW5kZXIsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERSSTJT
d2FwRXZlbnRQdHIgZnVuYywgdm9pZCAqZGF0YSkKPiArewo+ICsgICAgUmVnaW9uUmVjIHJlZ2lv
bjsKPiArICAgIEJveFJlYyBib3g7Cj4gKwo+ICsgICAgYm94LngxID0gMDsKPiArICAgIGJveC55
MSA9IDA7Cj4gKyAgICBib3gueDIgPSBkcmF3YWJsZS0+d2lkdGg7Cj4gKyAgICBib3gueTIgPSBk
cmF3YWJsZS0+aGVpZ2h0Owo+ICsgICAgUmVnaW9uSW5pdCgmcmVnaW9uLCAmYm94LCAwKTsKPiAr
Cj4gKyAgICBkdW1teV9kcmkyX2NvcHlfcmVnaW9uKGRyYXdhYmxlLCAmcmVnaW9uLCBmcm9udCwg
YmFjayk7Cj4gKyAgICBEUkkyU3dhcENvbXBsZXRlKGNsaWVudCwgZHJhd2FibGUsIDAsIDAsIDAs
IERSSTJfQkxJVF9DT01QTEVURSwgZnVuYywKPiBkYXRhKTsKPiArICAgICp0YXJnZXRfbXNjID0g
MDsKPiArCj4gKyAgICByZXR1cm4gVFJVRTsKPiArfQo+ICsKPiArQm9vbCBkdW1teV9kcmkyX3Nj
cmVlbl9pbml0KFNjcmVlblJlYyAqIHNjcmVlbikKPiArewo+ICsgICAgY29uc3QgU2NybkluZm9S
ZWMgKnNjcm4gPSB4Zjg2U2NyZWVuVG9TY3JuKHNjcmVlbik7Cj4gKyAgICBjb25zdCBEVU1NWVJl
YyAqZHVtbXkgPSBzY3JuLT5kcml2ZXJQcml2YXRlOwo+ICsgICAgRFJJMkluZm9SZWMgaW5mbzsK
PiArCj4gKyAgICBpZiAoIWdsYW1vcl9zdXBwb3J0c19waXhtYXBfaW1wb3J0X2V4cG9ydChzY3Jl
ZW4pKQo+ICsgICAgICAgIHhmODZEcnZNc2coc2Nybi0+c2NybkluZGV4LCBYX1dBUk5JTkcsCj4g
KyAgICAgICAgICAgICAgICAgICAiRFJJMjogZ2xhbW9yIGxhY2tzIHN1cHBvcnQgZm9yIHBpeG1h
cCBpbXBvcnQvZXhwb3J0XG4iKTsKPiArCj4gKyAgICBpZiAoIXhmODZMb2FkZXJDaGVja1N5bWJv
bCgiRFJJMlZlcnNpb24iKSkKPiArICAgICAgICByZXR1cm4gRkFMU0U7Cj4gKwo+ICsgICAgbWVt
c2V0KCZpbmZvLCAwLCBzaXplb2YoaW5mbykpOwo+ICsgICAgaW5mby5mZCA9IGR1bW15LT5mZDsK
PiArICAgIGluZm8uZHJpdmVyTmFtZSA9IE5VTEw7Cj4gKyAgICBpbmZvLmRldmljZU5hbWUgPSBk
cm1HZXREZXZpY2VOYW1lRnJvbUZkMihkdW1teS0+ZmQpOwo+ICsKPiArICAgIGluZm8udmVyc2lv
biA9IDk7Cj4gKyAgICBpbmZvLkNyZWF0ZUJ1ZmZlciA9IGR1bW15X2RyaTJfY3JlYXRlX2J1ZmZl
cjsKPiArICAgIGluZm8uRGVzdHJveUJ1ZmZlciA9IGR1bW15X2RyaTJfZGVzdHJveV9idWZmZXI7
Cj4gKyAgICBpbmZvLkNvcHlSZWdpb24gPSBkdW1teV9kcmkyX2NvcHlfcmVnaW9uOwo+ICsgICAg
aW5mby5TY2hlZHVsZVN3YXAgPSBkdW1teV9kcmkyX3NjaGVkdWxlX3N3YXA7Cj4gKyAgICBpbmZv
LkdldE1TQyA9IGR1bW15X2RyaTJfZ2V0X21zYzsKPiArICAgIGluZm8uU2NoZWR1bGVXYWl0TVND
ID0gZHVtbXlfZHJpMl9zY2hlZHVsZV93YWl0X21zYzsKPiArICAgIGluZm8uQ3JlYXRlQnVmZmVy
MiA9IGR1bW15X2RyaTJfY3JlYXRlX2J1ZmZlcjI7Cj4gKyAgICBpbmZvLkRlc3Ryb3lCdWZmZXIy
ID0gZHVtbXlfZHJpMl9kZXN0cm95X2J1ZmZlcjI7Cj4gKyAgICBpbmZvLkNvcHlSZWdpb24yID0g
ZHVtbXlfZHJpMl9jb3B5X3JlZ2lvbjI7Cj4gKwo+ICsgICAgaW5mby5udW1Ecml2ZXJzID0gMDsK
PiArICAgIGluZm8uZHJpdmVyTmFtZXMgPSBOVUxMOwo+ICsKPiArICAgIHJldHVybiBEUkkyU2Ny
ZWVuSW5pdChzY3JlZW4sICZpbmZvKTsKPiArfQo+ICsKPiArdm9pZCBkdW1teV9kcmkyX2Nsb3Nl
X3NjcmVlbihTY3JlZW5SZWMgKiBzY3JlZW4pCj4gK3sKPiArICAgIERSSTJDbG9zZVNjcmVlbihz
Y3JlZW4pOwo+ICt9Cj4gZGlmZiAtLWdpdCBhL3NwaWNlLXZpZGVvLWR1bW15L3NyYy9kdW1teV9j
dXJzb3IuYwo+IGIvc3BpY2UtdmlkZW8tZHVtbXkvc3JjL2R1bW15X2N1cnNvci5jCj4gaW5kZXgg
Y2NjZTQ0Mi4uNWM2ODBjYiAxMDA2NDQKPiAtLS0gYS9zcGljZS12aWRlby1kdW1teS9zcmMvZHVt
bXlfY3Vyc29yLmMKPiArKysgYi9zcGljZS12aWRlby1kdW1teS9zcmMvZHVtbXlfY3Vyc29yLmMK
PiBAQCAtOSw3ICs5LDcgQEAKPiAgI2luY2x1ZGUgInhmODZDdXJzb3IuaCIKPiAgI2luY2x1ZGUg
ImN1cnNvcnN0ci5oIgo+ICAvKiBEcml2ZXIgc3BlY2lmaWMgaGVhZGVycyAqLwo+IC0jaW5jbHVk
ZSAiZHVtbXkuaCIKPiArI2luY2x1ZGUgInNwaWNlZHVtbXkuaCIKPiAgCj4gIHN0YXRpYyB2b2lk
IGR1bW15U2hvd0N1cnNvcihTY3JuSW5mb1B0ciBwU2NybikKPiAgewo+IGRpZmYgLS1naXQgYS9z
cGljZS12aWRlby1kdW1teS9zcmMvcHJlc2VudC5jCj4gYi9zcGljZS12aWRlby1kdW1teS9zcmMv
cHJlc2VudC5jCj4gbmV3IGZpbGUgbW9kZSAxMDA2NDQKPiBpbmRleCAwMDAwMDAwLi4zM2FjNzEw
Cj4gLS0tIC9kZXYvbnVsbAo+ICsrKyBiL3NwaWNlLXZpZGVvLWR1bW15L3NyYy9wcmVzZW50LmMK
PiBAQCAtMCwwICsxLDEwNCBAQAo+ICsvKgo+ICsgKiBDb3B5cmlnaHQgMjAxOSBIZW5yaSBWZXJi
ZWV0Cj4gKyAqCj4gKyAqIFBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGRpc3RyaWJ1
dGUsIGFuZCBzZWxsIHRoaXMgc29mdHdhcmUgYW5kCj4gaXRzCj4gKyAqIGRvY3VtZW50YXRpb24g
Zm9yIGFueSBwdXJwb3NlIGlzIGhlcmVieSBncmFudGVkIHdpdGhvdXQgZmVlLCBwcm92aWRlZAo+
IHRoYXQKPiArICogdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYXBwZWFyIGluIGFsbCBjb3Bp
ZXMgYW5kIHRoYXQgYm90aCB0aGF0Cj4gY29weXJpZ2h0Cj4gKyAqIG5vdGljZSBhbmQgdGhpcyBw
ZXJtaXNzaW9uIG5vdGljZSBhcHBlYXIgaW4gc3VwcG9ydGluZyBkb2N1bWVudGF0aW9uLCBhbmQK
PiArICogdGhhdCB0aGUgbmFtZSBvZiB0aGUgY29weXJpZ2h0IGhvbGRlcnMgbm90IGJlIHVzZWQg
aW4gYWR2ZXJ0aXNpbmcgb3IKPiArICogcHVibGljaXR5IHBlcnRhaW5pbmcgdG8gZGlzdHJpYnV0
aW9uIG9mIHRoZSBzb2Z0d2FyZSB3aXRob3V0IHNwZWNpZmljLAo+ICsgKiB3cml0dGVuIHByaW9y
IHBlcm1pc3Npb24uICBUaGUgY29weXJpZ2h0IGhvbGRlcnMgbWFrZSBubyByZXByZXNlbnRhdGlv
bnMKPiArICogYWJvdXQgdGhlIHN1aXRhYmlsaXR5IG9mIHRoaXMgc29mdHdhcmUgZm9yIGFueSBw
dXJwb3NlLiAgSXQgaXMgcHJvdmlkZWQKPiAiYXMKPiArICogaXMiIHdpdGhvdXQgZXhwcmVzcyBv
ciBpbXBsaWVkIHdhcnJhbnR5Lgo+ICsgKgo+ICsgKiBUSEUgQ09QWVJJR0hUIEhPTERFUlMgRElT
Q0xBSU0gQUxMIFdBUlJBTlRJRVMgV0lUSCBSRUdBUkQgVE8gVEhJUwo+IFNPRlRXQVJFLAo+ICsg
KiBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5E
IEZJVE5FU1MsIElOIE5PCj4gKyAqIEVWRU5UIFNIQUxMIFRIRSBDT1BZUklHSFQgSE9MREVSUyBC
RSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBJTkRJUkVDVCBPUgo+ICsgKiBDT05TRVFVRU5USUFM
IERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTSBMT1NTIE9G
Cj4gVVNFLAo+ICsgKiBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENP
TlRSQUNULCBORUdMSUdFTkNFIE9SIE9USEVSCj4gKyAqIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lO
RyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1IKPiBQRVJGT1JNQU5DRQo+
ICsgKiBPRiBUSElTIFNPRlRXQVJFLgo+ICsgKi8KPiArCj4gKyNpZmRlZiBIQVZFX0NPTkZJR19I
Cj4gKyNpbmNsdWRlICJjb25maWcuaCIKPiArI2VuZGlmCj4gKwo+ICsjaW5jbHVkZSAic3BpY2Vk
dW1teS5oIgo+ICsjaW5jbHVkZSAicHJlc2VudC5oIgo+ICsKPiArc3RhdGljIFJSQ3J0Y1JlYyAq
ZHVtbXlfcHJlc2VudF9nZXRfY3J0YyhXaW5kb3dSZWMgKiB3aW5kb3cpCj4gK3sKPiArICAgIHJl
dHVybiBOVUxMOwo+ICt9Cj4gKwo+ICtzdGF0aWMgdWludDY0X3QgZHVtbXlfZ2V0dGltZV91cyh2
b2lkKQo+ICt7Cj4gKyAgICBzdHJ1Y3QgdGltZXNwZWMgdHY7Cj4gKwo+ICsgICAgaWYgKGNsb2Nr
X2dldHRpbWUoQ0xPQ0tfTU9OT1RPTklDLCAmdHYpKQo+ICsgICAgICAgIHJldHVybiAwOwo+ICsK
PiArICAgIHJldHVybiAodWludDY0X3QpIHR2LnR2X3NlYyAqIDEwMDAwMDAgKyB0di50dl9uc2Vj
IC8gMTAwMDsKPiArfQo+ICsKPiArc3RhdGljIGludCBkdW1teV9wcmVzZW50X2dldF91c3RfbXNj
KFJSQ3J0Y1JlYyAqIGNydGMsIENBUkQ2NCAqIHVzdCwgQ0FSRDY0Cj4gKiBtc2MpCj4gK3sKPiAr
ICAgICp1c3QgPSBkdW1teV9nZXR0aW1lX3VzKCk7Cj4gKyAgICAqbXNjID0gMDsKPiArCj4gKyAg
ICByZXR1cm4gU3VjY2VzczsKPiArfQo+ICsKPiArc3RhdGljIGludCBkdW1teV9wcmVzZW50X3F1
ZXVlX3ZibGFuayhSUkNydGNSZWMgKiBjcnRjLCB1aW50NjRfdCBldmVudF9pZCwKPiB1aW50NjRf
dCBtc2MpCj4gK3sKPiArICAgIHByZXNlbnRfZXZlbnRfbm90aWZ5KGV2ZW50X2lkLCBkdW1teV9n
ZXR0aW1lX3VzKCksIG1zYyk7Cj4gKwo+ICsgICAgcmV0dXJuIFN1Y2Nlc3M7Cj4gK30KPiArCj4g
K3N0YXRpYyB2b2lkIGR1bW15X3ByZXNlbnRfYWJvcnRfdmJsYW5rKFJSQ3J0Y1JlYyAqIGNydGMs
IHVpbnQ2NF90IGV2ZW50X2lkLAo+IHVpbnQ2NF90IG1zYykKPiArewo+ICt9Cj4gKwo+ICtzdGF0
aWMgdm9pZCBkdW1teV9wcmVzZW50X2ZsdXNoKFdpbmRvd1JlYyAqIHdpbmRvdykKPiArewo+ICsg
ICAgZ2xhbW9yX2Jsb2NrX2hhbmRsZXIod2luZG93LT5kcmF3YWJsZS5wU2NyZWVuKTsKPiArfQo+
ICsKPiArc3RhdGljIEJvb2wgZHVtbXlfcHJlc2VudF9jaGVja19mbGlwKFJSQ3J0Y1JlYyAqIGNy
dGMsIFdpbmRvd1JlYyAqIHdpbmRvdywKPiBQaXhtYXBSZWMgKiBwaXhtYXAsCj4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBCb29sIHN5bmNfZmxpcCkKPiArewo+ICsgICAg
cmV0dXJuIEZBTFNFOwo+ICt9Cj4gKwo+ICtzdGF0aWMgQm9vbCBkdW1teV9wcmVzZW50X2ZsaXAo
UlJDcnRjUmVjICogY3J0YywgdWludDY0X3QgZXZlbnRfaWQsCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICB1aW50NjRfdCB0YXJnZXRfbXNjLCBQaXhtYXBSZWMgKiBwaXhtYXAsIEJv
b2wKPiBzeW5jX2ZsaXApCj4gK3sKPiArICAgIHJldHVybiBGQUxTRTsKPiArfQo+ICsKPiArc3Rh
dGljIHZvaWQgZHVtbXlfcHJlc2VudF91bmZsaXAoU2NyZWVuUmVjICogc2NyZWVuLCB1aW50NjRf
dCBldmVudF9pZCkKPiArewo+ICsgICAgcHJlc2VudF9ldmVudF9ub3RpZnkoZXZlbnRfaWQsIDAs
IDApOwo+ICt9Cj4gKwo+ICtCb29sIGR1bW15X3ByZXNlbnRfc2NyZWVuX2luaXQoU2NyZWVuUmVj
ICogc2NyZWVuKQo+ICt7Cj4gKyAgICBzdGF0aWMgc3RydWN0IHByZXNlbnRfc2NyZWVuX2luZm8g
cHJlc2VudF9zY3JlZW5faW5mbyA9IHsKPiArICAgICAgICAudmVyc2lvbiA9IFBSRVNFTlRfU0NS
RUVOX0lORk9fVkVSU0lPTiwKPiArCj4gKyAgICAgICAgLmdldF9jcnRjID0gZHVtbXlfcHJlc2Vu
dF9nZXRfY3J0YywKPiArICAgICAgICAuZ2V0X3VzdF9tc2MgPSBkdW1teV9wcmVzZW50X2dldF91
c3RfbXNjLAo+ICsgICAgICAgIC5xdWV1ZV92YmxhbmsgPSBkdW1teV9wcmVzZW50X3F1ZXVlX3Zi
bGFuaywKPiArICAgICAgICAuYWJvcnRfdmJsYW5rID0gZHVtbXlfcHJlc2VudF9hYm9ydF92Ymxh
bmssCj4gKyAgICAgICAgLmZsdXNoID0gZHVtbXlfcHJlc2VudF9mbHVzaCwKPiArCj4gKyAgICAg
ICAgLmNhcGFiaWxpdGllcyA9IFByZXNlbnRDYXBhYmlsaXR5Tm9uZSwKPiArICAgICAgICAuY2hl
Y2tfZmxpcCA9IGR1bW15X3ByZXNlbnRfY2hlY2tfZmxpcCwKPiArICAgICAgICAuZmxpcCA9IGR1
bW15X3ByZXNlbnRfZmxpcCwKPiArICAgICAgICAudW5mbGlwID0gZHVtbXlfcHJlc2VudF91bmZs
aXAsCj4gKyAgICB9Owo+ICsKPiArICAgIHJldHVybiBwcmVzZW50X3NjcmVlbl9pbml0KHNjcmVl
biwgJnByZXNlbnRfc2NyZWVuX2luZm8pOwo+ICt9Cj4gZGlmZiAtLWdpdCBhL3NwaWNlLXZpZGVv
LWR1bW15L3NyYy9kdW1teS5oCj4gYi9zcGljZS12aWRlby1kdW1teS9zcmMvc3BpY2VkdW1teS5o
Cj4gc2ltaWxhcml0eSBpbmRleCA4MyUKPiByZW5hbWUgZnJvbSBzcGljZS12aWRlby1kdW1teS9z
cmMvZHVtbXkuaAo+IHJlbmFtZSB0byBzcGljZS12aWRlby1kdW1teS9zcmMvc3BpY2VkdW1teS5o
Cj4gaW5kZXggMGMxNjU5MS4uYWI0ZDJhMSAxMDA2NDQKPiAtLS0gYS9zcGljZS12aWRlby1kdW1t
eS9zcmMvZHVtbXkuaAo+ICsrKyBiL3NwaWNlLXZpZGVvLWR1bW15L3NyYy9zcGljZWR1bW15LmgK
PiBAQCAtMTMsNiArMTMsOSBAQAo+ICAKPiAgI2luY2x1ZGUgImNvbXBhdC1hcGkuaCIKPiAgCj4g
KyNkZWZpbmUgR0xBTU9SX0ZPUl9YT1JHIDEKPiArI2luY2x1ZGUgImdsYW1vci5oIgo+ICsKPiAg
LyogU3VwcG9ydGVkIGNoaXBzZXRzICovCj4gIHR5cGVkZWYgZW51bSB7Cj4gICAgICBEVU1NWV9D
SElQCj4gQEAgLTI4LDYgKzMxLDEwIEBAIGV4dGVybiBCb29sIERVTU1ZQ3Vyc29ySW5pdChTY3Jl
ZW5QdHIgcFNjcm4pOwo+ICBleHRlcm4gdm9pZCBEVU1NWVNob3dDdXJzb3IoU2NybkluZm9QdHIg
cFNjcm4pOwo+ICBleHRlcm4gdm9pZCBEVU1NWUhpZGVDdXJzb3IoU2NybkluZm9QdHIgcFNjcm4p
Owo+ICAKPiArdm9pZCBkdW1teV9kcmkyX2Nsb3NlX3NjcmVlbihTY3JlZW5SZWMgKiBzY3JlZW4p
Owo+ICtCb29sIGR1bW15X2RyaTJfc2NyZWVuX2luaXQoU2NyZWVuUmVjICogc2NyZWVuKTsKPiAr
Qm9vbCBkdW1teV9wcmVzZW50X3NjcmVlbl9pbml0KFNjcmVlblJlYyAqIHNjcmVlbik7Cj4gKwo+
ICAvKiBnbG9iYWxzICovCj4gIHR5cGVkZWYgc3RydWN0IF9jb2xvciB7Cj4gICAgICBpbnQgcmVk
Owo+IEBAIC01MCw2ICs1Nyw5IEBAIHR5cGVkZWYgc3RydWN0IGR1bW15UmVjIHsKPiAgICAgIGR1
bW15X2NvbG9ycyBjb2xvcnNbMTAyNF07Cj4gICAgICAgQm9vbCgqQ3JlYXRlV2luZG93KSAoKTsg
ICAgLyogd3JhcHBlZCBDcmVhdGVXaW5kb3cgKi8KCndlaXJseSBpbmRlbmRlZCAobm90IGEgcHJv
YmxlbSBvZiB0aGlzIHBhdGNoKS4KCj4gICAgICBCb29sIHByb3A7Cj4gKwo+ICsgICAgQm9vbCBn
bGFtb3I7Cj4gKyAgICBpbnQgZmQ7Cj4gIH0gRFVNTVlSZWMsICpEVU1NWVB0cjsKPiAgCj4gIC8q
IFRoZSBwcml2YXRlcyBvZiB0aGUgRFVNTVkgZHJpdmVyICovCj4gZGlmZiAtLWdpdCBhL3NwaWNl
LXZpZGVvLWR1bW15L3NyYy9kdW1teV9kcml2ZXIuYwo+IGIvc3BpY2UtdmlkZW8tZHVtbXkvc3Jj
L3NwaWNlZHVtbXlfZHJpdmVyLmMKPiBzaW1pbGFyaXR5IGluZGV4IDg4JQo+IHJlbmFtZSBmcm9t
IHNwaWNlLXZpZGVvLWR1bW15L3NyYy9kdW1teV9kcml2ZXIuYwo+IHJlbmFtZSB0byBzcGljZS12
aWRlby1kdW1teS9zcmMvc3BpY2VkdW1teV9kcml2ZXIuYwo+IGluZGV4IDA2OTYxNTEuLmNhZDA2
MTkgMTAwNjQ0Cj4gLS0tIGEvc3BpY2UtdmlkZW8tZHVtbXkvc3JjL2R1bW15X2RyaXZlci5jCj4g
KysrIGIvc3BpY2UtdmlkZW8tZHVtbXkvc3JjL3NwaWNlZHVtbXlfZHJpdmVyLmMKPiBAQCAtMzIs
NyArMzIsOSBAQAo+ICAvKgo+ICAgKiBEcml2ZXIgZGF0YSBzdHJ1Y3R1cmVzLgo+ICAgKi8KPiAt
I2luY2x1ZGUgImR1bW15LmgiCj4gKyNpbmNsdWRlICJzcGljZWR1bW15LmgiCj4gKyNpbmNsdWRl
IDxmY250bC5oPgo+ICsjaW5jbHVkZSA8ZXJybm8uaD4KPiAgCj4gIC8qIFRoZXNlIG5lZWQgdG8g
YmUgY2hlY2tlZCAqLwo+ICAjaW5jbHVkZSA8WDExL1guaD4KPiBAQCAtNjIsOCArNjQsOCBAQCBz
dGF0aWMgQm9vbCBkdW1teURyaXZlckZ1bmMoU2NybkluZm9QdHIgcFNjcm4sCj4geG9yZ0RyaXZl
ckZ1bmNPcCBvcCwgcG9pbnRlciBwdHIpCj4gIC8qIAkJCQlpbnQgUG93ZXJNYW5hZ2VtZW50TW9k
ZSwgaW50IGZsYWdzKTsgKi8KPiAgCj4gICNkZWZpbmUgRFVNTVlfVkVSU0lPTiA0MDAwCj4gLSNk
ZWZpbmUgRFVNTVlfTkFNRSAiRFVNTVkiCj4gLSNkZWZpbmUgRFVNTVlfRFJJVkVSX05BTUUgImR1
bW15Igo+ICsjZGVmaW5lIERVTU1ZX05BTUUgIlNQSUNFRFVNTVkiCj4gKyNkZWZpbmUgRFVNTVlf
RFJJVkVSX05BTUUgInNwaWNlZHVtbXkiCj4gIAo+ICAjZGVmaW5lIERVTU1ZX01BSk9SX1ZFUlNJ
T04gUEFDS0FHRV9WRVJTSU9OX01BSk9SCj4gICNkZWZpbmUgRFVNTVlfTUlOT1JfVkVSU0lPTiBQ
QUNLQUdFX1ZFUlNJT05fTUlOT1IKPiBAQCAtOTksMTYgKzEwMSwyMCBAQCBfWF9FWFBPUlQgRHJp
dmVyUmVjIERVTU1ZID0gewo+ICB9Owo+ICAKPiAgc3RhdGljIFN5bVRhYlJlYyBEVU1NWUNoaXBz
ZXRzW10gPSB7Cj4gLSAgICB7RFVNTVlfQ0hJUCwgImR1bW15In0sCj4gKyAgICB7RFVNTVlfQ0hJ
UCwgInNwaWNlZHVtbXkifSwKPiAgICAgIHstMSwgTlVMTH0KPiAgfTsKPiAgCj4gIHR5cGVkZWYg
ZW51bSB7Cj4gLSAgICBPUFRJT05fU1dfQ1VSU09SCj4gKyAgICBPUFRJT05fU1dfQ1VSU09SLAo+
ICsgICAgT1BUSU9OX0RFVklDRV9QQVRILAo+ICsgICAgT1BUSU9OX0FDQ0VMX01FVEhPRCwKPiAg
fSBEVU1NWU9wdHM7Cj4gIAo+ICBzdGF0aWMgY29uc3QgT3B0aW9uSW5mb1JlYyBEVU1NWU9wdGlv
bnNbXSA9IHsKPiAgICAgIHtPUFRJT05fU1dfQ1VSU09SLCAiU1djdXJzb3IiLCBPUFRWX0JPT0xF
QU4sIHswfSwgRkFMU0V9LAo+ICsgICAge09QVElPTl9ERVZJQ0VfUEFUSCwgImttc2RldiIsIE9Q
VFZfU1RSSU5HLCB7MH0sIEZBTFNFfSwKPiArICAgIHtPUFRJT05fQUNDRUxfTUVUSE9ELCAiQWNj
ZWxNZXRob2QiLCBPUFRWX1NUUklORywgezB9LCBGQUxTRX0sCj4gICAgICB7LTEsIE5VTEwsIE9Q
VFZfTk9ORSwgezB9LCBGQUxTRX0KPiAgfTsKPiAgCj4gQEAgLTExNyw3ICsxMjMsNyBAQCBzdGF0
aWMgY29uc3QgT3B0aW9uSW5mb1JlYyBEVU1NWU9wdGlvbnNbXSA9IHsKPiAgc3RhdGljIE1PRFVM
RVNFVFVQUFJPVE8oZHVtbXlTZXR1cCk7Cj4gIAo+ICBzdGF0aWMgWEY4Nk1vZHVsZVZlcnNpb25J
bmZvIGR1bW15VmVyc1JlYyA9IHsKPiAtICAgICJkdW1teSIsCj4gKyAgICAic3BpY2VkdW1teSIs
Cj4gICAgICBNT0RVTEVWRU5ET1JTVFJJTkcsCj4gICAgICBNT0RJTkZPU1RSSU5HMSwKPiAgICAg
IE1PRElORk9TVFJJTkcyLAo+IEBAIC0xMzMsNyArMTM5LDcgQEAgc3RhdGljIFhGODZNb2R1bGVW
ZXJzaW9uSW5mbyBkdW1teVZlcnNSZWMgPSB7Cj4gICAqIFRoaXMgaXMgdGhlIG1vZHVsZSBpbml0
IGRhdGEuCj4gICAqIEl0cyBuYW1lIGhhcyB0byBiZSB0aGUgZHJpdmVyIG5hbWUgZm9sbG93ZWQg
YnkgTW9kdWxlRGF0YQo+ICAgKi8KPiAtX1hfRVhQT1JUIFhGODZNb2R1bGVEYXRhIGR1bW15TW9k
dWxlRGF0YSA9IHsgJmR1bW15VmVyc1JlYywgZHVtbXlTZXR1cCwgTlVMTAo+IH07Cj4gK19YX0VY
UE9SVCBYRjg2TW9kdWxlRGF0YSBzcGljZWR1bW15TW9kdWxlRGF0YSA9IHsgJmR1bW15VmVyc1Jl
YywgZHVtbXlTZXR1cCwKPiBOVUxMIH07Cj4gIAo+ICBzdGF0aWMgcG9pbnRlciBkdW1teVNldHVw
KHBvaW50ZXIgbW9kdWxlLCBwb2ludGVyIG9wdHMsIGludCAqZXJybWFqLCBpbnQKPiAgKmVycm1p
bikKPiAgewo+IEBAIC0xOTYsNyArMjAyLDcgQEAgc3RhdGljIGNvbnN0IE9wdGlvbkluZm9SZWMg
KkRVTU1ZQXZhaWxhYmxlT3B0aW9ucyhpbnQKPiBjaGlwaWQsIGludCBidXNpZCkKPiAgLyogTWFu
ZGF0b3J5ICovCj4gIHN0YXRpYyB2b2lkIERVTU1ZSWRlbnRpZnkoaW50IGZsYWdzKQo+ICB7Cj4g
LSAgICB4Zjg2UHJpbnRDaGlwc2V0cyhEVU1NWV9OQU1FLCAiRHJpdmVyIGZvciBEdW1teSBjaGlw
c2V0cyIsCj4gRFVNTVlDaGlwc2V0cyk7Cj4gKyAgICB4Zjg2UHJpbnRDaGlwc2V0cyhEVU1NWV9O
QU1FLCAiU3BpY2UgRHJpdmVyIGZvciBEdW1teSBjaGlwc2V0cyIsCj4gRFVNTVlDaGlwc2V0cyk7
Cj4gIH0KPiAgCj4gIC8qIE1hbmRhdG9yeSAqLwo+IEBAIC0yNTAsNiArMjU2LDQ2IEBAIHN0YXRp
YyBCb29sIERVTU1ZUHJvYmUoRHJpdmVyUHRyIGRydiwgaW50IGZsYWdzKQo+ICAgICAgcmV0dXJu
IGZvdW5kU2NyZWVuOwo+ICB9Cj4gIAo+ICtzdGF0aWMgaW50IGR1bW15X29wZW5fcmVuZGVyX25v
ZGUoY29uc3QgU2NybkluZm9SZWMgKiBzY3JuKQo+ICt7Cj4gKyAgICBjb25zdCBEVU1NWVJlYyAq
ZHVtbXkgPSBzY3JuLT5kcml2ZXJQcml2YXRlOwo+ICsgICAgY29uc3QgY2hhciAqZGV2aWNlX3Bh
dGg7Cj4gKyAgICBpbnQgZmQ7Cj4gKwo+ICsgICAgaWYgKCEoZGV2aWNlX3BhdGggPSB4Zjg2R2V0
T3B0VmFsU3RyaW5nKGR1bW15LT5PcHRpb25zLAo+IE9QVElPTl9ERVZJQ0VfUEFUSCkpKQo+ICsg
ICAgICAgIGRldmljZV9wYXRoID0gIi9kZXYvZHJpL3JlbmRlckQxMjgiOwo+ICsgICAgaWYgKChm
ZCA9IG9wZW4oZGV2aWNlX3BhdGgsIE9fUkRXUiwgMCkpID09IC0xKQo+ICsgICAgICAgIHhmODZE
cnZNc2coc2Nybi0+c2NybkluZGV4LCBYX0VSUk9SLCAib3BlbiAlczogJXNcbiIsIGRldmljZV9w
YXRoLAo+IHN0cmVycm9yKGVycm5vKSk7Cj4gKwo+ICsgICAgcmV0dXJuIGZkOwo+ICt9Cj4gKwo+
ICtzdGF0aWMgQm9vbCBkdW1teV9lbmFibGVfZ2xhbW9yKFNjcm5JbmZvUmVjICogc2NybikKPiAr
ewo+ICsgICAgY29uc3QgRFVNTVlSZWMgKmR1bW15ID0gc2Nybi0+ZHJpdmVyUHJpdmF0ZTsKPiAr
ICAgIGNvbnN0IGNoYXIgKmFjY2VsX21ldGhvZDsKPiArCj4gKyAgICBpZiAoKGFjY2VsX21ldGhv
ZCA9IHhmODZHZXRPcHRWYWxTdHJpbmcoZHVtbXktPk9wdGlvbnMsCj4gT1BUSU9OX0FDQ0VMX01F
VEhPRCkpCj4gKyAgICAgICAgJiYgc3RyY21wKGFjY2VsX21ldGhvZCwgImdsYW1vciIpKSB7Cj4g
KyAgICAgICAgeGY4NkRydk1zZyhzY3JuLT5zY3JuSW5kZXgsIFhfQ09ORklHLCAiR2xhbW9yIGRp
c2FibGVkLlxuIik7Cj4gKyAgICAgICAgcmV0dXJuIEZBTFNFOwo+ICsgICAgfQo+ICsKPiArICAg
IGlmICgheGY4NkxvYWRTdWJNb2R1bGUoc2NybiwgR0xBTU9SX0VHTF9NT0RVTEVfTkFNRSkpIHsK
PiArICAgICAgICB4Zjg2RHJ2TXNnKHNjcm4tPnNjcm5JbmRleCwgWF9FUlJPUiwgIkZhaWxlZCB0
byBsb2FkIGdsYW1vcgo+IG1vZHVsZS5cbiIpOwo+ICsgICAgICAgIHJldHVybiBGQUxTRTsKPiAr
ICAgIH0KPiArCj4gKyAgICBpZiAoIWdsYW1vcl9lZ2xfaW5pdChzY3JuLCBkdW1teS0+ZmQpKSB7
Cj4gKyAgICAgICAgeGY4NkRydk1zZyhzY3JuLT5zY3JuSW5kZXgsIFhfRVJST1IsICJHbGFtb3Ig
aW5pdGlhbGlzYXRpb24KPiBmYWlsZWQuXG4iKTsKPiArICAgICAgICByZXR1cm4gRkFMU0U7Cj4g
KyAgICB9Cj4gKwo+ICsgICAgeGY4NkRydk1zZyhzY3JuLT5zY3JuSW5kZXgsIFhfSU5GTywgIkds
YW1vciBpbml0aWFsaXNlZC5cbiIpOwo+ICsKPiArICAgIHJldHVybiBUUlVFOwo+ICt9Cj4gKwo+
ICAjZGVmaW5lIFJFVFVSTiBcCj4gICAgICB7IERVTU1ZRnJlZVJlYyhwU2Nybik7XAo+ICAJCQkg
ICAgcmV0dXJuIEZBTFNFO1wKPiBAQCAtMzQzLDYgKzM4OSw5IEBAIEJvb2wgRFVNTVlQcmVJbml0
KFNjcm5JbmZvUHRyIHBTY3JuLCBpbnQgZmxhZ3MpCj4gIAo+ICAgICAgeGY4NkdldE9wdFZhbEJv
b2woZFB0ci0+T3B0aW9ucywgT1BUSU9OX1NXX0NVUlNPUiwgJmRQdHItPnN3Q3Vyc29yKTsKPiAg
Cj4gKyAgICBkUHRyLT5mZCA9IGR1bW15X29wZW5fcmVuZGVyX25vZGUocFNjcm4pOwoKRG8geW91
IHdhbnQgdG8gY29udGludWUgaGVyZSBpZiBmZCA9PSAtMSA/CkkgdGhpbmsgcG90ZW50aWFsbHkg
eW91IHdvdWxkIGhhdmUgYSBjcmFzaCBzZXR0aW5nIHVwIGRyaSBmdW5jdGlvbnMuCk1heWJlIGFs
c28gZ2xhbW9yIHNob3VsZCBiZSBkaXNhYmxlZCBpZiBmZCA9PSAtMSA/Cgo+ICsgICAgZFB0ci0+
Z2xhbW9yID0gZHVtbXlfZW5hYmxlX2dsYW1vcihwU2Nybik7Cj4gKwo+ICAgICAgaWYgKGRldmlj
ZS0+dmlkZW9SYW0gIT0gMCkgewo+ICAgICAgICAgIHBTY3JuLT52aWRlb1JhbSA9IGRldmljZS0+
dmlkZW9SYW07Cj4gICAgICAgICAgeGY4NkRydk1zZyhwU2Nybi0+c2NybkluZGV4LCBYX0NPTkZJ
RywgIlZpZGVvUkFNOiAlZCBrQnl0ZVxuIiwKPiAgICAgICAgICBwU2Nybi0+dmlkZW9SYW0pOwo+
IEBAIC01NDAsNiArNTg5LDEyIEBAIHN0YXRpYyBCb29sIERVTU1ZU2NyZWVuSW5pdChTQ1JFRU5f
SU5JVF9BUkdTX0RFQ0wpCj4gICAgICAvKiBtdXN0IGJlIGFmdGVyIFJHQiBvcmRlcmluZyBmaXhl
ZCAqLwo+ICAgICAgZmJQaWN0dXJlSW5pdChwU2NyZWVuLCAwLCAwKTsKPiAgCj4gKyAgICBpZiAo
ZFB0ci0+Z2xhbW9yICYmICFnbGFtb3JfaW5pdChwU2NyZWVuLCBHTEFNT1JfVVNFX0VHTF9TQ1JF
RU4pKSB7Cj4gKyAgICAgICAgeGY4NkRydk1zZyhwU2Nybi0+c2NybkluZGV4LCBYX0VSUk9SLAo+
ICsgICAgICAgICAgICAgICAgICAgIkZhaWxlZCB0byBpbml0aWFsaXNlIGdsYW1vciBhdCBTY3Jl
ZW5Jbml0KCkgdGltZS5cbiIpOwo+ICsgICAgICAgIHJldHVybiBGQUxTRTsKPiArICAgIH0KPiAr
Cj4gICAgICB4Zjg2U2V0QmxhY2tXaGl0ZVBpeGVscyhwU2NyZWVuKTsKPiAgCj4gICAgICBpZiAo
ZFB0ci0+c3dDdXJzb3IpCj4gQEAgLTU5NSw2ICs2NTAsMTQgQEAgc3RhdGljIEJvb2wgRFVNTVlT
Y3JlZW5Jbml0KFNDUkVFTl9JTklUX0FSR1NfREVDTCkKPiAgICAgIGRQdHItPkNyZWF0ZVdpbmRv
dyA9IHBTY3JlZW4tPkNyZWF0ZVdpbmRvdzsKPiAgICAgIHBTY3JlZW4tPkNyZWF0ZVdpbmRvdyA9
IERVTU1ZQ3JlYXRlV2luZG93Owo+ICAKPiArICAgIGlmIChkUHRyLT5nbGFtb3IpIHsKPiArICAg
ICAgICBpZiAoIWR1bW15X2RyaTJfc2NyZWVuX2luaXQocFNjcmVlbikpCj4gKyAgICAgICAgICAg
IHhmODZEcnZNc2cocFNjcm4tPnNjcm5JbmRleCwgWF9FUlJPUiwgIkZhaWxlZCB0byBpbml0aWFs
aXNlIHRoZQo+IERSSTIgZXh0ZW5zaW9uLlxuIik7Cj4gKwo+ICsgICAgICAgIGlmICghZHVtbXlf
cHJlc2VudF9zY3JlZW5faW5pdChwU2NyZWVuKSkKPiArICAgICAgICAgICAgeGY4NkRydk1zZyhw
U2Nybi0+c2NybkluZGV4LCBYX0VSUk9SLCAiRmFpbGVkIHRvIGluaXRpYWxpc2UgdGhlCj4gUHJl
c2VudCBleHRlbnNpb24uXG4iKTsKPiArICAgIH0KPiArCj4gICAgICAvKiBSZXBvcnQgYW55IHVu
dXNlZCBvcHRpb25zIChvbmx5IGZvciB0aGUgZmlyc3QgZ2VuZXJhdGlvbikgKi8KPiAgICAgIGlm
IChzZXJ2ZXJHZW5lcmF0aW9uID09IDEpIHsKPiAgICAgICAgICB4Zjg2U2hvd1VudXNlZE9wdGlv
bnMocFNjcm4tPnNjcm5JbmRleCwgcFNjcm4tPm9wdGlvbnMpOwo+IEBAIC02MjAsNiArNjgzLDkg
QEAgc3RhdGljIEJvb2wgRFVNTVlDbG9zZVNjcmVlbihDTE9TRV9TQ1JFRU5fQVJHU19ERUNMKQo+
ICAgICAgU2NybkluZm9QdHIgcFNjcm4gPSB4Zjg2U2NyZWVuVG9TY3JuKHBTY3JlZW4pOwo+ICAg
ICAgRFVNTVlQdHIgZFB0ciA9IERVTU1ZUFRSKHBTY3JuKTsKPiAgCj4gKyAgICBpZiAoZFB0ci0+
Z2xhbW9yKQo+ICsgICAgICAgIGR1bW15X2RyaTJfY2xvc2Vfc2NyZWVuKHBTY3JlZW4pOwo+ICsK
PiAgICAgIGZyZWUocFNjcmVlbi0+R2V0U2NyZWVuUGl4bWFwKHBTY3JlZW4pLT5kZXZQcml2YXRl
LnB0cik7Cj4gIAo+ICAgICAgaWYgKGRQdHItPkN1cnNvckluZm8pCgpGcmVkaWFubwpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpTcGljZS1kZXZlbCBtYWls
aW5nIGxpc3QKU3BpY2UtZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMu
ZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vc3BpY2UtZGV2ZWw=
