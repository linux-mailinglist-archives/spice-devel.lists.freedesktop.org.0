Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 3871B87CBC
	for <lists+spice-devel@lfdr.de>; Fri,  9 Aug 2019 16:28:42 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BC95C6EE3A;
	Fri,  9 Aug 2019 14:28:40 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id EE9EA6EE36
 for <spice-devel@lists.freedesktop.org>; Fri,  9 Aug 2019 14:28:38 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx07.intmail.prod.int.phx2.redhat.com
 [10.5.11.22])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 9BFB93172D94
 for <spice-devel@lists.freedesktop.org>; Fri,  9 Aug 2019 14:28:38 +0000 (UTC)
Received: from fziglio.remote.csb (ovpn-204-160.brq.redhat.com [10.40.204.160])
 by smtp.corp.redhat.com (Postfix) with ESMTP id E743A100034E;
 Fri,  9 Aug 2019 14:28:36 +0000 (UTC)
From: Frediano Ziglio <fziglio@redhat.com>
To: spice-devel@lists.freedesktop.org
Date: Fri,  9 Aug 2019 15:26:49 +0100
Message-Id: <20190809142651.2967-32-fziglio@redhat.com>
In-Reply-To: <20190809142651.2967-1-fziglio@redhat.com>
References: <20190809142651.2967-1-fziglio@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.84 on 10.5.11.22
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.41]); Fri, 09 Aug 2019 14:28:38 +0000 (UTC)
Subject: [Spice-devel] [PATCH spice-gtk v2 31/33] usb-redir: Add base test
 for cd-emulation
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

SnVzdCBhbGxvY2F0ZSBhbmQgZnJlZSB0byB0ZXN0IGZvciBiYXNlIGxlYWtzIGFuZCByZWZlcmVu
Y2UKY291bnRpbmcuCgpTaWduZWQtb2ZmLWJ5OiBGcmVkaWFubyBaaWdsaW8gPGZ6aWdsaW9AcmVk
aGF0LmNvbT4KLS0tCiB0ZXN0cy9jZC1lbXUuYyAgICB8IDkyICsrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrCiB0ZXN0cy9tZXNvbi5idWlsZCB8ICA0ICsrKwog
MiBmaWxlcyBjaGFuZ2VkLCA5NiBpbnNlcnRpb25zKCspCiBjcmVhdGUgbW9kZSAxMDA2NDQgdGVz
dHMvY2QtZW11LmMKCmRpZmYgLS1naXQgYS90ZXN0cy9jZC1lbXUuYyBiL3Rlc3RzL2NkLWVtdS5j
Cm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwLi40OWZiOGQ0NgotLS0gL2Rldi9u
dWxsCisrKyBiL3Rlc3RzL2NkLWVtdS5jCkBAIC0wLDAgKzEsOTIgQEAKKy8qCisgICBDb3B5cmln
aHQgKEMpIDIwMTYgUmVkIEhhdCwgSW5jLgorCisgICBUaGlzIGxpYnJhcnkgaXMgZnJlZSBzb2Z0
d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yCisgICBtb2RpZnkgaXQgdW5kZXIg
dGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljCisgICBMaWNlbnNlIGFz
IHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIKKyAgIHZl
cnNpb24gMi4xIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2
ZXJzaW9uLgorCisgICBUaGlzIGxpYnJhcnkgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhh
dCBpdCB3aWxsIGJlIHVzZWZ1bCwKKyAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91
dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCisgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklU
TkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlIEdOVQorICAgTGVzc2VyIEdl
bmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KKworICAgWW91IHNob3VsZCBo
YXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYworICAg
TGljZW5zZSBhbG9uZyB3aXRoIHRoaXMgbGlicmFyeTsgaWYgbm90LCBzZWUgPGh0dHA6Ly93d3cu
Z251Lm9yZy9saWNlbnNlcy8+LgorKi8KKyNpbmNsdWRlIDxnaW8vZ2lvLmg+CisKKyNpbmNsdWRl
ICJ1c2ItZGV2aWNlLWNkLmgiCisjaW5jbHVkZSAidXNiLWVtdWxhdGlvbi5oIgorCitzdGF0aWMg
U3BpY2VVc2JCYWNrZW5kRGV2aWNlICpkZXZpY2UgPSBOVUxMOworCisvKiBzaW1wbGUgdXNiIG1h
bmFnZXIgaG90cGx1ZyBjYWxsYmFjayBlbXVsYXRpb24uICovCitzdGF0aWMgdm9pZAoraG90cGx1
Z19jYWxsYmFjayh2b2lkICp1c2VyX2RhdGEsIFNwaWNlVXNiQmFja2VuZERldmljZSAqZGV2LCBn
Ym9vbGVhbiBhZGRlZCkKK3sKKyAgICAvLyBpZ25vcmUgbm90IGVtdWxhdGVkIGRldmljZXMKKyAg
ICBjb25zdCBVc2JEZXZpY2VJbmZvcm1hdGlvbiAqaW5mbyA9IHNwaWNlX3VzYl9iYWNrZW5kX2Rl
dmljZV9nZXRfaW5mbyhkZXYpOworICAgIGlmIChpbmZvLT5idXMgIT0gQlVTX05VTUJFUl9GT1Jf
RU1VTEFURURfVVNCKSB7CisgICAgICAgIHJldHVybjsKKyAgICB9CisKKyAgICBpZiAoYWRkZWQp
IHsKKyAgICAgICAgZ19hc3NlcnRfbnVsbChkZXZpY2UpOworICAgICAgICBkZXZpY2UgPSBzcGlj
ZV91c2JfYmFja2VuZF9kZXZpY2VfcmVmKGRldik7CisgICAgfSBlbHNlIHsKKyAgICAgICAgZ19h
c3NlcnRfbm9ubnVsbChkZXZpY2UpOworICAgICAgICBnX2Fzc2VydChkZXZpY2UgPT0gZGV2KTsK
KyAgICAgICAgc3BpY2VfdXNiX2JhY2tlbmRfZGV2aWNlX3VucmVmKGRldik7CisgICAgICAgIGRl
dmljZSA9IE5VTEw7CisgICAgfQorfQorCitzdGF0aWMgdm9pZCBtdWx0aXBsZShjb25zdCB2b2lk
ICpwYXJhbSkKK3sKKyAgICBndWludCBsaW1pdCA9IEdQT0lOVEVSX1RPX1VJTlQocGFyYW0pOwor
ICAgIENkRW11bGF0aW9uUGFyYW1zIHBhcmFtcyA9IHsgInRlc3QtY2QtZW11LmlzbyIsIDEgfTsK
KyAgICBHRXJyb3IgKmVyciA9IE5VTEw7CisgICAgU3BpY2VVc2JCYWNrZW5kICogYmUgPSBzcGlj
ZV91c2JfYmFja2VuZF9uZXcoJmVycik7CisgICAgZ19hc3NlcnRfbm9ubnVsbChiZSk7CisgICAg
Z19hc3NlcnRfbnVsbChlcnIpOworICAgIHNwaWNlX3VzYl9iYWNrZW5kX3JlZ2lzdGVyX2hvdHBs
dWcoYmUsIE5VTEwsIGhvdHBsdWdfY2FsbGJhY2ssICZlcnIpOworICAgIGdfYXNzZXJ0X251bGwo
ZXJyKTsKKyAgICBmb3IgKGludCBpID0gMDsgaSA8IGxpbWl0OyArK2kpIHsKKyAgICAgICAgLy8g
YWxsb2NhdGUgYSBDRCBlbXVsYXRpb24gZGV2aWNlCisgICAgICAgIGdfYXNzZXJ0X3RydWUoY3Jl
YXRlX2VtdWxhdGVkX2NkKGJlLCAmcGFyYW1zLCAmZXJyKSk7CisgICAgICAgIGdfYXNzZXJ0X251
bGwoZXJyKTsKKyAgICAgICAgZ19hc3NlcnRfbm9ubnVsbChkZXZpY2UpOworCisgICAgICAgIC8v
IGVtdWxhdGUgYXV0b21hdGljIENEIGVqZWN0aW9uLCB0aGlzIHNob3VsZCByZWxlYXNlIHRoZQor
ICAgICAgICAvLyBvYmplY3QKKyAgICAgICAgc3BpY2VfdXNiX2JhY2tlbmRfZGV2aWNlX2VqZWN0
KGJlLCBkZXZpY2UpOworICAgICAgICBnX2Fzc2VydF9udWxsKGRldmljZSk7CisgICAgfQorICAg
IHNwaWNlX3VzYl9iYWNrZW5kX2RlcmVnaXN0ZXJfaG90cGx1ZyhiZSk7CisgICAgc3BpY2VfdXNi
X2JhY2tlbmRfZGVsZXRlKGJlKTsKK30KKworc3RhdGljIHZvaWQKK3dyaXRlX3Rlc3RfaXNvKHZv
aWQpCit7CisgICAgdWludDhfdCBzZWN0b3JbMjA0OF07CisgICAgRklMRSAqZiA9IGZvcGVuKCJ0
ZXN0LWNkLWVtdS5pc28iLCAid2IiKTsKKyAgICBnX2Fzc2VydF9ub25udWxsKGYpOworICAgIG1l
bXNldChzZWN0b3IsIDAsIHNpemVvZihzZWN0b3IpKTsKKyAgICBzdHJjcHkoKGNoYXIqKSBzZWN0
b3IsICJzZWN0b3IgMCIpOworICAgIGZ3cml0ZShzZWN0b3IsIHNpemVvZihzZWN0b3IpLCAxLCBm
KTsKKyAgICBmY2xvc2UoZik7Cit9CisKK2ludCBtYWluKGludCBhcmdjLCBjaGFyKiBhcmd2W10p
Cit7CisgICAgd3JpdGVfdGVzdF9pc28oKTsKKworICAgIGdfdGVzdF9pbml0KCZhcmdjLCAmYXJn
diwgTlVMTCk7CisKKyAgICBnX3Rlc3RfYWRkX2RhdGFfZnVuYygiL2NkLWVtdS9zaW1wbGUiLCBH
VUlOVF9UT19QT0lOVEVSKDEpLCBtdWx0aXBsZSk7CisgICAgZ190ZXN0X2FkZF9kYXRhX2Z1bmMo
Ii9jZC1lbXUvbXVsdGlwbGUiLCBHVUlOVF9UT19QT0lOVEVSKDEyOCksIG11bHRpcGxlKTsKKwor
ICAgIHJldHVybiBnX3Rlc3RfcnVuKCk7Cit9CmRpZmYgLS1naXQgYS90ZXN0cy9tZXNvbi5idWls
ZCBiL3Rlc3RzL21lc29uLmJ1aWxkCmluZGV4IDZjODA3NzYyLi4zOWVhYzljOSAxMDA2NDQKLS0t
IGEvdGVzdHMvbWVzb24uYnVpbGQKKysrIGIvdGVzdHMvbWVzb24uYnVpbGQKQEAgLTEwLDYgKzEw
LDEwIEBAIGlmIHNwaWNlX2d0a19oYXNfcGhvZGF2CiAgIHRlc3RzX3NvdXJjZXMgKz0gJ3BpcGUu
YycKIGVuZGlmCiAKK2lmIHNwaWNlX2d0a19oYXNfdXNicmVkaXIKKyAgdGVzdHNfc291cmNlcyAr
PSAnY2QtZW11LmMnCitlbmRpZgorCiBpZiBzcGljZV9ndGtfaGFzX3BvbGtpdAogICB0ZXN0c19z
b3VyY2VzICs9IFsKICAgICAndXNiLWFjbC1oZWxwZXIuYycsCi0tIAoyLjIwLjEKCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClNwaWNlLWRldmVsIG1haWxp
bmcgbGlzdApTcGljZS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5m
cmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9zcGljZS1kZXZlbA==
