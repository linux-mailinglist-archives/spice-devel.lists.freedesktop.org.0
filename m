Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id A186D5FB82
	for <lists+spice-devel@lfdr.de>; Thu,  4 Jul 2019 18:06:40 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 36ACF6E37C;
	Thu,  4 Jul 2019 16:06:39 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mail-ot1-f65.google.com (mail-ot1-f65.google.com
 [209.85.210.65])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 800D36E37C
 for <spice-devel@lists.freedesktop.org>; Thu,  4 Jul 2019 16:06:38 +0000 (UTC)
Received: by mail-ot1-f65.google.com with SMTP id n5so6441573otk.1
 for <spice-devel@lists.freedesktop.org>; Thu, 04 Jul 2019 09:06:38 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=5ja/P89FA+fvr37YzJse405w6FbD2iFSA/edtJjlQgo=;
 b=iAeAI9wKEl7MNV9EVMT/YyGuZZmOSxtmvt4ph568h0WfqhrwuwuhpJo5TqZRwdtI56
 HWfuby2utm0c4vwKWY3IHOY4uY4o62gcLjNb59ZMXXsNRPtceZhXlNHWzT7dMSgvhFwQ
 tvgQG+f/3mSr1ElvcLwzMV0mohw33ptayKW7SABLSFpaSOykG1XxYgyWEWHDbxVJR/PP
 iloZSXXQ0rFYArOicMyvOMB+n1XPsDqnmryA4EDD8nUcul0BvnY45d/PGCpX1jB8JcK0
 nyEG5Ehme6Cz8QhXE0lpHRlQNpahrMe3JzBry7g+GY2lwceRKpGsAuQA92+5COesp4Zv
 Tqqg==
X-Gm-Message-State: APjAAAXI+4iCLQqbAwepxQjfH84la2GESDq1AMGCpE/pIrckYNPFWH1T
 agyhVaEqoDUdqkqce4v+48GSMLR/UovkTtnB4tOPag==
X-Google-Smtp-Source: APXvYqxosjM4/Yu8gV1SNIWQKohs1+9TwJHE+J5AjaOqcQaL0lVa0kifgFC7NCUnPCPPvJXKmuG+WPWJ5ugZeYlolrU=
X-Received: by 2002:a9d:6c54:: with SMTP id g20mr23242707otq.66.1562256397651; 
 Thu, 04 Jul 2019 09:06:37 -0700 (PDT)
MIME-Version: 1.0
References: <20190704101732.9877-1-kpouget@redhat.com>
 <1979203166.26425220.1562243432369.JavaMail.zimbra@redhat.com>
In-Reply-To: <1979203166.26425220.1562243432369.JavaMail.zimbra@redhat.com>
From: Kevin Pouget <kpouget@redhat.com>
Date: Thu, 4 Jul 2019 18:06:26 +0200
Message-ID: <CADJ1XR1ufJx6xGGRiDmNz8db5-_MRMox_YrdnVBgSjjQyOE9dA@mail.gmail.com>
To: Frediano Ziglio <fziglio@redhat.com>
Subject: Re: [Spice-devel] [PATCH spice-server] reds: Add ability to query
 the video-codecs currently enabled
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Spice devel <spice-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

T24gVGh1LCBKdWwgNCwgMjAxOSBhdCAyOjMwIFBNIEZyZWRpYW5vIFppZ2xpbyA8ZnppZ2xpb0By
ZWRoYXQuY29tPiB3cm90ZToKPgo+Cj4gPgo+ID4gc3BpY2Vfc2VydmVyX2dldF92aWRlb19jb2Rl
Y3M6IG5ldyBwdWJsaWMgZnVuY3Rpb24gdG8gcXVlcnkgdGhlIHZpZGVvCj4gPiBlbmNvZGVycy9j
b2RlY3MgY3VycmVudGx5IGVuYWJsZWQgaW4gdGhlIHNwaWNlIHNlcnZlci4gSXQgcmV0dXJucyBh
Cj4gPiBzdHJpbmcgdGhhdCBjYW4gYmUgZmVkIHRvIHRoZSBzZXR0ZXIgY291bnRlcgo+ID4gKHNw
aWNlX3NlcnZlcl9zZXRfdmlkZW9fY29kZWNzKS4gVGhlIHN0cmluZyByZXR1cm5lZCBieSB0aGlz
IGZ1bmN0aW9uCj4gPiBzaG91bGQgYmUgcmVsZWFzZWQgd2l0aCBzcGljZV9zZXJ2ZXJfZnJlZV92
aWRlb19jb2RlY3MuCj4gPgo+ID4gc3BpY2Vfc2VydmVyX2ZyZWVfdmlkZW9fY29kZWNzOiBuZXcg
cHVibGljIGZ1bmN0aW9uIHRvIGZyZWUgdGhlIHRoZQo+ID4gdmlkZW8gY29kZWMgbGlzdCByZXR1
cm5lZCBieSBzcGljZV9zZXJ2ZXJfZ2V0X3ZpZGVvX2NvZGVjcy4KPiA+Cj4gPiBTaWduZWQtb2Zm
LWJ5OiBLZXZpbiBQb3VnZXQgPGtwb3VnZXRAcmVkaGF0LmNvbT4KPiA+IC0tLQo+ID4gIHNlcnZl
ci9kY2MuYyAgICAgICAgICAgICB8ICA1ICsrKy0KPiA+ICBzZXJ2ZXIvcmVkcy5jICAgICAgICAg
ICAgfCA1MiArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCj4gPiAgc2Vy
dmVyL3JlZHMuaCAgICAgICAgICAgIHwgIDIgKysKPiA+ICBzZXJ2ZXIvc3BpY2Utc2VydmVyLmgg
ICAgfCAxMiArKysrKysrKysrCj4gPiAgc2VydmVyL3NwaWNlLXNlcnZlci5zeW1zIHwgIDYgKysr
KysKPiA+ICA1IGZpbGVzIGNoYW5nZWQsIDc2IGluc2VydGlvbnMoKyksIDEgZGVsZXRpb24oLSkK
PiA+Cj4gPiBkaWZmIC0tZ2l0IGEvc2VydmVyL2RjYy5jIGIvc2VydmVyL2RjYy5jCj4gPiBpbmRl
eCA3MWQwOWI3Ny4uODA4ZTQyNDggMTAwNjQ0Cj4gPiAtLS0gYS9zZXJ2ZXIvZGNjLmMKPiA+ICsr
KyBiL3NlcnZlci9kY2MuYwo+ID4gQEAgLTExNDAsNyArMTE0MCwxMCBAQCBzdGF0aWMgdm9pZAo+
ID4gZGNjX3VwZGF0ZV9wcmVmZXJyZWRfdmlkZW9fY29kZWNzKERpc3BsYXlDaGFubmVsQ2xpZW50
ICpkY2MpCj4gPiAgICAgIG1zZyA9IGdfc3RyaW5nX25ldygiUHJlZmVycmVkIHZpZGVvLWNvZGVj
czoiKTsKPiA+ICAgICAgZm9yIChpID0gMDsgaSA8IHZpZGVvX2NvZGVjcy0+bGVuOyBpKyspIHsK
PiA+ICAgICAgICAgIFJlZFZpZGVvQ29kZWMgY29kZWMgPSBnX2FycmF5X2luZGV4KHZpZGVvX2Nv
ZGVjcywgUmVkVmlkZW9Db2RlYywgaSk7Cj4gPiAtICAgICAgICBnX3N0cmluZ19hcHBlbmRfcHJp
bnRmKG1zZywgIiAlZCIsIGNvZGVjLnR5cGUpOwo+ID4gKyAgICAgICAgY2hhciAqY29kZWNfbmFt
ZSA9IHJlZHNfZ2V0X3ZpZGVvX2NvZGVjX2Z1bGxuYW1lKCZjb2RlYyk7Cj4gPiArCj4gPiArICAg
ICAgICBnX3N0cmluZ19hcHBlbmRfcHJpbnRmKG1zZywgIiVzICIsIGNvZGVjX25hbWUpOwo+ID4g
KyAgICAgICAgZ19mcmVlKGNvZGVjX25hbWUpOwo+ID4gICAgICB9Cj4gPiAgICAgIHNwaWNlX2Rl
YnVnKCIlcyIsIG1zZy0+c3RyKTsKPiA+ICAgICAgZ19zdHJpbmdfZnJlZShtc2csIFRSVUUpOwo+
Cj4gTG9va3MgbGlrZSB0aGlzIGNvZGUgaXMgZG9pbmcgcmVhbGx5IHNpbWlsYXIgc3R1ZmYgdG8g
dGhlIG5ldyBwdWJsaWMgZnVuY3Rpb24uCj4gTWF5YmUgdGhlIGNvZGUgZm9yIGZvcm1hdCBmcm9t
IHRoZSBhcnJheSBvZiBSZWRWaWRlb0NvZGVjIHRvIHN0cmluZyBtYXkgYmUKPiB0aGUgc2FtZT8K
Pgo+IEkgYXNzdW1lIHRoZSBmdW5jdGlvbiB3b3VsZCBiZSBpbiBkaXNwbGF5LWNoYW5uZWwuYyBh
cyBkZWFsaW5nIGRpc3BsYXkKPiBzdHVmZiBhbHRob3VnaCBmcm9tIGN1cnJlbnQgZGVjbGFyYXRp
b24gSSB3b3VsZCBzZWUgaXQgaW4gYSB2aWRlby1lbmNvZGVyLmMKPiBmaWxlLgoKeWVzIGluZGVl
ZCwgaXQncyBleGFjdGx5IHRoZSBzYW1lIGNvZGUsIEkgbWVyZ2VkIHRoZW0gaW50byBhIG5ldwpm
dW5jdGlvbiB2aWRlb19jb2RlY3NfdG9fc3RyaW5nCnRoYXQgSSBwdXQgaW4gdmlkZW8tc3RyZWFt
LmMgKHRoZXJlJ3Mgbm8gdmlkZW8tZW5jb2Rlci5jLCBhbmQKZGlzcGxheS1jaGFubmVsLmMgZG9l
c24ndCBkZWFsIHdpdGggUmVkVmlkZW9Db2RlYykKCj4gPiBkaWZmIC0tZ2l0IGEvc2VydmVyL3Jl
ZHMuYyBiL3NlcnZlci9yZWRzLmMKPiA+IGluZGV4IDY3MWUwYTg2Li5hNTFkNTc2ZSAxMDA2NDQK
PiA+IC0tLSBhL3NlcnZlci9yZWRzLmMKPiA+ICsrKyBiL3NlcnZlci9yZWRzLmMKPiA+IEBAIC0z
NzA4LDYgKzM3MDgsMTggQEAgc3RhdGljIGdib29sZWFuIGdldF9uYW1lX2luZGV4KGNvbnN0IEVu
dW1OYW1lcwo+ID4gbmFtZXNbXSwgY29uc3QgY2hhciAqbmFtZSwgdWludDMyCj4gPiAgICAgIHJl
dHVybiBGQUxTRTsKPiA+ICB9Cj4gPgo+ID4gKy8qIHJldHVybnMgTlVMTCBpZiBpbmRleCBpcyBp
bnZhbGlkLiAqLwo+ID4gK3N0YXRpYyBjb25zdCBjaGFyICpnZXRfaW5kZXhfbmFtZShjb25zdCBF
bnVtTmFtZXMgbmFtZXNbXSwgdWludDMyX3QgaW5kZXgpCj4gPiArewo+ID4gKyAgICBpbnQgaTsK
PiA+ICsKPiA+ICsgICAgZm9yIChpID0gMDsgbmFtZXNbaV0ubmFtZSAhPSBOVUxMICYmIG5hbWVz
W2ldLmlkICE9IGluZGV4OyBpKyspIHsKPiA+ICsgICAgICAgIGNvbnRpbnVlOwo+ID4gKyAgICB9
Cj4gPiArCj4gPiArICAgIHJldHVybiBuYW1lc1tpXS5uYW1lOwo+ID4gK30KPiA+ICsKPgo+IE1h
eWJlIGl0J3MgbWUgbW9yZSBmYW1pbGlhciB3aXRoIHBvaW50ZXJzLCB3aGF0IGFib3V0Cj4KPiAg
ICAgd2hpbGUgKG5hbWVzLT5uYW1lICE9IE5VTEwgJiYgbmFtZXMtPmlkICE9IGluZGV4KSB7Cj4g
ICAgICAgICArK25hbWVzOwo+ICAgICB9Cj4gICAgIHJldHVybiBuYW1lcy0+bmFtZTsKPgo+ID8/
Cgp5ZXMsIHRoYXQncyBpbmRlZWQgYSBiaXQgbW9yZSBsaWdodHdlaWdodApJJ20gbm90IHJlYWxs
eSBmYW4gb2YgdGhlIHByZS1pbmNyZW1lbnQgbm90YXRpb24gdGhvdWdoIChzbGlnaHRseSBsZXNz
Cm5hdHVyYWwgdG8gcmVhZCwgYW5kIG5vIGFjdHVhbCBiZW5lZml0KSwKSSBjaGFuZ2VkIGl0IGlm
IHlvdSBkb24ndCBtaW5kCgo+ID4gIHN0YXRpYyBjb25zdCBFbnVtTmFtZXMgcmVuZGVyZXJfbmFt
ZXNbXSA9IHsKPiA+ICAgICAge1JFRF9SRU5ERVJFUl9TVywgInN3In0sCj4gPiAgICAgIHtSRURf
UkVOREVSRVJfSU5WQUxJRCwgTlVMTH0sCj4gPiBAQCAtMzc1NSw2ICszNzY3LDI0IEBAIHN0YXRp
YyBjb25zdCBpbnQgdmlkZW9fY29kZWNfY2Fwc1tdID0gewo+ID4gICAgICBTUElDRV9ESVNQTEFZ
X0NBUF9DT0RFQ19WUDksCj4gPiAgfTsKPiA+Cj4gPiArY2hhciAqcmVkc19nZXRfdmlkZW9fY29k
ZWNfZnVsbG5hbWUoUmVkVmlkZW9Db2RlYyAqY29kZWMpCj4gPiArewo+ID4gKyAgICBpbnQgaTsK
PiA+ICsgICAgY29uc3QgY2hhciAqZW5jb2Rlcl9uYW1lID0gTlVMTDsKPiA+ICsgICAgY29uc3Qg
Y2hhciAqY29kZWNfbmFtZSA9IGdldF9pbmRleF9uYW1lKHZpZGVvX2NvZGVjX25hbWVzLCBjb2Rl
Yy0+dHlwZSk7Cj4gPiArCj4gPiArICAgIHNwaWNlX2Fzc2VydChjb2RlY19uYW1lKTsKPiA+ICsK
PiA+ICsgICAgZm9yIChpID0gMDsgaSA8IEdfTl9FTEVNRU5UUyh2aWRlb19lbmNvZGVyX3Byb2Nz
KTsgaSsrKSB7Cj4gPiArICAgICAgICBpZiAodmlkZW9fZW5jb2Rlcl9wcm9jc1tpXSA9PSBjb2Rl
Yy0+Y3JlYXRlKSB7Cj4gPiArICAgICAgICAgICAgZW5jb2Rlcl9uYW1lID0gZ2V0X2luZGV4X25h
bWUodmlkZW9fZW5jb2Rlcl9uYW1lcywgaSk7Cj4gPiArICAgICAgICAgICAgYnJlYWs7Cj4gPiAr
ICAgICAgICB9Cj4gPiArICAgIH0KPiA+ICsgICAgc3BpY2VfYXNzZXJ0KGVuY29kZXJfbmFtZSk7
Cj4gPiArCj4gPiArICAgIHJldHVybiBnX3N0cmR1cF9wcmludGYoIiVzOiVzIiwgZW5jb2Rlcl9u
YW1lLCBjb2RlY19uYW1lKTsKPiA+ICt9Cj4gPgo+ID4gIC8qIFBhcnNlcyB0aGUgZ2l2ZW4gY29k
ZWMgc3RyaW5nIGFuZCByZXR1cm5zIG5ld2x5LWFsbG9jYXRlZCBzdHJpbmdzCj4gPiAgZGVzY3Jp
YmluZwo+ID4gICAqIHRoZSBuZXh0IGVuY29kZXIgYW5kIGNvZGVjIGluIHRoZSBsaXN0LiBUaGVz
ZSBzdHJpbmdzIG11c3QgYmUgZnJlZWQgYnkKPiA+ICAgdGhlCj4gPiBAQCAtNDE5Niw2ICs0MjI2
LDI4IEBAIFNQSUNFX0dOVUNfVklTSUJMRSBpbnQKPiA+IHNwaWNlX3NlcnZlcl9zZXRfdmlkZW9f
Y29kZWNzKFNwaWNlU2VydmVyICpyZWRzLCBjb25zdCBjaAo+ID4gICAgICByZXR1cm4gMDsKPiA+
ICB9Cj4gPgo+ID4gK1NQSUNFX0dOVUNfVklTSUJMRSBjb25zdCBjaGFyICpzcGljZV9zZXJ2ZXJf
Z2V0X3ZpZGVvX2NvZGVjcyhTcGljZVNlcnZlcgo+ID4gKnJlZHMpCj4gPiArewo+ID4gKyAgICBH
U3RyaW5nICptc2c7Cj4gPiArICAgIGludCBpOwo+ID4gKyAgICBHQXJyYXkgKnZpZGVvX2NvZGVj
cyA9IHJlZHNfZ2V0X3ZpZGVvX2NvZGVjcyhyZWRzKTsKPiA+ICsKPiA+ICsgICAgbXNnID0gZ19z
dHJpbmdfbmV3KCIiKTsKPiA+ICsgICAgZm9yIChpID0gMDsgaSA8IHZpZGVvX2NvZGVjcy0+bGVu
OyBpKyspIHsKPiA+ICsgICAgICAgIFJlZFZpZGVvQ29kZWMgY29kZWMgPSBnX2FycmF5X2luZGV4
KHZpZGVvX2NvZGVjcywgUmVkVmlkZW9Db2RlYywgaSk7Cj4gPiArICAgICAgICBjaGFyICpjb2Rl
Y19uYW1lID0gcmVkc19nZXRfdmlkZW9fY29kZWNfZnVsbG5hbWUoJmNvZGVjKTsKPiA+ICsKPiA+
ICsgICAgICAgIGdfc3RyaW5nX2FwcGVuZF9wcmludGYobXNnLCAiJXM7IiwgY29kZWNfbmFtZSk7
Cj4gPiArICAgICAgICBnX2ZyZWUoY29kZWNfbmFtZSk7Cj4gPiArICAgIH0KPiA+ICsKPiA+ICsg
ICAgcmV0dXJuIGdfc3RyaW5nX2ZyZWUobXNnLCBGQUxTRSk7Cj4gPiArfQo+ID4gKwo+ID4gK1NQ
SUNFX0dOVUNfVklTSUJMRSB2b2lkIHNwaWNlX3NlcnZlcl9mcmVlX3ZpZGVvX2NvZGVjcyhTcGlj
ZVNlcnZlciAqcmVkcywKPiA+IGNvbnN0IGNoYXIgKnZpZGVvX2NvZGVjcykgewo+Cj4gTWlub3Is
IHN0eWxlOiBicmFja2V0IG9uIG5leHQgbGluZQoKZml4ZWQKCj4gPiArICAgIGdfZnJlZSgoY2hh
ciAqKSB2aWRlb19jb2RlY3MpOwo+ID4gK30KPiA+ICsKPiA+ICBHQXJyYXkqIHJlZHNfZ2V0X3Zp
ZGVvX2NvZGVjcyhjb25zdCBSZWRzU3RhdGUgKnJlZHMpCj4gPiAgewo+ID4gICAgICByZXR1cm4g
cmVkcy0+Y29uZmlnLT52aWRlb19jb2RlY3M7Cj4gPiBkaWZmIC0tZ2l0IGEvc2VydmVyL3JlZHMu
aCBiL3NlcnZlci9yZWRzLmgKPiA+IGluZGV4IDhjNWVlODRkLi5lMzM1NWY4MSAxMDA2NDQKPiA+
IC0tLSBhL3NlcnZlci9yZWRzLmgKPiA+ICsrKyBiL3NlcnZlci9yZWRzLmgKPiA+IEBAIC0yNyw2
ICsyNyw3IEBACj4gPiAgI2luY2x1ZGUgImNoYXItZGV2aWNlLmgiCj4gPiAgI2luY2x1ZGUgInNw
aWNlLmgiCj4gPiAgI2luY2x1ZGUgInJlZC1jaGFubmVsLmgiCj4gPiArI2luY2x1ZGUgInZpZGVv
LWVuY29kZXIuaCIKPiA+ICAjaW5jbHVkZSAibWFpbi1kaXNwYXRjaGVyLmgiCj4gPiAgI2luY2x1
ZGUgIm1pZ3JhdGlvbi1wcm90b2NvbC5oIgo+ID4KPiA+IEBAIC01NCw2ICs1NSw3IEBAIHZvaWQg
cmVkc19zZW5kX2RldmljZV9kaXNwbGF5X2luZm8oUmVkc1N0YXRlICpyZWRzKTsKPiA+ICB2b2lk
IHJlZHNfaGFuZGxlX2FnZW50X21vdXNlX2V2ZW50KFJlZHNTdGF0ZSAqcmVkcywgY29uc3QgVkRB
Z2VudE1vdXNlU3RhdGUKPiA+ICAqbW91c2Vfc3RhdGUpOyAvLyB1c2VkIGJ5IGlucHV0c19jaGFu
bmVsCj4gPgo+ID4gIEdBcnJheSogcmVkc19nZXRfcmVuZGVyZXJzKFJlZHNTdGF0ZSAqcmVkcyk7
Cj4gPiArY2hhciAqcmVkc19nZXRfdmlkZW9fY29kZWNfZnVsbG5hbWUoUmVkVmlkZW9Db2RlYyAq
Y29kZWMpOwo+ID4KPiA+ICBlbnVtIHsKPiA+ICAgICAgUkVEX1JFTkRFUkVSX0lOVkFMSUQsCj4g
PiBkaWZmIC0tZ2l0IGEvc2VydmVyL3NwaWNlLXNlcnZlci5oIGIvc2VydmVyL3NwaWNlLXNlcnZl
ci5oCj4gPiBpbmRleCA1ZjU3MmY0Zi4uNDgxZDUxOTQgMTAwNjQ0Cj4gPiAtLS0gYS9zZXJ2ZXIv
c3BpY2Utc2VydmVyLmgKPiA+ICsrKyBiL3NlcnZlci9zcGljZS1zZXJ2ZXIuaAo+ID4gQEAgLTEz
Niw2ICsxMzYsMTggQEAgZW51bSB7Cj4gPiAgfTsKPiA+Cj4gPiAgaW50IHNwaWNlX3NlcnZlcl9z
ZXRfdmlkZW9fY29kZWNzKFNwaWNlU2VydmVyICpzLCBjb25zdCBjaGFyKiB2aWRlb19jb2RlY3Mp
Owo+ID4gKy8qIFJldHVybnMgYSBuZXdseSBhbGxvY2F0ZWQgc3RyaW5nIGRlc2NyaWJpbmcgdmlk
ZW8gZW5jb2RlcnMvY29kZWNzCj4gPiArICogY3VycmVudGx5IGFsbG93ZWQgaW4gQHJlZHMgU3Bp
Y2Ugc2VydmVyLiBUaGUgc3RyaW5nIHJldHVybmVkIGJ5Cj4gPiArICogdGhpcyBmdW5jdGlvbiBt
dXN0IGJlIHJlbGVhc2VkIHdpdGggc3BpY2Vfc2VydmVyX2ZyZWVfdmlkZW9fY29kZWNzLgo+ID4g
KyAqCj4gPiArICogQHJlZHM6IHRoZSBTcGljZSBzZXJ2ZXIgdG8gcXVlcnkKPiA+ICsgKiBAcmV0
dXJuIHRoZSBzdHJpbmcgZGVzY3JpYmluZyB0aGUgdmlkZW8gZW5jb2RlcnMvY29kZWNzIGN1cnJl
bnRseSBlbmFibGVkCj4gPiArICovCj4gPiArY29uc3QgY2hhciAqc3BpY2Vfc2VydmVyX2dldF92
aWRlb19jb2RlY3MoU3BpY2VTZXJ2ZXIgKnMpOwo+ID4gKy8qIFJlbGVhc2VzIHRoZSBtZW1vcnkg
b2YgdGhlIHZpZGVvLWNvZGVjIHN0cmluZyByZXR1cm5lZCBieQo+ID4gKyAqIHNwaWNlX3NlcnZl
cl9nZXRfdmlkZW9fY29kZWNzLgo+ID4gKyAqICovCj4KPiBNaW5vciBzdHlsZToganVzdCAiICov
IgoKZml4ZWQKCj4gPiArdm9pZCBzcGljZV9zZXJ2ZXJfZnJlZV92aWRlb19jb2RlY3MoU3BpY2VT
ZXJ2ZXIgKnJlZHMsIGNvbnN0IGNoYXIKPiA+ICp2aWRlb19jb2RlY3MpOwo+ID4gIGludCBzcGlj
ZV9zZXJ2ZXJfc2V0X3BsYXliYWNrX2NvbXByZXNzaW9uKFNwaWNlU2VydmVyICpzLCBpbnQgZW5h
YmxlKTsKPiA+ICBpbnQgc3BpY2Vfc2VydmVyX3NldF9hZ2VudF9tb3VzZShTcGljZVNlcnZlciAq
cywgaW50IGVuYWJsZSk7Cj4gPiAgaW50IHNwaWNlX3NlcnZlcl9zZXRfYWdlbnRfY29weXBhc3Rl
KFNwaWNlU2VydmVyICpzLCBpbnQgZW5hYmxlKTsKPiA+IGRpZmYgLS1naXQgYS9zZXJ2ZXIvc3Bp
Y2Utc2VydmVyLnN5bXMgYi9zZXJ2ZXIvc3BpY2Utc2VydmVyLnN5bXMKPiA+IGluZGV4IGFjNGQ5
YjE0Li5lMzM1MjZmMyAxMDA2NDQKPiA+IC0tLSBhL3NlcnZlci9zcGljZS1zZXJ2ZXIuc3ltcwo+
ID4gKysrIGIvc2VydmVyL3NwaWNlLXNlcnZlci5zeW1zCj4gPiBAQCAtMTc4LDMgKzE3OCw5IEBA
IFNQSUNFX1NFUlZFUl8wLjE0LjIgewo+ID4gIGdsb2JhbDoKPiA+ICAgICAgc3BpY2VfcXhsX3Nl
dF9kZXZpY2VfaW5mbzsKPiA+ICB9IFNQSUNFX1NFUlZFUl8wLjEzLjI7Cj4gPiArCj4gPiArU1BJ
Q0VfU0VSVkVSXzAuMTQuMyB7Cj4gPiArZ2xvYmFsOgo+ID4gKyAgICBzcGljZV9zZXJ2ZXJfZ2V0
X3ZpZGVvX2NvZGVjczsKPiA+ICsgICAgc3BpY2Vfc2VydmVyX2ZyZWVfdmlkZW9fY29kZWNzOwo+
ID4gK30gU1BJQ0VfU0VSVkVSXzAuMTQuMjsKPgo+IFZlcnkgT1Q6IGxvb2tzIGxpa2UgdGhlIGN1
cnJlbnQgY29kZSBpcyBxdWl0ZSBub3QgY2xlYXIgb24gaG93IHRoZXNlIHN0dWZmCj4gYXJlIHNw
bGl0LCBoYXZpbmcgc29tZSBjb2RlL2RhdGEgb24gcmVkcy5jLCBzb21lIG90aGVyIGluIGRjYy9k
aXNwbGF5LWNoYW5uZWwKPiBhbmQgc29tZSBhbHNvIGluIHZpZGVvLWVuY29kaW5nLmguIE5vdCBh
IHJlZ3Jlc3Npb24gYW5kIGl0J3MgcHJvYmFibHkgY2F1c2VkCj4gYnkgZXZvbHV0aW9uIG9mIHJl
ZHMuYyB3aGljaCBpcyBxdWl0ZSBhIG1lc3MgSU1ITy4gQnV0IG5vdGhpbmcgdG8gc3RvcCB0aGlz
Cj4gc2VyaWVzL3BhdGNoIHN1cmVseS4KCnllcyBpbmRlZWQsIHRoZXNlIGZ1bmN0aW9ucyBhcmUg
c3ByZWFkIGluIHNldmVyYWwgZmlsZXMsIGJ1dCBhdCB0aGUKc2FtZSB0aW1lIHRoZXkncmUKcmVs
YXRlZCB0byB2YXJpb3VzIGNvbXBvbmVudHMgKHJlZHNTdGF0ZSwgcmVkLXdvcmtlciwgZGNjLCBk
aXNwbGF5CmNoYW5uZWwsIGVuY29kZXJzKSwKaXQncyBoYXJkIHRvIGtub3cgd2hlcmUgdGhleSB3
b3VsZCBiZXR0ZXIgZml0IC4uLiAhCgpJIHB1dCB0aGUgbmV3IHZlcnNpb24gb2YgdGhlIHBhdGNo
IGJlbG93Cgp0aGFua3MsCgpLZXZpbgoKLS0tCgpBdXRob3I6IEtldmluIFBvdWdldCA8a3BvdWdl
dEByZWRoYXQuY29tPgpEYXRlOiAgIFR1ZSBKdW4gMTggMTU6MjU6MjkgMjAxOSArMDIwMAoKICAg
IHJlZHM6IEFkZCBhYmlsaXR5IHRvIHF1ZXJ5IHRoZSB2aWRlby1jb2RlY3MgY3VycmVudGx5IGVu
YWJsZWQKCiAgICBzcGljZV9zZXJ2ZXJfZ2V0X3ZpZGVvX2NvZGVjczogbmV3IHB1YmxpYyBmdW5j
dGlvbiB0byBxdWVyeSB0aGUgdmlkZW8KICAgIGVuY29kZXJzL2NvZGVjcyBjdXJyZW50bHkgZW5h
YmxlZCBpbiB0aGUgc3BpY2Ugc2VydmVyLiBJdCByZXR1cm5zIGEKICAgIHN0cmluZyB0aGF0IGNh
biBiZSBmZWQgdG8gdGhlIHNldHRlciBjb3VudGVyCiAgICAoc3BpY2Vfc2VydmVyX3NldF92aWRl
b19jb2RlY3MpLiBUaGUgc3RyaW5nIHJldHVybmVkIGJ5IHRoaXMgZnVuY3Rpb24KICAgIHNob3Vs
ZCBiZSByZWxlYXNlZCB3aXRoIHNwaWNlX3NlcnZlcl9mcmVlX3ZpZGVvX2NvZGVjcy4KCiAgICBz
cGljZV9zZXJ2ZXJfZnJlZV92aWRlb19jb2RlY3M6IG5ldyBwdWJsaWMgZnVuY3Rpb24gdG8gZnJl
ZSB0aGUgdGhlCiAgICB2aWRlbyBjb2RlYyBsaXN0IHJldHVybmVkIGJ5IHNwaWNlX3NlcnZlcl9n
ZXRfdmlkZW9fY29kZWNzLgoKICAgIHZpZGVvX2NvZGVjc190b19zdHJpbmc6IG5ldyBwcml2YXRl
IGZ1bmN0aW9uIHRvIHRyYW5zZm9ybSBhbiBhcnJheSBvZgogICAgUmVkVmlkZW9Db2RlYyBpbnRv
IGEgc3RyaW5nLgoKICAgIFNpZ25lZC1vZmYtYnk6IEtldmluIFBvdWdldCA8a3BvdWdldEByZWRo
YXQuY29tPgoKZGlmZiAtLWdpdCBhL3NlcnZlci9kY2MuYyBiL3NlcnZlci9kY2MuYwppbmRleCBi
ZDM5M2UwNC4uYjM2NGE4ZTEgMTAwNjQ0Ci0tLSBhL3NlcnZlci9kY2MuYworKysgYi9zZXJ2ZXIv
ZGNjLmMKQEAgLTExMjAsOSArMTEyMCw4IEBAIHN0YXRpYyBnaW50CnNvcnRfdmlkZW9fY29kZWNz
X2J5X2NsaWVudF9wcmVmZXJlbmNlKGdjb25zdHBvaW50ZXIgYV9wb2ludGVyLAoKIHN0YXRpYyB2
b2lkIGRjY191cGRhdGVfcHJlZmVycmVkX3ZpZGVvX2NvZGVjcyhEaXNwbGF5Q2hhbm5lbENsaWVu
dCAqZGNjKQogewotICAgIGd1aW50IGk7CiAgICAgR0FycmF5ICp2aWRlb19jb2RlY3MsICpzZXJ2
ZXJfY29kZWNzOwotICAgIEdTdHJpbmcgKm1zZzsKKyAgICBjaGFyICpjb2RlY3Nfc3RyOwoKICAg
ICBzZXJ2ZXJfY29kZWNzID0gZGlzcGxheV9jaGFubmVsX2dldF92aWRlb19jb2RlY3MoRENDX1RP
X0RDKGRjYykpOwogICAgIHNwaWNlX3JldHVybl9pZl9mYWlsKHNlcnZlcl9jb2RlY3MgIT0gTlVM
TCk7CkBAIC0xMTM3LDEzICsxMTM2LDkgQEAgc3RhdGljIHZvaWQKZGNjX3VwZGF0ZV9wcmVmZXJy
ZWRfdmlkZW9fY29kZWNzKERpc3BsYXlDaGFubmVsQ2xpZW50ICpkY2MpCiAgICAgZ19jbGVhcl9w
b2ludGVyKCZkY2MtPnByaXYtPnByZWZlcnJlZF92aWRlb19jb2RlY3MsIGdfYXJyYXlfdW5yZWYp
OwogICAgIGRjYy0+cHJpdi0+cHJlZmVycmVkX3ZpZGVvX2NvZGVjcyA9IHZpZGVvX2NvZGVjczsK
Ci0gICAgbXNnID0gZ19zdHJpbmdfbmV3KCJQcmVmZXJyZWQgdmlkZW8tY29kZWNzOiIpOwotICAg
IGZvciAoaSA9IDA7IGkgPCB2aWRlb19jb2RlY3MtPmxlbjsgaSsrKSB7Ci0gICAgICAgIFJlZFZp
ZGVvQ29kZWMgY29kZWMgPSBnX2FycmF5X2luZGV4KHZpZGVvX2NvZGVjcywgUmVkVmlkZW9Db2Rl
YywgaSk7Ci0gICAgICAgIGdfc3RyaW5nX2FwcGVuZF9wcmludGYobXNnLCAiICVkIiwgY29kZWMu
dHlwZSk7Ci0gICAgfQotICAgIHNwaWNlX2RlYnVnKCIlcyIsIG1zZy0+c3RyKTsKLSAgICBnX3N0
cmluZ19mcmVlKG1zZywgVFJVRSk7CisgICAgY29kZWNzX3N0ciA9IHZpZGVvX2NvZGVjc190b19z
dHJpbmcodmlkZW9fY29kZWNzLCAiICIpOworICAgIHNwaWNlX2RlYnVnKCJQcmVmZXJyZWQgdmlk
ZW8tY29kZWNzOiAlcyIsIGNvZGVjc19zdHIpOworICAgIGdfZnJlZShjb2RlY3Nfc3RyKTsKIH0K
CiBzdGF0aWMgdm9pZCBvbl9kaXNwbGF5X3ZpZGVvX2NvZGVjc191cGRhdGUoR09iamVjdCAqZ29i
amVjdCwKR1BhcmFtU3BlYyAqcHNwZWMsIGdwb2ludGVyIHVzZXJfZGF0YSkKZGlmZiAtLWdpdCBh
L3NlcnZlci9yZWRzLmMgYi9zZXJ2ZXIvcmVkcy5jCmluZGV4IGFhYmZlOTE5Li43NzgzYWIwYiAx
MDA2NDQKLS0tIGEvc2VydmVyL3JlZHMuYworKysgYi9zZXJ2ZXIvcmVkcy5jCkBAIC0zNzA4LDYg
KzM3MDgsMTYgQEAgc3RhdGljIGdib29sZWFuIGdldF9uYW1lX2luZGV4KGNvbnN0IEVudW1OYW1l
cwpuYW1lc1tdLCBjb25zdCBjaGFyICpuYW1lLCB1aW50MzIKICAgICByZXR1cm4gRkFMU0U7CiB9
CgorLyogcmV0dXJucyBOVUxMIGlmIGluZGV4IGlzIGludmFsaWQuICovCitzdGF0aWMgY29uc3Qg
Y2hhciAqZ2V0X2luZGV4X25hbWUoY29uc3QgRW51bU5hbWVzIG5hbWVzW10sIHVpbnQzMl90IGlu
ZGV4KQoreworICAgIHdoaWxlIChuYW1lcy0+bmFtZSAhPSBOVUxMICYmIG5hbWVzLT5pZCAhPSBp
bmRleCkgeworICAgICAgICBuYW1lcysrOworICAgIH0KKworICAgIHJldHVybiBuYW1lcy0+bmFt
ZTsKK30KKwogc3RhdGljIGNvbnN0IEVudW1OYW1lcyByZW5kZXJlcl9uYW1lc1tdID0gewogICAg
IHtSRURfUkVOREVSRVJfU1csICJzdyJ9LAogICAgIHtSRURfUkVOREVSRVJfSU5WQUxJRCwgTlVM
TH0sCkBAIC0zNzU1LDYgKzM3NjUsMjQgQEAgc3RhdGljIGNvbnN0IGludCB2aWRlb19jb2RlY19j
YXBzW10gPSB7CiAgICAgU1BJQ0VfRElTUExBWV9DQVBfQ09ERUNfVlA5LAogfTsKCitjaGFyICpy
ZWRzX2dldF92aWRlb19jb2RlY19mdWxsbmFtZShSZWRWaWRlb0NvZGVjICpjb2RlYykKK3sKKyAg
ICBpbnQgaTsKKyAgICBjb25zdCBjaGFyICplbmNvZGVyX25hbWUgPSBOVUxMOworICAgIGNvbnN0
IGNoYXIgKmNvZGVjX25hbWUgPSBnZXRfaW5kZXhfbmFtZSh2aWRlb19jb2RlY19uYW1lcywgY29k
ZWMtPnR5cGUpOworCisgICAgc3BpY2VfYXNzZXJ0KGNvZGVjX25hbWUpOworCisgICAgZm9yIChp
ID0gMDsgaSA8IEdfTl9FTEVNRU5UUyh2aWRlb19lbmNvZGVyX3Byb2NzKTsgaSsrKSB7CisgICAg
ICAgIGlmICh2aWRlb19lbmNvZGVyX3Byb2NzW2ldID09IGNvZGVjLT5jcmVhdGUpIHsKKyAgICAg
ICAgICAgIGVuY29kZXJfbmFtZSA9IGdldF9pbmRleF9uYW1lKHZpZGVvX2VuY29kZXJfbmFtZXMs
IGkpOworICAgICAgICAgICAgYnJlYWs7CisgICAgICAgIH0KKyAgICB9CisgICAgc3BpY2VfYXNz
ZXJ0KGVuY29kZXJfbmFtZSk7CisKKyAgICByZXR1cm4gZ19zdHJkdXBfcHJpbnRmKCIlczolcyIs
IGVuY29kZXJfbmFtZSwgY29kZWNfbmFtZSk7Cit9CgogLyogUGFyc2VzIHRoZSBnaXZlbiBjb2Rl
YyBzdHJpbmcgYW5kIHJldHVybnMgbmV3bHktYWxsb2NhdGVkIHN0cmluZ3MgZGVzY3JpYmluZwog
ICogdGhlIG5leHQgZW5jb2RlciBhbmQgY29kZWMgaW4gdGhlIGxpc3QuIFRoZXNlIHN0cmluZ3Mg
bXVzdCBiZSBmcmVlZCBieSB0aGUKQEAgLTQyMjMsNiArNDI1MSwxNiBAQCBTUElDRV9HTlVDX1ZJ
U0lCTEUgaW50CnNwaWNlX3NlcnZlcl9zZXRfdmlkZW9fY29kZWNzKFNwaWNlU2VydmVyICpyZWRz
LCBjb25zdCBjaAogICAgIHJldHVybiAwOwogfQoKK1NQSUNFX0dOVUNfVklTSUJMRSBjb25zdCBj
aGFyICpzcGljZV9zZXJ2ZXJfZ2V0X3ZpZGVvX2NvZGVjcyhTcGljZVNlcnZlciAqcmVkcykKK3sK
KyAgICByZXR1cm4gdmlkZW9fY29kZWNzX3RvX3N0cmluZyhyZWRzX2dldF92aWRlb19jb2RlY3Mo
cmVkcyksICI7Iik7Cit9CisKK1NQSUNFX0dOVUNfVklTSUJMRSB2b2lkIHNwaWNlX3NlcnZlcl9m
cmVlX3ZpZGVvX2NvZGVjcyhTcGljZVNlcnZlcgoqcmVkcywgY29uc3QgY2hhciAqdmlkZW9fY29k
ZWNzKQoreworICAgIGdfZnJlZSgoY2hhciAqKSB2aWRlb19jb2RlY3MpOworfQorCiBHQXJyYXkq
IHJlZHNfZ2V0X3ZpZGVvX2NvZGVjcyhjb25zdCBSZWRzU3RhdGUgKnJlZHMpCiB7CiAgICAgcmV0
dXJuIHJlZHMtPmNvbmZpZy0+dmlkZW9fY29kZWNzOwpkaWZmIC0tZ2l0IGEvc2VydmVyL3JlZHMu
aCBiL3NlcnZlci9yZWRzLmgKaW5kZXggOGM1ZWU4NGQuLmUzMzU1ZjgxIDEwMDY0NAotLS0gYS9z
ZXJ2ZXIvcmVkcy5oCisrKyBiL3NlcnZlci9yZWRzLmgKQEAgLTI3LDYgKzI3LDcgQEAKICNpbmNs
dWRlICJjaGFyLWRldmljZS5oIgogI2luY2x1ZGUgInNwaWNlLmgiCiAjaW5jbHVkZSAicmVkLWNo
YW5uZWwuaCIKKyNpbmNsdWRlICJ2aWRlby1lbmNvZGVyLmgiCiAjaW5jbHVkZSAibWFpbi1kaXNw
YXRjaGVyLmgiCiAjaW5jbHVkZSAibWlncmF0aW9uLXByb3RvY29sLmgiCgpAQCAtNTQsNiArNTUs
NyBAQCB2b2lkIHJlZHNfc2VuZF9kZXZpY2VfZGlzcGxheV9pbmZvKFJlZHNTdGF0ZSAqcmVkcyk7
CiB2b2lkIHJlZHNfaGFuZGxlX2FnZW50X21vdXNlX2V2ZW50KFJlZHNTdGF0ZSAqcmVkcywgY29u
c3QKVkRBZ2VudE1vdXNlU3RhdGUgKm1vdXNlX3N0YXRlKTsgLy8gdXNlZCBieSBpbnB1dHNfY2hh
bm5lbAoKIEdBcnJheSogcmVkc19nZXRfcmVuZGVyZXJzKFJlZHNTdGF0ZSAqcmVkcyk7CitjaGFy
ICpyZWRzX2dldF92aWRlb19jb2RlY19mdWxsbmFtZShSZWRWaWRlb0NvZGVjICpjb2RlYyk7Cgog
ZW51bSB7CiAgICAgUkVEX1JFTkRFUkVSX0lOVkFMSUQsCmRpZmYgLS1naXQgYS9zZXJ2ZXIvc3Bp
Y2Utc2VydmVyLmggYi9zZXJ2ZXIvc3BpY2Utc2VydmVyLmgKaW5kZXggNWY1NzJmNGYuLjI0ZGY4
ZTY1IDEwMDY0NAotLS0gYS9zZXJ2ZXIvc3BpY2Utc2VydmVyLmgKKysrIGIvc2VydmVyL3NwaWNl
LXNlcnZlci5oCkBAIC0xMzYsNiArMTM2LDE4IEBAIGVudW0gewogfTsKCiBpbnQgc3BpY2Vfc2Vy
dmVyX3NldF92aWRlb19jb2RlY3MoU3BpY2VTZXJ2ZXIgKnMsIGNvbnN0IGNoYXIqIHZpZGVvX2Nv
ZGVjcyk7CisvKiBSZXR1cm5zIGEgbmV3bHkgYWxsb2NhdGVkIHN0cmluZyBkZXNjcmliaW5nIHZp
ZGVvIGVuY29kZXJzL2NvZGVjcworICogY3VycmVudGx5IGFsbG93ZWQgaW4gQHJlZHMgU3BpY2Ug
c2VydmVyLiBUaGUgc3RyaW5nIHJldHVybmVkIGJ5CisgKiB0aGlzIGZ1bmN0aW9uIG11c3QgYmUg
cmVsZWFzZWQgd2l0aCBzcGljZV9zZXJ2ZXJfZnJlZV92aWRlb19jb2RlY3MuCisgKgorICogQHJl
ZHM6IHRoZSBTcGljZSBzZXJ2ZXIgdG8gcXVlcnkKKyAqIEByZXR1cm4gdGhlIHN0cmluZyBkZXNj
cmliaW5nIHRoZSB2aWRlbyBlbmNvZGVycy9jb2RlY3MgY3VycmVudGx5IGVuYWJsZWQKKyAqLwor
Y29uc3QgY2hhciAqc3BpY2Vfc2VydmVyX2dldF92aWRlb19jb2RlY3MoU3BpY2VTZXJ2ZXIgKnMp
OworLyogUmVsZWFzZXMgdGhlIG1lbW9yeSBvZiB0aGUgdmlkZW8tY29kZWMgc3RyaW5nIHJldHVy
bmVkIGJ5CisgKiBzcGljZV9zZXJ2ZXJfZ2V0X3ZpZGVvX2NvZGVjcy4KKyAqLwordm9pZCBzcGlj
ZV9zZXJ2ZXJfZnJlZV92aWRlb19jb2RlY3MoU3BpY2VTZXJ2ZXIgKnJlZHMsIGNvbnN0IGNoYXIK
KnZpZGVvX2NvZGVjcyk7CiBpbnQgc3BpY2Vfc2VydmVyX3NldF9wbGF5YmFja19jb21wcmVzc2lv
bihTcGljZVNlcnZlciAqcywgaW50IGVuYWJsZSk7CiBpbnQgc3BpY2Vfc2VydmVyX3NldF9hZ2Vu
dF9tb3VzZShTcGljZVNlcnZlciAqcywgaW50IGVuYWJsZSk7CiBpbnQgc3BpY2Vfc2VydmVyX3Nl
dF9hZ2VudF9jb3B5cGFzdGUoU3BpY2VTZXJ2ZXIgKnMsIGludCBlbmFibGUpOwpkaWZmIC0tZ2l0
IGEvc2VydmVyL3NwaWNlLXNlcnZlci5zeW1zIGIvc2VydmVyL3NwaWNlLXNlcnZlci5zeW1zCmlu
ZGV4IGFjNGQ5YjE0Li5lMzM1MjZmMyAxMDA2NDQKLS0tIGEvc2VydmVyL3NwaWNlLXNlcnZlci5z
eW1zCisrKyBiL3NlcnZlci9zcGljZS1zZXJ2ZXIuc3ltcwpAQCAtMTc4LDMgKzE3OCw5IEBAIFNQ
SUNFX1NFUlZFUl8wLjE0LjIgewogZ2xvYmFsOgogICAgIHNwaWNlX3F4bF9zZXRfZGV2aWNlX2lu
Zm87CiB9IFNQSUNFX1NFUlZFUl8wLjEzLjI7CisKK1NQSUNFX1NFUlZFUl8wLjE0LjMgeworZ2xv
YmFsOgorICAgIHNwaWNlX3NlcnZlcl9nZXRfdmlkZW9fY29kZWNzOworICAgIHNwaWNlX3NlcnZl
cl9mcmVlX3ZpZGVvX2NvZGVjczsKK30gU1BJQ0VfU0VSVkVSXzAuMTQuMjsKZGlmZiAtLWdpdCBh
L3NlcnZlci92aWRlby1lbmNvZGVyLmggYi9zZXJ2ZXIvdmlkZW8tZW5jb2Rlci5oCmluZGV4IDcx
ZjQxMzFhLi45MGQyMTMxMiAxMDA2NDQKLS0tIGEvc2VydmVyL3ZpZGVvLWVuY29kZXIuaAorKysg
Yi9zZXJ2ZXIvdmlkZW8tZW5jb2Rlci5oCkBAIC0yMTMsNCArMjEzLDYgQEAgdHlwZWRlZiBzdHJ1
Y3QgUmVkVmlkZW9Db2RlYyB7CiAgICAgdWludDMyX3QgY2FwOwogfSBSZWRWaWRlb0NvZGVjOwoK
K2NoYXIgKnZpZGVvX2NvZGVjc190b19zdHJpbmcoR0FycmF5ICp2aWRlb19jb2RlY3MsIGNvbnN0
IGNoYXIgKnNlcCk7CisKICNlbmRpZiAvKiBWSURFT19FTkNPREVSX0hfICovCmRpZmYgLS1naXQg
YS9zZXJ2ZXIvdmlkZW8tc3RyZWFtLmMgYi9zZXJ2ZXIvdmlkZW8tc3RyZWFtLmMKaW5kZXggNGFj
MjVhZjguLmEzOTI2MmQ1IDEwMDY0NAotLS0gYS9zZXJ2ZXIvdmlkZW8tc3RyZWFtLmMKKysrIGIv
c2VydmVyL3ZpZGVvLXN0cmVhbS5jCkBAIC05NzAsMyArOTcwLDI1IEBAIHZvaWQKdmlkZW9fc3Ry
ZWFtX3RyYWNlX2FkZF9kcmF3YWJsZShEaXNwbGF5Q2hhbm5lbCAqZGlzcGxheSwKICAgICB0cmFj
ZS0+aGVpZ2h0ID0gc3JjX2FyZWEtPmJvdHRvbSAtIHNyY19hcmVhLT50b3A7CiAgICAgdHJhY2Ut
PmRlc3RfYXJlYSA9IGl0ZW0tPnJlZF9kcmF3YWJsZS0+YmJveDsKIH0KKworLyoKKyAqIHZpZGVv
X2NvZGVjczogYW4gYXJyYXkgb2YgUmVkVmlkZW9Db2RlYworICogc2VwOiBhIHN0cmluZyBmb3Ig
c2VwYXJhdGluZyB0aGUgbGlzdCBlbGVtZW50cworICoKKyAqIHJldHVybnMgYSBzdHJpbmcgb2Yg
ImVuYzpjb2RlYzxzZXA+IiogdGhhdCBtdXN0IGJlIHJlbGVhc2VkCisgKiAgICAgICAgIHdpdGgg
Z19mcmVlLgorICovCitjaGFyICp2aWRlb19jb2RlY3NfdG9fc3RyaW5nKEdBcnJheSAqdmlkZW9f
Y29kZWNzLCBjb25zdCBjaGFyICpzZXApIHsKKyAgICBpbnQgaTsKKyAgICBHU3RyaW5nICptc2cg
PSBnX3N0cmluZ19uZXcoIiIpOworCisgICAgZm9yIChpID0gMDsgaSA8IHZpZGVvX2NvZGVjcy0+
bGVuOyBpKyspIHsKKyAgICAgICAgUmVkVmlkZW9Db2RlYyBjb2RlYyA9IGdfYXJyYXlfaW5kZXgo
dmlkZW9fY29kZWNzLCBSZWRWaWRlb0NvZGVjLCBpKTsKKyAgICAgICAgY2hhciAqY29kZWNfbmFt
ZSA9IHJlZHNfZ2V0X3ZpZGVvX2NvZGVjX2Z1bGxuYW1lKCZjb2RlYyk7CisKKyAgICAgICAgZ19z
dHJpbmdfYXBwZW5kX3ByaW50Zihtc2csICIlcyVzIiwgY29kZWNfbmFtZSwgc2VwKTsKKyAgICAg
ICAgZ19mcmVlKGNvZGVjX25hbWUpOworICAgIH0KKworICAgIHJldHVybiBnX3N0cmluZ19mcmVl
KG1zZywgRkFMU0UpOworfQpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fXwpTcGljZS1kZXZlbCBtYWlsaW5nIGxpc3QKU3BpY2UtZGV2ZWxAbGlzdHMuZnJlZWRl
c2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8v
c3BpY2UtZGV2ZWw=
