Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 74CBB8920C
	for <lists+spice-devel@lfdr.de>; Sun, 11 Aug 2019 16:41:23 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 0B40C6E34C;
	Sun, 11 Aug 2019 14:41:22 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mail-wr1-f66.google.com (mail-wr1-f66.google.com
 [209.85.221.66])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3F3396E34C
 for <spice-devel@lists.freedesktop.org>; Sun, 11 Aug 2019 14:41:21 +0000 (UTC)
Received: by mail-wr1-f66.google.com with SMTP id r3so8692471wrt.3
 for <spice-devel@lists.freedesktop.org>; Sun, 11 Aug 2019 07:41:21 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:to:references:from:message-id:date
 :user-agent:mime-version:in-reply-to:content-transfer-encoding
 :content-language;
 bh=qnjWuiPAcdn1KYxd5p1F1j2eHfSVthPQb66PFRXeLNc=;
 b=nr83Z7MUqQXb5LLbkiIN4XppJoRaUx45NHAT/8sGJRIB1U4yFwtjy+rbRqTh0fBdHT
 IPm/9bJ6SRjrcEbifUe/90+HOoNGiI9tkzRhaeLENx1ar9rTedr8rbgpb0RvoSRpF9G7
 xmneRDYzfF6aMMI0u7dfH7o4IM3/kmmwWwVWK01ZccPHS882pA2XdoRsju5hDOS9luF8
 S6dt4vMBhc+pExzB14m5o0osI1cVDaLzf5OHrrpKjNMKm7H3Wf/VMbvCEuEk6S+qK3sI
 gKNfcckKw5G0Me009CxTvaA666uSAILW5ABZrPV6P8eF2GoCCH14WvnpAzbJnOebU0mN
 uxRQ==
X-Gm-Message-State: APjAAAWcWt336zCTZuVi0ZrENre/tWTOcUBZCr+bAdpZGv+gXvFE3WKP
 E47+Mjp4u0g50crs/TkL26v4ieMERf8=
X-Google-Smtp-Source: APXvYqyr3Mbt8fndbL8T+D/T3UR91rcVRZB/HCyy39DV4IfL8sXKzVptal0MpeCRuQiOuJO9JlrUUg==
X-Received: by 2002:a1c:a909:: with SMTP id s9mr22386592wme.20.1565534479488; 
 Sun, 11 Aug 2019 07:41:19 -0700 (PDT)
Received: from dhcp-4-70.tlv.redhat.com (bzq-82-81-161-50.red.bezeqint.net.
 [82.81.161.50])
 by smtp.gmail.com with ESMTPSA id j10sm179616134wrd.26.2019.08.11.07.41.18
 for <spice-devel@lists.freedesktop.org>
 (version=TLS1_3 cipher=AEAD-AES128-GCM-SHA256 bits=128/128);
 Sun, 11 Aug 2019 07:41:18 -0700 (PDT)
To: spice-devel@lists.freedesktop.org
References: <20190806153453.20616-1-kpouget@redhat.com>
 <20190806153453.20616-5-kpouget@redhat.com>
From: Snir Sheriber <ssheribe@redhat.com>
Message-ID: <34b0fc24-42e1-2f48-d36f-28312ddc9b7b@redhat.com>
Date: Sun, 11 Aug 2019 17:41:17 +0300
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <20190806153453.20616-5-kpouget@redhat.com>
Content-Language: en-US
Subject: Re: [Spice-devel] [RFC spice-streaming-agent 1/4] gst-plugin: allow
 the instantiation of multiple GST encoder plugins
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

SGksCgoKClRlc3RlZCwgc2VlbXMgdG8gd29yayB3ZWxsISBzd2l0Y2hpbmcgaXMgc21vb3RoLCBp
ZiBjb2RlYyBmYWlscwppdCBmYWxscyBiYWNrIHRvIG1qcGVnIChub3QgdmVyeSBsb3VkbHkpLCBu
byBkZWZhdWx0IGdzdHJlYW1lcgpjb2RlYyBjdXJyZW50bHkuIEFzIG1lbnRpb25lZCBpIGZpbmQg
dGhpcyBmZWF0dXJlIHVzZWZ1bCA6KQoKYW5vdGhlciBjb21tZW50IGJlbG93CgoKT24gOC82LzE5
IDY6MzQgUE0sIEtldmluIFBvdWdldCB3cm90ZToKPiBXaXRoIHRoaXMgcGF0Y2gsIHNwaWNlLXN0
cmVhbWluZy1hZ2VudCBjYW4gYmUgbGF1bmNoZWQgd2l0aCBtdWx0aXBsZQo+IEdzdHJlYW1lciB2
aWRlbyBjb2RlY3MgZW5hYmxlZDoKPgo+PiBzcGljZS1zdHJlYW1pbmctYWdlbnQgLWMgZ3N0LmNv
ZGVjPXZwOCAtYyBnc3QuY29kZWM9dnA5IC4uLgo+IFNpZ25lZC1vZmYtYnk6IEtldmluIFBvdWdl
dCA8a3BvdWdldEByZWRoYXQuY29tPgo+IC0tLQo+ICAgc3JjL2dzdC1wbHVnaW4uY3BwIHwgNTAg
KysrKysrKysrKysrKysrKysrKysrKysrKysrKy0tLS0tLS0tLS0tLS0tLS0tLQo+ICAgMSBmaWxl
IGNoYW5nZWQsIDMxIGluc2VydGlvbnMoKyksIDE5IGRlbGV0aW9ucygtKQo+Cj4gZGlmZiAtLWdp
dCBhL3NyYy9nc3QtcGx1Z2luLmNwcCBiL3NyYy9nc3QtcGx1Z2luLmNwcAo+IGluZGV4IDY0MTVh
YzAuLjU0Njk2NDcgMTAwNjQ0Cj4gLS0tIGEvc3JjL2dzdC1wbHVnaW4uY3BwCj4gKysrIGIvc3Jj
L2dzdC1wbHVnaW4uY3BwCj4gQEAgLTEwMiw3ICsxMDIsNyBAQCBjbGFzcyBHc3RyZWFtZXJQbHVn
aW4gZmluYWw6IHB1YmxpYyBQbHVnaW4KPiAgIHB1YmxpYzoKPiAgICAgICBGcmFtZUNhcHR1cmUg
KkNyZWF0ZUNhcHR1cmUoKSBvdmVycmlkZTsKPiAgICAgICB1bnNpZ25lZCBSYW5rKCkgb3ZlcnJp
ZGU7Cj4gLSAgICB2b2lkIFBhcnNlT3B0aW9ucyhjb25zdCBDb25maWd1cmVPcHRpb24gKm9wdGlv
bnMpOwo+ICsgICAgdm9pZCBQYXJzZU9wdGlvbnMoY29uc3QgQ29uZmlndXJlT3B0aW9uICpvcHRp
b25zLCBTcGljZVZpZGVvQ29kZWNUeXBlIGNvZGVjKTsKPiAgICAgICBTcGljZVZpZGVvQ29kZWNU
eXBlIFZpZGVvQ29kZWNUeXBlKCkgY29uc3Qgb3ZlcnJpZGUgewo+ICAgICAgICAgICByZXR1cm4g
c2V0dGluZ3MuY29kZWM7Cj4gICAgICAgfQo+IEBAIC00MzEsOCArNDMxLDEwIEBAIHVuc2lnbmVk
IEdzdHJlYW1lclBsdWdpbjo6UmFuaygpCj4gICAgICAgcmV0dXJuIFNvZnR3YXJlTWluOwo+ICAg
fQo+ICAgCj4gLXZvaWQgR3N0cmVhbWVyUGx1Z2luOjpQYXJzZU9wdGlvbnMoY29uc3QgQ29uZmln
dXJlT3B0aW9uICpvcHRpb25zKQo+ICt2b2lkIEdzdHJlYW1lclBsdWdpbjo6UGFyc2VPcHRpb25z
KGNvbnN0IENvbmZpZ3VyZU9wdGlvbiAqb3B0aW9ucywgIFNwaWNlVmlkZW9Db2RlY1R5cGUgY29k
ZWMpCj4gICB7Cj4gKyAgICBzZXR0aW5ncy5jb2RlYyA9IGNvZGVjOwo+ICsKPiAgICAgICBmb3Ig
KDsgb3B0aW9ucy0+bmFtZTsgKytvcHRpb25zKSB7Cj4gICAgICAgICAgIGNvbnN0IHN0ZDo6c3Ry
aW5nIG5hbWUgPSBvcHRpb25zLT5uYW1lOwo+ICAgICAgICAgICBjb25zdCBzdGQ6OnN0cmluZyB2
YWx1ZSA9IG9wdGlvbnMtPnZhbHVlOwo+IEBAIC00NDMsMjAgKzQ0NSw2IEBAIHZvaWQgR3N0cmVh
bWVyUGx1Z2luOjpQYXJzZU9wdGlvbnMoY29uc3QgQ29uZmlndXJlT3B0aW9uICpvcHRpb25zKQo+
ICAgICAgICAgICAgICAgfSBjYXRjaCAoY29uc3Qgc3RkOjpleGNlcHRpb24gJmUpIHsKPiAgICAg
ICAgICAgICAgICAgICB0aHJvdyBzdGQ6OnJ1bnRpbWVfZXJyb3IoIkludmFsaWQgdmFsdWUgJyIg
KyB2YWx1ZSArICInIGZvciBvcHRpb24gJ2ZyYW1lcmF0ZScuIik7Cj4gICAgICAgICAgICAgICB9
Cj4gLSAgICAgICAgfSBlbHNlIGlmIChuYW1lID09ICJnc3QuY29kZWMiKSB7Cj4gLSAgICAgICAg
ICAgIGlmICh2YWx1ZSA9PSAiaDI2NCIpIHsKPiAtICAgICAgICAgICAgICAgIHNldHRpbmdzLmNv
ZGVjID0gU1BJQ0VfVklERU9fQ09ERUNfVFlQRV9IMjY0Owo+IC0gICAgICAgICAgICB9IGVsc2Ug
aWYgKHZhbHVlID09ICJ2cDkiKSB7Cj4gLSAgICAgICAgICAgICAgICBzZXR0aW5ncy5jb2RlYyA9
IFNQSUNFX1ZJREVPX0NPREVDX1RZUEVfVlA5Owo+IC0gICAgICAgICAgICB9IGVsc2UgaWYgKHZh
bHVlID09ICJ2cDgiKSB7Cj4gLSAgICAgICAgICAgICAgICBzZXR0aW5ncy5jb2RlYyA9IFNQSUNF
X1ZJREVPX0NPREVDX1RZUEVfVlA4Owo+IC0gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09
ICJtanBlZyIpIHsKPiAtICAgICAgICAgICAgICAgIHNldHRpbmdzLmNvZGVjID0gU1BJQ0VfVklE
RU9fQ09ERUNfVFlQRV9NSlBFRzsKPiAtICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAi
aDI2NSIpIHsKPiAtICAgICAgICAgICAgICAgIHNldHRpbmdzLmNvZGVjID0gU1BJQ0VfVklERU9f
Q09ERUNfVFlQRV9IMjY1Owo+IC0gICAgICAgICAgICB9IGVsc2Ugewo+IC0gICAgICAgICAgICAg
ICAgdGhyb3cgc3RkOjpydW50aW1lX2Vycm9yKCJJbnZhbGlkIHZhbHVlICciICsgdmFsdWUgKyAi
JyBmb3Igb3B0aW9uICdnc3QuY29kZWMnLiIpOwo+IC0gICAgICAgICAgICB9Cj4gICAgICAgICAg
IH0gZWxzZSBpZiAobmFtZSA9PSAiZ3N0LmVuY29kZXIiKSB7Cj4gICAgICAgICAgICAgICBzZXR0
aW5ncy5lbmNvZGVyID0gdmFsdWU7Cj4gICAgICAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSAiZ3N0
LnByb3AiKSB7Cj4gQEAgLTQ3OCwxMSArNDY2LDM1IEBAIFNQSUNFX1NUUkVBTUlOR19BR0VOVF9Q
TFVHSU4oYWdlbnQpCj4gICB7Cj4gICAgICAgZ3N0X2luaXQobnVsbHB0ciwgbnVsbHB0cik7Cj4g
ICAKPiAtICAgIGF1dG8gcGx1Z2luID0gc3RkOjptYWtlX3NoYXJlZDxHc3RyZWFtZXJQbHVnaW4+
KCk7Cj4gKyAgICBhdXRvIG9wdGlvbnMgPSBhZ2VudC0+T3B0aW9ucygpOwo+ICsgICAgZm9yICg7
IG9wdGlvbnMtPm5hbWU7ICsrb3B0aW9ucykgewo+ICsgICAgICAgIGNvbnN0IHN0ZDo6c3RyaW5n
IG5hbWUgPSBvcHRpb25zLT5uYW1lOwo+ICsgICAgICAgIGNvbnN0IHN0ZDo6c3RyaW5nIHZhbHVl
ID0gb3B0aW9ucy0+dmFsdWU7Cj4gICAKPiAtICAgIHBsdWdpbi0+UGFyc2VPcHRpb25zKGFnZW50
LT5PcHRpb25zKCkpOwo+ICsgICAgICAgIGlmIChuYW1lID09ICJnc3QuY29kZWMiKSB7Cj4gKyAg
ICAgICAgICAgIFNwaWNlVmlkZW9Db2RlY1R5cGUgY29kZWNfdHlwZTsKPiArICAgICAgICAgICAg
aWYgKHZhbHVlID09ICJtanBlZyIpIHsKPiArICAgICAgICAgICAgICAgIGNvZGVjX3R5cGUgPSBT
UElDRV9WSURFT19DT0RFQ19UWVBFX01KUEVHOwo+ICsgICAgICAgICAgICB9IGVsc2UgaWYgKHZh
bHVlID09ICJoMjY0Iikgewo+ICsgICAgICAgICAgICAgICAgY29kZWNfdHlwZSA9IFNQSUNFX1ZJ
REVPX0NPREVDX1RZUEVfSDI2NDsKPiArICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAi
aDI2NSIpIHsKPiArICAgICAgICAgICAgICAgIGNvZGVjX3R5cGUgPSBTUElDRV9WSURFT19DT0RF
Q19UWVBFX0gyNjU7Cj4gKyAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gInZwOCIpIHsK
PiArICAgICAgICAgICAgICAgIGNvZGVjX3R5cGUgPSBTUElDRV9WSURFT19DT0RFQ19UWVBFX1ZQ
ODsKPiArICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAidnA5Iikgewo+ICsgICAgICAg
ICAgICAgICAgY29kZWNfdHlwZSA9IFNQSUNFX1ZJREVPX0NPREVDX1RZUEVfVlA5Owo+ICsgICAg
ICAgICAgICB9IGVsc2Ugewo+ICsgICAgICAgICAgICAgICAgdGhyb3cgc3RkOjpydW50aW1lX2Vy
cm9yKCJJbnZhbGlkIHZhbHVlICciICsgdmFsdWUgKyAiJyBmb3Igb3B0aW9uICdnc3QuY29kZWMn
LiIpOwo+ICsgICAgICAgICAgICB9Cj4gKwo+ICsgICAgICAgICAgICBhdXRvIHBsdWdpbiA9IHN0
ZDo6bWFrZV9zaGFyZWQ8R3N0cmVhbWVyUGx1Z2luPigpOwo+ICsgICAgICAgICAgICBwbHVnaW4t
PlBhcnNlT3B0aW9ucyhhZ2VudC0+T3B0aW9ucygpLCBjb2RlY190eXBlKTsKPiArICAgICAgICAg
ICAgYWdlbnQtPlJlZ2lzdGVyKHBsdWdpbik7Cj4gKyAgICAgICAgfQo+ICsgICAgfQo+ICAgCj4g
LSAgICBhZ2VudC0+UmVnaXN0ZXIocGx1Z2luKTsKPiArICAgIC8vIG5vIGRlZmF1bHQgdmFsdWUg
YXQgdGhlIG1vbWVudAo+ICsgICAgLy8gKHVzZWQgdG8gYmUgaDI2NCwgc2VlIEdzdHJlYW1lckVu
Y29kZXJTZXR0aW5nczo6Y29kZWMpCgpXaGVuIG1vdmluZyB0byBtdWx0aXBsZSBjb2RlY3MgcmVn
aXN0cmF0aW9uIHdlIG1heSB3YW50IHRvIGRvCnNvbWV0aGluZyBtb3JlIHNvbGlkLCBmb3IgZXhh
bXBsZSBjaGVja2luZyBmb3IgZ3N0cmVhbWVyJ3MgY29kZWMKYXZhaWxhYmlsaXR5IGJlZm9yZSBy
ZWdpc3RlcmluZyBwbHVnaW5zIG9yIGV2ZW4gdHJ5aW5nIHRvIGluaXRpYWxpemUgdGhlCnBpcGVs
aW5lIGJlZm9yZSByZWdpc3RyYXRpb24uCgpUaGlzIHdpbGwgcHJvYmFibHkgcmVxdWlyZSBtb3Jl
IGVmZm9ydHMsIEknbGwgdHJ5IGludmVzdCBzb21lIHRpbWUgb24gCnRoYXQgdG9vLgoKU25pci4K
Cgo+ICAgCj4gICAgICAgcmV0dXJuIHRydWU7Cj4gICB9Cl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fClNwaWNlLWRldmVsIG1haWxpbmcgbGlzdApTcGljZS1k
ZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcv
bWFpbG1hbi9saXN0aW5mby9zcGljZS1kZXZlbA==
