Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id A4AC45E0B7
	for <lists+spice-devel@lfdr.de>; Wed,  3 Jul 2019 11:16:31 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id AE50A6E106;
	Wed,  3 Jul 2019 09:16:29 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mail-io1-f66.google.com (mail-io1-f66.google.com
 [209.85.166.66])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 610B06E106
 for <spice-devel@lists.freedesktop.org>; Wed,  3 Jul 2019 09:16:28 +0000 (UTC)
Received: by mail-io1-f66.google.com with SMTP id u19so3036670ior.9
 for <spice-devel@lists.freedesktop.org>; Wed, 03 Jul 2019 02:16:28 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=S8iOC7lljM1Om35NBIWjoG0SQleBsHSB5KLfDyu9jlA=;
 b=qY0mbjEVm02YyIn+82Xb0/eI06pZfqKuuQ3lLlIgqcd5Z0hoD45SrdYX89Bo/fA/04
 e9uqXfDvq9WXf7ArbeN/dWwpz5yCK+r7CKsDO/jR7n6GFhzu5Inj0RCdV3XQmIbIlFYp
 S0RKFtOT4lr5yUm8IF2CCjm6+MSVpyYy3gkR4+gfJ7zcc+8mBjUSlPOaEJKO6mmRh0SX
 hjwotO2Tg/nPilboK9mRZ4zOymVODvMP59vrBVLmM6YKTMZpYp++oTco/ZorkCcCRbam
 dB5Y+499eBnObLRpsE19602st0QosZuWgigPqNl+a0RUXDAAC4Y+l+JuQUl1xwBPnMsX
 LzZg==
X-Gm-Message-State: APjAAAWMLjj5fbCIoyi79dQJPcHs66kZFJUQPD5HgLWIgY/S/FvuqVUG
 o49AKjqsm3RC28/pxM8Qv1n7uI1Gcmhmzoihu5kQukpy
X-Google-Smtp-Source: APXvYqwzDvivsJj6Rb9SdTz9MtkNWds83Xl5+4lbUA1/iyUchlFLHSz6g+fyafz1m/0isq2YTckeboBASUnlLMNOt5o=
X-Received: by 2002:a02:8787:: with SMTP id t7mr41340532jai.29.1562145387714; 
 Wed, 03 Jul 2019 02:16:27 -0700 (PDT)
MIME-Version: 1.0
References: <20190703083432.21772-1-fziglio@redhat.com>
In-Reply-To: <20190703083432.21772-1-fziglio@redhat.com>
From: Jakub Janku <jjanku@redhat.com>
Date: Wed, 3 Jul 2019 11:16:16 +0200
Message-ID: <CAH=CeiCKe_NHTVhz+hrSRwKWa+ViAB3ZkXQsgVTV4Oj7SF3XEg@mail.gmail.com>
To: Frediano Ziglio <fziglio@redhat.com>
Subject: Re: [Spice-devel] [PATCH spice-gtk 1/2] channel-webdav: Write mux
 message in a single memory block
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: spice-devel <spice-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

T24gV2VkLCBKdWwgMywgMjAxOSBhdCAxMDozNSBBTSBGcmVkaWFubyBaaWdsaW8gPGZ6aWdsaW9A
cmVkaGF0LmNvbT4gd3JvdGU6Cj4KPiBSZWR1Y2UgbnVtYmVyIG9mIHdyaXRlIHRvIHRoZSBjaGFu
bmVsLgo+IFRoaXMgd2lsbCBhbHNvIGhlbHAgbWFraW5nIHRoZSB3cml0ZSB0byBzb2NrZXQgYWxs
IGFzeW5jaHJvbm91cwo+IGF2b2lkaW5nIHBvdGVudGlhbCBibG9ja2FnZXMuCj4KPiBTaWduZWQt
b2ZmLWJ5OiBGcmVkaWFubyBaaWdsaW8gPGZ6aWdsaW9AcmVkaGF0LmNvbT4KPiAtLS0KPiAgc3Jj
L2NoYW5uZWwtd2ViZGF2LmMgfCAyOCArKysrKysrKysrKysrLS0tLS0tLS0tLS0tLS0tCj4gIDEg
ZmlsZSBjaGFuZ2VkLCAxMyBpbnNlcnRpb25zKCspLCAxNSBkZWxldGlvbnMoLSkKPgo+IGRpZmYg
LS1naXQgYS9zcmMvY2hhbm5lbC13ZWJkYXYuYyBiL3NyYy9jaGFubmVsLXdlYmRhdi5jCj4gaW5k
ZXggZjVhMzhhZDMuLmE0YmMxY2IyIDEwMDY0NAo+IC0tLSBhL3NyYy9jaGFubmVsLXdlYmRhdi5j
Cj4gKysrIGIvc3JjL2NoYW5uZWwtd2ViZGF2LmMKPiBAQCAtMTc5LDYgKzE3OSw4IEBAIHN0YXRp
YyB2b2lkIG91dHB1dF9xdWV1ZV9wdXNoKE91dHB1dFF1ZXVlICpxLCBjb25zdCBndWludDggKmJ1
ZiwgZ3NpemUgc2l6ZSwKPiAgICAgICAgICBxLT5pZGxlX2lkID0gZ19pZGxlX2FkZChvdXRwdXRf
cXVldWVfaWRsZSwgcSk7Cj4gIH0KPgo+ICsjZGVmaW5lIE1BWF9NVVhfU0laRSBHX01BWFVJTlQx
Ngo+ICsKPiAgdHlwZWRlZiBzdHJ1Y3QgQ2xpZW50Cj4gIHsKPiAgICAgIGd1aW50IHJlZnM7Cj4g
QEAgLTE4NywxMSArMTg5LDExIEBAIHR5cGVkZWYgc3RydWN0IENsaWVudAo+ICAgICAgZ2ludDY0
IGlkOwo+ICAgICAgR0NhbmNlbGxhYmxlICpjYW5jZWxsYWJsZTsKPgo+IC0gICAgc3RydWN0IF9t
dXggewo+ICsgICAgc3RydWN0IHsKPiAgICAgICAgICBnaW50NjQgaWQ7Cj4gICAgICAgICAgZ3Vp
bnQxNiBzaXplOwo+IC0gICAgICAgIGd1aW50OCAqYnVmOwo+IC0gICAgfSBtdXg7Cj4gKyAgICAg
ICAgZ3VpbnQ4IGJ1ZltNQVhfTVVYX1NJWkVdOwo+ICsgICAgfSAqbXV4Owo+ICB9IENsaWVudDsK
Pgo+ICBzdGF0aWMgdm9pZAo+IEBAIC0yMDAsNyArMjAyLDcgQEAgY2xpZW50X3VucmVmKENsaWVu
dCAqY2xpZW50KQo+ICAgICAgaWYgKC0tY2xpZW50LT5yZWZzID4gMCkKPiAgICAgICAgICByZXR1
cm47Cj4KPiAtICAgIGdfZnJlZShjbGllbnQtPm11eC5idWYpOwo+ICsgICAgZ19mcmVlKGNsaWVu
dC0+bXV4KTsKPgo+ICAgICAgZ19vYmplY3RfdW5yZWYoY2xpZW50LT5waXBlKTsKPiAgICAgIGdf
b2JqZWN0X3VucmVmKGNsaWVudC0+Y2FuY2VsbGFibGUpOwo+IEBAIC0yMzEsNyArMjMzLDcgQEAg
c3RhdGljIHZvaWQgbXV4X3B1c2hlZF9jYihPdXRwdXRRdWV1ZSAqcSwgZ3BvaW50ZXIgdXNlcl9k
YXRhKQo+ICB7Cj4gICAgICBDbGllbnQgKmNsaWVudCA9IHVzZXJfZGF0YTsKPgo+IC0gICAgaWYg
KGNsaWVudC0+bXV4LnNpemUgPT0gMCB8fAo+ICsgICAgaWYgKGNsaWVudC0+bXV4LT5zaXplID09
IDAgfHwKPiAgICAgICAgICAhY2xpZW50X3N0YXJ0X3JlYWQoY2xpZW50KSkgewo+ICAgICAgICAg
IHJlbW92ZV9jbGllbnQoY2xpZW50KTsKPiAgICAgIH0KPiBAQCAtMjM5LDggKzI0MSw2IEBAIHN0
YXRpYyB2b2lkIG11eF9wdXNoZWRfY2IoT3V0cHV0UXVldWUgKnEsIGdwb2ludGVyIHVzZXJfZGF0
YSkKPiAgICAgIGNsaWVudF91bnJlZihjbGllbnQpOwo+ICB9Cj4KPiAtI2RlZmluZSBNQVhfTVVY
X1NJWkUgR19NQVhVSU5UMTYKPiAtCj4gIHN0YXRpYyB2b2lkIHNlcnZlcl9yZXBseV9jYihHT2Jq
ZWN0ICpzb3VyY2Vfb2JqZWN0LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR0FzeW5j
UmVzdWx0ICpyZXMsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBncG9pbnRlciB1c2Vy
X2RhdGEpCj4gQEAgLTI1NiwxMiArMjU2LDEwIEBAIHN0YXRpYyB2b2lkIHNlcnZlcl9yZXBseV9j
YihHT2JqZWN0ICpzb3VyY2Vfb2JqZWN0LAo+Cj4gICAgICBnX3JldHVybl9pZl9mYWlsKHNpemUg
PD0gTUFYX01VWF9TSVpFKTsKPiAgICAgIGdfcmV0dXJuX2lmX2ZhaWwoc2l6ZSA+PSAwKTsKPiAt
ICAgIGNsaWVudC0+bXV4LnNpemUgPSBzaXplOwo+ICsgICAgY2xpZW50LT5tdXgtPnNpemUgPSBH
VUlOVDE2X1RPX0xFKHNpemUpOwo+Cj4gLSAgICBvdXRwdXRfcXVldWVfcHVzaChjLT5xdWV1ZSwg
KGd1aW50OCAqKSZjbGllbnQtPm11eC5pZCwgc2l6ZW9mKGdpbnQ2NCksIE5VTEwsIE5VTEwpOwo+
IC0gICAgY2xpZW50LT5tdXguc2l6ZSA9IEdVSU5UMTZfVE9fTEUoY2xpZW50LT5tdXguc2l6ZSk7
Cj4gLSAgICBvdXRwdXRfcXVldWVfcHVzaChjLT5xdWV1ZSwgKGd1aW50OCAqKSZjbGllbnQtPm11
eC5zaXplLCBzaXplb2YoZ3VpbnQxNiksIE5VTEwsIE5VTEwpOwo+IC0gICAgb3V0cHV0X3F1ZXVl
X3B1c2goYy0+cXVldWUsIChndWludDggKiljbGllbnQtPm11eC5idWYsIHNpemUsIChHRnVuYylt
dXhfcHVzaGVkX2NiLCBjbGllbnQpOwo+ICsgICAgb3V0cHV0X3F1ZXVlX3B1c2goYy0+cXVldWUs
IChndWludDggKiljbGllbnQtPm11eCwgc2l6ZW9mKGdpbnQ2NCkgKyBzaXplb2YoZ3VpbnQxNikg
KyBzaXplLAo+ICsgICAgICAgICAgICAgICAgICAgICAgKEdGdW5jKW11eF9wdXNoZWRfY2IsIGNs
aWVudCk7Cj4KPiAgICAgIHJldHVybjsKPgo+IEBAIC0yODQsNyArMjgyLDcgQEAgc3RhdGljIGJv
b2wgY2xpZW50X3N0YXJ0X3JlYWQoQ2xpZW50ICpjbGllbnQpCj4gICAgICBpZiAoZ19pbnB1dF9z
dHJlYW1faXNfY2xvc2VkKGlucHV0KSkgewo+ICAgICAgICAgIHJldHVybiBmYWxzZTsKPiAgICAg
IH0KPiAtICAgIGdfaW5wdXRfc3RyZWFtX3JlYWRfYXN5bmMoaW5wdXQsIGNsaWVudC0+bXV4LmJ1
ZiwgTUFYX01VWF9TSVpFLAo+ICsgICAgZ19pbnB1dF9zdHJlYW1fcmVhZF9hc3luYyhpbnB1dCwg
Y2xpZW50LT5tdXgtPmJ1ZiwgTUFYX01VWF9TSVpFLAo+ICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBHX1BSSU9SSVRZX0RFRkFVTFQsIGNsaWVudC0+Y2FuY2VsbGFibGUsIHNlcnZlcl9y
ZXBseV9jYiwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50X3JlZihjbGll
bnQpKTsKPiAgICAgIHJldHVybiB0cnVlOwo+IEBAIC0zNjgsOCArMzY2LDggQEAgc3RhdGljIHZv
aWQgc3RhcnRfY2xpZW50KFNwaWNlV2ViZGF2Q2hhbm5lbCAqc2VsZikKPiAgICAgIGNsaWVudC0+
cmVmcyA9IDE7Cj4gICAgICBjbGllbnQtPmlkID0gYy0+ZGVtdXguY2xpZW50Owo+ICAgICAgY2xp
ZW50LT5zZWxmID0gc2VsZjsKPiAtICAgIGNsaWVudC0+bXV4LmlkID0gR0lOVDY0X1RPX0xFKGNs
aWVudC0+aWQpOwo+IC0gICAgY2xpZW50LT5tdXguYnVmID0gZ19tYWxsb2MwKE1BWF9NVVhfU0la
RSk7Cj4gKyAgICBjbGllbnQtPm11eCA9IGdfbWFsbG9jMChzaXplb2YoKmNsaWVudC0+bXV4KSk7
CgpXaHkgYXJlIHlvdSBhbGxvY2F0aW5nIG11eCBzZXBhcmF0ZWx5IGZyb20gdGhlIGNsaWVudD8K
SXQgZG9lcyBub3QgY2hhbmdlIGR1cmluZyB0aGUgbGlmZXRpbWUgb2YgQ2xpZW50LApzbyBJIHRo
aW5rIHdlIGNhbiBzaW1wbHkgbWFrZSBpdCBhIHBhcnQgb2YgdGhlIENsaWVudCBzdHJ1Y3QuCgo+
ICsgICAgY2xpZW50LT5tdXgtPmlkID0gR0lOVDY0X1RPX0xFKGNsaWVudC0+aWQpOwo+ICAgICAg
Y2xpZW50LT5jYW5jZWxsYWJsZSA9IGdfY2FuY2VsbGFibGVfbmV3KCk7Cj4gICAgICBzcGljZV9t
YWtlX3BpcGUoJmNsaWVudC0+cGlwZSwgJnBlZXIpOwo+Cj4gLS0KPiAyLjIwLjEKPgo+IF9fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fCj4gU3BpY2UtZGV2ZWwg
bWFpbGluZyBsaXN0Cj4gU3BpY2UtZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCj4gaHR0cHM6
Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9zcGljZS1kZXZlbAoKSmFr
dWIKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KU3BpY2Ut
ZGV2ZWwgbWFpbGluZyBsaXN0ClNwaWNlLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL3NwaWNlLWRldmVs
