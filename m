Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 4C09089807
	for <lists+spice-devel@lfdr.de>; Mon, 12 Aug 2019 09:43:24 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 75CA16E4AB;
	Mon, 12 Aug 2019 07:43:22 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6EE066E4AB
 for <spice-devel@lists.freedesktop.org>; Mon, 12 Aug 2019 07:43:21 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx04.intmail.prod.int.phx2.redhat.com
 [10.5.11.14])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 0DFCD8E591
 for <spice-devel@lists.freedesktop.org>; Mon, 12 Aug 2019 07:43:21 +0000 (UTC)
Received: from colo-mx.corp.redhat.com
 (colo-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.21])
 by smtp.corp.redhat.com (Postfix) with ESMTPS id 048A65D9C9
 for <spice-devel@lists.freedesktop.org>; Mon, 12 Aug 2019 07:43:21 +0000 (UTC)
Received: from zmail25.collab.prod.int.phx2.redhat.com
 (zmail25.collab.prod.int.phx2.redhat.com [10.5.83.31])
 by colo-mx.corp.redhat.com (Postfix) with ESMTP id EFB4024F2F;
 Mon, 12 Aug 2019 07:43:20 +0000 (UTC)
Date: Mon, 12 Aug 2019 03:43:20 -0400 (EDT)
From: Frediano Ziglio <fziglio@redhat.com>
To: Kevin Pouget <kpouget@redhat.com>
Message-ID: <2081791382.5487598.1565595800627.JavaMail.zimbra@redhat.com>
In-Reply-To: <20190806153453.20616-8-kpouget@redhat.com>
References: <20190806153453.20616-1-kpouget@redhat.com>
 <20190806153453.20616-8-kpouget@redhat.com>
MIME-Version: 1.0
X-Originating-IP: [10.40.204.153, 10.4.195.2]
Thread-Topic: concrete-agent: prioritize requested codec for plugin selection
Thread-Index: Vos0LiciKUKYzzCjgjP432puWsmYYA==
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.14
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.28]); Mon, 12 Aug 2019 07:43:21 +0000 (UTC)
Subject: Re: [Spice-devel] [RFC spice-streaming-agent 4/4] concrete-agent:
 prioritize requested codec for plugin selection
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: spice-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

PiAKPiBUaGlzIHBhdGNoIGdpdmVzIG1vcmUgcHJpb3JpdHkgdG8gdGhlIHJlcXVlc3RlZCB2aWRl
byBjb2RlY3Mgd2hlbgo+IHNlbGVjdGluZyB0aGUgRnJhbWVDYXB0dXJlIHBsdWdpbiwgaW5zdGVh
ZCBvZiBpdHMgaGFyZC1jb2RlZCByYW5rLgo+IAo+IFRoZSBjbGllbnRfY29kZWNzIHN0b3JhZ2Ug
c3RydWN0dXJlIGlzIGNoYW5nZWQgZnJvbSAnc2V0JyB0byAndmVjdG9yJywKPiBhcyB0aGUgY29k
ZWMgb3JkZXIgaXMgbm90IHByZXNlcnZlZCBieSB0aGUgc2V0IHN0cnVjdHVyZS4uCj4gCj4gU2ln
bmVkLW9mZi1ieTogS2V2aW4gUG91Z2V0IDxrcG91Z2V0QHJlZGhhdC5jb20+Cj4gLS0tCj4gIHNy
Yy9jb25jcmV0ZS1hZ2VudC5jcHAgICAgICAgIHwgMzggKysrKysrKysrKysrKysrKystLS0tLS0t
LS0tLS0tLS0tLS0KPiAgc3JjL2NvbmNyZXRlLWFnZW50LmhwcCAgICAgICAgfCAgMiArLQo+ICBz
cmMvc3BpY2Utc3RyZWFtaW5nLWFnZW50LmNwcCB8ICAyICstCj4gIHNyYy9zdHJlYW0tcG9ydC5j
cHAgICAgICAgICAgIHwgIDIgKy0KPiAgc3JjL3N0cmVhbS1wb3J0LmhwcCAgICAgICAgICAgfCAg
NCArKy0tCj4gIDUgZmlsZXMgY2hhbmdlZCwgMjQgaW5zZXJ0aW9ucygrKSwgMjQgZGVsZXRpb25z
KC0pCj4gCj4gZGlmZiAtLWdpdCBhL3NyYy9jb25jcmV0ZS1hZ2VudC5jcHAgYi9zcmMvY29uY3Jl
dGUtYWdlbnQuY3BwCj4gaW5kZXggMzM2YmQwOS4uNjgzZmEyNiAxMDA2NDQKPiAtLS0gYS9zcmMv
Y29uY3JldGUtYWdlbnQuY3BwCj4gKysrIGIvc3JjL2NvbmNyZXRlLWFnZW50LmNwcAo+IEBAIC0x
MTEsNyArMTExLDcgQEAgdm9pZCBDb25jcmV0ZUFnZW50OjpMb2FkUGx1Z2luKGNvbnN0IHN0ZDo6
c3RyaW5nCj4gJnBsdWdpbl9maWxlbmFtZSkKPiAgICAgIH0KPiAgfQo+ICAKPiAtRnJhbWVDYXB0
dXJlICpDb25jcmV0ZUFnZW50OjpHZXRCZXN0RnJhbWVDYXB0dXJlKGNvbnN0Cj4gc3RkOjpzZXQ8
U3BpY2VWaWRlb0NvZGVjVHlwZT4mIGNvZGVjcykKPiArRnJhbWVDYXB0dXJlICpDb25jcmV0ZUFn
ZW50OjpHZXRCZXN0RnJhbWVDYXB0dXJlKGNvbnN0Cj4gc3RkOjp2ZWN0b3I8U3BpY2VWaWRlb0Nv
ZGVjVHlwZT4mIGNvZGVjcykKPiAgewo+ICAgICAgc3RkOjp2ZWN0b3I8c3RkOjpwYWlyPHVuc2ln
bmVkLCBzdGQ6OnNoYXJlZF9wdHI8UGx1Z2luPj4+Cj4gICAgICBzb3J0ZWRfcGx1Z2luczsKPiAg
Cj4gQEAgLTEyMSwyNCArMTIxLDI0IEBAIEZyYW1lQ2FwdHVyZSAqQ29uY3JldGVBZ2VudDo6R2V0
QmVzdEZyYW1lQ2FwdHVyZShjb25zdAo+IHN0ZDo6c2V0PFNwaWNlVmlkZW9Db2RlY1QKPiAgICAg
IH0KPiAgICAgIHNvcnQoc29ydGVkX3BsdWdpbnMucmJlZ2luKCksIHNvcnRlZF9wbHVnaW5zLnJl
bmQoKSk7Cj4gIAo+IC0gICAgLy8gcmV0dXJuIGZpcnN0IG5vdCBudWxsCj4gLSAgICBmb3IgKGNv
bnN0IGF1dG8mIHBsdWdpbjogc29ydGVkX3BsdWdpbnMpIHsKPiAtICAgICAgICBpZiAocGx1Z2lu
LmZpcnN0ID09IERvbnRVc2UpIHsKPiAtICAgICAgICAgICAgYnJlYWs7Cj4gLSAgICAgICAgfQo+
IC0gICAgICAgIC8vIGNoZWNrIGNsaWVudCBzdXBwb3J0cyB0aGUgY29kZWMKPiAtICAgICAgICBp
ZiAoY29kZWNzLmZpbmQocGx1Z2luLnNlY29uZC0+VmlkZW9Db2RlY1R5cGUoKSkgPT0gY29kZWNz
LmVuZCgpKQo+IC0gICAgICAgICAgICBjb250aW51ZTsKPiAtCj4gLSAgICAgICAgRnJhbWVDYXB0
dXJlICpjYXB0dXJlOwo+IC0gICAgICAgIHRyeSB7Cj4gLSAgICAgICAgICAgIGNhcHR1cmUgPSBw
bHVnaW4uc2Vjb25kLT5DcmVhdGVDYXB0dXJlKCk7Cj4gLSAgICAgICAgfSBjYXRjaCAoY29uc3Qg
c3RkOjpleGNlcHRpb24gJmVycikgewo+IC0gICAgICAgICAgICBzeXNsb2coTE9HX0VSUiwgIkVy
cm9yIGNyZWF0aW5nIGNhcHR1cmUgZW5naW5lOiAlcyIsCj4gZXJyLndoYXQoKSk7Cj4gLSAgICAg
ICAgICAgIGNvbnRpbnVlOwo+IC0gICAgICAgIH0KPiAtICAgICAgICBpZiAoY2FwdHVyZSkgewo+
IC0gICAgICAgICAgICByZXR1cm4gY2FwdHVyZTsKPiArICAgIGZvciAoY29uc3QgYXV0byYgY29k
ZWNfdHlwZTogY29kZWNzKSB7Cj4gKyAgICAgICAgLy8gZmluZCB0aGUgcGx1Z2luIHdpdGggdGhl
IGhpZ2hlc3QgcmFuayBmb3IgdGhpcyBjb2RlYyB0eXBlCj4gKyAgICAgICAgZm9yIChjb25zdCBh
dXRvJiBwbHVnaW46IHNvcnRlZF9wbHVnaW5zKSB7Cj4gKyAgICAgICAgICAgIGlmIChwbHVnaW4u
Zmlyc3QgPT0gRG9udFVzZSkgewo+ICsgICAgICAgICAgICAgICAgY29udGludWU7Cj4gKyAgICAg
ICAgICAgIH0KPiArCj4gKyAgICAgICAgICAgIC8vIGNoZWNrIGNsaWVudCBzdXBwb3J0cyB0aGUg
Y29kZWMKPiArICAgICAgICAgICAgaWYgKHBsdWdpbi5zZWNvbmQtPlZpZGVvQ29kZWNUeXBlKCkg
IT0gY29kZWNfdHlwZSkgewo+ICsgICAgICAgICAgICAgICAgY29udGludWU7Cj4gKyAgICAgICAg
ICAgIH0KPiArCj4gKyAgICAgICAgICAgIHRyeSB7Cj4gKyAgICAgICAgICAgICAgICByZXR1cm4g
cGx1Z2luLnNlY29uZC0+Q3JlYXRlQ2FwdHVyZSgpOwo+ICsgICAgICAgICAgICB9IGNhdGNoIChj
b25zdCBzdGQ6OmV4Y2VwdGlvbiAmZXJyKSB7Cj4gKyAgICAgICAgICAgICAgICBzeXNsb2coTE9H
X0VSUiwgIkVycm9yIGNyZWF0aW5nIGNhcHR1cmUgZW5naW5lOiAlcyIsCj4gZXJyLndoYXQoKSk7
Cj4gKyAgICAgICAgICAgICAgICBjb250aW51ZTsKPiArICAgICAgICAgICAgfQo+ICAgICAgICAg
IH0KPiAgICAgIH0KPiAgICAgIHJldHVybiBudWxscHRyOwoKSSB0aGluayB0aGF0IHByZXZpb3Vz
IGNvZGUgd2FzIGVudGlyZWx5IGluIGZhdm91ciBvZiBhZ2VudCBwcmVmZXJlbmNlCmJ1dCB0aGUg
bmV3IG9uZSBsb29rcyB0b28gbXVjaCBpbiBmYXZvdXIgb2YgdGhlIGNsaWVudC4KQWxzbyBhZGRp
bmcgcHJlZmVyZW5jZSB0byBhIG1lc3NhZ2Ugbm90IGRlc2lnbmVkIHRvIGRvIHNvIGlzIG5vdAox
MDAlIGNvcnJlY3QuIEl0J3Mgbm90IGEgYmlnIGhhY2sgYnV0IHdhcyBub3QgZGVzaWduZWQgdG8g
ZG8gc28uCkZvciBpbnN0YW5jZSBpcyBpbXBvc3NpYmxlIGZvciB0aGUgY2xpZW50IHRvIHNwZWNp
ZnkgdGhhdCAyIGNvZGVjcwpoYXZlIHRoZSBzYW1lIHByZWZlcmVuY2Ugb3IgaG93IG11Y2ggb25l
IHNob3VsZCBiZSBmYXZvdXJpdGUgaW5zdGVhZApvZiB0aGUgb3RoZXIuCgpJIHdvdWxkIGdlbmVy
YXRlIGEgcmFuayB0aGF0IHRha2UgaW4gYWNjb3VudCBib3RoIGFnZW50IGFuZCBjbGllbnQKcHJl
ZmVyZW5jZSBhbmQgdXNlIHRoZSBzb3J0ZWRfcGx1Z2lucyBhcyB3YXMgdXNlZCBiZWZvcmUgaW5z
dGVhZApvZiB0YWtpbmcgYW4gYWxyZWFkeSBzb3J0ZWQgYXJyYXkgYW5kIGlnbm9yaW5nIG1vc3Qg
b2YgdGhlIHNvcnRpbmcKYW5kIHJhbmtpbmcuCgpNYXliZSBub3JtYWxpemUgcmFuayBmb3IgYWdl
bnQgYW5kIGNsaWVudCB0byBhIDAtMjU1IHJhbmdlIGFuZApjb21wdXRlOgoKICB0b3RhbF9yYW5r
ID0gYWdlbnRfcmFuayAqIDE2ICsgY2xpZW50X3Jhbms7Cgo/PyB0aGlzIHdpbGwgZmF2b3VyIHRo
ZSBhZ2VudCBidXQgc3RpbGwgZ2l2ZSB0aGUgcG9zc2liaWxpdHkKZm9yIHRoZSBjbGllbnQgdG8g
b3ZlcnJpZGUgYSBiaXQuClRoZSBjbGllbnRfcmFuayBzaG91bGQgY29tZSBmcm9tIGEgc2ltaWxh
ciBzdGFydC9zdG9wIG1lc3NhZ2Ugd2l0aAphZGRlZCByYW5rLgoKPiBkaWZmIC0tZ2l0IGEvc3Jj
L2NvbmNyZXRlLWFnZW50LmhwcCBiL3NyYy9jb25jcmV0ZS1hZ2VudC5ocHAKPiBpbmRleCA2ZDFi
ZTM1Li4wMzk5YmFiIDEwMDY0NAo+IC0tLSBhL3NyYy9jb25jcmV0ZS1hZ2VudC5ocHAKPiArKysg
Yi9zcmMvY29uY3JldGUtYWdlbnQuaHBwCj4gQEAgLTMzLDcgKzMzLDcgQEAgcHVibGljOgo+ICAg
ICAgdm9pZCBSZWdpc3Rlcihjb25zdCBzdGQ6OnNoYXJlZF9wdHI8UGx1Z2luPiYgcGx1Z2luKSBv
dmVycmlkZTsKPiAgICAgIGNvbnN0IENvbmZpZ3VyZU9wdGlvbiogT3B0aW9ucygpIGNvbnN0IG92
ZXJyaWRlOwo+ICAgICAgdm9pZCBMb2FkUGx1Z2lucyhjb25zdCBzdGQ6OnN0cmluZyAmZGlyZWN0
b3J5KTsKPiAtICAgIEZyYW1lQ2FwdHVyZSAqR2V0QmVzdEZyYW1lQ2FwdHVyZShjb25zdCBzdGQ6
OnNldDxTcGljZVZpZGVvQ29kZWNUeXBlPiYKPiBjb2RlY3MpOwo+ICsgICAgRnJhbWVDYXB0dXJl
ICpHZXRCZXN0RnJhbWVDYXB0dXJlKGNvbnN0Cj4gc3RkOjp2ZWN0b3I8U3BpY2VWaWRlb0NvZGVj
VHlwZT4mIGNvZGVjcyk7Cj4gICAgICBfX2F0dHJpYnV0ZV9fICgoZm9ybWF0IChwcmludGYsIDIs
IDMpKSkKPiAgICAgIHZvaWQgTG9nU3RhdChjb25zdCBjaGFyKiBmb3JtYXQsIC4uLikgb3ZlcnJp
ZGU7Cj4gIHByaXZhdGU6Cj4gZGlmZiAtLWdpdCBhL3NyYy9zcGljZS1zdHJlYW1pbmctYWdlbnQu
Y3BwIGIvc3JjL3NwaWNlLXN0cmVhbWluZy1hZ2VudC5jcHAKPiBpbmRleCBkMjc0YjVmLi4xNWMy
NzMyIDEwMDY0NAo+IC0tLSBhL3NyYy9zcGljZS1zdHJlYW1pbmctYWdlbnQuY3BwCj4gKysrIGIv
c3JjL3NwaWNlLXN0cmVhbWluZy1hZ2VudC5jcHAKPiBAQCAtMTI4LDcgKzEyOCw3IEBAIHByaXZh
dGU6Cj4gIHN0YXRpYyBib29sIGNhcHR1cmVfaW5fcHJvZ3Jlc3MgPSBmYWxzZTsKPiAgc3RhdGlj
IGJvb2wgcmVzZXRfcmVxdWVzdGVkID0gZmFsc2U7Cj4gIHN0YXRpYyBib29sIHF1aXRfcmVxdWVz
dGVkID0gZmFsc2U7Cj4gLXN0YXRpYyBzdGQ6OnNldDxTcGljZVZpZGVvQ29kZWNUeXBlPiBjbGll
bnRfY29kZWNzOwo+ICtzdGF0aWMgc3RkOjp2ZWN0b3I8U3BpY2VWaWRlb0NvZGVjVHlwZT4gY2xp
ZW50X2NvZGVjczsKPiAgCj4gIHN0YXRpYyBib29sIGhhdmVfc29tZXRoaW5nX3RvX3JlYWQoU3Ry
ZWFtUG9ydCAmc3RyZWFtX3BvcnQsIGJvb2wgYmxvY2tpbmcpCj4gIHsKPiBkaWZmIC0tZ2l0IGEv
c3JjL3N0cmVhbS1wb3J0LmNwcCBiL3NyYy9zdHJlYW0tcG9ydC5jcHAKPiBpbmRleCAyNjcwMTIw
Li4wZDA4ZDUwIDEwMDY0NAo+IC0tLSBhL3NyYy9zdHJlYW0tcG9ydC5jcHAKPiArKysgYi9zcmMv
c3RyZWFtLXBvcnQuY3BwCj4gQEAgLTQzLDcgKzQzLDcgQEAgU3RhcnRTdG9wTWVzc2FnZQo+IElu
Ym91bmRNZXNzYWdlOjpnZXRfcGF5bG9hZDxTdGFydFN0b3BNZXNzYWdlPigpCj4gICAgICB9Cj4g
IAo+ICAgICAgZm9yIChzaXplX3QgaSA9IDE7IGkgPD0gZGF0YVswXTsgKytpKSB7Cj4gLSAgICAg
ICAgbXNnLmNsaWVudF9jb2RlY3MuaW5zZXJ0KChTcGljZVZpZGVvQ29kZWNUeXBlKSBkYXRhW2ld
KTsKPiArICAgICAgICBtc2cuY2xpZW50X2NvZGVjcy5wdXNoX2JhY2soKFNwaWNlVmlkZW9Db2Rl
Y1R5cGUpIGRhdGFbaV0pOwo+ICAgICAgfQo+ICAKPiAgICAgIHJldHVybiBtc2c7Cj4gZGlmZiAt
LWdpdCBhL3NyYy9zdHJlYW0tcG9ydC5ocHAgYi9zcmMvc3RyZWFtLXBvcnQuaHBwCj4gaW5kZXgg
MDg0NzNmNy4uYjJmNzUyMCAxMDA2NDQKPiAtLS0gYS9zcmMvc3RyZWFtLXBvcnQuaHBwCj4gKysr
IGIvc3JjL3N0cmVhbS1wb3J0LmhwcAo+IEBAIC0xNiw3ICsxNiw3IEBACj4gICNpbmNsdWRlIDxz
dHJpbmc+Cj4gICNpbmNsdWRlIDxtZW1vcnk+Cj4gICNpbmNsdWRlIDxtdXRleD4KPiAtI2luY2x1
ZGUgPHNldD4KPiArI2luY2x1ZGUgPHZlY3Rvcj4KPiAgCj4gIAo+ICBuYW1lc3BhY2Ugc3BpY2Ug
ewo+IEBAIC00NSw3ICs0NSw3IEBAIHB1YmxpYzoKPiAgc3RydWN0IFN0YXJ0U3RvcE1lc3NhZ2UK
PiAgewo+ICAgICAgYm9vbCBzdGFydF9zdHJlYW1pbmcgPSBmYWxzZTsKPiAtICAgIHN0ZDo6c2V0
PFNwaWNlVmlkZW9Db2RlY1R5cGU+IGNsaWVudF9jb2RlY3M7Cj4gKyAgICBzdGQ6OnZlY3RvcjxT
cGljZVZpZGVvQ29kZWNUeXBlPiBjbGllbnRfY29kZWNzOwo+ICB9Owo+ICAKPiAgc3RydWN0IElu
Q2FwYWJpbGl0aWVzTWVzc2FnZSB7fTsKCkZyZWRpYW5vCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fClNwaWNlLWRldmVsIG1haWxpbmcgbGlzdApTcGljZS1k
ZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcv
bWFpbG1hbi9saXN0aW5mby9zcGljZS1kZXZlbA==
