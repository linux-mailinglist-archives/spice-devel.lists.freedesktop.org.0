Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 2F2E47F7EE
	for <lists+spice-devel@lfdr.de>; Fri,  2 Aug 2019 15:10:53 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 955D16EE0B;
	Fri,  2 Aug 2019 13:10:51 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mail-wr1-f52.google.com (mail-wr1-f52.google.com
 [209.85.221.52])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 47FBC6EE0B
 for <spice-devel@lists.freedesktop.org>; Fri,  2 Aug 2019 13:10:49 +0000 (UTC)
Received: by mail-wr1-f52.google.com with SMTP id n9so52046511wrr.4
 for <spice-devel@lists.freedesktop.org>; Fri, 02 Aug 2019 06:10:49 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=0SeYCGgZoMGZW9kMwzMOku6BJA+bDPTjQ+PuWdRTC5o=;
 b=FloIaU+aJ9JFxReuZvLqdtYbIWoSZ/4cvVqAcIe9ANG2kc/Dwb89V7aQpR2md1DPRL
 S2r//5iacKTwb67XVvTexCXv1oCYfmN4Df95VdEGhW6nSuasSXKytS9KHNmCG88xvhNx
 erUAGtjJZE8xcg8Avou9Wv1VambI3yAVYYrJqRBs+jOVJWBzkRfTkJU3ZMU8JeRqbMiX
 2DklLGcriND/TbmnoQw2YLETsnkSgqDURpwWZqiT23VfWZfEBaprncJA23eItPrRhenO
 viDU7tDcMCdKWpw8r9dNV+gqBfzgAUo1qxE1LAyczLqfqqYQ9JmhnyJe3kkyfs4X4iQm
 iLsg==
X-Gm-Message-State: APjAAAUgVUvJx8WXAQuZCt6jaQthz76kKH48EJlpMfM8yjB7CnSDYTw1
 3fpEtfLU48Yiv24THzvJi1AGX8bmu2PSLQ==
X-Google-Smtp-Source: APXvYqwGqi5draxG+cMewdzfdlGMJ3TtwUyln2nZg1nYbjVWwHiQvYFsnnyLGi1M84SdrXf0i2iwrw==
X-Received: by 2002:adf:ce8d:: with SMTP id r13mr54807434wrn.37.1564751447712; 
 Fri, 02 Aug 2019 06:10:47 -0700 (PDT)
Received: from pinea.redhat.com (25.119.19.109.rev.sfr.net. [109.19.119.25])
 by smtp.gmail.com with ESMTPSA id f204sm119333037wme.18.2019.08.02.06.10.46
 for <spice-devel@lists.freedesktop.org>
 (version=TLS1_3 cipher=AEAD-AES256-GCM-SHA384 bits=256/256);
 Fri, 02 Aug 2019 06:10:47 -0700 (PDT)
From: Kevin Pouget <kpouget@redhat.com>
To: spice-devel <spice-devel@lists.freedesktop.org>
Date: Fri,  2 Aug 2019 15:10:43 +0200
Message-Id: <20190802131043.28274-2-kpouget@redhat.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20190802131043.28274-1-kpouget@redhat.com>
References: <20190802131043.28274-1-kpouget@redhat.com>
MIME-Version: 1.0
Subject: [Spice-devel] [RFC spice-server 2/2] streaming: Restart guest video
 streams on video-codec changes
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

VGhpcyBwYXRjaCByZXNldHMgdGhlIGhvc3QgYW5kIGd1ZXN0IHZpZGVvIHN0cmVhbXMgd2hlbiB0
aGUgY2xpZW50CmNoYW5nZXMgdGhlIHByZWZlcnJlZCB2aWRlby1jb2RlY3Mgb3Igd2hlbiB0aGUg
aG9zdCBhZG1pbiB1cGRhdGVzIHRoZQpsaXN0IG9mIHZpZGVvLWNvZGVjcyBhbGxvd2VkLgoKU2ln
bmVkLW9mZi1ieTogS2V2aW4gUG91Z2V0IDxrcG91Z2V0QHJlZGhhdC5jb20+Ci0tLQogc2VydmVy
L2RjYy5jICAgICAgICAgICAgIHwgIDQgKysrLQogc2VydmVyL2Rpc3BsYXktY2hhbm5lbC5jIHwg
IDIgKy0KIHNlcnZlci92aWRlby1zdHJlYW0uYyAgICB8IDExICsrKysrKysrKysrCiBzZXJ2ZXIv
dmlkZW8tc3RyZWFtLmggICAgfCAgMSArCiA0IGZpbGVzIGNoYW5nZWQsIDE2IGluc2VydGlvbnMo
KyksIDIgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvc2VydmVyL2RjYy5jIGIvc2VydmVyL2Rj
Yy5jCmluZGV4IDIxZTg1OThlLi4xNjMxYTJiNCAxMDA2NDQKLS0tIGEvc2VydmVyL2RjYy5jCisr
KyBiL3NlcnZlci9kY2MuYwpAQCAtMTE5Myw3ICsxMTkzLDkgQEAgc3RhdGljIGludCBkY2NfaGFu
ZGxlX3ByZWZlcnJlZF92aWRlb19jb2RlY190eXBlKERpc3BsYXlDaGFubmVsQ2xpZW50ICpkY2Ms
CgogICAgIC8qIE5ldyBjbGllbnQgcHJlZmVyZW5jZSAqLwogICAgIGRjY191cGRhdGVfcHJlZmVy
cmVkX3ZpZGVvX2NvZGVjcyhkY2MpOwotICAgIHZpZGVvX3N0cmVhbV9kZXRhY2hfYW5kX3N0b3Ao
RENDX1RPX0RDKGRjYykpOworCisgICAgLyogUmVzZXQgdmlkZW8gc3RyZWFtcyAqLworICAgIHZp
ZGVvX3N0cmVhbV9jb2RlY3NfY2hhbmdlZChEQ0NfVE9fREMoZGNjKSk7CgogICAgIHJldHVybiBU
UlVFOwogfQpkaWZmIC0tZ2l0IGEvc2VydmVyL2Rpc3BsYXktY2hhbm5lbC5jIGIvc2VydmVyL2Rp
c3BsYXktY2hhbm5lbC5jCmluZGV4IDc1MjY2NTk4Li42NWJjMTVjYSAxMDA2NDQKLS0tIGEvc2Vy
dmVyL2Rpc3BsYXktY2hhbm5lbC5jCisrKyBiL3NlcnZlci9kaXNwbGF5LWNoYW5uZWwuYwpAQCAt
MjU2LDcgKzI1Niw3IEBAIHZvaWQgZGlzcGxheV9jaGFubmVsX3NldF92aWRlb19jb2RlY3MoRGlz
cGxheUNoYW5uZWwgKmRpc3BsYXksIEdBcnJheSAqdmlkZW9fY29kCiAgICAgZGlzcGxheS0+cHJp
di0+dmlkZW9fY29kZWNzID0gZ19hcnJheV9yZWYodmlkZW9fY29kZWNzKTsKICAgICBnX29iamVj
dF9ub3RpZnkoR19PQkpFQ1QoZGlzcGxheSksICJ2aWRlby1jb2RlY3MiKTsKCi0gICAgdmlkZW9f
c3RyZWFtX2RldGFjaF9hbmRfc3RvcChkaXNwbGF5KTsKKyAgICB2aWRlb19zdHJlYW1fY29kZWNz
X2NoYW5nZWQoZGlzcGxheSk7CiB9CgogR0FycmF5ICpkaXNwbGF5X2NoYW5uZWxfZ2V0X3ZpZGVv
X2NvZGVjcyhEaXNwbGF5Q2hhbm5lbCAqZGlzcGxheSkKZGlmZiAtLWdpdCBhL3NlcnZlci92aWRl
by1zdHJlYW0uYyBiL3NlcnZlci92aWRlby1zdHJlYW0uYwppbmRleCA2YWE4NTlhMC4uZDBmMGE0
MDEgMTAwNjQ0Ci0tLSBhL3NlcnZlci92aWRlby1zdHJlYW0uYworKysgYi9zZXJ2ZXIvdmlkZW8t
c3RyZWFtLmMKQEAgLTIwLDYgKzIwLDcgQEAKICNpbmNsdWRlICJkaXNwbGF5LWNoYW5uZWwtcHJp
dmF0ZS5oIgogI2luY2x1ZGUgIm1haW4tY2hhbm5lbC1jbGllbnQuaCIKICNpbmNsdWRlICJyZWQt
Y2xpZW50LmgiCisjaW5jbHVkZSAic3RyZWFtLWNoYW5uZWwuaCIKCiAjZGVmaW5lIEZQU19URVNU
X0lOVEVSVkFMIDEKICNkZWZpbmUgRk9SRUFDSF9TVFJFQU1TKGRpc3BsYXksIGl0ZW0pICAgICAg
ICAgICAgICAgICAgXApAQCAtOTUwLDYgKzk1MSwxNiBAQCB2b2lkIHZpZGVvX3N0cmVhbV90aW1l
b3V0KERpc3BsYXlDaGFubmVsICpkaXNwbGF5KQogICAgIH0KIH0KCit2b2lkIHZpZGVvX3N0cmVh
bV9jb2RlY3NfY2hhbmdlZChEaXNwbGF5Q2hhbm5lbCAqZGlzcGxheSkKK3sKKyAgICAvKiBSZXNl
dCBndWVzdCB2aWRlbyBzdHJlYW1zICovCisgICAgaWYgKElTX1NUUkVBTV9DSEFOTkVMKGRpc3Bs
YXkpKSB7CisgICAgICAgIHN0cmVhbV9jaGFubmVsX3Jlc2V0KFNUUkVBTV9DSEFOTkVMKGRpc3Bs
YXkpKTsKKyAgICB9CisgICAgLyogUmVzZXQgaG9zdCB2aWRlbyBzdHJlYW1zICovCisgICAgdmlk
ZW9fc3RyZWFtX2RldGFjaF9hbmRfc3RvcChkaXNwbGF5KTsKK30KKwogdm9pZCB2aWRlb19zdHJl
YW1fdHJhY2VfYWRkX2RyYXdhYmxlKERpc3BsYXlDaGFubmVsICpkaXNwbGF5LAogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIERyYXdhYmxlICppdGVtKQogewpkaWZmIC0tZ2l0
IGEvc2VydmVyL3ZpZGVvLXN0cmVhbS5oIGIvc2VydmVyL3ZpZGVvLXN0cmVhbS5oCmluZGV4IDQ2
YjA3NmZkLi5mZTc0ZmMzNCAxMDA2NDQKLS0tIGEvc2VydmVyL3ZpZGVvLXN0cmVhbS5oCisrKyBi
L3NlcnZlci92aWRlby1zdHJlYW0uaApAQCAtMTQ3LDYgKzE0Nyw3IEBAIHZvaWQgdmlkZW9fc3Ry
ZWFtX2RldGFjaF9hbmRfc3RvcChEaXNwbGF5Q2hhbm5lbCAqZGlzcGxheSk7CiB2b2lkIHZpZGVv
X3N0cmVhbV90cmFjZV9hZGRfZHJhd2FibGUoRGlzcGxheUNoYW5uZWwgKmRpc3BsYXksIERyYXdh
YmxlICppdGVtKTsKIHZvaWQgdmlkZW9fc3RyZWFtX2RldGFjaF9iZWhpbmQoRGlzcGxheUNoYW5u
ZWwgKmRpc3BsYXksIFFSZWdpb24gKnJlZ2lvbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgRHJhd2FibGUgKmRyYXdhYmxlKTsKK3ZvaWQgdmlkZW9fc3RyZWFtX2NvZGVjc19jaGFu
Z2VkKERpc3BsYXlDaGFubmVsICpkaXNwbGF5KTsKCiB2b2lkIHZpZGVvX3N0cmVhbV9hZ2VudF91
bnJlZihEaXNwbGF5Q2hhbm5lbCAqZGlzcGxheSwgVmlkZW9TdHJlYW1BZ2VudCAqYWdlbnQpOwog
dm9pZCB2aWRlb19zdHJlYW1fYWdlbnRfc3RvcChWaWRlb1N0cmVhbUFnZW50ICphZ2VudCk7Ci0t
CjIuMjEuMApfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpT
cGljZS1kZXZlbCBtYWlsaW5nIGxpc3QKU3BpY2UtZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3Jn
Cmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vc3BpY2UtZGV2
ZWw=
