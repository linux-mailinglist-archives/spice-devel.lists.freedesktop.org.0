Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 8117E74993
	for <lists+spice-devel@lfdr.de>; Thu, 25 Jul 2019 11:09:21 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6A8106E6A6;
	Thu, 25 Jul 2019 09:09:19 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5ECE46E6A6
 for <spice-devel@lists.freedesktop.org>; Thu, 25 Jul 2019 09:09:18 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx02.intmail.prod.int.phx2.redhat.com
 [10.5.11.12])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 9A3DC89ACB;
 Thu, 25 Jul 2019 09:09:17 +0000 (UTC)
Received: from colo-mx.corp.redhat.com
 (colo-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.21])
 by smtp.corp.redhat.com (Postfix) with ESMTPS id 8D39D60C18;
 Thu, 25 Jul 2019 09:09:17 +0000 (UTC)
Received: from zmail25.collab.prod.int.phx2.redhat.com
 (zmail25.collab.prod.int.phx2.redhat.com [10.5.83.31])
 by colo-mx.corp.redhat.com (Postfix) with ESMTP id 83A7441F40;
 Thu, 25 Jul 2019 09:09:17 +0000 (UTC)
Date: Thu, 25 Jul 2019 05:09:17 -0400 (EDT)
From: Frediano Ziglio <fziglio@redhat.com>
To: Yuri Benditovich <yuri.benditovich@daynix.com>
Message-ID: <1657486544.2954906.1564045757376.JavaMail.zimbra@redhat.com>
In-Reply-To: <20190724105351.13753-4-yuri.benditovich@daynix.com>
References: <20190724105351.13753-1-yuri.benditovich@daynix.com>
 <20190724105351.13753-4-yuri.benditovich@daynix.com>
MIME-Version: 1.0
X-Originating-IP: [10.33.32.8, 10.4.195.6]
Thread-Topic: usb-redir: Prepare for creation of emulated CD drive
Thread-Index: OYLSu+Rmojz32gTUaQB1lfgCALZ4KQ==
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.12
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.26]); Thu, 25 Jul 2019 09:09:17 +0000 (UTC)
Subject: Re: [Spice-devel] [spice-gtk 3/9] usb-redir: Prepare for creation
 of emulated CD drive
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: yan@daynix.com, spice-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

PiAKPiBBZGRlZCBjb21tYW5kLWxpbmUgb3B0aW9uIGZvciBzaGFyZWQgQ0QgZGV2aWNlcyBhbmQg
cmVzcGVjdGl2ZQo+IHByb3BlcnR5IGluIHVzYi1kZXZpY2UtbWFuYWdlci4KPiAKPiBTaWduZWQt
b2ZmLWJ5OiBZdXJpIEJlbmRpdG92aWNoIDx5dXJpLmJlbmRpdG92aWNoQGRheW5peC5jb20+Cj4g
LS0tCj4gIHNyYy9zcGljZS1vcHRpb24uYyAgICAgICB8IDE1ICsrKysrKysrKysrKysrKwo+ICBz
cmMvdXNiLWRldmljZS1tYW5hZ2VyLmMgfCAzMyArKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysKPiAgMiBmaWxlcyBjaGFuZ2VkLCA0OCBpbnNlcnRpb25zKCspCj4gCj4gZGlmZiAtLWdp
dCBhL3NyYy9zcGljZS1vcHRpb24uYyBiL3NyYy9zcGljZS1vcHRpb24uYwo+IGluZGV4IGMyYjA1
OWUuLjRmYmNhOWYgMTAwNjQ0Cj4gLS0tIGEvc3JjL3NwaWNlLW9wdGlvbi5jCj4gKysrIGIvc3Jj
L3NwaWNlLW9wdGlvbi5jCj4gQEAgLTMyLDYgKzMyLDcgQEAgc3RhdGljIGNoYXIgKnNtYXJ0Y2Fy
ZF9kYiA9IE5VTEw7Cj4gIHN0YXRpYyBjaGFyICpzbWFydGNhcmRfY2VydGlmaWNhdGVzID0gTlVM
TDsKPiAgc3RhdGljIGNoYXIgKnVzYnJlZGlyX2F1dG9fcmVkaXJlY3RfZmlsdGVyID0gTlVMTDsK
PiAgc3RhdGljIGNoYXIgKnVzYnJlZGlyX3JlZGlyZWN0X29uX2Nvbm5lY3QgPSBOVUxMOwo+ICtz
dGF0aWMgZ2NoYXIgKipjZF9zaGFyZV9maWxlcyA9IE5VTEw7Cj4gIHN0YXRpYyBnYm9vbGVhbiBz
bWFydGNhcmQgPSBGQUxTRTsKPiAgc3RhdGljIGdib29sZWFuIGRpc2FibGVfYXVkaW8gPSBGQUxT
RTsKPiAgc3RhdGljIGdib29sZWFuIGRpc2FibGVfdXNicmVkaXIgPSBGQUxTRTsKPiBAQCAtMTgz
LDYgKzE4NCw4IEBAIEdPcHRpb25Hcm91cCogc3BpY2VfZ2V0X29wdGlvbl9ncm91cCh2b2lkKQo+
ICAgICAgICAgICAgTl8oIkZpbHRlciBzZWxlY3RpbmcgVVNCIGRldmljZXMgdG8gYmUgYXV0by1y
ZWRpcmVjdGVkIHdoZW4KPiAgICAgICAgICAgIHBsdWdnZWQgaW4iKSwgTl8oIjxmaWx0ZXItc3Ry
aW5nPiIpIH0sCj4gICAgICAgICAgeyAic3BpY2UtdXNicmVkaXItcmVkaXJlY3Qtb24tY29ubmVj
dCIsICdcMCcsIDAsCj4gICAgICAgICAgR19PUFRJT05fQVJHX1NUUklORywgJnVzYnJlZGlyX3Jl
ZGlyZWN0X29uX2Nvbm5lY3QsCj4gICAgICAgICAgICBOXygiRmlsdGVyIHNlbGVjdGluZyBVU0Ig
ZGV2aWNlcyB0byByZWRpcmVjdCBvbiBjb25uZWN0IiksCj4gICAgICAgICAgICBOXygiPGZpbHRl
ci1zdHJpbmc+IikgfSwKPiArICAgICAgICB7ICJzcGljZS1zaGFyZS1jZCIsICdcMCcsIDAsIEdf
T1BUSU9OX0FSR19TVFJJTkdfQVJSQVksCj4gJmNkX3NoYXJlX2ZpbGVzLAo+ICsgICAgICAgICAg
Tl8oIk5hbWUgb2YgSVNPIGZpbGUgb3IgQ0QvRFZEIGRldmljZSB0byBzaGFyZSIpLCBOXygiPGZp
bGVuYW1lPgo+IChyZXBlYXQgYWxsb3dlZCkiKSB9LAo+ICAgICAgICAgIHsgInNwaWNlLWNhY2hl
LXNpemUiLCAnXDAnLCAwLCBHX09QVElPTl9BUkdfSU5ULCAmY2FjaGVfc2l6ZSwKPiAgICAgICAg
ICAgIE5fKCJJbWFnZSBjYWNoZSBzaXplIChkZXByZWNhdGVkKSIpLCBOXygiPGJ5dGVzPiIpIH0s
Cj4gICAgICAgICAgeyAic3BpY2UtZ2x6LXdpbmRvdy1zaXplIiwgJ1wwJywgMCwgR19PUFRJT05f
QVJHX0lOVCwKPiAgICAgICAgICAmZ2x6X3dpbmRvd19zaXplLAo+IEBAIC0yNzIsNiArMjc1LDE4
IEBAIHZvaWQgc3BpY2Vfc2V0X3Nlc3Npb25fb3B0aW9uKFNwaWNlU2Vzc2lvbiAqc2Vzc2lvbikK
PiAgICAgICAgICAgICAgZ19vYmplY3Rfc2V0KG0sICJyZWRpcmVjdC1vbi1jb25uZWN0IiwKPiAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHVzYnJlZGlyX3JlZGlyZWN0X29uX2Nvbm5lY3QsIE5V
TEwpOwo+ICAgICAgfQo+ICsgICAgaWYgKGNkX3NoYXJlX2ZpbGVzKSB7Cj4gKyAgICAgICAgU3Bp
Y2VVc2JEZXZpY2VNYW5hZ2VyICptID0gc3BpY2VfdXNiX2RldmljZV9tYW5hZ2VyX2dldChzZXNz
aW9uLAo+IE5VTEwpOwo+ICsgICAgICAgIGlmIChtKSB7Cj4gKyAgICAgICAgICAgIGdjaGFyICoq
bmFtZSA9IGNkX3NoYXJlX2ZpbGVzOwo+ICsgICAgICAgICAgICB3aGlsZSAobmFtZSAmJiAqbmFt
ZSkgewo+ICsgICAgICAgICAgICAgICAgZ19vYmplY3Rfc2V0KG0sICJzaGFyZS1jZCIsICpuYW1l
LCBOVUxMKTsKPiArICAgICAgICAgICAgICAgIG5hbWUrKzsKPiArICAgICAgICAgICAgfQo+ICsg
ICAgICAgIH0KPiArICAgICAgICBnX3N0cmZyZWV2KGNkX3NoYXJlX2ZpbGVzKTsKPiArICAgICAg
ICBjZF9zaGFyZV9maWxlcyA9IE5VTEw7Cj4gKyAgICB9Cj4gICAgICBpZiAoZGlzYWJsZV91c2Jy
ZWRpcikKPiAgICAgICAgICBnX29iamVjdF9zZXQoc2Vzc2lvbiwgImVuYWJsZS11c2JyZWRpciIs
IEZBTFNFLCBOVUxMKTsKPiAgICAgIGlmIChkaXNhYmxlX2F1ZGlvKQo+IGRpZmYgLS1naXQgYS9z
cmMvdXNiLWRldmljZS1tYW5hZ2VyLmMgYi9zcmMvdXNiLWRldmljZS1tYW5hZ2VyLmMKPiBpbmRl
eCAwOTYxZDE2Li5iMTFiYjE1IDEwMDY0NAo+IC0tLSBhL3NyYy91c2ItZGV2aWNlLW1hbmFnZXIu
Ywo+ICsrKyBiL3NyYy91c2ItZGV2aWNlLW1hbmFnZXIuYwo+IEBAIC03NSw2ICs3NSw3IEBAIGVu
dW0gewo+ICAgICAgUFJPUF9BVVRPX0NPTk5FQ1RfRklMVEVSLAo+ICAgICAgUFJPUF9SRURJUkVD
VF9PTl9DT05ORUNULAo+ICAgICAgUFJPUF9GUkVFX0NIQU5ORUxTLAo+ICsgICAgUFJPUF9TSEFS
RV9DRAo+ICB9Owo+ICAKPiAgZW51bQo+IEBAIC00MzMsNiArNDM0LDI2IEBAIHN0YXRpYyB2b2lk
Cj4gc3BpY2VfdXNiX2RldmljZV9tYW5hZ2VyX3NldF9wcm9wZXJ0eShHT2JqZWN0ICAgICAgICpn
b2JqZWN0LAo+ICAgICAgICAgIHByaXYtPnJlZGlyZWN0X29uX2Nvbm5lY3QgPSBnX3N0cmR1cChm
aWx0ZXIpOwo+ICAgICAgICAgIGJyZWFrOwo+ICAgICAgfQo+ICsgICAgY2FzZSBQUk9QX1NIQVJF
X0NEOgo+ICsgICAgewo+ICsjaWZkZWYgVVNFX1VTQlJFRElSCj4gKyAgICAgICAgVXNiQ3JlYXRl
RGV2aWNlUGFyYW1ldGVycyBwYXJhbSA9IHsgMCB9Owo+ICsgICAgICAgIGNvbnN0IGdjaGFyICpu
YW1lID0gZ192YWx1ZV9nZXRfc3RyaW5nKHZhbHVlKTsKPiArICAgICAgICAvKiB0aGUgc3RyaW5n
IGlzIHRlbXBvcmFyeSwgbm8gbmVlZCB0byBrZWVwIGl0ICovCj4gKyAgICAgICAgU1BJQ0VfREVC
VUcoInNoYXJlX2NkIHNldCB0byAlcyIsIG5hbWUpOwo+ICsgICAgICAgIGlmIChuYW1lWzBdID09
ICchJykgewo+ICsgICAgICAgICAgICBuYW1lKys7Cj4gKyAgICAgICAgICAgIHBhcmFtLmRldmlj
ZV9wYXJhbS5jcmVhdGVfY2QuZGVsZXRlX29uX2VqZWN0ID0gMTsKPiArICAgICAgICB9CgpUaGlz
ICIhIiBzaG91bGQgYmUgZG9jdW1lbnRlZCBpZiB0aGUgaW50ZXJmYWNlIHNob3VsZCBiZSBwdWJs
aWMuCgo+ICsgICAgICAgIHBhcmFtLmRldmljZV9wYXJhbS5jcmVhdGVfY2QuZmlsZW5hbWUgPSBu
YW1lOwo+ICsgICAgICAgIGlmICghc3BpY2VfdXNiX2JhY2tlbmRfY3JlYXRlX2RldmljZShwcml2
LT5jb250ZXh0LCBVU0JfREVWX1RZUEVfQ0QsCj4gJnBhcmFtKSkgewo+ICsgICAgICAgICAgICBn
X3dhcm5pbmcocGFyYW0uZXJyb3ItPm1lc3NhZ2UpOwo+ICsgICAgICAgICAgICBzcGljZV91c2Jf
ZGV2aWNlX21hbmFnZXJfZGV2aWNlX2Vycm9yKHNlbGYsIE5VTEwsIHBhcmFtLmVycm9yKTsKPiAr
ICAgICAgICAgICAgZ19lcnJvcl9mcmVlKHBhcmFtLmVycm9yKTsKPiArICAgICAgICB9Cj4gKyNl
bmRpZgo+ICsgICAgICAgIGJyZWFrOwo+ICsgICAgfQoKVGhpcyBpcyBub3QgYSBwcm9wZXJ0eS4g
VGhpcyBpcyB0aGUgcHJvcGVydHkgaW50ZXJmYWNlIHVzZWQgdG8gYWRkIGEgZGV2aWNlLgoKPiAg
ICAgIGRlZmF1bHQ6Cj4gICAgICAgICAgR19PQkpFQ1RfV0FSTl9JTlZBTElEX1BST1BFUlRZX0lE
KGdvYmplY3QsIHByb3BfaWQsIHBzcGVjKTsKPiAgICAgICAgICBicmVhazsKPiBAQCAtNTIzLDYg
KzU0NCwxOCBAQCBzdGF0aWMgdm9pZAo+IHNwaWNlX3VzYl9kZXZpY2VfbWFuYWdlcl9jbGFzc19p
bml0KFNwaWNlVXNiRGV2aWNlTWFuYWdlckNsYXNzICprbGFzCj4gICAgICBnX29iamVjdF9jbGFz
c19pbnN0YWxsX3Byb3BlcnR5KGdvYmplY3RfY2xhc3MsIFBST1BfUkVESVJFQ1RfT05fQ09OTkVD
VCwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHNwZWMpOwo+ICAKPiAr
ICAgIC8qKgo+ICsgICAgKiBTcGljZVVzYkRldmljZU1hbmFnZXI6c2hhcmUtY2Q6Cj4gKyAgICAq
Cj4gKyAgICAqIFNldCBhIHN0cmluZyBzcGVjaWZ5aW5nIGEgZmlsZW5hbWUgKElTTykgb3IgcGh5
c2ljYWwgQ0QvRFZEIGRldmljZQo+ICsgICAgKiB0byBzaGFyZSB2aWEgVVNCIGFmdGVyIGEgU3Bp
Y2UgY29ubmVjdGlvbiBoYXMgYmVlbiBlc3RhYmxpc2hlZC4KPiArICAgICoKPiArICAgICovCj4g
KyAgICBwc3BlYyA9IGdfcGFyYW1fc3BlY19zdHJpbmcoInNoYXJlLWNkIiwgIlNoYXJlIElTTyBm
aWxlIG9yIGRldmljZSBhcwo+IENEIiwKPiArICAgICAgICAiRmlsZSBvciBkZXZpY2UgbmFtZSB0
byBzaGFyZSIsIE5VTEwsCj4gKyAgICAgICAgR19QQVJBTV9SRUFEV1JJVEUgfCBHX1BBUkFNX1NU
QVRJQ19TVFJJTkdTKTsKPiArICAgIGdfb2JqZWN0X2NsYXNzX2luc3RhbGxfcHJvcGVydHkoZ29i
amVjdF9jbGFzcywgUFJPUF9TSEFSRV9DRCwgcHNwZWMpOwo+ICsKPiAgICAgIC8qKgo+ICAgICAg
ICogU3BpY2VVc2JEZXZpY2VNYW5hZ2VyOmZyZWUtY2hhbm5lbHM6Cj4gICAgICAgKgoKRnJlZGlh
bm8KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KU3BpY2Ut
ZGV2ZWwgbWFpbGluZyBsaXN0ClNwaWNlLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRw
czovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL3NwaWNlLWRldmVs
