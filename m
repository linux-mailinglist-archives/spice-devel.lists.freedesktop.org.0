Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 3E28FCDF71
	for <lists+spice-devel@lfdr.de>; Mon,  7 Oct 2019 12:39:16 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 117316E526;
	Mon,  7 Oct 2019 10:39:14 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5A8F56E526
 for <spice-devel@lists.freedesktop.org>; Mon,  7 Oct 2019 10:39:12 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx05.intmail.prod.int.phx2.redhat.com
 [10.5.11.15])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 8678DC05566F
 for <spice-devel@lists.freedesktop.org>; Mon,  7 Oct 2019 10:39:11 +0000 (UTC)
Received: from fziglio.remote.csb (unknown [10.33.32.7])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 751975D6D0;
 Mon,  7 Oct 2019 10:39:10 +0000 (UTC)
From: Frediano Ziglio <fziglio@redhat.com>
To: spice-devel@lists.freedesktop.org
Date: Mon,  7 Oct 2019 11:38:58 +0100
Message-Id: <20191007103906.30517-1-fziglio@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.15
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.32]); Mon, 07 Oct 2019 10:39:11 +0000 (UTC)
Subject: [Spice-devel] [PATCH spice-common] proto: Demarshal Smartcard data
 field
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

Q3VycmVudGx5IHRoZSBkZW1hcnNoYWxlciBjb2RlIGlzIG5vdCB1c2VkIGJ5IHNwaWNlLXNlcnZl
ci4KRGVtYXJzaGFsIGFsbCB0aGUgZmllbGRzIG9mIHRoZSBoZWFkZXIgbWVzc2FnZSwgbm90IG9u
bHkgdGhlIGhlYWRlci4KVXNpbmcgZ2VuZXJhdGVkIGNvZGUgYWxsb3dzIHRvIGVhc2lseSBjaGVj
ayBkYXRhIGFuZCBzdXBwb3J0CmJpZyBlbmRpYW4gbWFjaGluZXMuIEdlbmVyYXRlZCBjb2RlIHdp
bGwgYmUgdXNlZCBieSBzcGljZS1zZXJ2ZXIuCgpUaGUgcmVzdWx0aW5nIGNoYW5nZSBpcy4KCiAg
IGRpZmYgLXJ1IGdlbi9nZW5lcmF0ZWRfY2xpZW50X21hcnNoYWxsZXJzLmMgY29tbW9uL2dlbmVy
YXRlZF9jbGllbnRfbWFyc2hhbGxlcnMuYwogICAgLS0tIGdlbi9nZW5lcmF0ZWRfY2xpZW50X21h
cnNoYWxsZXJzLmMgICAgICAyMDE5LTEwLTA1IDIwOjQ0OjU0LjAwMDAwMDAwMCArMDEwMAogICAg
KysrIGNvbW1vbi9nZW5lcmF0ZWRfY2xpZW50X21hcnNoYWxsZXJzLmMgICAyMDE5LTEwLTA1IDIw
OjQ1OjMzLjAwMDAwMDAwMCArMDEwMAogICAgQEAgLTI4Myw2ICsyODMsNyBAQAogICAgICAgICBz
cGljZV9tYXJzaGFsbGVyX2FkZF91aW50MzIobSwgc3JjLT50eXBlKTsKICAgICAgICAgc3BpY2Vf
bWFyc2hhbGxlcl9hZGRfdWludDMyKG0sIHNyYy0+cmVhZGVyX2lkKTsKICAgICAgICAgc3BpY2Vf
bWFyc2hhbGxlcl9hZGRfdWludDMyKG0sIHNyYy0+bGVuZ3RoKTsKICAgICsgICAgLyogRG9uJ3Qg
bWFyc2hhbGwgQG5vbWFyc2hhbCBkYXRhICovCiAgICAgfQoKICAgICAjZW5kaWYgLyogVVNFX1NN
QVJUQ0FSRCAqLwogICAgZGlmZiAtcnUgZ2VuL2dlbmVyYXRlZF9zZXJ2ZXJfZGVtYXJzaGFsbGVy
cy5jIGNvbW1vbi9nZW5lcmF0ZWRfc2VydmVyX2RlbWFyc2hhbGxlcnMuYwogICAgLS0tIGdlbi9n
ZW5lcmF0ZWRfc2VydmVyX2RlbWFyc2hhbGxlcnMuYyAgICAyMDE5LTEwLTA1IDIwOjQ0OjU0LjAw
MDAwMDAwMCArMDEwMAogICAgKysrIGNvbW1vbi9nZW5lcmF0ZWRfc2VydmVyX2RlbWFyc2hhbGxl
cnMuYyAyMDE5LTEwLTA1IDIwOjQ1OjMzLjAwMDAwMDAwMCArMDEwMAogICAgQEAgLTE0NTEsMTAg
KzE0NTEsMjUgQEAKICAgICAgICAgdWludDY0X3Qgbndfc2l6ZTsKICAgICAgICAgdWludDY0X3Qg
bWVtX3NpemU7CiAgICAgICAgIHVpbnQ4X3QgKmluLCAqZW5kOwogICAgKyAgICB1aW50NjRfdCBk
YXRhX19ud19zaXplLCBkYXRhX19tZW1fc2l6ZTsKICAgICsgICAgdWludDY0X3QgZGF0YV9fbmVs
ZW1lbnRzOwogICAgICAgICBWU0NNc2dIZWFkZXIgKm91dDsKCiAgICAtICAgIG53X3NpemUgPSAx
MjsKICAgIC0gICAgbWVtX3NpemUgPSBzaXplb2YoVlNDTXNnSGVhZGVyKTsKICAgICsgICAgeyAv
KiBkYXRhICovCiAgICArICAgICAgICB1aW50MzJfdCBsZW5ndGhfX3ZhbHVlOwogICAgKyAgICAg
ICAgcG9zID0gc3RhcnQgKyA4OwogICAgKyAgICAgICAgaWYgKFNQSUNFX1VOTElLRUxZKHBvcyAr
IDQgPiBtZXNzYWdlX2VuZCkpIHsKICAgICsgICAgICAgICAgICBnb3RvIGVycm9yOwogICAgKyAg
ICAgICAgfQogICAgKyAgICAgICAgbGVuZ3RoX192YWx1ZSA9IHJlYWRfdWludDMyKHBvcyk7CiAg
ICArICAgICAgICBkYXRhX19uZWxlbWVudHMgPSBsZW5ndGhfX3ZhbHVlOwogICAgKwogICAgKyAg
ICAgICAgZGF0YV9fbndfc2l6ZSA9IGRhdGFfX25lbGVtZW50czsKICAgICsgICAgICAgIGRhdGFf
X21lbV9zaXplID0gc2l6ZW9mKHVpbnQ4X3QpICogZGF0YV9fbmVsZW1lbnRzOwogICAgKyAgICB9
CiAgICArCiAgICArICAgIG53X3NpemUgPSAxMiArIGRhdGFfX253X3NpemU7CiAgICArICAgIG1l
bV9zaXplID0gc2l6ZW9mKFZTQ01zZ0hlYWRlcikgKyBkYXRhX19tZW1fc2l6ZTsKCiAgICAgICAg
IC8qIENoZWNrIGlmIG1lc3NhZ2UgZml0cyBpbiByZXBvcnRlZCBzaWRlICovCiAgICAgICAgIGlm
IChud19zaXplID4gKHVpbnRwdHJfdCkgKG1lc3NhZ2VfZW5kIC0gc3RhcnQpKSB7CiAgICBAQCAt
MTQ3NCw2ICsxNDg5LDEwIEBACiAgICAgICAgIG91dC0+dHlwZSA9IGNvbnN1bWVfdWludDMyKCZp
bik7CiAgICAgICAgIG91dC0+cmVhZGVyX2lkID0gY29uc3VtZV91aW50MzIoJmluKTsKICAgICAg
ICAgb3V0LT5sZW5ndGggPSBjb25zdW1lX3VpbnQzMigmaW4pOwogICAgKyAgICB2ZXJpZnkoc2l6
ZW9mKG91dC0+ZGF0YSkgPT0gMCk7CiAgICArICAgIG1lbWNweShvdXQtPmRhdGEsIGluLCBkYXRh
X19uZWxlbWVudHMpOwogICAgKyAgICBpbiArPSBkYXRhX19uZWxlbWVudHM7CiAgICArICAgIGVu
ZCArPSBkYXRhX19uZWxlbWVudHM7CgogICAgICAgICBhc3NlcnQoaW4gPD0gbWVzc2FnZV9lbmQp
OwogICAgICAgICBhc3NlcnQoZW5kIDw9IGRhdGEgKyBtZW1fc2l6ZSk7CgpUaGUgQG5vbWFyc2hh
bCBhdHRyaWJ1dGUgYWxsb3dzIHRvIG5vdCBjaGFuZ2UgdGhlIG1hcnNoYWxpbmcgY29kZQoodXNl
ZCBieSBzcGljZS1ndGspLgoKU2lnbmVkLW9mZi1ieTogRnJlZGlhbm8gWmlnbGlvIDxmemlnbGlv
QHJlZGhhdC5jb20+Ci0tLQogc3BpY2UucHJvdG8gfCAxICsKIDEgZmlsZSBjaGFuZ2VkLCAxIGlu
c2VydGlvbigrKQoKZGlmZiAtLWdpdCBhL3NwaWNlLnByb3RvIGIvc3BpY2UucHJvdG8KaW5kZXgg
MzRiYTNjOC4uNjE2Yjk2MCAxMDA2NDQKLS0tIGEvc3BpY2UucHJvdG8KKysrIGIvc3BpY2UucHJv
dG8KQEAgLTEzMDUsNiArMTMwNSw3IEBAIGNoYW5uZWwgU21hcnRjYXJkQ2hhbm5lbCA6IEJhc2VD
aGFubmVsIHsKICAgICAgICAgdnNjX21lc3NhZ2VfdHlwZSB0eXBlOwogICAgICAgICB1aW50MzIg
cmVhZGVyX2lkOwogICAgICAgICB1aW50MzIgbGVuZ3RoOworICAgICAgICB1aW50OCBkYXRhW2xl
bmd0aF0gQGVuZCBAbm9tYXJzaGFsOwogICAgIH0gQGN0eXBlKFZTQ01zZ0hlYWRlcikgaGVhZGVy
ID0gMTAxOwogLyogU2VlIGNvbW1lbnQgb24gY2xpZW50IGRhdGEgbWVzc2FnZSBhYm92ZSAqLwog
LyoKLS0gCjIuMjEuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KU3BpY2UtZGV2ZWwgbWFpbGluZyBsaXN0ClNwaWNlLWRldmVsQGxpc3RzLmZyZWVkZXNr
dG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL3Nw
aWNlLWRldmVs
