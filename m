Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 425139912D
	for <lists+spice-devel@lfdr.de>; Thu, 22 Aug 2019 12:45:41 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D15246E27B;
	Thu, 22 Aug 2019 10:45:39 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 727816E27B
 for <spice-devel@lists.freedesktop.org>; Thu, 22 Aug 2019 10:45:38 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx08.intmail.prod.int.phx2.redhat.com
 [10.5.11.23])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 071B97F75B;
 Thu, 22 Aug 2019 10:45:38 +0000 (UTC)
Received: from colo-mx.corp.redhat.com
 (colo-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.21])
 by smtp.corp.redhat.com (Postfix) with ESMTPS id EF8095888;
 Thu, 22 Aug 2019 10:45:37 +0000 (UTC)
Received: from zmail25.collab.prod.int.phx2.redhat.com
 (zmail25.collab.prod.int.phx2.redhat.com [10.5.83.31])
 by colo-mx.corp.redhat.com (Postfix) with ESMTP id E42A624F2F;
 Thu, 22 Aug 2019 10:45:37 +0000 (UTC)
Date: Thu, 22 Aug 2019 06:45:37 -0400 (EDT)
From: Frediano Ziglio <fziglio@redhat.com>
To: Yuri Benditovich <yuri.benditovich@daynix.com>
Message-ID: <339397030.8221775.1566470737892.JavaMail.zimbra@redhat.com>
In-Reply-To: <CAOEp5OdMbM+HYVsvz9aBGPP_sZyzNtjD5791ChSG3-sBo8V9SQ@mail.gmail.com>
References: <20190812095729.32692-1-yuri.benditovich@daynix.com>
 <20190812095729.32692-2-yuri.benditovich@daynix.com>
 <20190822101844.eamrljoozhujwofp@wingsuit>
 <CAOEp5OdMbM+HYVsvz9aBGPP_sZyzNtjD5791ChSG3-sBo8V9SQ@mail.gmail.com>
MIME-Version: 1.0
X-Originating-IP: [10.40.204.109, 10.4.195.13]
Thread-Topic: usb-redir: define interfaces to support emulated devices
Thread-Index: vz/JKNkLD1beBVHxD2D+p2la8MyZiw==
X-Scanned-By: MIMEDefang 2.84 on 10.5.11.23
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.6.2
 (mx1.redhat.com [10.5.110.71]); Thu, 22 Aug 2019 10:45:38 +0000 (UTC)
Subject: Re: [Spice-devel] [spice-gtk v3 1/9] usb-redir: define interfaces
 to support emulated devices
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Yan Vugenfirer <yan@daynix.com>,
 Spice List <spice-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

PiAKPiBPbiBUaHUsIEF1ZyAyMiwgMjAxOSBhdCAxOjE4IFBNIFZpY3RvciBUb3NvIDx2aWN0b3J0
b3NvQHJlZGhhdC5jb20+IHdyb3RlOgo+ID4KPiA+IEhpLAo+ID4KPiA+IE9uIE1vbiwgQXVnIDEy
LCAyMDE5IGF0IDEyOjU3OjIxUE0gKzAzMDAsIFl1cmkgQmVuZGl0b3ZpY2ggd3JvdGU6Cj4gPiA+
IFNwaWNlVXNiQmFja2VuZERldmljZSBzdHJ1Y3R1cmUgaXMgZXh0ZW5kZWQgdG8gc3VwcG9ydAo+
ID4gPiBhZGRpdGlvbmFsIGtpbmQgb2YgZGV2aWNlIHRoYXQgaXMgZW11bGF0ZWQgYnkgU3BpY2Ut
R1RLCj4gPiA+IGFuZCBub3QgcHJlc2VudCBsb2NhbGx5IChhbmQgZG9lcyBub3QgaGF2ZSBsaWJ1
c2JfZGV2aWNlKSwKPiA+ID4gc3VjaCBkZXZpY2UgaGFzIGluc3RlYWQgcG9pbnRlciB0byBTcGlj
ZVVzYkVtdWxhdGVkRGV2aWNlCj4gPiA+IGFic3RyYWN0IHN0cnVjdHVyZS4gU3BlY2lmaWMgaW1w
bGVtZW50YXRpb24gb2Ygc3VjaCBkZXZpY2UKPiA+ID4gZGVwZW5kcyBvbiBpdHMgZGV2aWNlIHR5
cGUuIEltcGxlbWVudGF0aW9uIG1vZHVsZSB3aWxsIGRlZmluZQo+ID4gPiBjb25zdHJ1Y3RvciBm
b3Igc3BlY2lmaWMgZGV2aWNlIHR5cGUuCj4gPiA+IERldmljZSBzdHJ1Y3R1cmUgaXMgYWJzdHJh
Y3QgYnV0IGFsd2F5cyBzdGFydHMgZnJvbSB0YWJsZSBvZgo+ID4gPiB2aXJ0dWFsIGZ1bmN0aW9u
cyByZXF1aXJlZCB0byByZWRpcmVjdCBzdWNoIHZpcnR1YWwgZGV2aWNlLgo+ID4gPgo+ID4gPiBT
aWduZWQtb2ZmLWJ5OiBZdXJpIEJlbmRpdG92aWNoIDx5dXJpLmJlbmRpdG92aWNoQGRheW5peC5j
b20+Cj4gPiA+IC0tLQo+ID4gPiAgc3JjL21lc29uLmJ1aWxkICAgICB8ICAgMSArCj4gPiA+ICBz
cmMvdXNiLWJhY2tlbmQuYyAgIHwgMTAzICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKystCj4gPiA+ICBzcmMvdXNiLWJhY2tlbmQuaCAgIHwgICAzICsrCj4gPiA+ICBz
cmMvdXNiLWVtdWxhdGlvbi5oIHwgIDg4ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysKPiA+ID4gIDQgZmlsZXMgY2hhbmdlZCwgMTkzIGluc2VydGlvbnMoKyksIDIgZGVsZXRp
b25zKC0pCj4gPiA+ICBjcmVhdGUgbW9kZSAxMDA2NDQgc3JjL3VzYi1lbXVsYXRpb24uaAo+ID4g
Pgo+ID4gPiBkaWZmIC0tZ2l0IGEvc3JjL21lc29uLmJ1aWxkIGIvc3JjL21lc29uLmJ1aWxkCj4g
PiA+IGluZGV4IGI0YTY4NzAuLmZlMTljMTYgMTAwNjQ0Cj4gPiA+IC0tLSBhL3NyYy9tZXNvbi5i
dWlsZAo+ID4gPiArKysgYi9zcmMvbWVzb24uYnVpbGQKPiA+ID4gQEAgLTEyMiw2ICsxMjIsNyBA
QCBzcGljZV9jbGllbnRfZ2xpYl9zb3VyY2VzID0gWwo+ID4gPiAgICAndXNidXRpbC5jJywKPiA+
ID4gICAgJ3VzYnV0aWwuaCcsCj4gPiA+ICAgICd1c2ItYmFja2VuZC5jJywKPiA+ID4gKyAgJ3Vz
Yi1lbXVsYXRpb24uaCcsCj4gPiA+ICAgICd1c2ItYmFja2VuZC5oJywKPiA+ID4gICAgJ3ZtY3N0
cmVhbS5jJywKPiA+ID4gICAgJ3ZtY3N0cmVhbS5oJywKPiA+ID4gZGlmZiAtLWdpdCBhL3NyYy91
c2ItYmFja2VuZC5jIGIvc3JjL3VzYi1iYWNrZW5kLmMKPiA+ID4gaW5kZXggOWFjODU5NS4uZGUy
YjU1ZSAxMDA2NDQKPiA+ID4gLS0tIGEvc3JjL3VzYi1iYWNrZW5kLmMKPiA+ID4gKysrIGIvc3Jj
L3VzYi1iYWNrZW5kLmMKPiA+ID4gQEAgLTM5LDYgKzM5LDcgQEAKPiA+ID4gICNpbmNsdWRlICJ1
c2JyZWRpcnBhcnNlci5oIgo+ID4gPiAgI2luY2x1ZGUgInNwaWNlLXV0aWwuaCIKPiA+ID4gICNp
bmNsdWRlICJ1c2ItYmFja2VuZC5oIgo+ID4gPiArI2luY2x1ZGUgInVzYi1lbXVsYXRpb24uaCIK
PiA+ID4gICNpbmNsdWRlICJjaGFubmVsLXVzYnJlZGlyLXByaXYuaCIKPiA+ID4gICNpbmNsdWRl
ICJzcGljZS1jaGFubmVsLXByaXYuaCIKPiA+ID4KPiA+ID4gQEAgLTQ2LDcgKzQ3LDEwIEBACj4g
PiA+Cj4gPiA+ICBzdHJ1Y3QgX1NwaWNlVXNiQmFja2VuZERldmljZQo+ID4gPiAgewo+ID4gPiAr
ICAgIC8qIFBvaW50ZXIgdG8gZGV2aWNlLiBFaXRoZXIgcmVhbCBkZXZpY2UgKGxpYnVzYl9kZXZp
Y2UpCj4gPiA+ICsgICAgICogb3IgZW11bGF0ZWQgb25lIChlZGV2KSAqLwo+ID4gPiAgICAgIGxp
YnVzYl9kZXZpY2UgKmxpYnVzYl9kZXZpY2U7Cj4gPiA+ICsgICAgU3BpY2VVc2JFbXVsYXRlZERl
dmljZSAqZWRldjsKPiA+ID4gICAgICBnaW50IHJlZl9jb3VudDsKPiA+ID4gICAgICBTcGljZVVz
YkJhY2tlbmRDaGFubmVsICphdHRhY2hlZF90bzsKPiA+ID4gICAgICBVc2JEZXZpY2VJbmZvcm1h
dGlvbiBkZXZpY2VfaW5mbzsKPiA+ID4gQEAgLTY2LDYgKzcwLDEwIEBAIHN0cnVjdCBfU3BpY2VV
c2JCYWNrZW5kCj4gPiA+ICAgICAgbGlidXNiX2RldmljZSAqKmxpYnVzYl9kZXZpY2VfbGlzdDsK
PiA+ID4gICAgICBnaW50IHJlZGlyZWN0aW5nOwo+ID4gPiAgI2VuZGlmCj4gPiA+ICsKPiA+ID4g
KyAgICAvKiBNYXNrIG9mIGFsbG9jYXRlZCBkZXZpY2UsIGEgc3BlY2lmaWMgYml0IHNldCB0byAx
IHRvIGluZGljYXRlCj4gPiA+IHRoYXQgdGhlIGRldmljZSBhdAo+ID4gPiArICAgICAqIHRoYXQg
YWRkcmVzcyBpcyBhbGxvY2F0ZWQgKi8KPiA+ID4gKyAgICB1aW50MzJfdCBvd25fZGV2aWNlc19t
YXNrOwo+ID4gPiAgfTsKPiA+ID4KPiA+ID4gIHN0cnVjdCBfU3BpY2VVc2JCYWNrZW5kQ2hhbm5l
bAo+ID4gPiBAQCAtNDA4LDYgKzQxNiw4IEBAIFNwaWNlVXNiQmFja2VuZCAqc3BpY2VfdXNiX2Jh
Y2tlbmRfbmV3KEdFcnJvcgo+ID4gPiAqKmVycm9yKQo+ID4gPiAgICAgICAgICBsaWJ1c2Jfc2V0
X29wdGlvbihiZS0+bGlidXNiX2NvbnRleHQsIExJQlVTQl9PUFRJT05fVVNFX1VTQkRLKTsKPiA+
ID4gICNlbmRpZgo+ID4gPiAgI2VuZGlmCj4gPiA+ICsgICAgICAgIC8qIGV4Y2x1ZGUgYWRkcmVz
c2VzIDAgKHJlc2VydmVkKSBhbmQgMSAocm9vdCBodWIpICovCj4gPiA+ICsgICAgICAgIGJlLT5v
d25fZGV2aWNlc19tYXNrID0gMzsKPiA+ID4gICAgICB9Cj4gPiA+ICAgICAgU1BJQ0VfREVCVUco
IiVzIDw8IiwgX19GVU5DVElPTl9fKTsKPiA+ID4gICAgICByZXR1cm4gYmU7Cj4gPiA+IEBAIC01
MjQsOCArNTM0LDEzIEBAIHZvaWQKPiA+ID4gc3BpY2VfdXNiX2JhY2tlbmRfZGV2aWNlX3VucmVm
KFNwaWNlVXNiQmFja2VuZERldmljZSAqZGV2KQo+ID4gPiAgewo+ID4gPiAgICAgIExPVURfREVC
VUcoIiVzID4+ICVwKCVkKSIsIF9fRlVOQ1RJT05fXywgZGV2LCBkZXYtPnJlZl9jb3VudCk7Cj4g
PiA+ICAgICAgaWYgKGdfYXRvbWljX2ludF9kZWNfYW5kX3Rlc3QoJmRldi0+cmVmX2NvdW50KSkg
ewo+ID4gPiAtICAgICAgICBsaWJ1c2JfdW5yZWZfZGV2aWNlKGRldi0+bGlidXNiX2RldmljZSk7
Cj4gPiA+IC0gICAgICAgIExPVURfREVCVUcoIiVzIGZyZWVpbmcgJXAgKGxpYnVzYiAlcCkiLCBf
X0ZVTkNUSU9OX18sIGRldiwKPiA+ID4gZGV2LT5saWJ1c2JfZGV2aWNlKTsKPiA+ID4gKyAgICAg
ICAgaWYgKGRldi0+bGlidXNiX2RldmljZSkgewo+ID4gPiArICAgICAgICAgICAgbGlidXNiX3Vu
cmVmX2RldmljZShkZXYtPmxpYnVzYl9kZXZpY2UpOwo+ID4gPiArICAgICAgICAgICAgTE9VRF9E
RUJVRygiJXMgZnJlZWluZyAlcCAobGlidXNiICVwKSIsIF9fRlVOQ1RJT05fXywgZGV2LAo+ID4g
PiBkZXYtPmxpYnVzYl9kZXZpY2UpOwo+ID4gPiArICAgICAgICB9Cj4gPiA+ICsgICAgICAgIGlm
IChkZXYtPmVkZXYpIHsKPiA+ID4gKyAgICAgICAgICAgIGRldmljZV9vcHMoZGV2LT5lZGV2KS0+
dW5yZWFsaXplKGRldi0+ZWRldik7Cj4gPiA+ICsgICAgICAgIH0KPiA+ID4gICAgICAgICAgZ19m
cmVlKGRldik7Cj4gPiA+ICAgICAgfQo+ID4gPiAgfQo+ID4gPiBAQCAtODI0LDQgKzgzOSw4OCBA
QAo+ID4gPiBzcGljZV91c2JfYmFja2VuZF9jaGFubmVsX2dldF9ndWVzdF9maWx0ZXIoU3BpY2VV
c2JCYWNrZW5kQ2hhbm5lbCAqY2gsCj4gPiA+ICAgICAgfQo+ID4gPiAgfQo+ID4gPgo+ID4gPiAr
dm9pZCBzcGljZV91c2JfYmFja2VuZF9kZXZpY2VfcmVwb3J0X2NoYW5nZShTcGljZVVzYkJhY2tl
bmQgKmJlLAo+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBTcGljZVVzYkJhY2tlbmREZXZpY2UgKmRldikKPiA+ID4gK3sKPiA+ID4gKyAgICBnY2hhciAq
ZGVzYzsKPiA+ID4gKyAgICBnX3JldHVybl9pZl9mYWlsKGRldiAmJiBkZXYtPmVkZXYpOwo+ID4g
PiArCj4gPiA+ICsgICAgZGVzYyA9IGRldmljZV9vcHMoZGV2LT5lZGV2KS0+Z2V0X3Byb2R1Y3Rf
ZGVzY3JpcHRpb24oZGV2LT5lZGV2KTsKPiA+ID4gKyAgICBTUElDRV9ERUJVRygiJXM6ICVzIiwg
X19GVU5DVElPTl9fLCBkZXNjKTsKPiA+ID4gKyAgICBnX2ZyZWUoZGVzYyk7Cj4gPiA+ICt9Cj4g
PiA+ICsKPiA+ID4gK3ZvaWQgc3BpY2VfdXNiX2JhY2tlbmRfZGV2aWNlX2VqZWN0KFNwaWNlVXNi
QmFja2VuZCAqYmUsCj4gPiA+IFNwaWNlVXNiQmFja2VuZERldmljZSAqZGV2KQo+ID4gPiArewo+
ID4gPiArICAgIGdfcmV0dXJuX2lmX2ZhaWwoZGV2KTsKPiA+ID4gKwo+ID4gPiArICAgIGlmIChk
ZXYtPmVkZXYpIHsKPiA+ID4gKyAgICAgICAgYmUtPm93bl9kZXZpY2VzX21hc2sgJj0gfigxIDw8
IGRldi0+ZGV2aWNlX2luZm8uYWRkcmVzcyk7Cj4gPiA+ICsgICAgfQo+ID4gPiArICAgIGlmIChi
ZS0+aG90cGx1Z19jYWxsYmFjaykgewo+ID4gPiArICAgICAgICBiZS0+aG90cGx1Z19jYWxsYmFj
ayhiZS0+aG90cGx1Z191c2VyX2RhdGEsIGRldiwgRkFMU0UpOwo+ID4gPiArICAgIH0KPiA+ID4g
K30KPiA+ID4gKwo+ID4gPiArZ2Jvb2xlYW4KPiA+ID4gK3NwaWNlX3VzYl9iYWNrZW5kX2NyZWF0
ZV9lbXVsYXRlZF9kZXZpY2UoU3BpY2VVc2JCYWNrZW5kICpiZSwKPiA+ID4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BpY2VVc2JFbXVsYXRlZERldmljZUNyZWF0
ZQo+ID4gPiBjcmVhdGVfcHJvYywKPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgdm9pZCAqY3JlYXRlX3BhcmFtcywKPiA+ID4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgR0Vycm9yICoqZXJyKQo+ID4gPiArewo+ID4gPiArICAg
IFNwaWNlVXNiRW11bGF0ZWREZXZpY2UgKmVkZXY7Cj4gPiA+ICsgICAgU3BpY2VVc2JCYWNrZW5k
RGV2aWNlICpkZXY7Cj4gPiA+ICsgICAgc3RydWN0IGxpYnVzYl9kZXZpY2VfZGVzY3JpcHRvciAq
ZGVzYzsKPiA+ID4gKyAgICB1aW50MTZfdCBkZXZpY2VfZGVzY19zaXplOwo+ID4gPiArICAgIHVp
bnQ4X3QgYWRkcmVzcyA9IDA7Cj4gPiA+ICsKPiA+ID4gKyAgICBpZiAoYmUtPm93bl9kZXZpY2Vz
X21hc2sgPT0gMHhmZmZmZmZmZikgewo+ID4gPiArICAgICAgICBnX3NldF9lcnJvcihlcnIsIFNQ
SUNFX0NMSUVOVF9FUlJPUiwgU1BJQ0VfQ0xJRU5UX0VSUk9SX0ZBSUxFRCwKPiA+ID4gKyAgICAg
ICAgICAgICAgICAgICAgXygiY2FuJ3QgY3JlYXRlIGRldmljZSAtIGxpbWl0IHJlYWNoZWQiKSk7
Cj4gPiA+ICsgICAgICAgIHJldHVybiBGQUxTRTsKPiA+ID4gKyAgICB9Cj4gPiA+ICsgICAgZm9y
IChhZGRyZXNzID0gMDsgYWRkcmVzcyA8IDMyOyArK2FkZHJlc3MpIHsKPiA+ID4gKyAgICAgICAg
aWYgKH5iZS0+b3duX2RldmljZXNfbWFzayAmICgxIDw8IGFkZHJlc3MpKSB7Cj4gPiA+ICsgICAg
ICAgICAgICBicmVhazsKPiA+ID4gKyAgICAgICAgfQo+ID4gPiArICAgIH0KPiA+ID4gKwo+ID4g
PiArICAgIGRldiA9IGdfbmV3MChTcGljZVVzYkJhY2tlbmREZXZpY2UsIDEpOwo+ID4gPiArICAg
IGRldi0+ZGV2aWNlX2luZm8uYnVzID0gQlVTX05VTUJFUl9GT1JfRU1VTEFURURfVVNCOwo+ID4g
PiArICAgIGRldi0+ZGV2aWNlX2luZm8uYWRkcmVzcyA9IGFkZHJlc3M7Cj4gPiA+ICsgICAgZGV2
LT5yZWZfY291bnQgPSAxOwo+ID4gPiArCj4gPiA+ICsgICAgZGV2LT5lZGV2ID0gZWRldiA9IGNy
ZWF0ZV9wcm9jKGJlLCBkZXYsIGNyZWF0ZV9wYXJhbXMsIGVycik7Cj4gPgo+ID4gSSB0YWtlIGNy
ZWF0aW5nIGVtdWxhdGVkIGRldmljZXMgY2FuIHRha2Ugc29tZSB0aW1lLCBpc24ndCBpdAo+ID4g
d29ydGggdG8gZG8gYXN5bmM/Cj4gCj4gSSBkbyBub3Qgc2VlIGFueSBwb2ludCB3aGVyZSBpdCBj
YW4gdGFrZSBwZXJjZXB0aWJsZSB0aW1lLgo+IENyZWF0aW9uIG9mIHRoZSBkZXZpY2UgaXMgJ2dv
IC0gbm8gZ28nIGFuZCBmYWlscyBvbmx5IGluIGNhc2UgdGhlIGZpbGUKPiBuYW1lIGlzIHdyb25n
Lgo+IAoKSSBhZ3JlZSB3aXRoIFl1cmkuIEFsc28gaWYgdGhlIGRldmljZSBpcyByZWFsbHkgY29t
cGxpY2F0ZWQgYW5kIG5lZWRzIHNvbWUKbG9uZyBpbml0aWFsaXphdGlvbiBwcm9iYWJseSB3b3Vs
ZCBiZXR0ZXIgdG8gcmV0dXJuIGEgdmFsaWQgZGV2aWNlIGFuZApmYWlsIGxhdGVyIGF0IHRoZSBV
U0IgbGF5ZXIuCkZvciBpbnN0YW5jZSBpbiB0aGlzIHNwZWNpZmljIGNhc2UgeW91IGNhbiByZXR1
cm4gYW4gZW11bGF0ZWQgQ0QgZGV2aWNlCndpdGggbm8gZW11bGF0ZWQgZGlzYyBpbiBpdCBhbmQg
bGF0ZXIgc2VuZCB0byB0aGUgZ3Vlc3QgT1MgdGhhdCBhIGRpc2Mgd2FzCmluc2VydGVkLgoKPiA+
Cj4gPiA+ICsgICAgaWYgKGVkZXYgPT0gTlVMTCkgewo+ID4gPiArICAgICAgICBzcGljZV91c2Jf
YmFja2VuZF9kZXZpY2VfdW5yZWYoZGV2KTsKPiA+ID4gKyAgICAgICAgcmV0dXJuIEZBTFNFOwo+
ID4gPiArICAgIH0KPiA+ID4gKwo+ID4gPiArICAgIGlmICghZGV2aWNlX29wcyhlZGV2KS0+Z2V0
X2Rlc2NyaXB0b3IoZWRldiwgTElCVVNCX0RUX0RFVklDRSwgMCwKPiA+ID4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh2b2lkICoqKSZkZXNjLAo+ID4gPiAmZGV2
aWNlX2Rlc2Nfc2l6ZSkKPiA+ID4gKyAgICAgICAgfHwgZGV2aWNlX2Rlc2Nfc2l6ZSAhPSBzaXpl
b2YoKmRlc2MpKSB7Cj4gPiA+ICsKPiA+ID4gKyAgICAgICAgc3BpY2VfdXNiX2JhY2tlbmRfZGV2
aWNlX3VucmVmKGRldik7Cj4gPiA+ICsgICAgICAgIGdfc2V0X2Vycm9yKGVyciwgU1BJQ0VfQ0xJ
RU5UX0VSUk9SLCBTUElDRV9DTElFTlRfRVJST1JfRkFJTEVELAo+ID4gPiArICAgICAgICAgICAg
ICAgICAgICBfKCJjYW4ndCBjcmVhdGUgZGV2aWNlIC0gaW50ZXJuYWwgZXJyb3IiKSk7Cj4gPiA+
ICsgICAgICAgIHJldHVybiBGQUxTRTsKPiA+ID4gKyAgICB9Cj4gPiA+ICsKPiA+ID4gKyAgICBi
ZS0+b3duX2RldmljZXNfbWFzayB8PSAxIDw8IGFkZHJlc3M7Cj4gPiA+ICsKPiA+ID4gKyAgICBk
ZXYtPmRldmljZV9pbmZvLnZpZCA9IGRlc2MtPmlkVmVuZG9yOwo+ID4gPiArICAgIGRldi0+ZGV2
aWNlX2luZm8ucGlkID0gZGVzYy0+aWRQcm9kdWN0Owo+ID4gPiArICAgIGRldi0+ZGV2aWNlX2lu
Zm8uYmNkVVNCID0gZGVzYy0+YmNkVVNCOwo+ID4gPiArICAgIGRldi0+ZGV2aWNlX2luZm8uY2xh
c3MgPSBkZXNjLT5iRGV2aWNlQ2xhc3M7Cj4gPiA+ICsgICAgZGV2LT5kZXZpY2VfaW5mby5zdWJj
bGFzcyA9IGRlc2MtPmJEZXZpY2VTdWJDbGFzczsKPiA+ID4gKyAgICBkZXYtPmRldmljZV9pbmZv
LnByb3RvY29sID0gZGVzYy0+YkRldmljZVByb3RvY29sOwo+ID4gPiArCj4gPiA+ICsgICAgaWYg
KGJlLT5ob3RwbHVnX2NhbGxiYWNrKSB7Cj4gPiA+ICsgICAgICAgIGJlLT5ob3RwbHVnX2NhbGxi
YWNrKGJlLT5ob3RwbHVnX3VzZXJfZGF0YSwgZGV2LCBUUlVFKTsKPiA+ID4gKyAgICB9Cj4gPiA+
ICsgICAgc3BpY2VfdXNiX2JhY2tlbmRfZGV2aWNlX3VucmVmKGRldik7Cj4gPiA+ICsKPiA+ID4g
KyAgICByZXR1cm4gVFJVRTsKPiA+ID4gK30KPiA+ID4gKwo+ID4gPiAgI2VuZGlmIC8qIFVTQl9S
RURJUiAqLwo+ID4gPiBkaWZmIC0tZ2l0IGEvc3JjL3VzYi1iYWNrZW5kLmggYi9zcmMvdXNiLWJh
Y2tlbmQuaAo+ID4gPiBpbmRleCA2NmUxM2Y1Li5jZDNmZjA5IDEwMDY0NAo+ID4gPiAtLS0gYS9z
cmMvdXNiLWJhY2tlbmQuaAo+ID4gPiArKysgYi9zcmMvdXNiLWJhY2tlbmQuaAo+ID4gPiBAQCAt
MzAsMTIgKzMwLDE1IEBAIHR5cGVkZWYgc3RydWN0IF9TcGljZVVzYkJhY2tlbmQgU3BpY2VVc2JC
YWNrZW5kOwo+ID4gPiAgdHlwZWRlZiBzdHJ1Y3QgX1NwaWNlVXNiQmFja2VuZERldmljZSBTcGlj
ZVVzYkJhY2tlbmREZXZpY2U7Cj4gPiA+ICB0eXBlZGVmIHN0cnVjdCBfU3BpY2VVc2JCYWNrZW5k
Q2hhbm5lbCBTcGljZVVzYkJhY2tlbmRDaGFubmVsOwo+ID4gPgo+ID4gPiArI2RlZmluZSBCVVNf
TlVNQkVSX0ZPUl9FTVVMQVRFRF9VU0IgR19NQVhVSU5UMTYKPiA+ID4gKwo+ID4gPiAgdHlwZWRl
ZiBzdHJ1Y3QgVXNiRGV2aWNlSW5mb3JtYXRpb24KPiA+ID4gIHsKPiA+ID4gICAgICB1aW50MTZf
dCBidXM7Cj4gPiA+ICAgICAgdWludDE2X3QgYWRkcmVzczsKPiA+ID4gICAgICB1aW50MTZfdCB2
aWQ7Cj4gPiA+ICAgICAgdWludDE2X3QgcGlkOwo+ID4gPiArICAgIHVpbnQxNl90IGJjZFVTQjsK
PiA+ID4gICAgICB1aW50OF90IGNsYXNzOwo+ID4gPiAgICAgIHVpbnQ4X3Qgc3ViY2xhc3M7Cj4g
PiA+ICAgICAgdWludDhfdCBwcm90b2NvbDsKPiA+ID4gZGlmZiAtLWdpdCBhL3NyYy91c2ItZW11
bGF0aW9uLmggYi9zcmMvdXNiLWVtdWxhdGlvbi5oCj4gPiA+IG5ldyBmaWxlIG1vZGUgMTAwNjQ0
Cj4gPiA+IGluZGV4IDAwMDAwMDAuLmFjM2Q4ZTAKPiA+ID4gLS0tIC9kZXYvbnVsbAo+ID4gPiAr
KysgYi9zcmMvdXNiLWVtdWxhdGlvbi5oCj4gPiA+IEBAIC0wLDAgKzEsODggQEAKPiA+ID4gKy8q
IC0qLSBNb2RlOiBDOyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0q
LSAqLwo+ID4gPiArLyoKPiA+ID4gKyAgICBDb3B5cmlnaHQgKEMpIDIwMTkgUmVkIEhhdCwgSW5j
Lgo+ID4gPiArCj4gPiA+ICsgICAgUmVkIEhhdCBBdXRob3JzOgo+ID4gPiArICAgIFl1cmkgQmVu
ZGl0b3ZpY2g8eWJlbmRpdG9AcmVkaGF0LmNvbT4KPiA+ID4gKwo+ID4gPiArICAgIFRoaXMgbGli
cmFyeSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IKPiA+
ID4gKyAgICBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVy
YWwgUHVibGljCj4gPiA+ICsgICAgTGljZW5zZSBhcyBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29m
dHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyCj4gPiA+ICsgICAgdmVyc2lvbiAyLjEgb2YgdGhlIExp
Y2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCj4gPiA+ICsKPiA+
ID4gKyAgICBUaGlzIGxpYnJhcnkgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3
aWxsIGJlIHVzZWZ1bCwKPiA+ID4gKyAgICBidXQgV0lUSE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhv
dXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgo+ID4gPiArICAgIE1FUkNIQU5UQUJJTElU
WSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUgR05VCj4gPiA+
ICsgICAgTGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KPiA+
ID4gKwo+ID4gPiArICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdO
VSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMKPiA+ID4gKyAgICBMaWNlbnNlIGFsb25nIHdpdGggdGhp
cyBsaWJyYXJ5OyBpZiBub3QsIHNlZQo+ID4gPiA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2Vz
Lz4uCj4gPiA+ICsqLwo+ID4gPiArCj4gPiA+ICsjcHJhZ21hIG9uY2UKPiA+ID4gKwo+ID4gPiAr
I2luY2x1ZGUgInVzYnJlZGlycGFyc2VyLmgiCj4gPiA+ICsjaW5jbHVkZSAidXNiLWJhY2tlbmQu
aCIKPiA+ID4gKwo+ID4gPiArdHlwZWRlZiBzdHJ1Y3QgU3BpY2VVc2JFbXVsYXRlZERldmljZSBT
cGljZVVzYkVtdWxhdGVkRGV2aWNlOwo+ID4gPiArdHlwZWRlZiBTcGljZVVzYkVtdWxhdGVkRGV2
aWNlKgo+ID4gPiArKCpTcGljZVVzYkVtdWxhdGVkRGV2aWNlQ3JlYXRlKShTcGljZVVzYkJhY2tl
bmQgKmJlLAo+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGljZVVzYkJh
Y2tlbmREZXZpY2UgKnBhcmVudCwKPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgdm9pZCAqY3JlYXRlX3BhcmFtcywKPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgR0Vycm9yICoqZXJyKTsKPiA+ID4gKwo+ID4gPiArLyoKPiA+ID4gKyAgICBmdW5jdGlv
biB0YWJsZSBmb3IgZW11bGF0ZWQgVVNCIGRldmljZQo+ID4gPiArICAgIG11c3QgYmUgZmlyc3Qg
bWVtYmVyIG9mIGRldmljZSBzdHJ1Y3R1cmUKPiA+ID4gKyAgICBhbGwgZnVuY3Rpb25zIGFyZSBt
YW5kYXRvcnkgZm9yIGltcGxlbWVudGF0aW9uCj4gPiA+ICsqLwo+ID4gPiArdHlwZWRlZiBzdHJ1
Y3QgVXNiRGV2aWNlT3BzIHsKPiA+ID4gKyAgICBnYm9vbGVhbiAoKmdldF9kZXNjcmlwdG9yKShT
cGljZVVzYkVtdWxhdGVkRGV2aWNlICpkZXZpY2UsCj4gPiA+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgdWludDhfdCB0eXBlLCB1aW50OF90IGluZGV4LAo+ID4gPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHZvaWQgKipidWZmZXIsIHVpbnQxNl90ICpzaXplKTsKPiA+
ID4gKyAgICBnY2hhciAqICgqZ2V0X3Byb2R1Y3RfZGVzY3JpcHRpb24pKFNwaWNlVXNiRW11bGF0
ZWREZXZpY2UgKmRldmljZSk7Cj4gPiA+ICsgICAgdm9pZCAoKmF0dGFjaCkoU3BpY2VVc2JFbXVs
YXRlZERldmljZSAqZGV2aWNlLCBzdHJ1Y3QgdXNicmVkaXJwYXJzZXIKPiA+ID4gKnBhcnNlcik7
Cj4gPiA+ICsgICAgdm9pZCAoKnJlc2V0KShTcGljZVVzYkVtdWxhdGVkRGV2aWNlICpkZXZpY2Up
Owo+ID4gPiArICAgIC8qCj4gPiA+ICsgICAgICAgIHByb2Nlc3NpbmcgaXMgc3luY2hyb25vdXMs
IGRlZmF1bHQgPSBzdGFsbDoKPiA+ID4gKyAgICAgICAgLSByZXR1cm4gc3VjY2VzcyB3aXRob3V0
IGRhdGE6IHNldCBzdGF0dXMgdG8gMAo+ID4gPiArICAgICAgICAtIHJldHVybiBlcnJvciAtIHNl
dCBzdGF0dXMgdG8gZXJyb3IKPiA+ID4gKyAgICAgICAgLSByZXR1cm4gc3VjY2VzcyB3aXRoIGRh
dGEgLSBzZXQgc3RhdHVzIHRvIDAsCj4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzZXQgYnVmZmVyIHRvIHNvbWUgYnVmZmVyCj4gPiA+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBzZXQgbGVuZ3RoIHRvIG91dCBsZW4KPiA+ID4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydW5jYXRpb24gaXMgYXV0b21hdGljCj4gPiA+
ICsgICAgKi8KPiA+ID4gKyAgICB2b2lkICgqY29udHJvbF9yZXF1ZXN0KShTcGljZVVzYkVtdWxh
dGVkRGV2aWNlICpkZXZpY2UsCj4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWlu
dDhfdCAqZGF0YSwgaW50IGRhdGFfbGVuLAo+ID4gPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHN0cnVjdCB1c2JfcmVkaXJfY29udHJvbF9wYWNrZXRfaGVhZGVyICpoLAo+ID4gPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgKipidWZmZXIpOwo+ID4gPiArICAgIC8qCj4g
PiA+ICsgICAgICAgIHByb2Nlc3NpbmcgaXMgc3luY2hyb25vdXM6Cj4gPiA+ICsgICAgICAgIC0g
c2V0IGgtPnN0YXR1cyB0byByZXN1bHRpbmcgc3RhdHVzLCBkZWZhdWx0ID0gc3RhbGwKPiA+ID4g
KyAgICAqLwo+ID4gPiArICAgIHZvaWQgKCpidWxrX291dF9yZXF1ZXN0KShTcGljZVVzYkVtdWxh
dGVkRGV2aWNlICpkZXZpY2UsCj4gPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVp
bnQ4X3QgZXAsIHVpbnQ4X3QgKmRhdGEsIGludCBkYXRhX2xlbiwKPiA+ID4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgdWludDhfdCAqc3RhdHVzKTsKPiA+ID4gKyAgICAvKgo+ID4gPiAr
ICAgICAgICBpZiByZXR1cm5zIHRydWUsIHByb2Nlc3NpbmcgaXMgYXN5bmNocm9ub3VzCj4gPiA+
ICsgICAgICAgIG90aGVyd2lzZSBoZWFkZXIgY29udGFpbnMgZXJyb3Igc3RhdHVzCj4gPiA+ICsg
ICAgKi8KPiA+ID4gKyAgICBnYm9vbGVhbiAoKmJ1bGtfaW5fcmVxdWVzdCkoU3BpY2VVc2JFbXVs
YXRlZERldmljZSAqZGV2aWNlLCB1aW50NjRfdAo+ID4gPiBpZCwKPiA+ID4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzdHJ1Y3QgdXNiX3JlZGlyX2J1bGtfcGFja2V0X2hlYWRlcgo+ID4g
PiAqYnVsa19oZWFkZXIpOwo+ID4gPiArICAgIHZvaWQgKCpjYW5jZWxfcmVxdWVzdCkoU3BpY2VV
c2JFbXVsYXRlZERldmljZSAqZGV2aWNlLCB1aW50NjRfdCBpZCk7Cj4gPiA+ICsgICAgdm9pZCAo
KmRldGFjaCkoU3BpY2VVc2JFbXVsYXRlZERldmljZSAqZGV2aWNlKTsKPiA+ID4gKyAgICB2b2lk
ICgqdW5yZWFsaXplKShTcGljZVVzYkVtdWxhdGVkRGV2aWNlICpkZXZpY2UpOwo+ID4gPiArfSBV
c2JEZXZpY2VPcHM7Cj4gPiA+ICsKPiA+ID4gK3N0YXRpYyBpbmxpbmUgY29uc3QgVXNiRGV2aWNl
T3BzICpkZXZpY2Vfb3BzKFNwaWNlVXNiRW11bGF0ZWREZXZpY2UKPiA+ID4gKmRldikKPiA+ID4g
K3sKPiA+ID4gKyAgICByZXR1cm4gKGNvbnN0IFVzYkRldmljZU9wcyAqKWRldjsKPiA+ID4gK30K
PiA+ID4gKwo+ID4gPiArZ2Jvb2xlYW4KPiA+ID4gK3NwaWNlX3VzYl9iYWNrZW5kX2NyZWF0ZV9l
bXVsYXRlZF9kZXZpY2UoU3BpY2VVc2JCYWNrZW5kICpiZSwKPiA+ID4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BpY2VVc2JFbXVsYXRlZERldmljZUNyZWF0ZQo+
ID4gPiBjcmVhdGVfcHJvYywKPiA+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgdm9pZCAqY3JlYXRlX3BhcmFtcywKPiA+ID4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgR0Vycm9yICoqZXJyKTsKPiA+ID4gK3ZvaWQgc3BpY2VfdXNi
X2JhY2tlbmRfZGV2aWNlX2VqZWN0KFNwaWNlVXNiQmFja2VuZCAqYmUsCj4gPiA+IFNwaWNlVXNi
QmFja2VuZERldmljZSAqZGV2aWNlKTsKPiA+ID4gK3ZvaWQgc3BpY2VfdXNiX2JhY2tlbmRfZGV2
aWNlX3JlcG9ydF9jaGFuZ2UoU3BpY2VVc2JCYWNrZW5kICpiZSwKPiA+ID4gU3BpY2VVc2JCYWNr
ZW5kRGV2aWNlICpkZXZpY2UpOwpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fXwpTcGljZS1kZXZlbCBtYWlsaW5nIGxpc3QKU3BpY2UtZGV2ZWxAbGlzdHMuZnJl
ZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGlu
Zm8vc3BpY2UtZGV2ZWw=
