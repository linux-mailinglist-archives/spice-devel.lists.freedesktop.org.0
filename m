Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 587BA5955A
	for <lists+spice-devel@lfdr.de>; Fri, 28 Jun 2019 09:49:15 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id BDE7E6E895;
	Fri, 28 Jun 2019 07:49:13 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6EF326E895
 for <spice-devel@lists.freedesktop.org>; Fri, 28 Jun 2019 07:49:13 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx04.intmail.prod.int.phx2.redhat.com
 [10.5.11.14])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 1B717307D910
 for <spice-devel@lists.freedesktop.org>; Fri, 28 Jun 2019 07:49:13 +0000 (UTC)
Received: from colo-mx.corp.redhat.com
 (colo-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.21])
 by smtp.corp.redhat.com (Postfix) with ESMTPS id 118AD5DA63
 for <spice-devel@lists.freedesktop.org>; Fri, 28 Jun 2019 07:49:13 +0000 (UTC)
Received: from zmail25.collab.prod.int.phx2.redhat.com
 (zmail25.collab.prod.int.phx2.redhat.com [10.5.83.31])
 by colo-mx.corp.redhat.com (Postfix) with ESMTP id 08AF754D3C
 for <spice-devel@lists.freedesktop.org>; Fri, 28 Jun 2019 07:49:13 +0000 (UTC)
Date: Fri, 28 Jun 2019 03:49:12 -0400 (EDT)
From: Frediano Ziglio <fziglio@redhat.com>
To: spice-devel@lists.freedesktop.org
Message-ID: <1889820364.25083803.1561708152942.JavaMail.zimbra@redhat.com>
In-Reply-To: <505211853.23631823.1560938828393.JavaMail.zimbra@redhat.com>
References: <20190602193226.19766-1-fziglio@redhat.com>
 <505211853.23631823.1560938828393.JavaMail.zimbra@redhat.com>
MIME-Version: 1.0
X-Originating-IP: [10.33.32.3, 10.4.195.27]
Thread-Topic: char-device: Don't use RedClient API
Thread-Index: Sg/oat//pL1AriXPPyqD/AnMyOxFlxLHy8uQ
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.14
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.48]); Fri, 28 Jun 2019 07:49:13 +0000 (UTC)
Subject: Re: [Spice-devel] [PATCH spice-server v2 1/2] char-device: Don't
 use RedClient API
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

cGluZwoKPiAKPiBwaW5nIHRoZSBzZXJpZXMKPiAKPiA+IAo+ID4gUmVkQ2xpZW50IHdhcyBhbiBv
cGFxdWUgc3RydWN0dXJlIGZvciBSZWRDaGFyRGV2aWNlLgo+ID4gSXQgc3RhcnRlZCB0byBiZSB1
c2VkIHdoZW4gUmVkc1N0YXRlIHN0YXJ0ZWQgdG8gY29udGFpbiBhbGwKPiA+IHRoZSBnbG9iYWwg
c3RhdGUuCj4gPiBNYWtlIGl0IG9wYXF1ZSBhZ2FpbiB1c2luZyBhIG5ldyBSZWRDaGFyRGV2aWNl
Q2xpZW50T3BhcXVlLgo+ID4gVGhlIFJlZENoYXJEZXZpY2VDbGllbnRPcGFxdWUgZGVmaW5lIGlu
IHRoZSBoZWFkZXIgYWxsb3dzIHVzZXJzCj4gPiBvZiB0aGUgY2xhc3MgdG8gb3ZlcnJpZGUgdGhl
IHR5cGUgdG8gZ2V0IGEgbW9yZSBzYWZlIHR5cGUKPiA+IHRoYW4gUmVkQ2xpZW50Lgo+ID4gVGhl
IGRlZmluZSBhdCB0aGUgYmVnaW5uaW5nIG9mIEMgZmlsZSBpcyB0byBtYWtlIHN1cmUgd2UgZG9u
J3QKPiA+IHVzZSB0aGUgb3BhcXVlIHR5cGUgYXMgYSBzcGVjaWZpYyBvbmUuCj4gPiAKPiA+IFNp
Z25lZC1vZmYtYnk6IEZyZWRpYW5vIFppZ2xpbyA8ZnppZ2xpb0ByZWRoYXQuY29tPgo+ID4gLS0t
Cj4gPiAgc2VydmVyL2NoYXItZGV2aWNlLmMgfCA1MiArKysrKysrKysrKysrKysrKysrKysrKyst
LS0tLS0tLS0tLS0tLS0tLS0tLQo+ID4gIHNlcnZlci9jaGFyLWRldmljZS5oIHwgMjIgKysrKysr
KysrKystLS0tLS0tLQo+ID4gIDIgZmlsZXMgY2hhbmdlZCwgNDIgaW5zZXJ0aW9ucygrKSwgMzIg
ZGVsZXRpb25zKC0pCj4gPiAKPiA+IFRoaXMgcGF0Y2ggd2FzIG5hbWVkICJjaGFyLWRldmljZTog
TWFrZSBSZWRDbGllbnQgYW4gb3BhcXVlIHN0cnVjdHVyZQo+ID4gYWdhaW4iCj4gPiAKPiA+IGRp
ZmYgLS1naXQgYS9zZXJ2ZXIvY2hhci1kZXZpY2UuYyBiL3NlcnZlci9jaGFyLWRldmljZS5jCj4g
PiBpbmRleCA5ZWUyNTU2NjQuLjgyMjU1ZTgxMSAxMDA2NDQKPiA+IC0tLSBhL3NlcnZlci9jaGFy
LWRldmljZS5jCj4gPiArKysgYi9zZXJ2ZXIvY2hhci1kZXZpY2UuYwo+ID4gQEAgLTIyLDggKzIy
LDEyIEBACj4gPiAgCj4gPiAgI2luY2x1ZGUgPGNvbmZpZy5oPgo+ID4gICNpbmNsdWRlIDxpbnR0
eXBlcy5oPgo+ID4gKwo+ID4gKwo+ID4gK3R5cGVkZWYgc3RydWN0IFJlZENoYXJEZXZpY2VDbGll
bnRPcGFxdWUgUmVkQ2hhckRldmljZUNsaWVudE9wYXF1ZTsKPiA+ICsjZGVmaW5lIFJlZENoYXJE
ZXZpY2VDbGllbnRPcGFxdWUgUmVkQ2hhckRldmljZUNsaWVudE9wYXF1ZQo+ID4gKwo+ID4gICNp
bmNsdWRlICJjaGFyLWRldmljZS5oIgo+ID4gLSNpbmNsdWRlICJyZWQtY2xpZW50LmgiCj4gPiAg
I2luY2x1ZGUgInJlZHMuaCIKPiA+ICAjaW5jbHVkZSAiZ2xpYi1jb21wYXQuaCIKPiA+ICAKPiA+
IEBAIC0zOSw3ICs0Myw3IEBAIHR5cGVkZWYgZW51bSB7Cj4gPiAgfSBXcml0ZUJ1ZmZlck9yaWdp
bjsKPiA+ICAKPiA+ICBzdHJ1Y3QgUmVkQ2hhckRldmljZVdyaXRlQnVmZmVyUHJpdmF0ZSB7Cj4g
PiAtICAgIFJlZENsaWVudCAqY2xpZW50OyAvKiBUaGUgY2xpZW50IHRoYXQgc2VudCB0aGUgbWVz
c2FnZSB0byB0aGUgZGV2aWNlLgo+ID4gKyAgICBSZWRDaGFyRGV2aWNlQ2xpZW50T3BhcXVlICpj
bGllbnQ7IC8qIFRoZSBjbGllbnQgdGhhdCBzZW50IHRoZSBtZXNzYWdlCj4gPiB0byB0aGUgZGV2
aWNlLgo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTlVMTCBpZiB0aGUgc2VydmVyIGNy
ZWF0ZWQgdGhlIG1lc3NhZ2UgKi8KPiA+ICAgICAgV3JpdGVCdWZmZXJPcmlnaW4gb3JpZ2luOwo+
ID4gICAgICB1aW50MzJfdCB0b2tlbl9wcmljZTsKPiA+IEBAIC00OSw3ICs1Myw3IEBAIHN0cnVj
dCBSZWRDaGFyRGV2aWNlV3JpdGVCdWZmZXJQcml2YXRlIHsKPiA+ICB0eXBlZGVmIHN0cnVjdCBS
ZWRDaGFyRGV2aWNlQ2xpZW50IFJlZENoYXJEZXZpY2VDbGllbnQ7Cj4gPiAgc3RydWN0IFJlZENo
YXJEZXZpY2VDbGllbnQgewo+ID4gICAgICBSZWRDaGFyRGV2aWNlICpkZXY7Cj4gPiAtICAgIFJl
ZENsaWVudCAqY2xpZW50Owo+ID4gKyAgICBSZWRDaGFyRGV2aWNlQ2xpZW50T3BhcXVlICpjbGll
bnQ7Cj4gPiAgICAgIGludCBkb19mbG93X2NvbnRyb2w7Cj4gPiAgICAgIHVpbnQ2NF90IG51bV9j
bGllbnRfdG9rZW5zOwo+ID4gICAgICB1aW50NjRfdCBudW1fY2xpZW50X3Rva2Vuc19mcmVlOyAv
KiBjbGllbnQgbWVzc2FnZXMgdGhhdCB3ZXJlIGNvbnN1bWVkCj4gPiAgICAgIGJ5IHRoZSBkZXZp
Y2UgKi8KPiA+IEBAIC0xMDgsNyArMTEyLDcgQEAgcmVkX2NoYXJfZGV2aWNlX3JlYWRfb25lX21z
Z19mcm9tX2RldmljZShSZWRDaGFyRGV2aWNlCj4gPiAqZGV2KQo+ID4gIHN0YXRpYyB2b2lkCj4g
PiAgcmVkX2NoYXJfZGV2aWNlX3NlbmRfbXNnX3RvX2NsaWVudChSZWRDaGFyRGV2aWNlICpkZXYs
Cj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWRQaXBlSXRlbSAqbXNn
LAo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVkQ2xpZW50ICpjbGll
bnQpCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWRDaGFyRGV2aWNl
Q2xpZW50T3BhcXVlICpjbGllbnQpCj4gPiAgewo+ID4gICAgIFJlZENoYXJEZXZpY2VDbGFzcyAq
a2xhc3MgPSBSRURfQ0hBUl9ERVZJQ0VfR0VUX0NMQVNTKGRldik7Cj4gPiAgCj4gPiBAQCAtMTE3
LDcgKzEyMSw3IEBAIHJlZF9jaGFyX2RldmljZV9zZW5kX21zZ190b19jbGllbnQoUmVkQ2hhckRl
dmljZSAqZGV2LAo+ID4gIAo+ID4gIHN0YXRpYyB2b2lkCj4gPiAgcmVkX2NoYXJfZGV2aWNlX3Nl
bmRfdG9rZW5zX3RvX2NsaWVudChSZWRDaGFyRGV2aWNlICpkZXYsCj4gPiAtICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBSZWRDbGllbnQgKmNsaWVudCwKPiA+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlZENoYXJEZXZpY2VDbGllbnRPcGFxdWUg
KmNsaWVudCwKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQz
Ml90IHRva2VucykKPiA+ICB7Cj4gPiAgICAgUmVkQ2hhckRldmljZUNsYXNzICprbGFzcyA9IFJF
RF9DSEFSX0RFVklDRV9HRVRfQ0xBU1MoZGV2KTsKPiA+IEBAIC0xNDAsNyArMTQ0LDcgQEAgcmVk
X2NoYXJfZGV2aWNlX29uX2ZyZWVfc2VsZl90b2tlbihSZWRDaGFyRGV2aWNlICpkZXYpCj4gPiAg
fQo+ID4gIAo+ID4gIHN0YXRpYyB2b2lkCj4gPiAtcmVkX2NoYXJfZGV2aWNlX3JlbW92ZV9jbGll
bnQoUmVkQ2hhckRldmljZSAqZGV2LCBSZWRDbGllbnQgKmNsaWVudCkKPiA+ICtyZWRfY2hhcl9k
ZXZpY2VfcmVtb3ZlX2NsaWVudChSZWRDaGFyRGV2aWNlICpkZXYsCj4gPiBSZWRDaGFyRGV2aWNl
Q2xpZW50T3BhcXVlCj4gPiAqY2xpZW50KQo+ID4gIHsKPiA+ICAgICBSZWRDaGFyRGV2aWNlQ2xh
c3MgKmtsYXNzID0gUkVEX0NIQVJfREVWSUNFX0dFVF9DTEFTUyhkZXYpOwo+ID4gIAo+ID4gQEAg
LTIyMiw3ICsyMjYsNyBAQCBzdGF0aWMgdm9pZAo+ID4gcmVkX2NoYXJfZGV2aWNlX2hhbmRsZV9j
bGllbnRfb3ZlcmZsb3coUmVkQ2hhckRldmljZUNsaWVudCAqZGV2X2NsaWUKPiA+ICB9Cj4gPiAg
Cj4gPiAgc3RhdGljIFJlZENoYXJEZXZpY2VDbGllbnQgKnJlZF9jaGFyX2RldmljZV9jbGllbnRf
ZmluZChSZWRDaGFyRGV2aWNlCj4gPiAgKmRldiwKPiA+IC0gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlZENsaWVudCAqY2xpZW50KQo+ID4g
Kwo+ID4gUmVkQ2hhckRldmljZUNsaWVudE9wYXF1ZQo+ID4gKmNsaWVudCkKPiA+ICB7Cj4gPiAg
ICAgIEdMaXN0ICppdGVtOwo+ID4gIAo+ID4gQEAgLTQwMCw3ICs0MDQsNyBAQCBzdGF0aWMgdm9p
ZAo+ID4gcmVkX2NoYXJfZGV2aWNlX3NlbmRfdG9fY2xpZW50X3Rva2Vuc19hYnNvcmIoUmVkQ2hh
ckRldmljZUNsaWVudCAqZGUKPiA+ICB9Cj4gPiAgCj4gPiAgdm9pZCByZWRfY2hhcl9kZXZpY2Vf
c2VuZF90b19jbGllbnRfdG9rZW5zX2FkZChSZWRDaGFyRGV2aWNlICpkZXYsCj4gPiAtICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWRDbGllbnQgKmNsaWVu
dCwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJl
ZENoYXJEZXZpY2VDbGllbnRPcGFxdWUKPiA+ICpjbGllbnQsCj4gPiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MzJfdCB0b2tlbnMpCj4gPiAgewo+
ID4gICAgICBSZWRDaGFyRGV2aWNlQ2xpZW50ICpkZXZfY2xpZW50Owo+ID4gQEAgLTQxNSw3ICs0
MTksNyBAQCB2b2lkCj4gPiByZWRfY2hhcl9kZXZpY2Vfc2VuZF90b19jbGllbnRfdG9rZW5zX2Fk
ZChSZWRDaGFyRGV2aWNlICpkZXYsCj4gPiAgfQo+ID4gIAo+ID4gIHZvaWQgcmVkX2NoYXJfZGV2
aWNlX3NlbmRfdG9fY2xpZW50X3Rva2Vuc19zZXQoUmVkQ2hhckRldmljZSAqZGV2LAo+ID4gLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVkQ2xpZW50ICpj
bGllbnQsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBSZWRDaGFyRGV2aWNlQ2xpZW50T3BhcXVlCj4gPiAqY2xpZW50LAo+ID4gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QgdG9rZW5zKQo+ID4g
IHsKPiA+ICAgICAgUmVkQ2hhckRldmljZUNsaWVudCAqZGV2X2NsaWVudDsKPiA+IEBAIC01MzQs
NyArNTM4LDcgQEAgc3RhdGljIHZvaWQgcmVkX2NoYXJfZGV2aWNlX3dyaXRlX3JldHJ5KHZvaWQg
Km9wYXF1ZSkKPiA+ICB9Cj4gPiAgCj4gPiAgc3RhdGljIFJlZENoYXJEZXZpY2VXcml0ZUJ1ZmZl
ciAqCj4gPiAtcmVkX2NoYXJfZGV2aWNlX3dyaXRlX2J1ZmZlcl9nZXQoUmVkQ2hhckRldmljZSAq
ZGV2LCBSZWRDbGllbnQgKmNsaWVudCwKPiA+IGludAo+ID4gc2l6ZSwKPiA+ICtyZWRfY2hhcl9k
ZXZpY2Vfd3JpdGVfYnVmZmVyX2dldChSZWRDaGFyRGV2aWNlICpkZXYsCj4gPiBSZWRDaGFyRGV2
aWNlQ2xpZW50T3BhcXVlICpjbGllbnQsIGludCBzaXplLAo+ID4gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIFdyaXRlQnVmZmVyT3JpZ2luIG9yaWdpbiwgaW50Cj4gPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlncmF0ZWRfZGF0YV90b2tlbnMpCj4gPiAgewo+
ID4gICAgICBSZWRDaGFyRGV2aWNlV3JpdGVCdWZmZXIgKnJldDsKPiA+IEBAIC01OTgsNyArNjAy
LDcgQEAgZXJyb3I6Cj4gPiAgfQo+ID4gIAo+ID4gIFJlZENoYXJEZXZpY2VXcml0ZUJ1ZmZlcgo+
ID4gICpyZWRfY2hhcl9kZXZpY2Vfd3JpdGVfYnVmZmVyX2dldF9jbGllbnQoUmVkQ2hhckRldmlj
ZSAqZGV2LAo+ID4gLQo+ID4gUmVkQ2xpZW50Cj4gPiAqY2xpZW50LAo+ID4gKwo+ID4gUmVkQ2hh
ckRldmljZUNsaWVudE9wYXF1ZQo+ID4gKmNsaWVudCwKPiA+ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQKPiA+ICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzaXplKQo+ID4gIHsKPiA+ICAgICAgc3BpY2VfYXNzZXJ0KGNsaWVudCk7Cj4gPiBA
QCAtNjU4LDcgKzY2Miw3IEBAIHZvaWQgcmVkX2NoYXJfZGV2aWNlX3dyaXRlX2J1ZmZlcl9yZWxl
YXNlKFJlZENoYXJEZXZpY2UKPiA+ICpkZXYsCj4gPiAgCj4gPiAgICAgIFdyaXRlQnVmZmVyT3Jp
Z2luIGJ1Zl9vcmlnaW4gPSB3cml0ZV9idWYtPnByaXYtPm9yaWdpbjsKPiA+ICAgICAgdWludDMy
X3QgYnVmX3Rva2VuX3ByaWNlID0gd3JpdGVfYnVmLT5wcml2LT50b2tlbl9wcmljZTsKPiA+IC0g
ICAgUmVkQ2xpZW50ICpjbGllbnQgPSB3cml0ZV9idWYtPnByaXYtPmNsaWVudDsKPiA+ICsgICAg
UmVkQ2hhckRldmljZUNsaWVudE9wYXF1ZSAqY2xpZW50ID0gd3JpdGVfYnVmLT5wcml2LT5jbGll
bnQ7Cj4gPiAgCj4gPiAgICAgIGlmICghZGV2KSB7Cj4gPiAgICAgICAgICBnX3dhcm5pbmcoIm5v
IGRldmljZS4gd3JpdGUgYnVmZmVyIGlzIGZyZWVkIik7Cj4gPiBAQCAtNzAzLDExICs3MDcsMTMg
QEAgdm9pZCByZWRfY2hhcl9kZXZpY2VfZGVzdHJveShSZWRDaGFyRGV2aWNlICpjaGFyX2RldikK
PiA+ICAgICAgZ19vYmplY3RfdW5yZWYoY2hhcl9kZXYpOwo+ID4gIH0KPiA+ICAKPiA+IC1zdGF0
aWMgUmVkQ2hhckRldmljZUNsaWVudCAqcmVkX2NoYXJfZGV2aWNlX2NsaWVudF9uZXcoUmVkQ2xp
ZW50ICpjbGllbnQsCj4gPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGludAo+ID4gZG9fZmxvd19jb250cm9sLAo+ID4gLSAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MzJfdAo+ID4g
bWF4X3NlbmRfcXVldWVfc2l6ZSwKPiA+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QKPiA+IG51bV9jbGllbnRfdG9rZW5zLAo+
ID4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB1aW50MzJfdAo+ID4gbnVtX3NlbmRfdG9rZW5zKQo+ID4gK3N0YXRpYyBSZWRDaGFyRGV2aWNl
Q2xpZW50ICoKPiA+ICtyZWRfY2hhcl9kZXZpY2VfY2xpZW50X25ldyhSZWRzU3RhdGUgKnJlZHMs
Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVkQ2hhckRldmljZUNsaWVudE9wYXF1
ZSAqY2xpZW50LAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCBkb19mbG93X2Nv
bnRyb2wsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QgbWF4X3NlbmRf
cXVldWVfc2l6ZSwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MzJfdCBudW1f
Y2xpZW50X3Rva2VucywKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MzJfdCBu
dW1fc2VuZF90b2tlbnMpCj4gPiAgewo+ID4gICAgICBSZWRDaGFyRGV2aWNlQ2xpZW50ICpkZXZf
Y2xpZW50Owo+ID4gIAo+ID4gQEAgLTcxNyw4ICs3MjMsNiBAQCBzdGF0aWMgUmVkQ2hhckRldmlj
ZUNsaWVudAo+ID4gKnJlZF9jaGFyX2RldmljZV9jbGllbnRfbmV3KFJlZENsaWVudCAqY2xpZW50
LAo+ID4gICAgICBkZXZfY2xpZW50LT5tYXhfc2VuZF9xdWV1ZV9zaXplID0gbWF4X3NlbmRfcXVl
dWVfc2l6ZTsKPiA+ICAgICAgZGV2X2NsaWVudC0+ZG9fZmxvd19jb250cm9sID0gZG9fZmxvd19j
b250cm9sOwo+ID4gICAgICBpZiAoZG9fZmxvd19jb250cm9sKSB7Cj4gPiAtICAgICAgICBSZWRz
U3RhdGUgKnJlZHMgPSByZWRfY2xpZW50X2dldF9zZXJ2ZXIoY2xpZW50KTsKPiA+IC0KPiA+ICAg
ICAgICAgIGRldl9jbGllbnQtPndhaXRfZm9yX3Rva2Vuc190aW1lciA9Cj4gPiAgICAgICAgICAg
ICAgcmVkc19jb3JlX3RpbWVyX2FkZChyZWRzLAo+ID4gICAgICAgICAgICAgIGRldmljZV9jbGll
bnRfd2FpdF9mb3JfdG9rZW5zX3RpbWVvdXQsCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBkZXZfY2xpZW50KTsKPiA+IEBAIC03MzYsNyArNzQwLDcgQEAgc3RhdGljIFJlZENo
YXJEZXZpY2VDbGllbnQKPiA+ICpyZWRfY2hhcl9kZXZpY2VfY2xpZW50X25ldyhSZWRDbGllbnQg
KmNsaWVudCwKPiA+ICB9Cj4gPiAgCj4gPiAgYm9vbCByZWRfY2hhcl9kZXZpY2VfY2xpZW50X2Fk
ZChSZWRDaGFyRGV2aWNlICpkZXYsCj4gPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBSZWRDbGllbnQgKmNsaWVudCwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IFJlZENoYXJEZXZpY2VDbGllbnRPcGFxdWUgKmNsaWVudCwKPiA+ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGludCBkb19mbG93X2NvbnRyb2wsCj4gPiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICB1aW50MzJfdCBtYXhfc2VuZF9xdWV1ZV9zaXplLAo+ID4gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QgbnVtX2NsaWVudF90b2tlbnMsCj4g
PiBAQCAtNzU3LDcgKzc2MSw5IEBAIGJvb2wgcmVkX2NoYXJfZGV2aWNlX2NsaWVudF9hZGQoUmVk
Q2hhckRldmljZSAqZGV2LAo+ID4gICAgICBkZXYtPnByaXYtPndhaXRfZm9yX21pZ3JhdGVfZGF0
YSA9IHdhaXRfZm9yX21pZ3JhdGVfZGF0YTsKPiA+ICAKPiA+ICAgICAgc3BpY2VfZGVidWcoImNo
YXIgZGV2aWNlICVwLCBjbGllbnQgJXAiLCBkZXYsIGNsaWVudCk7Cj4gPiAtICAgIGRldl9jbGll
bnQgPSByZWRfY2hhcl9kZXZpY2VfY2xpZW50X25ldyhjbGllbnQsIGRvX2Zsb3dfY29udHJvbCwK
PiA+ICsgICAgZGV2X2NsaWVudCA9IHJlZF9jaGFyX2RldmljZV9jbGllbnRfbmV3KGRldi0+cHJp
di0+cmVkcywKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGNsaWVudCwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGRvX2Zsb3dfY29udHJvbCwKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIG1heF9zZW5kX3F1ZXVlX3NpemUsCj4gPiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBudW1fY2xpZW50X3Rva2VucywKPiA+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bV9zZW5kX3Rva2Vucyk7Cj4gPiBA
QCAtNzY5LDcgKzc3NSw3IEBAIGJvb2wgcmVkX2NoYXJfZGV2aWNlX2NsaWVudF9hZGQoUmVkQ2hh
ckRldmljZSAqZGV2LAo+ID4gIH0KPiA+ICAKPiA+ICB2b2lkIHJlZF9jaGFyX2RldmljZV9jbGll
bnRfcmVtb3ZlKFJlZENoYXJEZXZpY2UgKmRldiwKPiA+IC0gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIFJlZENsaWVudCAqY2xpZW50KQo+ID4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgUmVkQ2hhckRldmljZUNsaWVudE9wYXF1ZSAqY2xpZW50KQo+ID4gIHsK
PiA+ICAgICAgUmVkQ2hhckRldmljZUNsaWVudCAqZGV2X2NsaWVudDsKPiA+ICAKPiA+IEBAIC03
OTYsNyArODAyLDcgQEAgdm9pZCByZWRfY2hhcl9kZXZpY2VfY2xpZW50X3JlbW92ZShSZWRDaGFy
RGV2aWNlICpkZXYsCj4gPiAgfQo+ID4gIAo+ID4gIGludCByZWRfY2hhcl9kZXZpY2VfY2xpZW50
X2V4aXN0cyhSZWRDaGFyRGV2aWNlICpkZXYsCj4gPiAtICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIFJlZENsaWVudCAqY2xpZW50KQo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBSZWRDaGFyRGV2aWNlQ2xpZW50T3BhcXVlICpjbGllbnQpCj4gPiAgewo+ID4g
ICAgICByZXR1cm4gKHJlZF9jaGFyX2RldmljZV9jbGllbnRfZmluZChkZXYsIGNsaWVudCkgIT0g
TlVMTCk7Cj4gPiAgfQo+ID4gZGlmZiAtLWdpdCBhL3NlcnZlci9jaGFyLWRldmljZS5oIGIvc2Vy
dmVyL2NoYXItZGV2aWNlLmgKPiA+IGluZGV4IDMyZWU0Zjc4YS4uOWQ0Y2Y5ZDkyIDEwMDY0NAo+
ID4gLS0tIGEvc2VydmVyL2NoYXItZGV2aWNlLmgKPiA+ICsrKyBiL3NlcnZlci9jaGFyLWRldmlj
ZS5oCj4gPiBAQCAtMzgsNiArMzgsMTAgQEAgdHlwZWRlZiBzdHJ1Y3QgU3BpY2VDaGFyRGV2aWNl
U3RhdGUgUmVkQ2hhckRldmljZTsKPiA+ICB0eXBlZGVmIHN0cnVjdCBSZWRDaGFyRGV2aWNlQ2xh
c3MgUmVkQ2hhckRldmljZUNsYXNzOwo+ID4gIHR5cGVkZWYgc3RydWN0IFJlZENoYXJEZXZpY2VQ
cml2YXRlIFJlZENoYXJEZXZpY2VQcml2YXRlOwo+ID4gIAo+ID4gKyNpZm5kZWYgUmVkQ2hhckRl
dmljZUNsaWVudE9wYXF1ZQo+ID4gKyNkZWZpbmUgUmVkQ2hhckRldmljZUNsaWVudE9wYXF1ZSBS
ZWRDbGllbnQKPiA+ICsjZW5kaWYKPiA+ICsKPiA+ICAvKiAnU3BpY2VDaGFyRGV2aWNlU3RhdGUn
IG5hbWUgaXMgdXNlZCBmb3IgY29uc2lzdGVuY3kgd2l0aCB3aGF0Cj4gPiAgc3BpY2UtY2hhci5o
IGV4cG9ydHMgKi8KPiA+ICBzdHJ1Y3QgU3BpY2VDaGFyRGV2aWNlU3RhdGUKPiA+ICB7Cj4gPiBA
QCAtNjIsMTIgKzY2LDEyIEBAIHN0cnVjdCBSZWRDaGFyRGV2aWNlQ2xhc3MKPiA+ICAgICAgLyog
YWZ0ZXIgdGhpcyBjYWxsLCB0aGUgbWVzc2FnZSBpcyB1bnJlZmVyZW5jZWQgKi8KPiA+ICAgICAg
dm9pZCAoKnNlbmRfbXNnX3RvX2NsaWVudCkoUmVkQ2hhckRldmljZSAqc2VsZiwKPiA+ICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVkUGlwZUl0ZW0gKm1zZywKPiA+IC0gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgUmVkQ2xpZW50ICpjbGllbnQpOwo+ID4gKyAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICBSZWRDaGFyRGV2aWNlQ2xpZW50T3BhcXVlICpjbGllbnQp
Owo+ID4gIAo+ID4gICAgICAvKiBUaGUgY2IgaXMgY2FsbGVkIHdoZW4gYSBwcmVkZWZpbmVkIG51
bWJlciBvZiB3cml0ZSBidWZmZXJzIHdlcmUKPiA+ICAgICAgY29uc3VtZWQgYnkgdGhlCj4gPiAg
ICAgICAqIGRldmljZSAqLwo+ID4gICAgICB2b2lkICgqc2VuZF90b2tlbnNfdG9fY2xpZW50KShS
ZWRDaGFyRGV2aWNlICpzZWxmLAo+ID4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBSZWRDbGllbnQgKmNsaWVudCwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgUmVkQ2hhckRldmljZUNsaWVudE9wYXF1ZSAqY2xpZW50LAo+ID4gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB1aW50MzJfdCB0b2tlbnMpOwo+ID4gIAo+ID4gICAgICAvKiBU
aGUgY2IgaXMgY2FsbGVkIHdoZW4gYSBzZXJ2ZXIgKHNlbGYpIG1lc3NhZ2UgdGhhdCB3YXMgYWRk
cmVzc2VkIHRvCj4gPiAgICAgIHRoZSBkZXZpY2UsCj4gPiBAQCAtNzcsNyArODEsNyBAQCBzdHJ1
Y3QgUmVkQ2hhckRldmljZUNsYXNzCj4gPiAgICAgIC8qIFRoaXMgY2IgaXMgY2FsbGVkIGlmIGl0
IGlzIHJlY29tbWVuZGVkIHRvIHJlbW92ZSB0aGUgY2xpZW50Cj4gPiAgICAgICAqIGR1ZSB0byBz
bG93IGZsb3cgb3IgZHVlIHRvIHNvbWUgb3RoZXIgZXJyb3IuCj4gPiAgICAgICAqIFRoZSBjYWxs
ZWQgaW5zdGFuY2Ugc2hvdWxkIGRpc2Nvbm5lY3QgdGhlIGNsaWVudCwgb3IgYXQgbGVhc3QgdGhl
Cj4gPiAgICAgICBjb3JyZXNwb25kaW5nIGNoYW5uZWwgKi8KPiA+IC0gICAgdm9pZCAoKnJlbW92
ZV9jbGllbnQpKFJlZENoYXJEZXZpY2UgKnNlbGYsIFJlZENsaWVudCAqY2xpZW50KTsKPiA+ICsg
ICAgdm9pZCAoKnJlbW92ZV9jbGllbnQpKFJlZENoYXJEZXZpY2UgKnNlbGYsIFJlZENoYXJEZXZp
Y2VDbGllbnRPcGFxdWUKPiA+ICpjbGllbnQpOwo+ID4gIAo+ID4gICAgICAvKiBUaGlzIGNiIGlz
IGNhbGxlZCB3aGVuIGRldmljZSByZWNlaXZlcyBhbiBldmVudCAqLwo+ID4gICAgICB2b2lkICgq
cG9ydF9ldmVudCkoUmVkQ2hhckRldmljZSAqc2VsZiwgdWludDhfdCBldmVudCk7Cj4gPiBAQCAt
MTg4LDcgKzE5Miw3IEBAIHZvaWQgcmVkX2NoYXJfZGV2aWNlX3Jlc2V0KFJlZENoYXJEZXZpY2Ug
KmRldik7Cj4gPiAgLyogbWF4X3NlbmRfcXVldWVfc2l6ZSA9IGhvdyBtYW55IG1lc3NhZ2VzIHdl
IGNhbiByZWFkIGZyb20gdGhlIGRldmljZSBhbmQKPiA+ICBlbnF1ZXVlIGZvciB0aGlzIGNsaWVu
dCwKPiA+ICAgKiB3aGVuIHdlIGhhdmUgdG9rZW5zIGZvciBvdGhlciBjbGllbnRzIGFuZCBubyB0
b2tlbnMgZm9yIHRoaXMgb25lICovCj4gPiAgYm9vbCByZWRfY2hhcl9kZXZpY2VfY2xpZW50X2Fk
ZChSZWRDaGFyRGV2aWNlICpkZXYsCj4gPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBSZWRDbGllbnQgKmNsaWVudCwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IFJlZENoYXJEZXZpY2VDbGllbnRPcGFxdWUgKmNsaWVudCwKPiA+ICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGludCBkb19mbG93X2NvbnRyb2wsCj4gPiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICB1aW50MzJfdCBtYXhfc2VuZF9xdWV1ZV9zaXplLAo+ID4gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QgbnVtX2NsaWVudF90b2tlbnMsCj4g
PiBAQCAtMTk2LDkgKzIwMCw5IEBAIGJvb2wgcmVkX2NoYXJfZGV2aWNlX2NsaWVudF9hZGQoUmVk
Q2hhckRldmljZSAqZGV2LAo+ID4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50
IHdhaXRfZm9yX21pZ3JhdGVfZGF0YSk7Cj4gPiAgCj4gPiAgdm9pZCByZWRfY2hhcl9kZXZpY2Vf
Y2xpZW50X3JlbW92ZShSZWRDaGFyRGV2aWNlICpkZXYsCj4gPiAtICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBSZWRDbGllbnQgKmNsaWVudCk7Cj4gPiArICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBSZWRDaGFyRGV2aWNlQ2xpZW50T3BhcXVlICpjbGllbnQpOwo+
ID4gIGludCByZWRfY2hhcl9kZXZpY2VfY2xpZW50X2V4aXN0cyhSZWRDaGFyRGV2aWNlICpkZXYs
Cj4gPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlZENsaWVudCAqY2xpZW50
KTsKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVkQ2hhckRldmljZUNs
aWVudE9wYXF1ZSAqY2xpZW50KTsKPiA+ICAKPiA+ICB2b2lkIHJlZF9jaGFyX2RldmljZV9zdGFy
dChSZWRDaGFyRGV2aWNlICpkZXYpOwo+ID4gIHZvaWQgcmVkX2NoYXJfZGV2aWNlX3N0b3AoUmVk
Q2hhckRldmljZSAqZGV2KTsKPiA+IEBAIC0yMDksMTcgKzIxMywxNyBAQCBTcGljZVNlcnZlciog
cmVkX2NoYXJfZGV2aWNlX2dldF9zZXJ2ZXIoUmVkQ2hhckRldmljZQo+ID4gKmRldik7Cj4gPiAg
dm9pZCByZWRfY2hhcl9kZXZpY2Vfd2FrZXVwKFJlZENoYXJEZXZpY2UgKmRldik7Cj4gPiAgCj4g
PiAgdm9pZCByZWRfY2hhcl9kZXZpY2Vfc2VuZF90b19jbGllbnRfdG9rZW5zX2FkZChSZWRDaGFy
RGV2aWNlICpkZXYsCj4gPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBSZWRDbGllbnQgKmNsaWVudCwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIFJlZENoYXJEZXZpY2VDbGllbnRPcGFxdWUKPiA+ICpjbGll
bnQsCj4gPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1
aW50MzJfdCB0b2tlbnMpOwo+ID4gIAo+ID4gIAo+ID4gIHZvaWQgcmVkX2NoYXJfZGV2aWNlX3Nl
bmRfdG9fY2xpZW50X3Rva2Vuc19zZXQoUmVkQ2hhckRldmljZSAqZGV2LAo+ID4gLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVkQ2xpZW50ICpjbGllbnQs
Cj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWRD
aGFyRGV2aWNlQ2xpZW50T3BhcXVlCj4gPiAqY2xpZW50LAo+ID4gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QgdG9rZW5zKTsKPiA+ICAvKiog
V3JpdGUgdG8gZGV2aWNlICoqLwo+ID4gIAo+ID4gIFJlZENoYXJEZXZpY2VXcml0ZUJ1ZmZlcgo+
ID4gICpyZWRfY2hhcl9kZXZpY2Vfd3JpdGVfYnVmZmVyX2dldF9jbGllbnQoUmVkQ2hhckRldmlj
ZSAqZGV2LAo+ID4gLQo+ID4gUmVkQ2xpZW50Cj4gPiAqY2xpZW50LAo+ID4gKwo+ID4gUmVkQ2hh
ckRldmljZUNsaWVudE9wYXF1ZQo+ID4gKmNsaWVudCwKPiA+ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQKPiA+ICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBzaXplKTsKPiA+ICAKPiA+ICAvKiBSZXR1cm5zIE5VTEwgaWYgdXNlX3Rva2VuID09
IHRydWUgYW5kIG5vIHRva2VucyBhcmUgYXZhaWxhYmxlICovCj4gX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX18KPiBTcGljZS1kZXZlbCBtYWlsaW5nIGxpc3QK
PiBTcGljZS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKPiBodHRwczovL2xpc3RzLmZyZWVk
ZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL3NwaWNlLWRldmVsCl9fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClNwaWNlLWRldmVsIG1haWxpbmcgbGlzdApT
cGljZS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3Rv
cC5vcmcvbWFpbG1hbi9saXN0aW5mby9zcGljZS1kZXZlbA==
