Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 771C26020B
	for <lists+spice-devel@lfdr.de>; Fri,  5 Jul 2019 10:23:07 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 04D476E049;
	Fri,  5 Jul 2019 08:23:05 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id ECD926E049
 for <spice-devel@lists.freedesktop.org>; Fri,  5 Jul 2019 08:23:03 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx05.intmail.prod.int.phx2.redhat.com
 [10.5.11.15])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 8E21DC04959F
 for <spice-devel@lists.freedesktop.org>; Fri,  5 Jul 2019 08:23:03 +0000 (UTC)
Received: from fziglio.remote.csb (unknown [10.33.32.13])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 703EC1ADD3;
 Fri,  5 Jul 2019 08:23:02 +0000 (UTC)
From: Frediano Ziglio <fziglio@redhat.com>
To: spice-devel@lists.freedesktop.org
Date: Fri,  5 Jul 2019 09:22:57 +0100
Message-Id: <20190705082259.10991-1-fziglio@redhat.com>
In-Reply-To: <CADJ1XR1ufJx6xGGRiDmNz8db5-_MRMox_YrdnVBgSjjQyOE9dA@mail.gmail.com>
References: <CADJ1XR1ufJx6xGGRiDmNz8db5-_MRMox_YrdnVBgSjjQyOE9dA@mail.gmail.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.15
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.31]); Fri, 05 Jul 2019 08:23:03 +0000 (UTC)
Subject: [Spice-devel] [PATCH spice-server 1/3] reds: Add ability to query
 the video-codecs currently enabled
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

RnJvbTogS2V2aW4gUG91Z2V0IDxrcG91Z2V0QHJlZGhhdC5jb20+CgpzcGljZV9zZXJ2ZXJfZ2V0
X3ZpZGVvX2NvZGVjczogbmV3IHB1YmxpYyBmdW5jdGlvbiB0byBxdWVyeSB0aGUgdmlkZW8KZW5j
b2RlcnMvY29kZWNzIGN1cnJlbnRseSBlbmFibGVkIGluIHRoZSBzcGljZSBzZXJ2ZXIuIEl0IHJl
dHVybnMgYQpzdHJpbmcgdGhhdCBjYW4gYmUgZmVkIHRvIHRoZSBzZXR0ZXIgY291bnRlcgooc3Bp
Y2Vfc2VydmVyX3NldF92aWRlb19jb2RlY3MpLiBUaGUgc3RyaW5nIHJldHVybmVkIGJ5IHRoaXMg
ZnVuY3Rpb24Kc2hvdWxkIGJlIHJlbGVhc2VkIHdpdGggc3BpY2Vfc2VydmVyX2ZyZWVfdmlkZW9f
Y29kZWNzLgoKc3BpY2Vfc2VydmVyX2ZyZWVfdmlkZW9fY29kZWNzOiBuZXcgcHVibGljIGZ1bmN0
aW9uIHRvIGZyZWUgdGhlIHRoZQp2aWRlbyBjb2RlYyBsaXN0IHJldHVybmVkIGJ5IHNwaWNlX3Nl
cnZlcl9nZXRfdmlkZW9fY29kZWNzLgoKdmlkZW9fY29kZWNzX3RvX3N0cmluZzogbmV3IHByaXZh
dGUgZnVuY3Rpb24gdG8gdHJhbnNmb3JtIGFuIGFycmF5IG9mClJlZFZpZGVvQ29kZWMgaW50byBh
IHN0cmluZy4KClNpZ25lZC1vZmYtYnk6IEtldmluIFBvdWdldCA8a3BvdWdldEByZWRoYXQuY29t
PgotLS0KIHNlcnZlci9kY2MuYyAgICAgICAgICAgICB8IDEzICsrKystLS0tLS0tLS0KIHNlcnZl
ci9yZWRzLmMgICAgICAgICAgICB8IDM4ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrCiBzZXJ2ZXIvcmVkcy5oICAgICAgICAgICAgfCAgMiArKwogc2VydmVyL3NwaWNlLXNl
cnZlci5oICAgIHwgMTIgKysrKysrKysrKysrCiBzZXJ2ZXIvc3BpY2Utc2VydmVyLnN5bXMgfCAg
NiArKysrKysKIHNlcnZlci92aWRlby1lbmNvZGVyLmggICB8ICAyICsrCiBzZXJ2ZXIvdmlkZW8t
c3RyZWFtLmMgICAgfCAyMiArKysrKysrKysrKysrKysrKysrKysrCiA3IGZpbGVzIGNoYW5nZWQs
IDg2IGluc2VydGlvbnMoKyksIDkgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvc2VydmVyL2Rj
Yy5jIGIvc2VydmVyL2RjYy5jCmluZGV4IGJkMzkzZTA0MC4uYjM2NGE4ZTExIDEwMDY0NAotLS0g
YS9zZXJ2ZXIvZGNjLmMKKysrIGIvc2VydmVyL2RjYy5jCkBAIC0xMTIwLDkgKzExMjAsOCBAQCBz
dGF0aWMgZ2ludCBzb3J0X3ZpZGVvX2NvZGVjc19ieV9jbGllbnRfcHJlZmVyZW5jZShnY29uc3Rw
b2ludGVyIGFfcG9pbnRlciwKIAogc3RhdGljIHZvaWQgZGNjX3VwZGF0ZV9wcmVmZXJyZWRfdmlk
ZW9fY29kZWNzKERpc3BsYXlDaGFubmVsQ2xpZW50ICpkY2MpCiB7Ci0gICAgZ3VpbnQgaTsKICAg
ICBHQXJyYXkgKnZpZGVvX2NvZGVjcywgKnNlcnZlcl9jb2RlY3M7Ci0gICAgR1N0cmluZyAqbXNn
OworICAgIGNoYXIgKmNvZGVjc19zdHI7CiAKICAgICBzZXJ2ZXJfY29kZWNzID0gZGlzcGxheV9j
aGFubmVsX2dldF92aWRlb19jb2RlY3MoRENDX1RPX0RDKGRjYykpOwogICAgIHNwaWNlX3JldHVy
bl9pZl9mYWlsKHNlcnZlcl9jb2RlY3MgIT0gTlVMTCk7CkBAIC0xMTM3LDEzICsxMTM2LDkgQEAg
c3RhdGljIHZvaWQgZGNjX3VwZGF0ZV9wcmVmZXJyZWRfdmlkZW9fY29kZWNzKERpc3BsYXlDaGFu
bmVsQ2xpZW50ICpkY2MpCiAgICAgZ19jbGVhcl9wb2ludGVyKCZkY2MtPnByaXYtPnByZWZlcnJl
ZF92aWRlb19jb2RlY3MsIGdfYXJyYXlfdW5yZWYpOwogICAgIGRjYy0+cHJpdi0+cHJlZmVycmVk
X3ZpZGVvX2NvZGVjcyA9IHZpZGVvX2NvZGVjczsKIAotICAgIG1zZyA9IGdfc3RyaW5nX25ldygi
UHJlZmVycmVkIHZpZGVvLWNvZGVjczoiKTsKLSAgICBmb3IgKGkgPSAwOyBpIDwgdmlkZW9fY29k
ZWNzLT5sZW47IGkrKykgewotICAgICAgICBSZWRWaWRlb0NvZGVjIGNvZGVjID0gZ19hcnJheV9p
bmRleCh2aWRlb19jb2RlY3MsIFJlZFZpZGVvQ29kZWMsIGkpOwotICAgICAgICBnX3N0cmluZ19h
cHBlbmRfcHJpbnRmKG1zZywgIiAlZCIsIGNvZGVjLnR5cGUpOwotICAgIH0KLSAgICBzcGljZV9k
ZWJ1ZygiJXMiLCBtc2ctPnN0cik7Ci0gICAgZ19zdHJpbmdfZnJlZShtc2csIFRSVUUpOworICAg
IGNvZGVjc19zdHIgPSB2aWRlb19jb2RlY3NfdG9fc3RyaW5nKHZpZGVvX2NvZGVjcywgIiAiKTsK
KyAgICBzcGljZV9kZWJ1ZygiUHJlZmVycmVkIHZpZGVvLWNvZGVjczogJXMiLCBjb2RlY3Nfc3Ry
KTsKKyAgICBnX2ZyZWUoY29kZWNzX3N0cik7CiB9CiAKIHN0YXRpYyB2b2lkIG9uX2Rpc3BsYXlf
dmlkZW9fY29kZWNzX3VwZGF0ZShHT2JqZWN0ICpnb2JqZWN0LCBHUGFyYW1TcGVjICpwc3BlYywg
Z3BvaW50ZXIgdXNlcl9kYXRhKQpkaWZmIC0tZ2l0IGEvc2VydmVyL3JlZHMuYyBiL3NlcnZlci9y
ZWRzLmMKaW5kZXggNjcxZTBhODZkLi5iYWFkZWU0NzQgMTAwNjQ0Ci0tLSBhL3NlcnZlci9yZWRz
LmMKKysrIGIvc2VydmVyL3JlZHMuYwpAQCAtMzcwOCw2ICszNzA4LDE2IEBAIHN0YXRpYyBnYm9v
bGVhbiBnZXRfbmFtZV9pbmRleChjb25zdCBFbnVtTmFtZXMgbmFtZXNbXSwgY29uc3QgY2hhciAq
bmFtZSwgdWludDMyCiAgICAgcmV0dXJuIEZBTFNFOwogfQogCisvKiByZXR1cm5zIE5VTEwgaWYg
aW5kZXggaXMgaW52YWxpZC4gKi8KK3N0YXRpYyBjb25zdCBjaGFyICpnZXRfaW5kZXhfbmFtZShj
b25zdCBFbnVtTmFtZXMgbmFtZXNbXSwgdWludDMyX3QgaW5kZXgpCit7CisgICAgd2hpbGUgKG5h
bWVzLT5uYW1lICE9IE5VTEwgJiYgbmFtZXMtPmlkICE9IGluZGV4KSB7CisgICAgICAgIG5hbWVz
Kys7CisgICAgfQorCisgICAgcmV0dXJuIG5hbWVzLT5uYW1lOworfQorCiBzdGF0aWMgY29uc3Qg
RW51bU5hbWVzIHJlbmRlcmVyX25hbWVzW10gPSB7CiAgICAge1JFRF9SRU5ERVJFUl9TVywgInN3
In0sCiAgICAge1JFRF9SRU5ERVJFUl9JTlZBTElELCBOVUxMfSwKQEAgLTM3NTUsNiArMzc2NSwy
NCBAQCBzdGF0aWMgY29uc3QgaW50IHZpZGVvX2NvZGVjX2NhcHNbXSA9IHsKICAgICBTUElDRV9E
SVNQTEFZX0NBUF9DT0RFQ19WUDksCiB9OwogCitjaGFyICpyZWRzX2dldF92aWRlb19jb2RlY19m
dWxsbmFtZShSZWRWaWRlb0NvZGVjICpjb2RlYykKK3sKKyAgICBpbnQgaTsKKyAgICBjb25zdCBj
aGFyICplbmNvZGVyX25hbWUgPSBOVUxMOworICAgIGNvbnN0IGNoYXIgKmNvZGVjX25hbWUgPSBn
ZXRfaW5kZXhfbmFtZSh2aWRlb19jb2RlY19uYW1lcywgY29kZWMtPnR5cGUpOworCisgICAgc3Bp
Y2VfYXNzZXJ0KGNvZGVjX25hbWUpOworCisgICAgZm9yIChpID0gMDsgaSA8IEdfTl9FTEVNRU5U
Uyh2aWRlb19lbmNvZGVyX3Byb2NzKTsgaSsrKSB7CisgICAgICAgIGlmICh2aWRlb19lbmNvZGVy
X3Byb2NzW2ldID09IGNvZGVjLT5jcmVhdGUpIHsKKyAgICAgICAgICAgIGVuY29kZXJfbmFtZSA9
IGdldF9pbmRleF9uYW1lKHZpZGVvX2VuY29kZXJfbmFtZXMsIGkpOworICAgICAgICAgICAgYnJl
YWs7CisgICAgICAgIH0KKyAgICB9CisgICAgc3BpY2VfYXNzZXJ0KGVuY29kZXJfbmFtZSk7CisK
KyAgICByZXR1cm4gZ19zdHJkdXBfcHJpbnRmKCIlczolcyIsIGVuY29kZXJfbmFtZSwgY29kZWNf
bmFtZSk7Cit9CiAKIC8qIFBhcnNlcyB0aGUgZ2l2ZW4gY29kZWMgc3RyaW5nIGFuZCByZXR1cm5z
IG5ld2x5LWFsbG9jYXRlZCBzdHJpbmdzIGRlc2NyaWJpbmcKICAqIHRoZSBuZXh0IGVuY29kZXIg
YW5kIGNvZGVjIGluIHRoZSBsaXN0LiBUaGVzZSBzdHJpbmdzIG11c3QgYmUgZnJlZWQgYnkgdGhl
CkBAIC00MTk2LDYgKzQyMjQsMTYgQEAgU1BJQ0VfR05VQ19WSVNJQkxFIGludCBzcGljZV9zZXJ2
ZXJfc2V0X3ZpZGVvX2NvZGVjcyhTcGljZVNlcnZlciAqcmVkcywgY29uc3QgY2gKICAgICByZXR1
cm4gMDsKIH0KIAorU1BJQ0VfR05VQ19WSVNJQkxFIGNvbnN0IGNoYXIgKnNwaWNlX3NlcnZlcl9n
ZXRfdmlkZW9fY29kZWNzKFNwaWNlU2VydmVyICpyZWRzKQoreworICAgIHJldHVybiB2aWRlb19j
b2RlY3NfdG9fc3RyaW5nKHJlZHNfZ2V0X3ZpZGVvX2NvZGVjcyhyZWRzKSwgIjsiKTsKK30KKwor
U1BJQ0VfR05VQ19WSVNJQkxFIHZvaWQgc3BpY2Vfc2VydmVyX2ZyZWVfdmlkZW9fY29kZWNzKFNw
aWNlU2VydmVyICpyZWRzLCBjb25zdCBjaGFyICp2aWRlb19jb2RlY3MpCit7CisgICAgZ19mcmVl
KChjaGFyICopIHZpZGVvX2NvZGVjcyk7Cit9CisKIEdBcnJheSogcmVkc19nZXRfdmlkZW9fY29k
ZWNzKGNvbnN0IFJlZHNTdGF0ZSAqcmVkcykKIHsKICAgICByZXR1cm4gcmVkcy0+Y29uZmlnLT52
aWRlb19jb2RlY3M7CmRpZmYgLS1naXQgYS9zZXJ2ZXIvcmVkcy5oIGIvc2VydmVyL3JlZHMuaApp
bmRleCA4YzVlZTg0ZDAuLmUzMzU1ZjgxNyAxMDA2NDQKLS0tIGEvc2VydmVyL3JlZHMuaAorKysg
Yi9zZXJ2ZXIvcmVkcy5oCkBAIC0yNyw2ICsyNyw3IEBACiAjaW5jbHVkZSAiY2hhci1kZXZpY2Uu
aCIKICNpbmNsdWRlICJzcGljZS5oIgogI2luY2x1ZGUgInJlZC1jaGFubmVsLmgiCisjaW5jbHVk
ZSAidmlkZW8tZW5jb2Rlci5oIgogI2luY2x1ZGUgIm1haW4tZGlzcGF0Y2hlci5oIgogI2luY2x1
ZGUgIm1pZ3JhdGlvbi1wcm90b2NvbC5oIgogCkBAIC01NCw2ICs1NSw3IEBAIHZvaWQgcmVkc19z
ZW5kX2RldmljZV9kaXNwbGF5X2luZm8oUmVkc1N0YXRlICpyZWRzKTsKIHZvaWQgcmVkc19oYW5k
bGVfYWdlbnRfbW91c2VfZXZlbnQoUmVkc1N0YXRlICpyZWRzLCBjb25zdCBWREFnZW50TW91c2VT
dGF0ZSAqbW91c2Vfc3RhdGUpOyAvLyB1c2VkIGJ5IGlucHV0c19jaGFubmVsCiAKIEdBcnJheSog
cmVkc19nZXRfcmVuZGVyZXJzKFJlZHNTdGF0ZSAqcmVkcyk7CitjaGFyICpyZWRzX2dldF92aWRl
b19jb2RlY19mdWxsbmFtZShSZWRWaWRlb0NvZGVjICpjb2RlYyk7CiAKIGVudW0gewogICAgIFJF
RF9SRU5ERVJFUl9JTlZBTElELApkaWZmIC0tZ2l0IGEvc2VydmVyL3NwaWNlLXNlcnZlci5oIGIv
c2VydmVyL3NwaWNlLXNlcnZlci5oCmluZGV4IDVmNTcyZjRmNS4uMjRkZjhlNjUxIDEwMDY0NAot
LS0gYS9zZXJ2ZXIvc3BpY2Utc2VydmVyLmgKKysrIGIvc2VydmVyL3NwaWNlLXNlcnZlci5oCkBA
IC0xMzYsNiArMTM2LDE4IEBAIGVudW0gewogfTsKIAogaW50IHNwaWNlX3NlcnZlcl9zZXRfdmlk
ZW9fY29kZWNzKFNwaWNlU2VydmVyICpzLCBjb25zdCBjaGFyKiB2aWRlb19jb2RlY3MpOworLyog
UmV0dXJucyBhIG5ld2x5IGFsbG9jYXRlZCBzdHJpbmcgZGVzY3JpYmluZyB2aWRlbyBlbmNvZGVy
cy9jb2RlY3MKKyAqIGN1cnJlbnRseSBhbGxvd2VkIGluIEByZWRzIFNwaWNlIHNlcnZlci4gVGhl
IHN0cmluZyByZXR1cm5lZCBieQorICogdGhpcyBmdW5jdGlvbiBtdXN0IGJlIHJlbGVhc2VkIHdp
dGggc3BpY2Vfc2VydmVyX2ZyZWVfdmlkZW9fY29kZWNzLgorICoKKyAqIEByZWRzOiB0aGUgU3Bp
Y2Ugc2VydmVyIHRvIHF1ZXJ5CisgKiBAcmV0dXJuIHRoZSBzdHJpbmcgZGVzY3JpYmluZyB0aGUg
dmlkZW8gZW5jb2RlcnMvY29kZWNzIGN1cnJlbnRseSBlbmFibGVkCisgKi8KK2NvbnN0IGNoYXIg
KnNwaWNlX3NlcnZlcl9nZXRfdmlkZW9fY29kZWNzKFNwaWNlU2VydmVyICpzKTsKKy8qIFJlbGVh
c2VzIHRoZSBtZW1vcnkgb2YgdGhlIHZpZGVvLWNvZGVjIHN0cmluZyByZXR1cm5lZCBieQorICog
c3BpY2Vfc2VydmVyX2dldF92aWRlb19jb2RlY3MuCisgKi8KK3ZvaWQgc3BpY2Vfc2VydmVyX2Zy
ZWVfdmlkZW9fY29kZWNzKFNwaWNlU2VydmVyICpyZWRzLCBjb25zdCBjaGFyICp2aWRlb19jb2Rl
Y3MpOwogaW50IHNwaWNlX3NlcnZlcl9zZXRfcGxheWJhY2tfY29tcHJlc3Npb24oU3BpY2VTZXJ2
ZXIgKnMsIGludCBlbmFibGUpOwogaW50IHNwaWNlX3NlcnZlcl9zZXRfYWdlbnRfbW91c2UoU3Bp
Y2VTZXJ2ZXIgKnMsIGludCBlbmFibGUpOwogaW50IHNwaWNlX3NlcnZlcl9zZXRfYWdlbnRfY29w
eXBhc3RlKFNwaWNlU2VydmVyICpzLCBpbnQgZW5hYmxlKTsKZGlmZiAtLWdpdCBhL3NlcnZlci9z
cGljZS1zZXJ2ZXIuc3ltcyBiL3NlcnZlci9zcGljZS1zZXJ2ZXIuc3ltcwppbmRleCBhYzRkOWIx
NGEuLmUzMzUyNmYzMSAxMDA2NDQKLS0tIGEvc2VydmVyL3NwaWNlLXNlcnZlci5zeW1zCisrKyBi
L3NlcnZlci9zcGljZS1zZXJ2ZXIuc3ltcwpAQCAtMTc4LDMgKzE3OCw5IEBAIFNQSUNFX1NFUlZF
Ul8wLjE0LjIgewogZ2xvYmFsOgogICAgIHNwaWNlX3F4bF9zZXRfZGV2aWNlX2luZm87CiB9IFNQ
SUNFX1NFUlZFUl8wLjEzLjI7CisKK1NQSUNFX1NFUlZFUl8wLjE0LjMgeworZ2xvYmFsOgorICAg
IHNwaWNlX3NlcnZlcl9nZXRfdmlkZW9fY29kZWNzOworICAgIHNwaWNlX3NlcnZlcl9mcmVlX3Zp
ZGVvX2NvZGVjczsKK30gU1BJQ0VfU0VSVkVSXzAuMTQuMjsKZGlmZiAtLWdpdCBhL3NlcnZlci92
aWRlby1lbmNvZGVyLmggYi9zZXJ2ZXIvdmlkZW8tZW5jb2Rlci5oCmluZGV4IDcxZjQxMzFhNy4u
OTBkMjEzMTIwIDEwMDY0NAotLS0gYS9zZXJ2ZXIvdmlkZW8tZW5jb2Rlci5oCisrKyBiL3NlcnZl
ci92aWRlby1lbmNvZGVyLmgKQEAgLTIxMyw0ICsyMTMsNiBAQCB0eXBlZGVmIHN0cnVjdCBSZWRW
aWRlb0NvZGVjIHsKICAgICB1aW50MzJfdCBjYXA7CiB9IFJlZFZpZGVvQ29kZWM7CiAKK2NoYXIg
KnZpZGVvX2NvZGVjc190b19zdHJpbmcoR0FycmF5ICp2aWRlb19jb2RlY3MsIGNvbnN0IGNoYXIg
KnNlcCk7CisKICNlbmRpZiAvKiBWSURFT19FTkNPREVSX0hfICovCmRpZmYgLS1naXQgYS9zZXJ2
ZXIvdmlkZW8tc3RyZWFtLmMgYi9zZXJ2ZXIvdmlkZW8tc3RyZWFtLmMKaW5kZXggNGFjMjVhZjhi
Li5hMzkyNjJkNTUgMTAwNjQ0Ci0tLSBhL3NlcnZlci92aWRlby1zdHJlYW0uYworKysgYi9zZXJ2
ZXIvdmlkZW8tc3RyZWFtLmMKQEAgLTk3MCwzICs5NzAsMjUgQEAgdm9pZCB2aWRlb19zdHJlYW1f
dHJhY2VfYWRkX2RyYXdhYmxlKERpc3BsYXlDaGFubmVsICpkaXNwbGF5LAogICAgIHRyYWNlLT5o
ZWlnaHQgPSBzcmNfYXJlYS0+Ym90dG9tIC0gc3JjX2FyZWEtPnRvcDsKICAgICB0cmFjZS0+ZGVz
dF9hcmVhID0gaXRlbS0+cmVkX2RyYXdhYmxlLT5iYm94OwogfQorCisvKgorICogdmlkZW9fY29k
ZWNzOiBhbiBhcnJheSBvZiBSZWRWaWRlb0NvZGVjCisgKiBzZXA6IGEgc3RyaW5nIGZvciBzZXBh
cmF0aW5nIHRoZSBsaXN0IGVsZW1lbnRzCisgKgorICogcmV0dXJucyBhIHN0cmluZyBvZiAiZW5j
OmNvZGVjPHNlcD4iKiB0aGF0IG11c3QgYmUgcmVsZWFzZWQKKyAqICAgICAgICAgd2l0aCBnX2Zy
ZWUuCisgKi8KK2NoYXIgKnZpZGVvX2NvZGVjc190b19zdHJpbmcoR0FycmF5ICp2aWRlb19jb2Rl
Y3MsIGNvbnN0IGNoYXIgKnNlcCkgeworICAgIGludCBpOworICAgIEdTdHJpbmcgKm1zZyA9IGdf
c3RyaW5nX25ldygiIik7CisKKyAgICBmb3IgKGkgPSAwOyBpIDwgdmlkZW9fY29kZWNzLT5sZW47
IGkrKykgeworICAgICAgICBSZWRWaWRlb0NvZGVjIGNvZGVjID0gZ19hcnJheV9pbmRleCh2aWRl
b19jb2RlY3MsIFJlZFZpZGVvQ29kZWMsIGkpOworICAgICAgICBjaGFyICpjb2RlY19uYW1lID0g
cmVkc19nZXRfdmlkZW9fY29kZWNfZnVsbG5hbWUoJmNvZGVjKTsKKworICAgICAgICBnX3N0cmlu
Z19hcHBlbmRfcHJpbnRmKG1zZywgIiVzJXMiLCBjb2RlY19uYW1lLCBzZXApOworICAgICAgICBn
X2ZyZWUoY29kZWNfbmFtZSk7CisgICAgfQorCisgICAgcmV0dXJuIGdfc3RyaW5nX2ZyZWUobXNn
LCBGQUxTRSk7Cit9Ci0tIAoyLjIwLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fClNwaWNlLWRldmVsIG1haWxpbmcgbGlzdApTcGljZS1kZXZlbEBsaXN0
cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9s
aXN0aW5mby9zcGljZS1kZXZlbA==
