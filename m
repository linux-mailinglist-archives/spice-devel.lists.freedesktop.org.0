Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 334529E404
	for <lists+spice-devel@lfdr.de>; Tue, 27 Aug 2019 11:23:53 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B94FA89861;
	Tue, 27 Aug 2019 09:23:51 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9814D89904
 for <spice-devel@lists.freedesktop.org>; Tue, 27 Aug 2019 09:23:50 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx04.intmail.prod.int.phx2.redhat.com
 [10.5.11.14])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 44B41189DAC6
 for <spice-devel@lists.freedesktop.org>; Tue, 27 Aug 2019 09:23:50 +0000 (UTC)
Received: from fziglio.remote.csb (ovpn-204-114.brq.redhat.com [10.40.204.114])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 8ECBD5D9CC;
 Tue, 27 Aug 2019 09:23:48 +0000 (UTC)
From: Frediano Ziglio <fziglio@redhat.com>
To: spice-devel@lists.freedesktop.org
Date: Tue, 27 Aug 2019 10:22:37 +0100
Message-Id: <20190827092246.10276-21-fziglio@redhat.com>
In-Reply-To: <20190827092246.10276-1-fziglio@redhat.com>
References: <20190827092246.10276-1-fziglio@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.14
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.6.2
 (mx1.redhat.com [10.5.110.63]); Tue, 27 Aug 2019 09:23:50 +0000 (UTC)
Subject: [Spice-devel] [PATCH spice-gtk v4 20/29] test-cd-emu: Add base test
 for cd-emulation
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

SnVzdCBhbGxvY2F0ZSBhbmQgZnJlZSB0byB0ZXN0IGZvciBiYXNlIGxlYWtzIGFuZCByZWZlcmVu
Y2UKY291bnRpbmcuCgpTaWduZWQtb2ZmLWJ5OiBGcmVkaWFubyBaaWdsaW8gPGZ6aWdsaW9AcmVk
aGF0LmNvbT4KLS0tCiB0ZXN0cy9jZC1lbXUuYyAgICB8IDkyICsrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrCiB0ZXN0cy9tZXNvbi5idWlsZCB8ICA0ICsrKwog
MiBmaWxlcyBjaGFuZ2VkLCA5NiBpbnNlcnRpb25zKCspCiBjcmVhdGUgbW9kZSAxMDA2NDQgdGVz
dHMvY2QtZW11LmMKCmRpZmYgLS1naXQgYS90ZXN0cy9jZC1lbXUuYyBiL3Rlc3RzL2NkLWVtdS5j
Cm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwLi43YmYxZmEzYwotLS0gL2Rldi9u
dWxsCisrKyBiL3Rlc3RzL2NkLWVtdS5jCkBAIC0wLDAgKzEsOTIgQEAKKy8qCisgICBDb3B5cmln
aHQgKEMpIDIwMTkgUmVkIEhhdCwgSW5jLgorCisgICBUaGlzIGxpYnJhcnkgaXMgZnJlZSBzb2Z0
d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yCisgICBtb2RpZnkgaXQgdW5kZXIg
dGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljCisgICBMaWNlbnNlIGFz
IHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uOyBlaXRoZXIKKyAgIHZl
cnNpb24gMi4xIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2
ZXJzaW9uLgorCisgICBUaGlzIGxpYnJhcnkgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhh
dCBpdCB3aWxsIGJlIHVzZWZ1bCwKKyAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91
dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCisgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklU
TkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlIEdOVQorICAgTGVzc2VyIEdl
bmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KKworICAgWW91IHNob3VsZCBo
YXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYworICAg
TGljZW5zZSBhbG9uZyB3aXRoIHRoaXMgbGlicmFyeTsgaWYgbm90LCBzZWUgPGh0dHA6Ly93d3cu
Z251Lm9yZy9saWNlbnNlcy8+LgorKi8KKyNpbmNsdWRlIDxnaW8vZ2lvLmg+CisKKyNpbmNsdWRl
ICJ1c2ItZGV2aWNlLWNkLmgiCisjaW5jbHVkZSAidXNiLWVtdWxhdGlvbi5oIgorCitzdGF0aWMg
U3BpY2VVc2JCYWNrZW5kRGV2aWNlICpkZXZpY2UgPSBOVUxMOworCisvKiBzaW1wbGUgdXNiIG1h
bmFnZXIgaG90cGx1ZyBjYWxsYmFjayBlbXVsYXRpb24uICovCitzdGF0aWMgdm9pZAordGVzdF9o
b3RwbHVnX2NhbGxiYWNrKHZvaWQgKnVzZXJfZGF0YSwgU3BpY2VVc2JCYWNrZW5kRGV2aWNlICpk
ZXYsIGdib29sZWFuIGFkZGVkKQoreworICAgIC8vIGlnbm9yZSBub3QgZW11bGF0ZWQgZGV2aWNl
cworICAgIGNvbnN0IFVzYkRldmljZUluZm9ybWF0aW9uICppbmZvID0gc3BpY2VfdXNiX2JhY2tl
bmRfZGV2aWNlX2dldF9pbmZvKGRldik7CisgICAgaWYgKGluZm8tPmJ1cyAhPSBCVVNfTlVNQkVS
X0ZPUl9FTVVMQVRFRF9VU0IpIHsKKyAgICAgICAgcmV0dXJuOworICAgIH0KKworICAgIGlmIChh
ZGRlZCkgeworICAgICAgICBnX2Fzc2VydF9udWxsKGRldmljZSk7CisgICAgICAgIGRldmljZSA9
IHNwaWNlX3VzYl9iYWNrZW5kX2RldmljZV9yZWYoZGV2KTsKKyAgICB9IGVsc2UgeworICAgICAg
ICBnX2Fzc2VydF9ub25udWxsKGRldmljZSk7CisgICAgICAgIGdfYXNzZXJ0KGRldmljZSA9PSBk
ZXYpOworICAgICAgICBzcGljZV91c2JfYmFja2VuZF9kZXZpY2VfdW5yZWYoZGV2KTsKKyAgICAg
ICAgZGV2aWNlID0gTlVMTDsKKyAgICB9Cit9CisKK3N0YXRpYyB2b2lkIG11bHRpcGxlKGNvbnN0
IHZvaWQgKnBhcmFtKQoreworICAgIGd1aW50IGxpbWl0ID0gR1BPSU5URVJfVE9fVUlOVChwYXJh
bSk7CisgICAgQ2RFbXVsYXRpb25QYXJhbXMgcGFyYW1zID0geyAidGVzdC1jZC1lbXUuaXNvIiwg
MSB9OworICAgIEdFcnJvciAqZXJyID0gTlVMTDsKKyAgICBTcGljZVVzYkJhY2tlbmQgKiBiZSA9
IHNwaWNlX3VzYl9iYWNrZW5kX25ldygmZXJyKTsKKyAgICBnX2Fzc2VydF9ub25udWxsKGJlKTsK
KyAgICBnX2Fzc2VydF9udWxsKGVycik7CisgICAgc3BpY2VfdXNiX2JhY2tlbmRfcmVnaXN0ZXJf
aG90cGx1ZyhiZSwgTlVMTCwgdGVzdF9ob3RwbHVnX2NhbGxiYWNrLCAmZXJyKTsKKyAgICBnX2Fz
c2VydF9udWxsKGVycik7CisgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBsaW1pdDsgKytpKSB7Cisg
ICAgICAgIC8vIGFsbG9jYXRlIGEgQ0QgZW11bGF0aW9uIGRldmljZQorICAgICAgICBnX2Fzc2Vy
dF90cnVlKGNyZWF0ZV9lbXVsYXRlZF9jZChiZSwgJnBhcmFtcywgJmVycikpOworICAgICAgICBn
X2Fzc2VydF9udWxsKGVycik7CisgICAgICAgIGdfYXNzZXJ0X25vbm51bGwoZGV2aWNlKTsKKwor
ICAgICAgICAvLyBlbXVsYXRlIGF1dG9tYXRpYyBDRCBlamVjdGlvbiwgdGhpcyBzaG91bGQgcmVs
ZWFzZSB0aGUKKyAgICAgICAgLy8gb2JqZWN0CisgICAgICAgIHNwaWNlX3VzYl9iYWNrZW5kX2Rl
dmljZV9lamVjdChiZSwgZGV2aWNlKTsKKyAgICAgICAgZ19hc3NlcnRfbnVsbChkZXZpY2UpOwor
ICAgIH0KKyAgICBzcGljZV91c2JfYmFja2VuZF9kZXJlZ2lzdGVyX2hvdHBsdWcoYmUpOworICAg
IHNwaWNlX3VzYl9iYWNrZW5kX2RlbGV0ZShiZSk7Cit9CisKK3N0YXRpYyB2b2lkCit3cml0ZV90
ZXN0X2lzbyh2b2lkKQoreworICAgIHVpbnQ4X3Qgc2VjdG9yWzIwNDhdOworICAgIEZJTEUgKmYg
PSBmb3BlbigidGVzdC1jZC1lbXUuaXNvIiwgIndiIik7CisgICAgZ19hc3NlcnRfbm9ubnVsbChm
KTsKKyAgICBtZW1zZXQoc2VjdG9yLCAwLCBzaXplb2Yoc2VjdG9yKSk7CisgICAgc3RyY3B5KChj
aGFyKikgc2VjdG9yLCAic2VjdG9yIDAiKTsKKyAgICBmd3JpdGUoc2VjdG9yLCBzaXplb2Yoc2Vj
dG9yKSwgMSwgZik7CisgICAgZmNsb3NlKGYpOworfQorCitpbnQgbWFpbihpbnQgYXJnYywgY2hh
ciogYXJndltdKQoreworICAgIHdyaXRlX3Rlc3RfaXNvKCk7CisKKyAgICBnX3Rlc3RfaW5pdCgm
YXJnYywgJmFyZ3YsIE5VTEwpOworCisgICAgZ190ZXN0X2FkZF9kYXRhX2Z1bmMoIi9jZC1lbXUv
c2ltcGxlIiwgR1VJTlRfVE9fUE9JTlRFUigxKSwgbXVsdGlwbGUpOworICAgIGdfdGVzdF9hZGRf
ZGF0YV9mdW5jKCIvY2QtZW11L211bHRpcGxlIiwgR1VJTlRfVE9fUE9JTlRFUigxMjgpLCBtdWx0
aXBsZSk7CisKKyAgICByZXR1cm4gZ190ZXN0X3J1bigpOworfQpkaWZmIC0tZ2l0IGEvdGVzdHMv
bWVzb24uYnVpbGQgYi90ZXN0cy9tZXNvbi5idWlsZAppbmRleCA2YzgwNzc2Mi4uMzllYWM5Yzkg
MTAwNjQ0Ci0tLSBhL3Rlc3RzL21lc29uLmJ1aWxkCisrKyBiL3Rlc3RzL21lc29uLmJ1aWxkCkBA
IC0xMCw2ICsxMCwxMCBAQCBpZiBzcGljZV9ndGtfaGFzX3Bob2RhdgogICB0ZXN0c19zb3VyY2Vz
ICs9ICdwaXBlLmMnCiBlbmRpZgogCitpZiBzcGljZV9ndGtfaGFzX3VzYnJlZGlyCisgIHRlc3Rz
X3NvdXJjZXMgKz0gJ2NkLWVtdS5jJworZW5kaWYKKwogaWYgc3BpY2VfZ3RrX2hhc19wb2xraXQK
ICAgdGVzdHNfc291cmNlcyArPSBbCiAgICAgJ3VzYi1hY2wtaGVscGVyLmMnLAotLSAKMi4yMC4x
CgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpTcGljZS1k
ZXZlbCBtYWlsaW5nIGxpc3QKU3BpY2UtZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBz
Oi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vc3BpY2UtZGV2ZWw=
