Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 86B167C63F
	for <lists+spice-devel@lfdr.de>; Wed, 31 Jul 2019 17:22:16 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id DDA5A88E3F;
	Wed, 31 Jul 2019 15:22:14 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 86DA888E3F
 for <spice-devel@lists.freedesktop.org>; Wed, 31 Jul 2019 15:22:13 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx02.intmail.prod.int.phx2.redhat.com
 [10.5.11.12])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 302A1308FC4E
 for <spice-devel@lists.freedesktop.org>; Wed, 31 Jul 2019 15:22:13 +0000 (UTC)
Received: from lub.tlv (dhcp-4-135.tlv.redhat.com [10.35.4.135])
 by smtp.corp.redhat.com (Postfix) with ESMTPS id 5E9B360BEC;
 Wed, 31 Jul 2019 15:22:12 +0000 (UTC)
To: Frediano Ziglio <fziglio@redhat.com>
References: <20190723202114.3076-1-fziglio@redhat.com>
 <b0c0a7f9-4879-f0a0-7fbd-babe166a056d@redhat.com>
 <1327193456.2783683.1563968223942.JavaMail.zimbra@redhat.com>
From: Uri Lublin <uril@redhat.com>
Organization: Red Hat
Message-ID: <9c6baffe-e5a4-c1e0-38bc-26c7f4ce10b8@redhat.com>
Date: Wed, 31 Jul 2019 18:22:10 +0300
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <1327193456.2783683.1563968223942.JavaMail.zimbra@redhat.com>
Content-Language: en-US
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.12
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.43]); Wed, 31 Jul 2019 15:22:13 +0000 (UTC)
Subject: Re: [Spice-devel] [PATCH spice-server v2] red-parse-qxl: Fix QUIC
 images from QXL
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Reply-To: uril@redhat.com
Cc: spice-devel@lists.freedesktop.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

T24gNy8yNC8xOSAyOjM3IFBNLCBGcmVkaWFubyBaaWdsaW8gd3JvdGU6Cj4+Cj4+IEhpIEZyZWRp
YW5vLAo+Pgo+PiBPbiA3LzIzLzE5IDExOjIxIFBNLCBGcmVkaWFubyBaaWdsaW8gd3JvdGU6Cj4+
PiBUaGUgZGVjb2RpbmcgaXMgd3JvbmcsIHRoZSBSZWQgYW5kIFFYTCBzdHJ1Y3R1cmVzIGFyZSBk
aWZmZXJlbnQgc28KPj4+IGNvZGUgaXMgbm90IGRvaW5nIHdoYXQgaXMgZXhwZWN0ZWQuIHJlZC1w
YXJzZS1xeGwgdHJhbnNsYXRlIGZyb20gUVhMCj4+PiB0byBSZWQgc3RydWN0dXJlcywgcmVkLXJl
Y29yZC1xeGwgc2F2ZXMgUmVkIHN0cnVjdHVyZSB0byBmaWxlLAo+Pj4gcmVkLXJlcGxheS1xeGwg
aXMgc3VwcG9zZWQgdG8gcmVhZCBmcm9tIGZpbGUgaW50byBRWEwgZGlyZWN0bHkuCj4+Pgo+Pj4g
SWYgYSBRdWljIGltYWdlIGlzIHN0b3JlZCBpbnNpZGUgUVhMIG1lbW9yeSB0aGUgbGF5b3V0IG9m
IHRoZSBRWExJbWFnZQo+Pj4gaW4gbWVtb3J5IGlzOgo+Pj4gLSBRWExJbWFnZURlc2NyaXB0b3IK
Pj4+IC0gUVhMUVVJQ0RhdGEKPj4+IC0gUVhMRGF0YUNodW5rCj4+PiAtIGZpcnN0IGNodW5rIGRh
dGEKPj4+IGFuZCBhbGwgcmVtYWluaW5nIGRhdGEgaW4gbGlua2VkIFFYTERhdGFDaHVuay4KPj4+
IHJlZF9yZXBsYXlfaW1hZ2Ugd2FzIHJlYWRpbmcgdGhlIGltYWdlIGFzIGRhdGEgd2FzIGFsbCBj
b250YWluZWQgaW4KPj4+IFFYTEltYWdlLT5xdWljLmRhdGEgaG93ZXZlciAiZGF0YSIgc2hvdWxl
IHN0b3JlIHRoZSBmaXJzdCBRWExEYXRhQ2h1bmsKPj4KPj4gc2hvdWxlIC0+IHNob3VsZAo+Pgo+
IAo+IEknbGwgZml4LCB0aGFua3MKPiAKPj4+IGZvbGxvd2VkIGJ5IFFYTERhdGFDaHVuayBkYXRh
Lgo+Pj4gVXNlIHByb3BlciBiYXNlX3NpemUgY2FsbGluZyByZWRfcmVwbGF5X2RhdGFfY2h1bmtz
IGluIG9yZGVyIHRvCj4+PiBpbml0aWFsaXNlIHRoZSBpbWFnZSB3aXRoIHRoZSBmaXJzdCBkYXRh
IGNodW5rIGNvcnJlY3RseS4KPj4KPj4gSSBsaWtlIHRoaXMgcGF0Y2ggYmV0dGVyIHRoZW4gdGhl
IGZpcnN0IG9uZS4KPj4KPj4KPj4KPj4+Cj4+PiBOb3QgZWFzeSB0byByZXByb2R1Y2UsIHRoZSBv
bmx5IGRyaXZlciBpcyBYRERNIHdoaWNoIG1lYW5zIFdpbmRvd3MgWFAKPj4+IG9yIHNpbWlsYXJz
LCBJIGdvdCBubyByZWNvcmRpbmcgd2l0aCBzdWNoIGltYWdlcy4KPj4+Cj4+PiBTaWduZWQtb2Zm
LWJ5OiBGcmVkaWFubyBaaWdsaW8gPGZ6aWdsaW9AcmVkaGF0LmNvbT4KPj4+IC0tLQo+Pj4gICAg
c2VydmVyL3JlZC1yZXBsYXktcXhsLmMgfCAxNyArKysrKysrKysrLS0tLS0tLQo+Pj4gICAgMSBm
aWxlIGNoYW5nZWQsIDEwIGluc2VydGlvbnMoKyksIDcgZGVsZXRpb25zKC0pCj4+Pgo+Pj4gQ2hh
bmdlcyB2MToKPj4+IC0gcmVhbGxvYyB0aGUgYnVmZmVyIGluc2lkZSByZWFkX2JpbmFyeSB3aXRo
IHRoZSBwcm9wZXIgc2l6ZS4KPj4+ICAgICBUaGUgcHJvcGVyIHNpemUgaWYgbm90IGF2YWlsYWJs
ZSBpbiByZWRfcmVwbGF5X2ltYWdlLgo+Pgo+PiBDYW4gd2Ugbm90IGp1c3QgZml4IHRoZSBhYm92
ZSB3aXRob3V0IG1vdmluZyB0aGUgcmVhbGxvYyBjYWxsID8KPj4gQmVmb3JlIG9ubHkgUVVJQyBt
ZW1vcnkgKHdoaWNoIHdhcyBtYWxsb2MnZWQpIHdhcyByZWFsbG9jJ2VkLgo+PiBXaXRoIHRoaXMg
b3RoZXIgbWVtb3J5IG1heSBiZSByZWFsbG9jZWQuCj4gCj4gSSBjaGVja2VkIGFsbCBjYWxscywg
b25seSBmb3IgUVVJQyB0aGUgaW5pdGlhbCBwb2ludGVyIGlzIE5VTEwKPiBzbyBpdCB3aWxsIGdl
dCByZWFsbG9jYXRlZC4KPiAKPj4KPj4gQWxsb2NhdGUgbW9yZSBtZW1vcnkgKGFkZCBzaXplb2Yo
UVhMRGF0YUNodW5rKSkKPj4gICAgICBxeGwgPSByZXBsYXlfcmVhbGxvYyhyZXBsYXksIHF4bCwg
c2l6ZW9mKFFYTEltYWdlRGVzY3JpcHRvcikKPj4gICAgICAgICAgICAgICAgICAgICAgICAgICAr
IHNpemVvZihRWExRVUlDRGF0YSkKPj4gICAgICAgICAgICAgICAgICAgICAgICAgICArIHNpemVv
ZihRWExEYXRhQ2h1bmspCj4+ICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBxeGwtPnF1aWMu
ZGF0YV9zaXplKTsKPj4KPiAKPiBObywgSSByYXRoZXIgcHJlZmVyIHBhdGNoIHZlcnNpb24gMSBp
bnN0ZWFkLiBUaGUgcmVwbGF5IGNvZGUgc2hvdWxkCj4gYXR0ZW1wdCB0byBhbGxvY2F0ZSBtZW1v
cnkgbW9yZSBsaWtlIGRyaXZlcnMuIFRoaXMgd2lsbCBhbHNvIGhlbHAKPiB1c2luZyBzYW5pdGl6
ZXIgdG9vbHMuIEluIHRoaXMgc3BlY2lmaWMgY2FzZSBhbGxvY2F0aW5nIGEgbGFyZ2VyCj4gYnVm
ZmVyIHdpbGwgYXZvaWQgc29tZSBwb3RlbnRpYWwgYnVmZmVyIG92ZXJmbG93IGNoZWNrLgo+IAo+
IExvb2tpbmcgbW9yZSBhdCB0aGUgY29kZSBJIG5vdGVkIHRoYXQgaW4gbWFueSBwbGFjZXMgdGhl
ICJoZWFkZXIiCj4gKGluZm9ybWF0aW9uIGJlZm9yZSBjaHVua3MpIGFyZSByZWFkIGludG8gdGVt
cG9yYXJ5IHZhcmlhYmxlcwo+IHRoZW4gcmF3IGRhdGEgaXMgYWxsb2NhdGVkIHdpdGggdGhlIHN0
cnVjdHVyZSB0aGFuIHRoZSBzdHJ1Y3R1cmUKPiBoZWFkZXIgaXMgZmlsbGVkIChsaWtlIHJlZF9y
ZXBsYXlfY2xpcF9yZWN0cyBmb3IgaW5zdGFuY2UsCj4gYW5vdGhlciBtb3JlIGNvbXBsaWNhdGVk
IG9uZSBpcyByZWRfcmVwbGF5X2N1cnNvcikuCj4gVGhlIGV4Y2VwdGlvbiBpcyByZWRfcmVwbGF5
X2ltYWdlIHdoZXJlIHRoZSAicXhsIiAoaW4gdGhpcyBjYXNlCj4gYSBRWExJbWFnZSB0eXBlKSBp
cyBhbGxvY2F0ZWQgYXQgdGhlIGJlZ2lubmluZy4gT25lIGRpZmZlcmVuY2UKPiBiZXR3ZWVuIGJp
dG1hcCBhbmQgcXVpYyBpcyB0aGF0ICJkYXRhIiBpbiBRWExCaXRtYXAgaXMgYQo+IFFYTFBIWVNJ
Q0FMLCBub3QgYSB1aW50OF90WzBdLgoKWWVzLCB5b3UgYXJlIHJpZ2h0LiBJIHRoaW5rIHlvdXIg
VjEgaW5kZWVkIGZpdHMgYmV0dGVyIHRvCnRoZSBjb2RlIGFyb3VuZC4KCkkgd2FzIGFibGUgdG8g
cmVwcm9kdWNlIHdpdGggcnVubmluZyB3aW5kb3dzIFhQIGd1ZXN0IGFuZApzZXR0aW5nIC1zcGlj
ZSBpbWFnZS1jb21wcmVzc2lvbj1xdWljIG9uIHFlbXUta3ZtIGNvbW1hbmQgbGluZS4KCkl0IGlu
ZGVlZCBjcmFzaGVzIG9uIG1hc3RlciBhbmQgZml4ZWQgYnkgVjEgYW5kIFYyLgoKPiAKPj4gQ2Fs
bCByZWRfcmVwbGF5X2RhdGFfY2h1bmtzIGFzIHlvdSBkbyBpbiB0aGlzIHBhdGNoCj4+IENhbGwg
cmVkX3JlcGxheV9kYXRhX2NodW5rc19mcmVlIGFzIHlvdSBkbyBpbiB0aGlzIHBhdGNoLgo+Pgo+
IAo+IFN1cmVseSB0aGUgb2Zmc2V0IGlzIHdyb25nLCBpcyBleHBlY3RlZCB0byBiZSB0aGUgb2Zm
c2V0IG9mIHJhdwo+IGRhdGEgdG8gd3JpdGUuCgpZZXMsIHRoZSBvZmZzZXQgb2Ygb3JpZ2luYWwg
Y29kZSBpcyB3cm9uZyBidXQgeW91IGZpeGVkIGl0IGluIGJvdGgKdmVyc2lvbnMuCgoKVXJpLgoK
Pj4KPj4+Cj4+PiBkaWZmIC0tZ2l0IGEvc2VydmVyL3JlZC1yZXBsYXktcXhsLmMgYi9zZXJ2ZXIv
cmVkLXJlcGxheS1xeGwuYwo+Pj4gaW5kZXggNjc0ZmVhZTJmLi4xZjFiZDhjMWQgMTAwNjQ0Cj4+
PiAtLS0gYS9zZXJ2ZXIvcmVkLXJlcGxheS1xeGwuYwo+Pj4gKysrIGIvc2VydmVyL3JlZC1yZXBs
YXktcXhsLmMKPj4+IEBAIC0xMTQsNiArMTE0LDkgQEAgc3RhdGljIGlubGluZSB2b2lkIHJlcGxh
eV9mcmVlKFNwaWNlUmVwbGF5ICpyZXBsYXksCj4+PiB2b2lkICptZW0pCj4+PiAgICAKPj4+ICAg
IHN0YXRpYyBpbmxpbmUgdm9pZCAqcmVwbGF5X3JlYWxsb2MoU3BpY2VSZXBsYXkgKnJlcGxheSwg
dm9pZCAqbWVtLCBzaXplX3QKPj4+ICAgIG5fYnl0ZXMpCj4+PiAgICB7Cj4+PiArICAgIGlmICht
ZW0gPT0gTlVMTCkgewo+Pj4gKyAgICAgICAgcmV0dXJuIHJlcGxheV9tYWxsb2MocmVwbGF5LCBu
X2J5dGVzKTsKPj4+ICsgICAgfQo+Pj4gICAgICAgIEdMaXN0ICplbGVtID0gZ19saXN0X2ZpbmQo
cmVwbGF5LT5hbGxvY2F0ZWQsIG1lbSk7Cj4+PiAgICAgICAgZWxlbS0+ZGF0YSA9IGdfcmVhbGxv
YyhtZW0sIG5fYnl0ZXMpOwo+Pj4gICAgICAgIHJldHVybiBlbGVtLT5kYXRhOwo+Pj4gQEAgLTIz
MSw5ICsyMzQsNyBAQCBzdGF0aWMgcmVwbGF5X3QgcmVhZF9iaW5hcnkoU3BpY2VSZXBsYXkgKnJl
cGxheSwgY29uc3QKPj4+IGNoYXIgKnByZWZpeCwgc2l6ZV90ICpzaXoKPj4+ICAgICAgICAgICAg
cmV0dXJuIFJFUExBWV9FUlJPUjsKPj4+ICAgICAgICB9Cj4+PiAgICAKPj4+IC0gICAgaWYgKCpi
dWYgPT0gTlVMTCkgewo+Pj4gLSAgICAgICAgKmJ1ZiA9IHJlcGxheV9tYWxsb2MocmVwbGF5LCAq
c2l6ZSArIGJhc2Vfc2l6ZSk7Cj4+PiAtICAgIH0KPj4+ICsgICAgKmJ1ZiA9IHJlcGxheV9yZWFs
bG9jKHJlcGxheSwgKmJ1ZiwgKnNpemUgKyBiYXNlX3NpemUpOwo+Pj4gICAgI2lmIDAKPj4+ICAg
ICAgICB7Cj4+PiAgICAgICAgICAgIGludCBudW1fcmVhZCA9IGZyZWFkKCpidWYgKyBiYXNlX3Np
emUsICpzaXplLCAxLCBmZCk7Cj4+PiBAQCAtNDk3LDkgKzQ5OCw5IEBAIHN0YXRpYyBRWExJbWFn
ZSAqcmVkX3JlcGxheV9pbWFnZShTcGljZVJlcGxheSAqcmVwbGF5LAo+Pj4gdWludDMyX3QgZmxh
Z3MpCj4+PiAgICAgICAgICAgIGlmIChyZXBsYXktPmVycm9yKSB7Cj4+PiAgICAgICAgICAgICAg
ICByZXR1cm4gTlVMTDsKPj4+ICAgICAgICAgICAgfQo+Pj4gLSAgICAgICAgcXhsID0gcmVwbGF5
X3JlYWxsb2MocmVwbGF5LCBxeGwsIHNpemVvZihRWExJbWFnZURlc2NyaXB0b3IpICsKPj4+IHNp
emVvZihRWExRVUlDRGF0YSkgKwo+Pj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXhs
LT5xdWljLmRhdGFfc2l6ZSk7Cj4+PiAtICAgICAgICBzaXplID0gcmVkX3JlcGxheV9kYXRhX2No
dW5rcyhyZXBsYXksICJxdWljLmRhdGEiLAo+Pj4gKHVpbnQ4X3QqKikmcXhsLT5xdWljLmRhdGEs
IDApOwo+Pj4gKyAgICAgICAgc2l6ZSA9IHJlZF9yZXBsYXlfZGF0YV9jaHVua3MocmVwbGF5LCAi
cXVpYy5kYXRhIiwKPj4+ICh1aW50OF90KiopJnF4bCwKPj4+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHNpemVvZihRWExJbWFnZURlc2NyaXB0b3IpICsKPj4+IHNpemVv
ZihRWExRVUlDRGF0YSkgKwo+Pj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgc2l6ZW9mKFFYTERhdGFDaHVuaykpOwo+Pj4gICAgICAgICAgICBzcGljZV9hc3NlcnQoc2l6
ZSA9PSBxeGwtPnF1aWMuZGF0YV9zaXplKTsKPj4+ICAgICAgICAgICAgYnJlYWs7Cj4+PiAgICAg
ICAgZGVmYXVsdDoKPj4+IEBAIC01MjYsNyArNTI3LDkgQEAgc3RhdGljIHZvaWQgcmVkX3JlcGxh
eV9pbWFnZV9mcmVlKFNwaWNlUmVwbGF5ICpyZXBsYXksCj4+PiBRWExQSFlTSUNBTCBwLCB1aW50
MzJfdCBmCj4+PiAgICAgICAgY2FzZSBTUElDRV9JTUFHRV9UWVBFX1NVUkZBQ0U6Cj4+PiAgICAg
ICAgICAgIGJyZWFrOwo+Pj4gICAgICAgIGNhc2UgU1BJQ0VfSU1BR0VfVFlQRV9RVUlDOgo+Pj4g
LSAgICAgICAgcmVkX3JlcGxheV9kYXRhX2NodW5rc19mcmVlKHJlcGxheSwgcXhsLCAwKTsKPj4+
ICsgICAgICAgIHJlZF9yZXBsYXlfZGF0YV9jaHVua3NfZnJlZShyZXBsYXksIHF4bCwKPj4+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplb2YoUVhMSW1hZ2VEZXNjcmlw
dG9yKSArCj4+PiBzaXplb2YoUVhMUVVJQ0RhdGEpICsKPj4+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBzaXplb2YoUVhMRGF0YUNodW5rKSk7Cj4+PiAgICAgICAgICAgIHF4
bCA9IE5VTEw7Cj4+PiAgICAgICAgICAgIGJyZWFrOwo+Pj4gICAgICAgIGRlZmF1bHQ6Cj4+PgoK
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KU3BpY2UtZGV2
ZWwgbWFpbGluZyBsaXN0ClNwaWNlLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczov
L2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL3NwaWNlLWRldmVs
