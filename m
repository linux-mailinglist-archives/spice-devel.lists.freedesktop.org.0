Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id D2B8B9E57E
	for <lists+spice-devel@lfdr.de>; Tue, 27 Aug 2019 12:14:03 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 06DFA899BE;
	Tue, 27 Aug 2019 10:14:02 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 1041789930
 for <spice-devel@lists.freedesktop.org>; Tue, 27 Aug 2019 10:14:00 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx03.intmail.prod.int.phx2.redhat.com
 [10.5.11.13])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id A3A97368DA
 for <spice-devel@lists.freedesktop.org>; Tue, 27 Aug 2019 10:13:59 +0000 (UTC)
Received: from wingsuit.mxp.redhat.com (unknown [10.32.181.212])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 2A79B6060D
 for <spice-devel@lists.freedesktop.org>; Tue, 27 Aug 2019 10:13:59 +0000 (UTC)
From: Victor Toso <victortoso@redhat.com>
To: spice-devel@lists.freedesktop.org
Date: Tue, 27 Aug 2019 12:13:57 +0200
Message-Id: <20190827101358.18435-1-victortoso@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.13
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.30]); Tue, 27 Aug 2019 10:13:59 +0000 (UTC)
Subject: [Spice-devel] [linux/vd_agent v1 1/2] covscan: check and initialize
 argv's copy
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

RnJvbTogVmljdG9yIFRvc28gPG1lQHZpY3RvcnRvc28uY29tPgoKT3RoZXJ3aXNlIHdlIGdldCBh
IENMQU5HX1dBUk5JTkcgZHVlIGFjY2Vzc2luZyBnYXJiYWdlLgoKQ292c2NhbiByZXBvcnQ6CiA+
IHNwaWNlLXZkYWdlbnQtMC4xOS4wL3NyYy92ZGFnZW50L3ZkYWdlbnQuYzo0NzE6OTogd2Fybmlu
ZzogMXN0IGZ1bmN0aW9uIGNhbGwgYXJndW1lbnQgaXMgYW4gdW5pbml0aWFsaXplZCB2YWx1ZQog
PiAjICAgICAgICBleGVjdnAob3JpZ19hcmd2WzBdLCBvcmlnX2FyZ3YpOwogPiAjICAgICAgICBe
ICAgICAgfn5+fn5+fn5+fn5+CiA+IHNwaWNlLXZkYWdlbnQtMC4xOS4wL3NyYy92ZGFnZW50L3Zk
YWdlbnQuYzo0MjE6MjQ6IG5vdGU6IFN0b3JpbmcgdW5pbml0aWFsaXplZCB2YWx1ZQogPiAjICAg
IGNoYXIgKipvcmlnX2FyZ3YgPSBnX21lbWR1cChhcmd2LCBzaXplb2YoY2hhciopICogKGFyZ2Mr
MSkpOwogPiAjICAgICAgICAgICAgICAgICAgICAgICBefn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+
fn5+fn5+fn5+fn5+fn5+CiA+IHNwaWNlLXZkYWdlbnQtMC4xOS4wL3NyYy92ZGFnZW50L3ZkYWdl
bnQuYzo0MzQ6OTogbm90ZTogQXNzdW1pbmcgJ2Vycm9yJyBpcyBlcXVhbCB0byBOVUxMCiA+ICMg
ICAgaWYgKGVycm9yICE9IE5VTEwpIHsKID4gIyAgICAgICAgXn5+fn5+fn5+fn5+fgogPiBzcGlj
ZS12ZGFnZW50LTAuMTkuMC9zcmMvdmRhZ2VudC92ZGFnZW50LmM6NDM0OjU6IG5vdGU6IFRha2lu
ZyBmYWxzZSBicmFuY2gKID4gIyAgICBpZiAoZXJyb3IgIT0gTlVMTCkgewogPiAjICAgIF4KID4g
c3BpY2UtdmRhZ2VudC0wLjE5LjAvc3JjL3ZkYWdlbnQvdmRhZ2VudC5jOjQ0Mjo5OiBub3RlOiBB
c3N1bWluZyAncG9ydGRldicgaXMgbm90IGVxdWFsIHRvIE5VTEwKID4gIyAgICBpZiAocG9ydGRl
diA9PSBOVUxMKQogPiAjICAgICAgICBefn5+fn5+fn5+fn5+fn4KID4gc3BpY2UtdmRhZ2VudC0w
LjE5LjAvc3JjL3ZkYWdlbnQvdmRhZ2VudC5jOjQ0Mjo1OiBub3RlOiBUYWtpbmcgZmFsc2UgYnJh
bmNoCiA+ICMgICAgaWYgKHBvcnRkZXYgPT0gTlVMTCkKID4gIyAgICBeCiA+IHNwaWNlLXZkYWdl
bnQtMC4xOS4wL3NyYy92ZGFnZW50L3ZkYWdlbnQuYzo0NDU6OTogbm90ZTogQXNzdW1pbmcgJ3Zk
YWdlbnRkX3NvY2tldCcgaXMgbm90IGVxdWFsIHRvIE5VTEwKID4gIyAgICBpZiAodmRhZ2VudGRf
c29ja2V0ID09IE5VTEwpCiA+ICMgICAgICAgIF5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+CiA+IHNw
aWNlLXZkYWdlbnQtMC4xOS4wL3NyYy92ZGFnZW50L3ZkYWdlbnQuYzo0NDU6NTogbm90ZTogVGFr
aW5nIGZhbHNlIGJyYW5jaAogPiAjICAgIGlmICh2ZGFnZW50ZF9zb2NrZXQgPT0gTlVMTCkKID4g
IyAgICBeCiA+IHNwaWNlLXZkYWdlbnQtMC4xOS4wL3NyYy92ZGFnZW50L3ZkYWdlbnQuYzo0NDg6
MzA6IG5vdGU6IEFzc3VtaW5nICdkb19kYWVtb25pemUnIGlzIDAKID4gIyAgICBvcGVubG9nKCJz
cGljZS12ZGFnZW50IiwgZG9fZGFlbW9uaXplID8gTE9HX1BJRCA6IChMT0dfUElEIHwgTE9HX1BF
UlJPUiksCiA+ICMgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF5+fn5+fn5+fn5+fgogPiBz
cGljZS12ZGFnZW50LTAuMTkuMC9zcmMvdmRhZ2VudC92ZGFnZW50LmM6NDQ4OjMwOiBub3RlOiAn
PycgY29uZGl0aW9uIGlzIGZhbHNlCiA+IHNwaWNlLXZkYWdlbnQtMC4xOS4wL3NyYy92ZGFnZW50
L3ZkYWdlbnQuYzo0NTE6OTogbm90ZTogQXNzdW1pbmcgdGhlIGNvbmRpdGlvbiBpcyBmYWxzZQog
PiAjICAgIGlmICghZ19maWxlX3Rlc3QocG9ydGRldiwgR19GSUxFX1RFU1RfRVhJU1RTKSkgewog
PiAjICAgICAgICBefn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fgogPiBz
cGljZS12ZGFnZW50LTAuMTkuMC9zcmMvdmRhZ2VudC92ZGFnZW50LmM6NDUxOjU6IG5vdGU6IFRh
a2luZyBmYWxzZSBicmFuY2gKID4gIyAgICBpZiAoIWdfZmlsZV90ZXN0KHBvcnRkZXYsIEdfRklM
RV9URVNUX0VYSVNUUykpIHsKID4gIyAgICBeCiA+IHNwaWNlLXZkYWdlbnQtMC4xOS4wL3NyYy92
ZGFnZW50L3ZkYWdlbnQuYzo0NTc6OTogbm90ZTogQXNzdW1pbmcgJ2RvX2RhZW1vbml6ZScgaXMg
MAogPiAjICAgIGlmIChkb19kYWVtb25pemUpCiA+ICMgICAgICAgIF5+fn5+fn5+fn5+fgogPiBz
cGljZS12ZGFnZW50LTAuMTkuMC9zcmMvdmRhZ2VudC92ZGFnZW50LmM6NDU3OjU6IG5vdGU6IFRh
a2luZyBmYWxzZSBicmFuY2gKID4gIyAgICBpZiAoZG9fZGFlbW9uaXplKQogPiAjICAgIF4KID4g
c3BpY2UtdmRhZ2VudC0wLjE5LjAvc3JjL3ZkYWdlbnQvdmRhZ2VudC5jOjQ2ODo5OiBub3RlOiBB
c3N1bWluZyAndmVyc2lvbl9taXNtYXRjaCcgaXMgbm90IGVxdWFsIHRvIDAKID4gIyAgICBpZiAo
dmVyc2lvbl9taXNtYXRjaCkgewogPiAjICAgICAgICBefn5+fn5+fn5+fn5+fn5+CiA+IHNwaWNl
LXZkYWdlbnQtMC4xOS4wL3NyYy92ZGFnZW50L3ZkYWdlbnQuYzo0Njg6NTogbm90ZTogVGFraW5n
IHRydWUgYnJhbmNoCiA+ICMgICAgaWYgKHZlcnNpb25fbWlzbWF0Y2gpIHsKID4gIyAgICBeCiA+
IHNwaWNlLXZkYWdlbnQtMC4xOS4wL3NyYy92ZGFnZW50L3ZkYWdlbnQuYzo0NzE6OTogbm90ZTog
MXN0IGZ1bmN0aW9uIGNhbGwgYXJndW1lbnQgaXMgYW4gdW5pbml0aWFsaXplZCB2YWx1ZQogPiAj
ICAgICAgICBleGVjdnAob3JpZ19hcmd2WzBdLCBvcmlnX2FyZ3YpOwogPiAjICAgICAgICBeICAg
ICAgfn5+fn5+fn5+fn5+CiA+ICMgIDQ2OXwgICAgICAgICAgIHN5c2xvZyhMT0dfSU5GTywgIlZl
cnNpb24gbWlzbWF0Y2gsIHJlc3RhcnRpbmciKTsKID4gIyAgNDcwfCAgICAgICAgICAgc2xlZXAo
MSk7CiA+ICMgIDQ3MXwtPiAgICAgICAgIGV4ZWN2cChvcmlnX2FyZ3ZbMF0sIG9yaWdfYXJndik7
CiA+ICMgIDQ3MnwgICAgICAgfQogPiAjICA0NzN8CgpTaWduZWQtb2ZmLWJ5OiBWaWN0b3IgVG9z
byA8dmljdG9ydG9zb0ByZWRoYXQuY29tPgotLS0KIHNyYy92ZGFnZW50L3ZkYWdlbnQuYyB8IDYg
KysrKystCiAxIGZpbGUgY2hhbmdlZCwgNSBpbnNlcnRpb25zKCspLCAxIGRlbGV0aW9uKC0pCgpk
aWZmIC0tZ2l0IGEvc3JjL3ZkYWdlbnQvdmRhZ2VudC5jIGIvc3JjL3ZkYWdlbnQvdmRhZ2VudC5j
CmluZGV4IDBlMmU3M2UuLjk4MmZjNzIgMTAwNjQ0Ci0tLSBhL3NyYy92ZGFnZW50L3ZkYWdlbnQu
YworKysgYi9zcmMvdmRhZ2VudC92ZGFnZW50LmMKQEAgLTQxOCw3ICs0MTgsMTEgQEAgaW50IG1h
aW4oaW50IGFyZ2MsIGNoYXIgKmFyZ3ZbXSkKICAgICBHT3B0aW9uQ29udGV4dCAqY29udGV4dDsK
ICAgICBHRXJyb3IgKmVycm9yID0gTlVMTDsKICAgICBWREFnZW50ICphZ2VudDsKLSAgICBjaGFy
ICoqb3JpZ19hcmd2ID0gZ19tZW1kdXAoYXJndiwgc2l6ZW9mKGNoYXIqKSAqIChhcmdjKzEpKTsK
KyAgICBjaGFyICoqb3JpZ19hcmd2OworCisgICAgZ19yZXR1cm5fdmFsX2lmX2ZhaWwoYXJnYyA+
IDAgJiYgYXJndiAhPSBOVUxMLCAtMSk7CisgICAgb3JpZ19hcmd2ID0gZ19tZW1kdXAoYXJndiwg
c2l6ZW9mKGNoYXIqKSAqIChhcmdjKzEpKTsKKyAgICBvcmlnX2FyZ3ZbYXJnY10gPSBOVUxMOwog
CiAgICAgY29udGV4dCA9IGdfb3B0aW9uX2NvbnRleHRfbmV3KE5VTEwpOwogICAgIGdfb3B0aW9u
X2NvbnRleHRfYWRkX21haW5fZW50cmllcyhjb250ZXh0LCBlbnRyaWVzLCBOVUxMKTsKLS0gCjIu
MjEuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KU3Bp
Y2UtZGV2ZWwgbWFpbGluZyBsaXN0ClNwaWNlLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL3NwaWNlLWRldmVs
