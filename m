Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id A8880F8C4
	for <lists+spice-devel@lfdr.de>; Tue, 30 Apr 2019 14:24:37 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1D62989207;
	Tue, 30 Apr 2019 12:24:36 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 5FA7B891F9
 for <spice-devel@lists.freedesktop.org>; Tue, 30 Apr 2019 12:24:34 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx08.intmail.prod.int.phx2.redhat.com
 [10.5.11.23])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 09ABE3082E51
 for <spice-devel@lists.freedesktop.org>; Tue, 30 Apr 2019 12:24:34 +0000 (UTC)
Received: from fziglio.remote.csb (unknown [10.33.32.22])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 8B5722B3A5;
 Tue, 30 Apr 2019 12:24:30 +0000 (UTC)
From: Frediano Ziglio <fziglio@redhat.com>
To: spice-devel@lists.freedesktop.org
Date: Tue, 30 Apr 2019 13:24:05 +0100
Message-Id: <20190430122419.16241-6-fziglio@redhat.com>
In-Reply-To: <20190430122419.16241-1-fziglio@redhat.com>
References: <20190430122419.16241-1-fziglio@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.84 on 10.5.11.23
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.46]); Tue, 30 Apr 2019 12:24:34 +0000 (UTC)
Subject: [Spice-devel] [PATCH spice-server v6 05/19] sys-socket: Introduce
 some utility to make sockets more portable
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

QmV0d2VlbiBVbml4IGFuZCBXaW5kb3dzIHNvY2tldCBhcmUgcXVpdGUgZGlmZmVyZW50OgotIG9u
IFdpbmRvd3Mgc29ja2V0cyBoYXZlIGEgZGlmZmVyZW50IG5hbWVzcGFjZSBmcm9tIEMgZmlsZQog
IGRlc2NyaXB0b3JzIHNvIHlvdSBjYW4ndCB1c2UgcmVhZC93cml0ZS9jbG9zZSBvciBzaW1pbGFy
IGZ1bmN0aW9uczsKLSBlcnJvcnMgYXJlIG5vdCBzdG9yZWQgaW4gZXJybm8gYnV0IHlvdSBtdXN0
IGJlIHJlYWQvd3JpdGUgdGhlCiAgZXJyb3JzIHdpdGggc3BlY2lmaWMgZnVuY3Rpb247Ci0gc29t
ZXRpbWVzIHNvY2tldHMgYXJlIHB1dCBpbiBub24tYmxvY2tpbmcgbW9kZSBhdXRvbWF0aWNhbGx5
CiAgY2FsbGluZyBzb21lIGZ1bmN0aW9uczsKLSBTT0NLRVQgdHlwZSBpcyA2NCBiaXQgb24gV2lu
ZG93cyA2NCB3aGljaCBkb2VzIG5vdCBmaXQgdGVjaG5pY2FsbHkKICBpbiBhbiBpbnQuIElzIGhv
d2V2ZXIgc2FmZSB0byBhc3N1bWUgdGhlbSB0byBmaXQgaW4gYW4gaW50LgoKU28gZW5jYXBzdWxh
dGUgdGhlIHNvY2tldCBBUElzIGluIHNvbWUgZGVmaW5pdGlvbiB0byBtYWtlIGVhc2llcgphbmQg
bW9yZSBzYWZlIHRvIGRlYWwgd2l0aCB0aGVtLgpXaGVyZSB0aGUgcG9ydGFiaWxpdHkgdG8gV2lu
ZG93cyB3b3VsZCBtYWtlIHRvIGNvZGUgbW9yZSBvZmZ1c2NhdGVkIGEgVW5peApzdHlsZSB3YXMg
cHJlZmVycmVkLiBGb3IgaW5zdGFuY2UgaWYgZXJyb3JzIGFyZSBkZXRlY3RlZCBlcnJubyBpcyBz
ZXQgZnJvbQpXaW5kb3dzIHNvY2tldCBlcnJvciBpbnN0ZWFkIG9mIGNoYW5naW5nIGFsbCBjb2Rl
IGhhbmRsaW5nLgpGb3J0dW5hdGVseSBvbiBXaW5kb3dzIFFlbXUgY29yZSBpbnRlcmZhY2UgYWNj
ZXB0cyBzb2NrZXQgKGJ1dCBub3QKb3RoZXIgdHlwZXMgbGlrZSBDIGZpbGUgZGVzY3JpcHRvcnMh
KS4KClNpZ25lZC1vZmYtYnk6IEZyZWRpYW5vIFppZ2xpbyA8ZnppZ2xpb0ByZWRoYXQuY29tPgpS
ZXZpZXdlZC1ieTogTWFyYy1BbmRyw6kgTHVyZWF1IDxtYXJjYW5kcmUubHVyZWF1QHJlZGhhdC5j
b20+Ci0tLQogc2VydmVyL01ha2VmaWxlLmFtICB8ICAgMiArCiBzZXJ2ZXIvbWVzb24uYnVpbGQg
IHwgICAyICsKIHNlcnZlci9zeXMtc29ja2V0LmMgfCAyMTAgKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysKIHNlcnZlci9zeXMtc29ja2V0LmggfCAxMzkgKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysKIDQgZmlsZXMgY2hhbmdlZCwgMzUzIGluc2VydGlvbnMo
KykKIGNyZWF0ZSBtb2RlIDEwMDY0NCBzZXJ2ZXIvc3lzLXNvY2tldC5jCiBjcmVhdGUgbW9kZSAx
MDA2NDQgc2VydmVyL3N5cy1zb2NrZXQuaAoKZGlmZiAtLWdpdCBhL3NlcnZlci9NYWtlZmlsZS5h
bSBiL3NlcnZlci9NYWtlZmlsZS5hbQppbmRleCAzNGVjMjJhZC4uN2YyNjA2MTIgMTAwNjQ0Ci0t
LSBhL3NlcnZlci9NYWtlZmlsZS5hbQorKysgYi9zZXJ2ZXIvTWFrZWZpbGUuYW0KQEAgLTE2Niw2
ICsxNjYsOCBAQCBsaWJzZXJ2ZXJfbGFfU09VUkNFUyA9CQkJCVwKIAlzdGF0LmgJCQkJCVwKIAlz
dHJlYW0tY2hhbm5lbC5jCQkJXAogCXN0cmVhbS1jaGFubmVsLmgJCQlcCisJc3lzLXNvY2tldC5o
CQkJCVwKKwlzeXMtc29ja2V0LmMJCQkJXAogCXJlZC1zdHJlYW0tZGV2aWNlLmMJCQlcCiAJcmVk
LXN0cmVhbS1kZXZpY2UuaAkJCVwKIAlzdy1jYW52YXMuYwkJCQlcCmRpZmYgLS1naXQgYS9zZXJ2
ZXIvbWVzb24uYnVpbGQgYi9zZXJ2ZXIvbWVzb24uYnVpbGQKaW5kZXggNjMxOTFkNzkuLjM0ZDhl
ZWYxIDEwMDY0NAotLS0gYS9zZXJ2ZXIvbWVzb24uYnVpbGQKKysrIGIvc2VydmVyL21lc29uLmJ1
aWxkCkBAIC0xMzMsNiArMTMzLDggQEAgc3BpY2Vfc2VydmVyX3NvdXJjZXMgPSBbCiAgICdzdGF0
LmgnLAogICAnc3RyZWFtLWNoYW5uZWwuYycsCiAgICdzdHJlYW0tY2hhbm5lbC5oJywKKyAgJ3N5
cy1zb2NrZXQuYycsCisgICdzeXMtc29ja2V0LmgnLAogICAncmVkLXN0cmVhbS1kZXZpY2UuYycs
CiAgICdyZWQtc3RyZWFtLWRldmljZS5oJywKICAgJ3N3LWNhbnZhcy5jJywKZGlmZiAtLWdpdCBh
L3NlcnZlci9zeXMtc29ja2V0LmMgYi9zZXJ2ZXIvc3lzLXNvY2tldC5jCm5ldyBmaWxlIG1vZGUg
MTAwNjQ0CmluZGV4IDAwMDAwMDAwLi41YWM2MjdiNAotLS0gL2Rldi9udWxsCisrKyBiL3NlcnZl
ci9zeXMtc29ja2V0LmMKQEAgLTAsMCArMSwyMTAgQEAKKy8qIC0qLSBNb2RlOiBDOyBjLWJhc2lj
LW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqLworLyoKKyAgIENvcHlyaWdo
dCAoQykgMjAxOCBSZWQgSGF0LCBJbmMuCisKKyAgIFRoaXMgbGlicmFyeSBpcyBmcmVlIHNvZnR3
YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBpdCBhbmQvb3IKKyAgIG1vZGlmeSBpdCB1bmRlciB0
aGUgdGVybXMgb2YgdGhlIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMKKyAgIExpY2Vuc2UgYXMg
cHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlcgorICAgdmVy
c2lvbiAyLjEgb2YgdGhlIExpY2Vuc2UsIG9yIChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZl
cnNpb24uCisKKyAgIFRoaXMgbGlicmFyeSBpcyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0
IGl0IHdpbGwgYmUgdXNlZnVsLAorICAgYnV0IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0
IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKKyAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRO
RVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUgR05VCisgICBMZXNzZXIgR2Vu
ZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxzLgorCisgICBZb3Ugc2hvdWxkIGhh
dmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGljCisgICBM
aWNlbnNlIGFsb25nIHdpdGggdGhpcyBsaWJyYXJ5OyBpZiBub3QsIHNlZSA8aHR0cDovL3d3dy5n
bnUub3JnL2xpY2Vuc2VzLz4uCisqLworI2luY2x1ZGUgPGNvbmZpZy5oPgorCisjaW5jbHVkZSA8
ZXJybm8uaD4KKyNpbmNsdWRlIDxmY250bC5oPgorI2luY2x1ZGUgPHN0ZGJvb2wuaD4KKyNpbmNs
dWRlIDxzdHJpbmcuaD4KKyNpbmNsdWRlIDxzeXMvdHlwZXMuaD4KKyNpZm5kZWYgX1dJTjMyCisj
aW5jbHVkZSA8YXJwYS9pbmV0Lmg+CisjaW5jbHVkZSA8bmV0aW5ldC9pbi5oPgorI2luY2x1ZGUg
PG5ldGluZXQvaXAuaD4KKyNpbmNsdWRlIDxuZXRpbmV0L3RjcC5oPgorI2luY2x1ZGUgPHN5cy9z
b2NrZXQuaD4KKyNlbmRpZgorCisjaW5jbHVkZSA8Y29tbW9uL2xvZy5oPgorCisjaW5jbHVkZSAi
c3lzLXNvY2tldC5oIgorCisjaWZkZWYgX1dJTjMyCisvLyBNYXAgV2luZG93cyBzb2NrZXQgZXJy
b3JzIHRvIHN0YW5kYXJkIEMgb25lcworLy8gU2VlIGh0dHBzOi8vbXNkbi5taWNyb3NvZnQuY29t
L2VuLXVzL2xpYnJhcnkvd2luZG93cy9kZXNrdG9wL21zNzQwNjY4KHY9dnMuODUpLmFzcHgKK3Zv
aWQgc29ja2V0X3dpbjMyX3NldF9lcnJubyh2b2lkKQoreworICAgIGludCBlcnIgPSBFUElQRTsg
Ly8gZGVmYXVsdAorICAgIHN3aXRjaCAoV1NBR2V0TGFzdEVycm9yKCkpIHsKKyAgICBjYXNlIFdT
QUVXT1VMREJMT0NLOgorICAgIGNhc2UgV1NBRUlOUFJPR1JFU1M6CisgICAgICAgIGVyciA9IEVB
R0FJTjsKKyAgICAgICAgYnJlYWs7CisgICAgY2FzZSBXU0FFSU5UUjoKKyAgICAgICAgZXJyID0g
RUlOVFI7CisgICAgICAgIGJyZWFrOworICAgIGNhc2UgV1NBRUJBREY6CisgICAgICAgIGVyciA9
IEVCQURGOworICAgICAgICBicmVhazsKKyAgICBjYXNlIFdTQV9JTlZBTElEX0hBTkRMRToKKyAg
ICBjYXNlIFdTQV9JTlZBTElEX1BBUkFNRVRFUjoKKyAgICBjYXNlIFdTQUVJTlZBTDoKKyAgICAg
ICAgZXJyID0gRUlOVkFMOworICAgICAgICBicmVhazsKKyAgICBjYXNlIFdTQUVOT1RTT0NLOgor
ICAgICAgICBlcnIgPSBFTk9UU09DSzsKKyAgICAgICAgYnJlYWs7CisgICAgY2FzZSBXU0FfTk9U
X0VOT1VHSF9NRU1PUlk6CisgICAgICAgIGVyciA9IEVOT01FTTsKKyAgICAgICAgYnJlYWs7Cisg
ICAgY2FzZSBXU0FFUFJPVE9OT1NVUFBPUlQ6CisgICAgY2FzZSBXU0FFU09DS1ROT1NVUFBPUlQ6
CisgICAgY2FzZSBXU0FFT1BOT1RTVVBQOgorICAgIGNhc2UgV1NBRVBGTk9TVVBQT1JUOgorICAg
IGNhc2UgV1NBRUFGTk9TVVBQT1JUOgorICAgIGNhc2UgV1NBVkVSTk9UU1VQUE9SVEVEOgorICAg
ICAgICBlcnIgPSBFTk9UU1VQOworICAgICAgICBicmVhazsKKyAgICBjYXNlIFdTQUVGQVVMVDoK
KyAgICAgICAgZXJyID0gRUZBVUxUOworICAgICAgICBicmVhazsKKyAgICBjYXNlIFdTQUVBQ0NF
UzoKKyAgICAgICAgZXJyID0gRUFDQ0VTOworICAgICAgICBicmVhazsKKyAgICBjYXNlIFdTQUVN
RklMRToKKyAgICAgICAgZXJyID0gRU1GSUxFOworICAgICAgICBicmVhazsKKyAgICBjYXNlIFdT
QUVOQU1FVE9PTE9ORzoKKyAgICAgICAgZXJyID0gRU5BTUVUT09MT05HOworICAgICAgICBicmVh
azsKKyAgICBjYXNlIFdTQUVOT1RFTVBUWToKKyAgICAgICAgZXJyID0gRU5PVEVNUFRZOworICAg
ICAgICBicmVhazsKKyAgICBjYXNlIFdTQV9PUEVSQVRJT05fQUJPUlRFRDoKKyAgICBjYXNlIFdT
QUVDQU5DRUxMRUQ6CisgICAgY2FzZSBXU0FfRV9DQU5DRUxMRUQ6CisgICAgICAgIGVyciA9IEVD
QU5DRUxFRDsKKyAgICAgICAgYnJlYWs7CisgICAgY2FzZSBXU0FFQUREUklOVVNFOgorICAgICAg
ICBlcnIgPSBFQUREUklOVVNFOworICAgICAgICBicmVhazsKKyAgICBjYXNlIFdTQUVORVRET1dO
OgorICAgICAgICBlcnIgPSBFTkVURE9XTjsKKyAgICAgICAgYnJlYWs7CisgICAgY2FzZSBXU0FF
TkVUVU5SRUFDSDoKKyAgICAgICAgZXJyID0gRU5FVFVOUkVBQ0g7CisgICAgICAgIGJyZWFrOwor
ICAgIGNhc2UgV1NBRU5FVFJFU0VUOgorICAgICAgICBlcnIgPSBFTkVUUkVTRVQ7CisgICAgICAg
IGJyZWFrOworICAgIGNhc2UgV1NBRUNPTk5BQk9SVEVEOgorICAgICAgICBlcnIgPSBFQ09OTkFC
T1JURUQ7CisgICAgICAgIGJyZWFrOworICAgIGNhc2UgV1NBRUNPTk5SRVNFVDoKKyAgICAgICAg
ZXJyID0gRUNPTk5SRVNFVDsKKyAgICAgICAgYnJlYWs7CisgICAgY2FzZSBXU0FFSVNDT05OOgor
ICAgICAgICBlcnIgPSBFSVNDT05OOworICAgICAgICBicmVhazsKKyAgICBjYXNlIFdTQUVOT1RD
T05OOgorICAgICAgICBlcnIgPSBFTk9UQ09OTjsKKyAgICAgICAgYnJlYWs7CisgICAgY2FzZSBX
U0FFVElNRURPVVQ6CisgICAgICAgIGVyciA9IEVUSU1FRE9VVDsKKyAgICAgICAgYnJlYWs7Cisg
ICAgY2FzZSBXU0FFQ09OTlJFRlVTRUQ6CisgICAgICAgIGVyciA9IEVDT05OUkVGVVNFRDsKKyAg
ICAgICAgYnJlYWs7CisgICAgY2FzZSBXU0FFSE9TVFVOUkVBQ0g6CisgICAgICAgIGVyciA9IEVI
T1NUVU5SRUFDSDsKKyAgICAgICAgYnJlYWs7CisgICAgY2FzZSBXU0FFREVTVEFERFJSRVE6Cisg
ICAgICAgIGVyciA9IEVERVNUQUREUlJFUTsKKyAgICAgICAgYnJlYWs7CisgICAgY2FzZSBXU0FF
TVNHU0laRToKKyAgICAgICAgZXJyID0gRU1TR1NJWkU7CisgICAgICAgIGJyZWFrOworICAgIGNh
c2UgV1NBRVBST1RPVFlQRToKKyAgICAgICAgZXJyID0gRVBST1RPVFlQRTsKKyAgICAgICAgYnJl
YWs7CisgICAgY2FzZSBXU0FFTk9QUk9UT09QVDoKKyAgICAgICAgZXJyID0gRU5PUFJPVE9PUFQ7
CisgICAgICAgIGJyZWFrOworICAgIGNhc2UgV1NBRUFERFJOT1RBVkFJTDoKKyAgICAgICAgZXJy
ID0gRUFERFJOT1RBVkFJTDsKKyAgICAgICAgYnJlYWs7CisgICAgY2FzZSBXU0FFTk9CVUZTOgor
ICAgICAgICBlcnIgPSBFTk9CVUZTOworICAgICAgICBicmVhazsKKyAgICAvLyBUT0RPCisgICAg
Y2FzZSBXU0FFU1RBTEU6CisgICAgY2FzZSBXU0FFRElTQ09OOgorICAgIGNhc2UgV1NBX0lPX0lO
Q09NUExFVEU6CisgICAgY2FzZSBXU0FfSU9fUEVORElORzoKKyAgICBjYXNlIFdTQUVBTFJFQURZ
OgorICAgIGNhc2UgV1NBRVNIVVRET1dOOgorICAgIGNhc2UgV1NBRVRPT01BTllSRUZTOgorICAg
IGNhc2UgV1NBRUxPT1A6CisgICAgY2FzZSBXU0FFSE9TVERPV046CisgICAgY2FzZSBXU0FFUFJP
Q0xJTToKKyAgICBjYXNlIFdTQUVVU0VSUzoKKyAgICBjYXNlIFdTQUVEUVVPVDoKKyAgICBjYXNl
IFdTQUVSRU1PVEU6CisgICAgY2FzZSBXU0FTWVNOT1RSRUFEWToKKyAgICBjYXNlIFdTQU5PVElO
SVRJQUxJU0VEOgorICAgIGNhc2UgV1NBRU5PTU9SRToKKyAgICBjYXNlIFdTQUVJTlZBTElEUFJP
Q1RBQkxFOgorICAgIGNhc2UgV1NBRUlOVkFMSURQUk9WSURFUjoKKyAgICBjYXNlIFdTQUVQUk9W
SURFUkZBSUxFRElOSVQ6CisgICAgY2FzZSBXU0FTWVNDQUxMRkFJTFVSRToKKyAgICBjYXNlIFdT
QVNFUlZJQ0VfTk9UX0ZPVU5EOgorICAgIGNhc2UgV1NBVFlQRV9OT1RfRk9VTkQ6CisgICAgY2Fz
ZSBXU0FfRV9OT19NT1JFOgorICAgIGNhc2UgV1NBRVJFRlVTRUQ6CisgICAgY2FzZSBXU0FIT1NU
X05PVF9GT1VORDoKKyAgICBjYXNlIFdTQVRSWV9BR0FJTjoKKyAgICBjYXNlIFdTQU5PX1JFQ09W
RVJZOgorICAgIGNhc2UgV1NBTk9fREFUQToKKyAgICBjYXNlIFdTQV9RT1NfUkVDRUlWRVJTOgor
ICAgIGNhc2UgV1NBX1FPU19TRU5ERVJTOgorICAgIGNhc2UgV1NBX1FPU19OT19TRU5ERVJTOgor
ICAgIGNhc2UgV1NBX1FPU19OT19SRUNFSVZFUlM6CisgICAgY2FzZSBXU0FfUU9TX1JFUVVFU1Rf
Q09ORklSTUVEOgorICAgIGNhc2UgV1NBX1FPU19BRE1JU1NJT05fRkFJTFVSRToKKyAgICBjYXNl
IFdTQV9RT1NfUE9MSUNZX0ZBSUxVUkU6CisgICAgY2FzZSBXU0FfUU9TX0JBRF9TVFlMRToKKyAg
ICBjYXNlIFdTQV9RT1NfQkFEX09CSkVDVDoKKyAgICBjYXNlIFdTQV9RT1NfVFJBRkZJQ19DVFJM
X0VSUk9SOgorICAgIGNhc2UgV1NBX1FPU19HRU5FUklDX0VSUk9SOgorICAgIGNhc2UgV1NBX1FP
U19FU0VSVklDRVRZUEU6CisgICAgY2FzZSBXU0FfUU9TX0VGTE9XU1BFQzoKKyAgICBjYXNlIFdT
QV9RT1NfRVBST1ZTUEVDQlVGOgorICAgIGNhc2UgV1NBX1FPU19FRklMVEVSU1RZTEU6CisgICAg
Y2FzZSBXU0FfUU9TX0VGSUxURVJUWVBFOgorICAgIGNhc2UgV1NBX1FPU19FRklMVEVSQ09VTlQ6
CisgICAgY2FzZSBXU0FfUU9TX0VPQkpMRU5HVEg6CisgICAgY2FzZSBXU0FfUU9TX0VGTE9XQ09V
TlQ6CisgICAgY2FzZSBXU0FfUU9TX0VVTktPV05QU09CSjoKKyAgICBjYXNlIFdTQV9RT1NfRVBP
TElDWU9CSjoKKyAgICBjYXNlIFdTQV9RT1NfRUZMT1dERVNDOgorICAgIGNhc2UgV1NBX1FPU19F
UFNGTE9XU1BFQzoKKyAgICBjYXNlIFdTQV9RT1NfRVBTRklMVEVSU1BFQzoKKyAgICBjYXNlIFdT
QV9RT1NfRVNETU9ERU9CSjoKKyAgICBjYXNlIFdTQV9RT1NfRVNIQVBFUkFURU9CSjoKKyAgICBj
YXNlIFdTQV9RT1NfUkVTRVJWRURfUEVUWVBFOgorICAgICAgICBicmVhazsKKyAgICB9CisgICAg
ZXJybm8gPSBlcnI7Cit9CisKK1NQSUNFX0NPTlNUUlVDVE9SX0ZVTkMoc29ja2V0X3dpbjMyX2lu
aXQpCit7CisgICAgV1NBREFUQSB3c2FEYXRhOworICAgIFdTQVN0YXJ0dXAoTUFLRVdPUkQoMiwg
MiksICZ3c2FEYXRhKTsKK30KKyNlbmRpZgpkaWZmIC0tZ2l0IGEvc2VydmVyL3N5cy1zb2NrZXQu
aCBiL3NlcnZlci9zeXMtc29ja2V0LmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAw
MDAuLjY1MDYyNTcxCi0tLSAvZGV2L251bGwKKysrIGIvc2VydmVyL3N5cy1zb2NrZXQuaApAQCAt
MCwwICsxLDEzOSBAQAorLyoKKyAgIENvcHlyaWdodCAoQykgMjAxOCBSZWQgSGF0LCBJbmMuCisK
KyAgIFRoaXMgbGlicmFyeSBpcyBmcmVlIHNvZnR3YXJlOyB5b3UgY2FuIHJlZGlzdHJpYnV0ZSBp
dCBhbmQvb3IKKyAgIG1vZGlmeSBpdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBMZXNzZXIg
R2VuZXJhbCBQdWJsaWMKKyAgIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3
YXJlIEZvdW5kYXRpb247IGVpdGhlcgorICAgdmVyc2lvbiAyLjEgb2YgdGhlIExpY2Vuc2UsIG9y
IChhdCB5b3VyIG9wdGlvbikgYW55IGxhdGVyIHZlcnNpb24uCisKKyAgIFRoaXMgbGlicmFyeSBp
cyBkaXN0cmlidXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAorICAgYnV0
IFdJVEhPVVQgQU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkg
b2YKKyAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9T
RS4gIFNlZSB0aGUgR05VCisgICBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9y
ZSBkZXRhaWxzLgorCisgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBH
TlUgTGVzc2VyIEdlbmVyYWwgUHVibGljCisgICBMaWNlbnNlIGFsb25nIHdpdGggdGhpcyBsaWJy
YXJ5OyBpZiBub3QsIHNlZSA8aHR0cDovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uCisqLworCisv
KiBTbWFsbCBjb21wYXRpYmlsaXR5IGxheWVyIGZvciBzb2NrZXRzLCBtb3N0bHkgdG8gbWFrZSBl
YXNpZXIgcG9ydGFiaWxpdHkKKyAqIGZvciBXaW5kb3dzIGJ1dCB3aXRob3V0IGxvb3NpbmcgcGVy
Zm9ybWFuY2VzIHVuZGVyIFVuaXgsIHRoZSBtb3N0IHN1cHBvcnRlZAorICogc3lzdGVtICovCisj
aWZuZGVmIFJFRF9TWVNfU09DS0VUX0hfCisjZGVmaW5lIFJFRF9TWVNfU09DS0VUX0hfCisKKyNp
Zm5kZWYgX1dJTjMyCisjICBpbmNsdWRlIDxzeXMvc29ja2V0Lmg+CisKKyNkZWZpbmUgc29ja2V0
X3JlYWQoc29jaywgYnVmLCBsZW4pIHJlYWQoc29jaywgYnVmLCBsZW4pCisjZGVmaW5lIHNvY2tl
dF93cml0ZShzb2NrLCBidWYsIGxlbikgd3JpdGUoc29jaywgYnVmLCBsZW4pCisjZGVmaW5lIHNv
Y2tldF93cml0ZXYoc29jaywgaW92LCBuKSB3cml0ZXYoc29jaywgaW92LCBuKQorI2RlZmluZSBz
b2NrZXRfY2xvc2Uoc29jaykgY2xvc2Uoc29jaykKKworI2Vsc2UKKyMgIGluY2x1ZGUgPHdpbnNv
Y2syLmg+CisjICBpbmNsdWRlIDx3aW5kb3dzLmg+Cit0eXBlZGVmIGludCBzb2NrbGVuX3Q7CisK
Ky8vIHRoaXMgZGVmaW5pdGlvbiBpcyBBQkkgY29tcGF0aWJsZSB3aXRoIFdTQUJVRgorc3RydWN0
IGlvdmVjIHsKKyAgICB1X2xvbmcgaW92X2xlbjsKKyAgICB2b2lkIEZBUiAqaW92X2Jhc2U7Cit9
OworCit2b2lkIHNvY2tldF93aW4zMl9zZXRfZXJybm8odm9pZCk7CisKK3N0YXRpYyBpbmxpbmUg
c3NpemVfdCBzb2NrZXRfcmVhZChpbnQgc29jaywgdm9pZCAqYnVmLCBzaXplX3QgY291bnQpCit7
CisgICAgc3NpemVfdCByZXMgPSByZWN2KHNvY2ssIGJ1ZiwgY291bnQsIDApOworICAgIGlmIChy
ZXMgPCAwKSB7CisgICAgICAgIHNvY2tldF93aW4zMl9zZXRfZXJybm8oKTsKKyAgICB9CisgICAg
cmV0dXJuIHJlczsKK30KKworc3RhdGljIGlubGluZSBzc2l6ZV90IHNvY2tldF93cml0ZShpbnQg
c29jaywgY29uc3Qgdm9pZCAqYnVmLCBzaXplX3QgY291bnQpCit7CisgICAgc3NpemVfdCByZXMg
PSBzZW5kKHNvY2ssIGJ1ZiwgY291bnQsIDApOworICAgIGlmIChyZXMgPCAwKSB7CisgICAgICAg
IHNvY2tldF93aW4zMl9zZXRfZXJybm8oKTsKKyAgICB9CisgICAgcmV0dXJuIHJlczsKK30KKwor
c3RhdGljIGlubGluZSBzc2l6ZV90IHNvY2tldF93cml0ZXYoaW50IHNvY2ssIGNvbnN0IHN0cnVj
dCBpb3ZlYyAqaW92LCBpbnQgbl9pb3YpCit7CisgICAgRFdPUkQgc2VudDsKKyAgICBpbnQgcmVz
ID0gV1NBU2VuZChzb2NrLCAoTFBXU0FCVUYpIGlvdiwgbl9pb3YsICZzZW50LCAwLCBOVUxMLCBO
VUxMKTsKKyAgICBpZiAocmVzKSB7CisgICAgICAgIHNvY2tldF93aW4zMl9zZXRfZXJybm8oKTsK
KyAgICAgICAgcmV0dXJuIC0xOworICAgIH0KKyAgICByZXR1cm4gc2VudDsKK30KKworI2RlZmlu
ZSBzb2NrZXRfY2xvc2Uoc29jaykgY2xvc2Vzb2NrZXQoc29jaykKKworI2RlZmluZSBTSFVUX1JE
V1IgU0RfQk9USAorCitzdGF0aWMgaW5saW5lIGludAorc29ja2V0X2dldHNvY2tvcHQoaW50IHNv
Y2ssIGludCBsdmwsIGludCB0eXBlLCB2b2lkICp2YWx1ZSwgc29ja2xlbl90ICpsZW4pCit7Cisg
ICAgaW50IHJlcyA9IGdldHNvY2tvcHQoc29jaywgbHZsLCB0eXBlLCB2YWx1ZSwgbGVuKTsKKyAg
ICBpZiAocmVzIDwgMCkgeworICAgICAgICBzb2NrZXRfd2luMzJfc2V0X2Vycm5vKCk7CisgICAg
fQorICAgIHJldHVybiByZXM7Cit9CisjdW5kZWYgZ2V0c29ja29wdAorI2RlZmluZSBnZXRzb2Nr
b3B0IHNvY2tldF9nZXRzb2Nrb3B0CisKK3N0YXRpYyBpbmxpbmUgaW50Citzb2NrZXRfc2V0c29j
a29wdChpbnQgc29jaywgaW50IGx2bCwgaW50IHR5cGUsIGNvbnN0IHZvaWQgKnZhbHVlLCBzb2Nr
bGVuX3QgbGVuKQoreworICAgIGludCByZXMgPSBzZXRzb2Nrb3B0KHNvY2ssIGx2bCwgdHlwZSwg
dmFsdWUsIGxlbik7CisgICAgaWYgKHJlcyA8IDApIHsKKyAgICAgICAgc29ja2V0X3dpbjMyX3Nl
dF9lcnJubygpOworICAgIH0KKyAgICByZXR1cm4gcmVzOworfQorI3VuZGVmIHNldHNvY2tvcHQK
KyNkZWZpbmUgc2V0c29ja29wdCBzb2NrZXRfc2V0c29ja29wdAorCitzdGF0aWMgaW5saW5lIGlu
dAorc29ja2V0X2xpc3RlbihpbnQgc29jaywgaW50IGJhY2tsb2cpCit7CisgICAgaW50IHJlcyA9
IGxpc3Rlbihzb2NrLCBiYWNrbG9nKTsKKyAgICBpZiAocmVzIDwgMCkgeworICAgICAgICBzb2Nr
ZXRfd2luMzJfc2V0X2Vycm5vKCk7CisgICAgfQorICAgIHJldHVybiByZXM7Cit9CisjdW5kZWYg
bGlzdGVuCisjZGVmaW5lIGxpc3RlbiBzb2NrZXRfbGlzdGVuCisKK3N0YXRpYyBpbmxpbmUgaW50
Citzb2NrZXRfYmluZChpbnQgc29jaywgY29uc3Qgc3RydWN0IHNvY2thZGRyICphZGRyLCBpbnQg
YWRkcmxlbikKK3sKKyAgICBpbnQgcmVzID0gYmluZChzb2NrLCBhZGRyLCBhZGRybGVuKTsKKyAg
ICBpZiAocmVzIDwgMCkgeworICAgICAgICBzb2NrZXRfd2luMzJfc2V0X2Vycm5vKCk7CisgICAg
fQorICAgIHJldHVybiByZXM7Cit9CisjdW5kZWYgYmluZAorI2RlZmluZSBiaW5kIHNvY2tldF9i
aW5kCisKK3N0YXRpYyBpbmxpbmUgaW50Citzb2NrZXRfYWNjZXB0KGludCBzb2NrLCBzdHJ1Y3Qg
c29ja2FkZHIgKmFkZHIsIGludCAqYWRkcmxlbikKK3sKKyAgICBpbnQgcmVzID0gYWNjZXB0KHNv
Y2ssIGFkZHIsIGFkZHJsZW4pOworICAgIGlmIChyZXMgPCAwKSB7CisgICAgICAgIHNvY2tldF93
aW4zMl9zZXRfZXJybm8oKTsKKyAgICB9CisgICAgcmV0dXJuIHJlczsKK30KKyN1bmRlZiBhY2Nl
cHQKKyNkZWZpbmUgYWNjZXB0IHNvY2tldF9hY2NlcHQKKyNlbmRpZgorCisjZW5kaWYgLy8gUkVE
X1NZU19TT0NLRVRfSF8KLS0gCjIuMjAuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KU3BpY2UtZGV2ZWwgbWFpbGluZyBsaXN0ClNwaWNlLWRldmVsQGxp
c3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFu
L2xpc3RpbmZvL3NwaWNlLWRldmVs
