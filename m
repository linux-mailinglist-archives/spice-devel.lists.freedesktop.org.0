Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 9FF9D7BE08
	for <lists+spice-devel@lfdr.de>; Wed, 31 Jul 2019 12:09:48 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id C9EC2898E1;
	Wed, 31 Jul 2019 10:09:46 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mail-oi1-f178.google.com (mail-oi1-f178.google.com
 [209.85.167.178])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4F22C898E1
 for <spice-devel@lists.freedesktop.org>; Wed, 31 Jul 2019 10:09:45 +0000 (UTC)
Received: by mail-oi1-f178.google.com with SMTP id q4so21118510oij.3
 for <spice-devel@lists.freedesktop.org>; Wed, 31 Jul 2019 03:09:45 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=Y0dXuMxvyISnpR4y7dUkO//OiLEeJUArSh4eMo5pHqo=;
 b=Z8J7hxAmYUek1kXsZw4oXZ4O84YABWEMO3+p2AP9EUAbJnIlBzWcDkz7lCHagwfS1B
 3moOjb4kNwFPPPrMadcif2BRaB2i6ZUnS0LGheFhkFOeHbvOoM4UVzWfRqxJNM08cA50
 IgjlL0UEqHHN2i99uwy2u5u1SerBZaLKooyRJo/KC2eo2FQRKSAxgJV7nd78FqVbeW7m
 ch56bJBX2BJUDaJM/pi8eTNSBUDIWTjP1rj87CUA/CckDbcaF7dC5+UeogGqBuX5R8KN
 kW41VDJVhTBv9ls+ljMcIMOxC1cTgDnssOmEPRjLX4Po3qG8cw9HaVOuzN2q64P3lynN
 4GeA==
X-Gm-Message-State: APjAAAU2frRZoY2SiXV8vy/IQDsgq+3UZjv5kuGo9nUOtHfZZjpc4leS
 8Hxqfzc+f/xxwJ6HYjuQ3gxgLQJrD20QalTwpcDncWdE6hg=
X-Google-Smtp-Source: APXvYqy2pW87RUhZfhwb5CU1B2F0MGZ1W/jHbz/jhXaFAs68TzV6fxZbK2CNf6+MCQ6hmum00PUSdWSvDkUNbakP1wU=
X-Received: by 2002:a05:6808:99c:: with SMTP id
 a28mr57027187oic.143.1564567784501; 
 Wed, 31 Jul 2019 03:09:44 -0700 (PDT)
MIME-Version: 1.0
References: <20190731083636.21493-1-kpouget@redhat.com>
 <20190731083636.21493-3-kpouget@redhat.com>
 <2121688751.3798926.1564566634959.JavaMail.zimbra@redhat.com>
In-Reply-To: <2121688751.3798926.1564566634959.JavaMail.zimbra@redhat.com>
From: Kevin Pouget <kpouget@redhat.com>
Date: Wed, 31 Jul 2019 12:09:33 +0200
Message-ID: <CADJ1XR2aULCXOdrZWa8UXs=2aY+dbhzD-ZATC+4mCU4Q4oN7mA@mail.gmail.com>
To: Frediano Ziglio <fziglio@redhat.com>
Subject: Re: [Spice-devel] [RFC spice-streaming-agent 1/2] gst-plugin: allow
 the instantiation of multiple GST encoder plugins
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: spice-devel <spice-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

T24gV2VkLCBKdWwgMzEsIDIwMTkgYXQgMTE6NTAgQU0gRnJlZGlhbm8gWmlnbGlvIDxmemlnbGlv
QHJlZGhhdC5jb20+IHdyb3RlOgo+Cj4gPgo+ID4gV2l0aCB0aGlzIHBhdGNoLCBzcGljZS1zdHJl
YW1pbmctYWdlbnQgY2FuIGJlIGxhdW5jaGVkIHdpdGggbXVsdGlwbGUKPiA+IEdzdHJlYW1lciB2
aWRlbyBjb2RlY3MgZW5hYmxlZDoKPiA+Cj4gPiA+IHNwaWNlLXN0cmVhbWluZy1hZ2VudCAtYyBn
c3QuY29kZWM9dnA4IC1jIGdzdC5jb2RlYz12cDkgLi4uCj4gPiAtLS0KPiA+ICBzcmMvZ3N0LXBs
dWdpbi5jcHAgfCA1MCArKysrKysrKysrKysrKysrKysrKysrKysrKysrLS0tLS0tLS0tLS0tLS0t
LS0tCj4gPiAgMSBmaWxlIGNoYW5nZWQsIDMxIGluc2VydGlvbnMoKyksIDE5IGRlbGV0aW9ucygt
KQo+ID4KPiA+IGRpZmYgLS1naXQgYS9zcmMvZ3N0LXBsdWdpbi5jcHAgYi9zcmMvZ3N0LXBsdWdp
bi5jcHAKPiA+IGluZGV4IDk4NThiZWIuLjYyNTJlNDIgMTAwNjQ0Cj4gPiAtLS0gYS9zcmMvZ3N0
LXBsdWdpbi5jcHAKPiA+ICsrKyBiL3NyYy9nc3QtcGx1Z2luLmNwcAo+ID4gQEAgLTEwMiw3ICsx
MDIsNyBAQCBjbGFzcyBHc3RyZWFtZXJQbHVnaW4gZmluYWw6IHB1YmxpYyBQbHVnaW4KPiA+ICBw
dWJsaWM6Cj4gPiAgICAgIEZyYW1lQ2FwdHVyZSAqQ3JlYXRlQ2FwdHVyZSgpIG92ZXJyaWRlOwo+
ID4gICAgICB1bnNpZ25lZCBSYW5rKCkgb3ZlcnJpZGU7Cj4gPiAtICAgIHZvaWQgUGFyc2VPcHRp
b25zKGNvbnN0IENvbmZpZ3VyZU9wdGlvbiAqb3B0aW9ucyk7Cj4gPiArICAgIHZvaWQgUGFyc2VP
cHRpb25zKGNvbnN0IENvbmZpZ3VyZU9wdGlvbiAqb3B0aW9ucywgU3BpY2VWaWRlb0NvZGVjVHlw
ZQo+ID4gY29kZWMpOwo+ID4gICAgICBTcGljZVZpZGVvQ29kZWNUeXBlIFZpZGVvQ29kZWNUeXBl
KCkgY29uc3Qgb3ZlcnJpZGUgewo+ID4gICAgICAgICAgcmV0dXJuIHNldHRpbmdzLmNvZGVjOwo+
ID4gICAgICB9Cj4gPiBAQCAtNDE5LDggKzQxOSwxMCBAQCB1bnNpZ25lZCBHc3RyZWFtZXJQbHVn
aW46OlJhbmsoKQo+ID4gICAgICByZXR1cm4gU29mdHdhcmVNaW47Cj4gPiAgfQo+ID4KPiA+IC12
b2lkIEdzdHJlYW1lclBsdWdpbjo6UGFyc2VPcHRpb25zKGNvbnN0IENvbmZpZ3VyZU9wdGlvbiAq
b3B0aW9ucykKPiA+ICt2b2lkIEdzdHJlYW1lclBsdWdpbjo6UGFyc2VPcHRpb25zKGNvbnN0IENv
bmZpZ3VyZU9wdGlvbiAqb3B0aW9ucywKPiA+IFNwaWNlVmlkZW9Db2RlY1R5cGUgY29kZWMpCj4g
PiAgewo+ID4gKyAgICBzZXR0aW5ncy5jb2RlYyA9IGNvZGVjOwo+ID4gKwo+ID4gICAgICBmb3Ig
KDsgb3B0aW9ucy0+bmFtZTsgKytvcHRpb25zKSB7Cj4gPiAgICAgICAgICBjb25zdCBzdGQ6OnN0
cmluZyBuYW1lID0gb3B0aW9ucy0+bmFtZTsKPiA+ICAgICAgICAgIGNvbnN0IHN0ZDo6c3RyaW5n
IHZhbHVlID0gb3B0aW9ucy0+dmFsdWU7Cj4gPiBAQCAtNDMxLDIwICs0MzMsNiBAQCB2b2lkIEdz
dHJlYW1lclBsdWdpbjo6UGFyc2VPcHRpb25zKGNvbnN0IENvbmZpZ3VyZU9wdGlvbgo+ID4gKm9w
dGlvbnMpCj4gPiAgICAgICAgICAgICAgfSBjYXRjaCAoY29uc3Qgc3RkOjpleGNlcHRpb24gJmUp
IHsKPiA+ICAgICAgICAgICAgICAgICAgdGhyb3cgc3RkOjpydW50aW1lX2Vycm9yKCJJbnZhbGlk
IHZhbHVlICciICsgdmFsdWUgKyAiJyBmb3IKPiA+ICAgICAgICAgICAgICAgICAgb3B0aW9uICdm
cmFtZXJhdGUnLiIpOwo+ID4gICAgICAgICAgICAgIH0KPiA+IC0gICAgICAgIH0gZWxzZSBpZiAo
bmFtZSA9PSAiZ3N0LmNvZGVjIikgewo+ID4gLSAgICAgICAgICAgIGlmICh2YWx1ZSA9PSAiaDI2
NCIpIHsKPiA+IC0gICAgICAgICAgICAgICAgc2V0dGluZ3MuY29kZWMgPSBTUElDRV9WSURFT19D
T0RFQ19UWVBFX0gyNjQ7Cj4gPiAtICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAidnA5
Iikgewo+ID4gLSAgICAgICAgICAgICAgICBzZXR0aW5ncy5jb2RlYyA9IFNQSUNFX1ZJREVPX0NP
REVDX1RZUEVfVlA5Owo+ID4gLSAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gInZwOCIp
IHsKPiA+IC0gICAgICAgICAgICAgICAgc2V0dGluZ3MuY29kZWMgPSBTUElDRV9WSURFT19DT0RF
Q19UWVBFX1ZQODsKPiA+IC0gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09ICJtanBlZyIp
IHsKPiA+IC0gICAgICAgICAgICAgICAgc2V0dGluZ3MuY29kZWMgPSBTUElDRV9WSURFT19DT0RF
Q19UWVBFX01KUEVHOwo+ID4gLSAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gImgyNjUi
KSB7Cj4gPiAtICAgICAgICAgICAgICAgIHNldHRpbmdzLmNvZGVjID0gU1BJQ0VfVklERU9fQ09E
RUNfVFlQRV9IMjY1Owo+ID4gLSAgICAgICAgICAgIH0gZWxzZSB7Cj4gPiAtICAgICAgICAgICAg
ICAgIHRocm93IHN0ZDo6cnVudGltZV9lcnJvcigiSW52YWxpZCB2YWx1ZSAnIiArIHZhbHVlICsg
IicgZm9yCj4gPiBvcHRpb24gJ2dzdC5jb2RlYycuIik7Cj4gPiAtICAgICAgICAgICAgfQo+ID4g
ICAgICAgICAgfSBlbHNlIGlmIChuYW1lID09ICJnc3QuZW5jb2RlciIpIHsKPiA+ICAgICAgICAg
ICAgICBzZXR0aW5ncy5lbmNvZGVyID0gdmFsdWU7Cj4gPiAgICAgICAgICB9Cj4gPiBAQCAtNDU5
LDExICs0NDcsMzUgQEAgU1BJQ0VfU1RSRUFNSU5HX0FHRU5UX1BMVUdJTihhZ2VudCkKPiA+ICB7
Cj4gPiAgICAgIGdzdF9pbml0KG51bGxwdHIsIG51bGxwdHIpOwo+ID4KPiA+IC0gICAgYXV0byBw
bHVnaW4gPSBzdGQ6Om1ha2Vfc2hhcmVkPEdzdHJlYW1lclBsdWdpbj4oKTsKPiA+ICsgICAgYXV0
byBvcHRpb25zID0gYWdlbnQtPk9wdGlvbnMoKTsKPiA+ICsgICAgZm9yICg7IG9wdGlvbnMtPm5h
bWU7ICsrb3B0aW9ucykgewo+ID4gKyAgICAgICAgY29uc3Qgc3RkOjpzdHJpbmcgbmFtZSA9IG9w
dGlvbnMtPm5hbWU7Cj4gPiArICAgICAgICBjb25zdCBzdGQ6OnN0cmluZyB2YWx1ZSA9IG9wdGlv
bnMtPnZhbHVlOwo+ID4KPiA+IC0gICAgcGx1Z2luLT5QYXJzZU9wdGlvbnMoYWdlbnQtPk9wdGlv
bnMoKSk7Cj4gPiArICAgICAgICBpZiAobmFtZSA9PSAiZ3N0LmNvZGVjIikgewo+ID4gKyAgICAg
ICAgICAgIFNwaWNlVmlkZW9Db2RlY1R5cGUgY29kZWNfdHlwZTsKPiA+ICsgICAgICAgICAgICBp
ZiAodmFsdWUgPT0gIm1qcGVnIikgewo+ID4gKyAgICAgICAgICAgICAgICBjb2RlY190eXBlID0g
U1BJQ0VfVklERU9fQ09ERUNfVFlQRV9NSlBFRzsKPiA+ICsgICAgICAgICAgICB9IGVsc2UgaWYg
KHZhbHVlID09ICJoMjY0Iikgewo+ID4gKyAgICAgICAgICAgICAgICBjb2RlY190eXBlID0gU1BJ
Q0VfVklERU9fQ09ERUNfVFlQRV9IMjY0Owo+ID4gKyAgICAgICAgICAgIH0gZWxzZSBpZiAodmFs
dWUgPT0gImgyNjUiKSB7Cj4gPiArICAgICAgICAgICAgICAgIGNvZGVjX3R5cGUgPSBTUElDRV9W
SURFT19DT0RFQ19UWVBFX0gyNjU7Cj4gPiArICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9
PSAidnA4Iikgewo+ID4gKyAgICAgICAgICAgICAgICBjb2RlY190eXBlID0gU1BJQ0VfVklERU9f
Q09ERUNfVFlQRV9WUDg7Cj4gPiArICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAidnA5
Iikgewo+ID4gKyAgICAgICAgICAgICAgICBjb2RlY190eXBlID0gU1BJQ0VfVklERU9fQ09ERUNf
VFlQRV9WUDk7Cj4gPiArICAgICAgICAgICAgfSBlbHNlIHsKPiA+ICsgICAgICAgICAgICAgICAg
dGhyb3cgc3RkOjpydW50aW1lX2Vycm9yKCJJbnZhbGlkIHZhbHVlICciICsgdmFsdWUgKyAiJyBm
b3IKPiA+IG9wdGlvbiAnZ3N0LmNvZGVjJy4iKTsKPiA+ICsgICAgICAgICAgICB9Cj4gPiArCj4g
PiArICAgICAgICAgICAgYXV0byBwbHVnaW4gPSBzdGQ6Om1ha2Vfc2hhcmVkPEdzdHJlYW1lclBs
dWdpbj4oKTsKPiA+ICsgICAgICAgICAgICBwbHVnaW4tPlBhcnNlT3B0aW9ucyhhZ2VudC0+T3B0
aW9ucygpLCBjb2RlY190eXBlKTsKPiA+ICsgICAgICAgICAgICBhZ2VudC0+UmVnaXN0ZXIocGx1
Z2luKTsKPiA+ICsgICAgICAgIH0KPiA+ICsgICAgfQo+ID4KPiA+IC0gICAgYWdlbnQtPlJlZ2lz
dGVyKHBsdWdpbik7Cj4gPiArICAgIC8vIG5vIGRlZmF1bHQgdmFsdWUgYXQgdGhlIG1vbWVudAo+
ID4gKyAgICAvLyAodXNlZCB0byBiZSBoMjY0LCBzZWUgR3N0cmVhbWVyRW5jb2RlclNldHRpbmdz
Ojpjb2RlYykKPiA+Cj4gPiAgICAgIHJldHVybiB0cnVlOwo+ID4gIH0KPgo+IEkgZGlkbid0IHRl
c3QgaXQgYnV0IGl0IG1ha2VzIHBlcmZlY3RseSBzZW5zZS4KPiBPbiB0aGUgb3RoZXIgaGFuZCBJ
J20gd29uZGVyaW5nIHdoYXQgd2lsbCBoYXBwZW4gdG8gdGhlIG90aGVyCj4gcGFyYW1ldGVycy4g
VGhleSB3aWxsIGJlICJicm9hZGNhc3RlZCIgdG8gYWxsIHBsdWdpbnMuCj4gRm9yICJmcmFtZXJh
dGUiIGlzIGZpbmUgYnV0IHdoYXQgd2lsbCBoYXBwZW4gaWYgeW91IHNwZWNpZnkKPiBhbHNvIHBy
b3BlcnRpZXMgKGdzdC5wcm9wKSBhbmQgZW5jb2RlciAoZ3N0LmVuY29kZXIpID8KCm1heWJlIHRo
ZSBlYXNpZXN0IGlzIHRvIHNheSB0aGF0ICJnc3QuWFhYPVlZWSIgYXBwbGllcyB0byBhbGwgdGhl
CmNvZGVjcywgYW5kICJnc3QuQ09ERUMuWFhYPVlZWSIgaXMgb25seSBmb3Igb25lIGNvZGVjLCB3
aXRoClhYWD1wcm9wfGVuY29kZXIgYXQgdGhlIG1vbWVudC4KX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KU3BpY2UtZGV2ZWwgbWFpbGluZyBsaXN0ClNwaWNl
LWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL3NwaWNlLWRldmVs
