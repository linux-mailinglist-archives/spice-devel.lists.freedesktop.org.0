Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 91A5859647
	for <lists+spice-devel@lfdr.de>; Fri, 28 Jun 2019 10:43:13 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 6F7BD6E89A;
	Fri, 28 Jun 2019 08:43:11 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mail-vs1-f54.google.com (mail-vs1-f54.google.com
 [209.85.217.54])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 6E2EE6E89A
 for <spice-devel@lists.freedesktop.org>; Fri, 28 Jun 2019 08:43:10 +0000 (UTC)
Received: by mail-vs1-f54.google.com with SMTP id m8so3547229vsj.0
 for <spice-devel@lists.freedesktop.org>; Fri, 28 Jun 2019 01:43:10 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc:content-transfer-encoding;
 bh=lIUY6zqXc/dJR3IWu7j1IgLdlpLH53TtByolWkp7yDk=;
 b=rE+JFQZk0jOJMi11Ec7K9/cF2ywgtbkY16TXVTeaPldFDqUeshJj7m6ifJeUWM7lhV
 xBfirFtFnauYIEaWXGKjHgS2vi6bSCeFMCKzTsz12HDuFnc8pMpCoCMTHi56T7pk4pVy
 7Sv3hpUllpnTxbBbVWZay6cXVnHYRoC++8y5m5MBWtt991ScHeazMyFJmw5Kz4rxWVF8
 u54QKFI3uP702auJWv+f+y5PuZHZA5WhqlAqmAqERZh/tcbSaOiKcpeY2377a/8IQFai
 gppyDzh2KiuFBAlvKB3vvDs99jnUzFdQ7L3b7K2suqNN3HC/2tuv3RLW192LVA8kXDYw
 bfOg==
X-Gm-Message-State: APjAAAVFWYjj+Ib6kVmgeu8xktOF69hIMJqksFOwtXucweLseD0sEytq
 ro+0tn6UGOs1u7lMgtcu2NDxTTgPgWYpteHHuYamyA==
X-Google-Smtp-Source: APXvYqzFoYSkzq85Td3bzraZcyYJEAgmcX9kEYiI4TCjz8HrhKld9zIBPFhnr7e88SOL/9ZdiLO5znjuc8Nohp2QOv8=
X-Received: by 2002:a67:6988:: with SMTP id e130mr5689302vsc.197.1561711389508; 
 Fri, 28 Jun 2019 01:43:09 -0700 (PDT)
MIME-Version: 1.0
References: <9e4beeec69d6cb7be4e5c9d4b292f2761d5158e2.1561506197.git.fgouget@free.fr>
In-Reply-To: <9e4beeec69d6cb7be4e5c9d4b292f2761d5158e2.1561506197.git.fgouget@free.fr>
From: Kevin Pouget <kpouget@redhat.com>
Date: Fri, 28 Jun 2019 10:42:58 +0200
Message-ID: <CADJ1XR2r35koRoyXomLip8nJGvmSEyF2Vpd1ftNTf+OcE=UKOQ@mail.gmail.com>
To: Francois Gouget <fgouget@codeweavers.com>
Subject: Re: [Spice-devel] [client v3 1/6] channel-display: Minimize the
 stream lag by ignoring the server one
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Spice devel <spice-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

SGVsbG8sCgpJIGxvb2tlZCBhdCB0aGUgcGF0Y2ggc2VyaWVzIGFuZCB0cmllZCB0byBkZXNjcmli
ZSBpdHMgbW9kaWZpY2F0aW9ucwp0byBiZXR0ZXIgdW5kZXJzdGFuZCBpdDsgeW91J2xsIGZpbmQg
YmVsb3cgbXkgY29tbWVudHMuIEZyYW7Dp29pcywgaW4KdGhlIG1pZGRsZSBvZiBpdCB5b3UnbGwg
ZmluZCBhIGZldyBuaXQgc3VnZ2VzdGlvbnMgdG8gaW1wcm92ZSB0aGUKcmVhZGFiaWxpdHkuCgp0
aGUgcGF0Y2ggZm9yIGRpc3BsYXlfaGFuZGxlX3N0cmVhbV9kYXRhKCkgaXMgb2J2aW91c2x5IHRo
ZSBtb3N0CmNvbXBsZXgsIEknbGwgaGF2ZSB0byBnZXQgYmFjayB0byBpdCwgaXQgd2FzIHRvbyBj
b21wbGljYXRlZCBmb3IgbXkKZmlyc3QgZ2xhbmNlCgoKYmVzdCByZWdhcmRzLAoKS2V2aW4KCi0t
LQoKCiMgW2NsaWVudCx2MywxLzZdIGNoYW5uZWwtZGlzcGxheTogTWluaW1pemUgdGhlIHN0cmVh
bSBsYWcgYnkgaWdub3JpbmcKdGhlIHNlcnZlciBvbmUKCmRpc3BsYXlfaGFuZGxlX3N0cmVhbV9k
YXRhOiBjb21wbGV4IG1vZGlmaWNhdGlvbnMuCgp0aGVzZSB0d28gYXNwZWN0cyBvZiB0aGUgY29t
bWl0IG1lc3NhZ2UgYXJlIGNvbXBsZXggdG8gdW5kZXJzdGFuZCBpbgp0aGUgY29kZToKCj4gLSBE
ZWxheSBhZGp1c3RtZW50cyBhcmUgZ3JhZHVhbCwgc3BlZWRpbmcgdXAgb3Igc2xvd2luZyBkb3du
IHZpZGVvCj4gICBwbGF5YmFjayB1bnRpbCB0aGUgYXZlcmFnZSBtYXJnaW4gbWF0Y2hlcyB0aGUg
dGFyZ2V0IGxhZy4KPiAtIENoYW5nZXMgaW4gdGhlIGF2ZXJhZ2UgbWFyZ2luIGFyZSB0cmFja2Vk
IChzZWUgbWFyZ2luX3NwcmVhZCkgdG8KPiAgIGF2b2lkIG51ZGdpbmcgdGhlIGRlbGF5IGluIHJl
c3BvbnNlIHRvIG1pbm9yIHJhbmRvbSB2YXJpYXRpb25zLgoKCnRoaXMgZnVuY3Rpb24gaXMgY2Fs
bGVkIDQgdGltZXMsIGl0IGNvdWxkIGJlIGZhY3Rvcml6ZWQgdG8gaW1wcm92ZSB0aGUKcmVhZGFi
aWxpdHk6Cgo+IHNwaWNlX21tdGltZV9kaWZmKG9wLT5tdWx0aV9tZWRpYV90aW1lLCBzdC0+bGFz
dF9mcmFtZV9tbV90aW1lKQoKCisgICAgICAgIC8qIEluaXRpYWxpemUgdGhlIHRpbWUgb2Zmc2V0
LgorICAgICAgICAgKiBOb3RlIHRoYXQgVU5TRVRfQ0xJRU5UX1RJTUVfT0ZGU0VUIGNhbiBiZSBh
bnkgdmFsdWUgaW5jbHVkaW5nIDAKKyAgICAgICAgICogd2hpY2ggaXMgY29tbW9uIG9uIGxvdy1s
YXRlbmN5IExBTnMuIEJ1dCBhbiB1bmxpa2VseSBvbmUgaGVscHMgd2hlbgorICAgICAgICAgKiBh
ZGRpbmcgYSB0cmFjZSBpbiB0aGlzIGNvZGVwYXRoLgorICAgICAgICAgKi8KCkkgdGhpbmsgcy9V
TlNFVF9DTElFTlRfVElNRV9PRkZTRVQvcy0+Y2xpZW50X3RpbWVfb2Zmc2V0LyB3b3VsZCBtYWtl
Cm1vcmUgc2Vuc2UgaW4gdGhpcyBjb21tZW50LgoKCnN0cmVhbV9nZXRfdGltZShzdHJlYW0pOiBm
dW5jdGlvbiBtb2RpZmllZCB0byByZXR1cm4gdGhlIHN5c3RlbQptb25vdG9uaWMgdGltZSBpbnN0
ZWFkIG9mIHNwaWNlX3Nlc3Npb25fZ2V0X21tX3RpbWUoc2Vzc2lvbiksIHdoaWNoCndhcyB0aGUg
c3lzdGVtIHRpbWUgKyBzZXNzaW9uLT5tbV90aW1lX29mZnNldC4KCgpzcGljZV9zZXNzaW9uX21t
dGltZTJjbGllbnRfdGltZTogbmV3IGZ1bmN0aW9uIHRoYXQgKGEpIHVwZGF0ZQpzZXNzaW9uLT5w
cml2LT5jbGllbnRfdGltZV9vZmZzZXQsIHdoaWNoIGlzIHRoZSBvZmZzZXQgYmV0d2VlbiB0aGUK
Y2xpZW50IChsb2NhbCkgdGltZSBhbmQgdGhlIHBhY2tldHMgKHNlcnZlcikgdGltZTsgKGIpIHJl
dHVybnMgdGhlCmNsaWVudC1hZGp1c3RlZCBwYWNrZXQgbW10aW1lLgoKVGhlIGRlZmF1bHQgb2Zm
c2V0IChub3ctbW10aW1lKSBpcyB1c2VkIGlmCi0gbm8gb2Zmc2V0IGlzIGN1cnJlbnRseSBzZXQK
LSB0aGUgY3VycmVudCBvZmZzZXQgaXMgPiArLy0gMXMKLSB0aGUgY3VycmVudCBvZmZzZXQgaXMg
PiB0aGUgZGVmYXVsdCBvZmZzZXQKCi0tLQoKIyBbY2xpZW50LHYzLDIvNl0gcGxheWJhY2s6IFVz
ZSB0aGUgYXVkaW8gdGltZXN0YW1wcyBmb3IgdGhlIGdsb2JhbAptbXRpbWUgY29udmVyc2lvbgoK
dGhpcyBwYXRjaCBjYWxscyBzcGljZV9zZXNzaW9uX21tdGltZTJjbGllbnRfdGltZSgpIHdoZW4g
YXVkaW8gcGFja2V0cwphcnJpdmUsIHRvIGltcHJvdmUgdGhlIGFjY3VyYWN5IG9mIHNlc3Npb24t
Pm1tX3RpbWVfb2Zmc2V0CgotLS0KCiMgW2NsaWVudCx2MywzLzZdIGNoYW5uZWwtZGlzcGxheTog
Tm8gbmVlZCB0byByZWNoZWR1bGUgb24gbW10aW1lIG9mZnNldApjaGFuZ2VzCgp0aGlzIHBhdGNo
IHJlbW92ZXMgdGhlIHJlc2NoZWR1bGluZyBmdW5jdGlvbnM6CgpzdHJ1Y3QgVmlkZW9EZWNvZGVy
Ojp2b2lkICgqcmVzY2hlZHVsZSkoKTogdGhpcyBmdW5jdGlvbiBwb2ludGVyIHdhcwogIHVzZWQg
dG8gZm9yY2UgdGhlIHJlc2NoZWR1bGUgb2YgYSBmcmFtZSAoPSBtb2RpZnkgdGhlIHRpbWVyIHRo
YXQKICB3aWxsIGNhbGwgZGlzcGxheV9mcmFtZSgpIGF0IHRoZSByaWdodCB0aW1lKQoKc3BpY2Vf
Z3N0X2RlY29kZXJfcmVzY2hlZHVsZSgpOiBpZGVtCm1qcGVnX2RlY29kZXJfcmVzY2hlZHVsZSgp
OiBpZGVtCgpkaXNwbGF5X3Nlc3Npb25fbW1fdGltZV9yZXNldF9jYigpOiBoYW5kbGVyIGZvciAi
bW0tdGltZS1yZXNldCIKc2lnbmFsLiBUaGlzIHNpZ25hbCB3YXMgdXNlZCB3aGVuIGEgbWlncmF0
aW9uIGJldHdlZW4gdHdvIHNwaWNlCnNlcnZlcnMgd2l0aCBkaWZmZXJlbnQgbW0tdGltZXMgb2Nj
dXJlZC4gSW4gdGhpcyBjYXNlLAp2aWRlb19kZWNvZGVyLT5yZXNjaGVkdWxlKCkgd2FzIGNhbGxl
ZCB0byByZXNjaGVkdWxlIHRoZSBkaXNwbGF5IG9mCnRoZSBjdXJyZW50IGZyYW1lLgoKVGhlICJt
bS10aW1lLXJlc2V0IiBzaWduYWwgaXMgZW1pdHRlZCB3aGVuIGN1cnJlbnRfdGltZSA8IG9sZF90
aW1lIG9yCmN1cnJlbnRfdGltZSA+IG9sZF90aW1lK01NX1RJTUVfRElGRl9SRVNFVF9USFJFU0gg
KDAuNSBzZWMpLgoKVGhlICJtbS10aW1lLXJlc2V0IiBzaWduYWwgbWlnaHQgc3RpbGwgYmUgcmVs
ZXZhbnQsIGFsdGhvdWdoIGF0IHRoZQptb21lbnQgaXMgaGFzIG5vIGNsaWVudC4KCi0tLQoKIyBb
Y2xpZW50LHYzLDQvNl0gY2hhbm5lbC1kaXNwbGF5OiBSZW1vdmUgcGxheWJhY2tfc3luY19kcm9w
c19zZXFfbGVuCgp0aGlzIHBhdGNoIHJlbW92ZXMgInN0cnVjdApkaXNwbGF5X3N0cmVhbTo6cGxh
eWJhY2tfc3luY19kcm9wc19zZXFfbGVuIiBmaWVsZCBhbmQgdGhlIG9wZXJhdGlvbnMKcmVsYXRl
ZCB0byBpdDoKCmRlZmluZSBTVFJFQU1fUExBWUJBQ0tfU1lOQ19EUk9QX1NFUV9MRU5fTElNSVQg
NQoKZGlzcGxheV9zdHJlYW1fc3RhdHNfc2F2ZSgpOiB0aGlzIGZ1bmN0aW9uIHdhcyBjb3VudGlu
ZyB0aGUgbnVtYmVyIG9mCmZyYW1lIGRyb3BwZWQgaW4gc2VxdWVuY2UuCgpkaXNwbGF5X2hhbmRs
ZV9zdHJlYW1fZGF0YSgpOiBpZiB0aGUgYWRhcHRpdmUgc3RyZWFtaW5nIHdhcyBlbmFibGVkCmFu
ZCB0aGUgY291bnQgb2YgY29uc2VjdXRpdmUgZnJhbWVzIGRyb3BwZWQgd2FzIGFib3ZlIGEgdGhy
ZXNob2xkLCBpdApjYWxsZWQgc3BpY2Vfc2Vzc2lvbl9zeW5jX3BsYXliYWNrX2xhdGVuY3koKSBh
bmQgcmVzZXQgdGhlIGRyb3AgY291bnQuCgpzcGljZV9zZXNzaW9uX3N5bmNfcGxheWJhY2tfbGF0
ZW5jeSgpOiByZW1vdmVkLiBJZiB0aGVyZSB3ZXJlIGFuCmFjdGl2ZSBwbGF5YmFjayBjaGFubmVs
LCBpdCBjYWxsZWQKc3BpY2VfcGxheWJhY2tfY2hhbm5lbF9zeW5jX2xhdGVuY3koKS4KCnNwaWNl
X3BsYXliYWNrX2NoYW5uZWxfc3luY19sYXRlbmN5KCk6IHJlbW92ZWQuIFRoaXMgZnVuY3Rpb24K
dHJpZ2dlcmVkIHRoZSAibWluLWxhdGVuY3kiIGNoYW5uZWwgc2lnbmFsLgoKVGhpcyAibWluLWxh
dGVuY3kiIGNoYW5uZWwgc2lnbmFsIGlzIHVzZWQgZm9yIHNwaWNlLXB1bHNlIHRvIHJlYWN0IHRv
CnRoZSBtaW4tbGF0ZW5jeSBhdHRyaWJ1dGUgY2hhbmdlLgoKSXQgaXMgbm90IGNsZWFyIHRvIG1l
IHdoZW4gcmVhZGluZyB0aGlzIHBhdGNoIHdoZXJlIHRoZSBtaW4tbGF0ZW5jeQp3YXMgY2hhbmdl
ZCwgaW4gcmVnYXJkcyB0byB0aGUgZnJhbWUgZHJvcHBlZC4KCi0tLQoKIyBbY2xpZW50LHYzLDUv
Nl0gc3BpY2Utc2Vzc2lvbjogS2VlcCB0cmFjayBvZiB0aGUgZ2xvYmFsIHN0cmVhbXMgbGFnCgpz
dHJ1Y3QgVmlkZW9EZWNvZGVyOjpkZWNvZGluZ190aW1lOiBuZXcgZmllbGQKCm1qcGVnX2RlY29k
ZXJfZGVjb2RlX2ZyYW1lOiBjb21wdXRlIGFuZCBzYXZlIHRoZSBtb3ZpbmcgYXZlcmFnZSBvZiB0
aGUKZGVjb2RpbmcgdGltZSAoZGVjb2Rlci0+YmFzZS5kZWNvZGluZ190aW1lKQpzaW5rX2V2ZW50
X3Byb2JlOiBpZGVtCgpzcGljZV9kaXNwbGF5X2NoYW5uZWxfZ2V0X2xhZzogbmV3IGZ1bmN0aW9u
IGNvbXB1dGluZyB0aGUgbWF4CmRlY29kZXJfbGFnIGZvciBhbGwgdGhlIGNoYW5uZWwgc3RyZWFt
cy4gQ291bGQgYmUgbW9kaWZpZWQgdG8gdXNlCmd1YXJkcyBpbnN0ZWFkIG9mIGJpZyBpZigpIHsu
Li59CgpkaXNwbGF5X2hhbmRsZV9zdHJlYW1fZGF0YTogaWYgc3BpY2Vfc2Vzc2lvbl9sYWdfbmVl
ZHNfdXBkYXRlKCksIGNhbGwKc3BpY2Vfc2Vzc2lvbl91cGRhdGVfbGFnKCkuIEhhcyBhICdGSVhN
RScuCgpzcGljZV9wbGF5YmFja19jaGFubmVsX2dldF9sYWc6IHJlbmFtZWQgZnJvbQpzcGljZV9w
bGF5YmFja19jaGFubmVsX2dldF9sYXRlbmN5LgoKc3BpY2VfcGxheWJhY2tfY2hhbm5lbF9zZXRf
ZGVsYXk6IHVwZGF0ZWQgdG8gdXBkYXRlIHRoZSBsYWcgaWYKbmVjZXNzYXJ5LgoKc3BpY2Vfc2Vz
c2lvbl9nZXRfbGFnOiBuZXcgZnVuY3Rpb24uIFJldHVybnMgc2Vzc2lvbi0+cHJpdi0+bGFnLgpz
cGljZV9zZXNzaW9uX3VwZGF0ZV9sYWc6IG5ldyBmdW5jdGlvbi4gQ291bGQgYmUgbW9kaWZpZWQg
dG8gdXNlCmd1YXJkcyBpbnN0ZWFkIG9mIGJpZyBpZigpIHsuLi59LiBJZiB0aGUgc2Vzc2lvbl9s
YWdfbmVlZHNfdXBkYXRlKCksCmNvbXB1dGVzIHRoZSBtYXggY2hhbm5lbCBsYWcgYW5kIGNhbGxz
CnNwaWNlX3BsYXliYWNrX2NoYW5uZWxfdXBkYXRlX2xhZygpIGlmIHRoZSBsYWcgdmFsdWUgaGFz
IGNoYW5nZWQuCgpzcGljZV9zZXNzaW9uX2dldF9wbGF5YmFja19sYWc6IHJlbmFtZWQgZnJvbQpz
cGljZV9zZXNzaW9uX2dldF9wbGF5YmFja19sYXRlbmN5LgoKc3BpY2VfcGxheWJhY2tfY2hhbm5l
bF91cGRhdGVfbGFnOiBuZXcgZnVuY3Rpb24uIFNldHMgdGhlIG1pbl9sYXRlbmN5CmFuZCB0cmln
Z2VycyB0aGUgIm1pbi1sYXRlbmN5IiBzaWduYWwgaWYgdGhlIGNoYW5uZWwgaXMgYWN0aXZlLgoK
c3BpY2Vfc2Vzc2lvbl9sYWdfbmVlZHNfdXBkYXRlKG9sZF9sYWcsIG5ld19sYWcpOiBuZXcgbWFj
cm8uIFJldHVybnMKdHJ1ZSBpcyB0aGVyZSBpcyBubyBvbGQgbGFnLCBvciBpZiB0aGUgZGlzdGFu
Y2UgYmV0d2VlbiBvbGQgYW5kIG5ldyBpcwo+IDEwLgoKLS0tCgojIFtjbGllbnQsdjMsNi82XSBt
anBlZzogVGFrZSB0aGUgZGVjb2RpbmcgdGltZSBpbnRvIGFjY291bnQgdG8KICBkaXNwbGF5IGZy
YW1lcwoKbWpwZWdfZGVjb2Rlcl9zY2hlZHVsZTogbW9kaWZpZWQgdG8gc3Vic3RyYWN0IHRoZSBm
cmFtZSBkZWNvZGluZyB0aW1lCndoZW4gc2V0dGluZyB0aGUgdGhlIGZyYW1lIGRlY29kaW5nIHRp
bWVyIChvbmx5IGlmIHRoZSB3YWl0IHRpbWUgaXMKZ3JlYXRlciB0aGFuIHRoZSBkZWNvZGluZyB0
aW1lKS4KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KU3Bp
Y2UtZGV2ZWwgbWFpbGluZyBsaXN0ClNwaWNlLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpo
dHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL3NwaWNlLWRldmVs
