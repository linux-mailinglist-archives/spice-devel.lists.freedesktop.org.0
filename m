Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 50A0B89F8A
	for <lists+spice-devel@lfdr.de>; Mon, 12 Aug 2019 15:22:16 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CF5666E511;
	Mon, 12 Aug 2019 13:22:14 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mail-ot1-x342.google.com (mail-ot1-x342.google.com
 [IPv6:2607:f8b0:4864:20::342])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 7F3436E50C
 for <spice-devel@lists.freedesktop.org>; Mon, 12 Aug 2019 13:22:13 +0000 (UTC)
Received: by mail-ot1-x342.google.com with SMTP id b7so108299742otl.11
 for <spice-devel@lists.freedesktop.org>; Mon, 12 Aug 2019 06:22:13 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=gXezqEtGei5nt41wxtfA3hJN2abb/Jc5yqNoPUxp9ig=;
 b=Eg+iI8guEVFzPTGMVB6j0SMfA6B/QSWw0WKx1vPGT0KRYMPDNTG0JlkD29ZBw5jwxI
 6ImkFXuAlyPfyqvEm+1FqADFp4BXLgi48mAO6KzE2kFgnlJ7VomFW79hHomhbNe/d8Jj
 QjfBn3TGbCY7z1GIOGkJNFtweCJFXoFfv4ZYVzNfcHxySlStBzNFOa3/4EyK0Makg3TX
 Zh5E+Z1l0uIudN88sQveAEWp9aCpOnrMbEARln52WYjbunF+2OvpurYAAOcEAjVsUshc
 W/rS2ptNKwAnKPiLTYC+6st9t1+gVA910pC15W7tIi6kQkA/R6xXe5t7ViXE98dC9CR0
 SV6w==
X-Gm-Message-State: APjAAAVUXUbO6ubnGuQBMgAR6oiELkgcrjCqRoYKnL8AFyaODsLcms3j
 dGnnigMzofEjDi52RozMoese9TPYpI4ai3okYI9LVA==
X-Google-Smtp-Source: APXvYqyG27TCK/gLvZGPn5q9tgC4OF9BqP9SEGjaS4T8EYp7cVzh7Z6dT8BaWscA7yx/jltfh4pRe+MN86qtm9PwgZI=
X-Received: by 2002:a02:3f1d:: with SMTP id d29mr38723761jaa.116.1565616132653; 
 Mon, 12 Aug 2019 06:22:12 -0700 (PDT)
MIME-Version: 1.0
References: <20190812095729.32692-1-yuri.benditovich@daynix.com>
 <20190812095729.32692-2-yuri.benditovich@daynix.com>
 <980332373.5513125.1565611227740.JavaMail.zimbra@redhat.com>
In-Reply-To: <980332373.5513125.1565611227740.JavaMail.zimbra@redhat.com>
From: Yuri Benditovich <yuri.benditovich@daynix.com>
Date: Mon, 12 Aug 2019 16:21:59 +0300
Message-ID: <CAOEp5Ocp9YwXs-MT4KT4sSibg+_B7341AoAaK8G5ocwT6nP1Wg@mail.gmail.com>
To: Frediano Ziglio <fziglio@redhat.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=daynix-com.20150623.gappssmtp.com; s=20150623;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=gXezqEtGei5nt41wxtfA3hJN2abb/Jc5yqNoPUxp9ig=;
 b=lC6bsXefnnxWV0GZM2tSLLt8RgsYiiAtYvU3DsYQU1W8+CVl+GjZl2iWIaoRket+6K
 jQLageLkuuytDg6OmiVvbvSCkPB5A1BtowtkxODyht2XxhB6jXblf2dvGtHHfBdpBaAg
 0Gmnnd1K9kqWAN7WMOlE6XTMuMmcl88St+tWXALAOMC0zGKgkqg0qdL31BQIbliRUEsp
 88vBfqnJ9uwETa5I8cz8/BhfMEyz7tLNUHriu58WqL4e4EnCu7OmjQs/IS3bSB10RAxC
 Re9z+PHHio/4VJBn6735GP1YzIUWJv2Df24RyEhtfiqrSpPsQNgy9u8y2eiUFEPFrcF8
 9olg==
Subject: Re: [Spice-devel] [spice-gtk v3 1/9] usb-redir: define interfaces
 to support emulated devices
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Yan Vugenfirer <yan@daynix.com>,
 Spice List <spice-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

T24gTW9uLCBBdWcgMTIsIDIwMTkgYXQgMzowMCBQTSBGcmVkaWFubyBaaWdsaW8gPGZ6aWdsaW9A
cmVkaGF0LmNvbT4gd3JvdGU6Cj4KPiA+Cj4gPiBTcGljZVVzYkJhY2tlbmREZXZpY2Ugc3RydWN0
dXJlIGlzIGV4dGVuZGVkIHRvIHN1cHBvcnQKPiA+IGFkZGl0aW9uYWwga2luZCBvZiBkZXZpY2Ug
dGhhdCBpcyBlbXVsYXRlZCBieSBTcGljZS1HVEsKPiA+IGFuZCBub3QgcHJlc2VudCBsb2NhbGx5
IChhbmQgZG9lcyBub3QgaGF2ZSBsaWJ1c2JfZGV2aWNlKSwKPiA+IHN1Y2ggZGV2aWNlIGhhcyBp
bnN0ZWFkIHBvaW50ZXIgdG8gU3BpY2VVc2JFbXVsYXRlZERldmljZQo+ID4gYWJzdHJhY3Qgc3Ry
dWN0dXJlLiBTcGVjaWZpYyBpbXBsZW1lbnRhdGlvbiBvZiBzdWNoIGRldmljZQo+ID4gZGVwZW5k
cyBvbiBpdHMgZGV2aWNlIHR5cGUuIEltcGxlbWVudGF0aW9uIG1vZHVsZSB3aWxsIGRlZmluZQo+
ID4gY29uc3RydWN0b3IgZm9yIHNwZWNpZmljIGRldmljZSB0eXBlLgo+ID4gRGV2aWNlIHN0cnVj
dHVyZSBpcyBhYnN0cmFjdCBidXQgYWx3YXlzIHN0YXJ0cyBmcm9tIHRhYmxlIG9mCj4gPiB2aXJ0
dWFsIGZ1bmN0aW9ucyByZXF1aXJlZCB0byByZWRpcmVjdCBzdWNoIHZpcnR1YWwgZGV2aWNlLgo+
ID4KPiA+IFNpZ25lZC1vZmYtYnk6IFl1cmkgQmVuZGl0b3ZpY2ggPHl1cmkuYmVuZGl0b3ZpY2hA
ZGF5bml4LmNvbT4KPgo+IEFja2VkLWJ5OiBGcmVkaWFubyBaaWdsaW8gPGZ6aWdsaW9AcmVkaGF0
LmNvbT4KPgo+IEJ1dCBJIHdvdWxkIG1lcmdlIDIvOSBpbnRvCgpObyBwcm9ibGVtLCBpZiB5b3Ug
d2FudCB0byBtZXJnZSB0aGVtIHRvZ2V0aGVyIHdoZW4gbWVyZ2luZyB1cHN0cmVhbS4KSSd2ZSBs
ZWZ0IGl0IGFzaWRlIGFzIHRoaXMgaXMgdHlwaWNhbCByZXF1aXJlbWVudCBvZiByZXZpZXdlcnMg
dG8KcGxhY2UgaW4gYSBjb21taXQgb25seSBjaGFuZ2VzIHJlbGF0ZWQgdG8gdGhlIHN1YmplY3Qu
Cgo+Cj4gPiAtLS0KPiA+ICBzcmMvbWVzb24uYnVpbGQgICAgIHwgICAxICsKPiA+ICBzcmMvdXNi
LWJhY2tlbmQuYyAgIHwgMTAzICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKystCj4gPiAgc3JjL3VzYi1iYWNrZW5kLmggICB8ICAgMyArKwo+ID4gIHNyYy91c2ItZW11
bGF0aW9uLmggfCAgODggKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwo+ID4g
IDQgZmlsZXMgY2hhbmdlZCwgMTkzIGluc2VydGlvbnMoKyksIDIgZGVsZXRpb25zKC0pCj4gPiAg
Y3JlYXRlIG1vZGUgMTAwNjQ0IHNyYy91c2ItZW11bGF0aW9uLmgKPiA+Cj4gPiBkaWZmIC0tZ2l0
IGEvc3JjL21lc29uLmJ1aWxkIGIvc3JjL21lc29uLmJ1aWxkCj4gPiBpbmRleCBiNGE2ODcwLi5m
ZTE5YzE2IDEwMDY0NAo+ID4gLS0tIGEvc3JjL21lc29uLmJ1aWxkCj4gPiArKysgYi9zcmMvbWVz
b24uYnVpbGQKPiA+IEBAIC0xMjIsNiArMTIyLDcgQEAgc3BpY2VfY2xpZW50X2dsaWJfc291cmNl
cyA9IFsKPiA+ICAgICd1c2J1dGlsLmMnLAo+ID4gICAgJ3VzYnV0aWwuaCcsCj4gPiAgICAndXNi
LWJhY2tlbmQuYycsCj4gPiArICAndXNiLWVtdWxhdGlvbi5oJywKPiA+ICAgICd1c2ItYmFja2Vu
ZC5oJywKPiA+ICAgICd2bWNzdHJlYW0uYycsCj4gPiAgICAndm1jc3RyZWFtLmgnLAo+ID4gZGlm
ZiAtLWdpdCBhL3NyYy91c2ItYmFja2VuZC5jIGIvc3JjL3VzYi1iYWNrZW5kLmMKPiA+IGluZGV4
IDlhYzg1OTUuLmRlMmI1NWUgMTAwNjQ0Cj4gPiAtLS0gYS9zcmMvdXNiLWJhY2tlbmQuYwo+ID4g
KysrIGIvc3JjL3VzYi1iYWNrZW5kLmMKPiA+IEBAIC0zOSw2ICszOSw3IEBACj4gPiAgI2luY2x1
ZGUgInVzYnJlZGlycGFyc2VyLmgiCj4gPiAgI2luY2x1ZGUgInNwaWNlLXV0aWwuaCIKPiA+ICAj
aW5jbHVkZSAidXNiLWJhY2tlbmQuaCIKPiA+ICsjaW5jbHVkZSAidXNiLWVtdWxhdGlvbi5oIgo+
ID4gICNpbmNsdWRlICJjaGFubmVsLXVzYnJlZGlyLXByaXYuaCIKPiA+ICAjaW5jbHVkZSAic3Bp
Y2UtY2hhbm5lbC1wcml2LmgiCj4gPgo+ID4gQEAgLTQ2LDcgKzQ3LDEwIEBACj4gPgo+ID4gIHN0
cnVjdCBfU3BpY2VVc2JCYWNrZW5kRGV2aWNlCj4gPiAgewo+ID4gKyAgICAvKiBQb2ludGVyIHRv
IGRldmljZS4gRWl0aGVyIHJlYWwgZGV2aWNlIChsaWJ1c2JfZGV2aWNlKQo+ID4gKyAgICAgKiBv
ciBlbXVsYXRlZCBvbmUgKGVkZXYpICovCj4gPiAgICAgIGxpYnVzYl9kZXZpY2UgKmxpYnVzYl9k
ZXZpY2U7Cj4gPiArICAgIFNwaWNlVXNiRW11bGF0ZWREZXZpY2UgKmVkZXY7Cj4gPiAgICAgIGdp
bnQgcmVmX2NvdW50Owo+ID4gICAgICBTcGljZVVzYkJhY2tlbmRDaGFubmVsICphdHRhY2hlZF90
bzsKPiA+ICAgICAgVXNiRGV2aWNlSW5mb3JtYXRpb24gZGV2aWNlX2luZm87Cj4gPiBAQCAtNjYs
NiArNzAsMTAgQEAgc3RydWN0IF9TcGljZVVzYkJhY2tlbmQKPiA+ICAgICAgbGlidXNiX2Rldmlj
ZSAqKmxpYnVzYl9kZXZpY2VfbGlzdDsKPiA+ICAgICAgZ2ludCByZWRpcmVjdGluZzsKPiA+ICAj
ZW5kaWYKPiA+ICsKPiA+ICsgICAgLyogTWFzayBvZiBhbGxvY2F0ZWQgZGV2aWNlLCBhIHNwZWNp
ZmljIGJpdCBzZXQgdG8gMSB0byBpbmRpY2F0ZSB0aGF0Cj4gPiB0aGUgZGV2aWNlIGF0Cj4gPiAr
ICAgICAqIHRoYXQgYWRkcmVzcyBpcyBhbGxvY2F0ZWQgKi8KPiA+ICsgICAgdWludDMyX3Qgb3du
X2RldmljZXNfbWFzazsKPiA+ICB9Owo+ID4KPiA+ICBzdHJ1Y3QgX1NwaWNlVXNiQmFja2VuZENo
YW5uZWwKPiA+IEBAIC00MDgsNiArNDE2LDggQEAgU3BpY2VVc2JCYWNrZW5kICpzcGljZV91c2Jf
YmFja2VuZF9uZXcoR0Vycm9yICoqZXJyb3IpCj4gPiAgICAgICAgICBsaWJ1c2Jfc2V0X29wdGlv
bihiZS0+bGlidXNiX2NvbnRleHQsIExJQlVTQl9PUFRJT05fVVNFX1VTQkRLKTsKPiA+ICAjZW5k
aWYKPiA+ICAjZW5kaWYKPiA+ICsgICAgICAgIC8qIGV4Y2x1ZGUgYWRkcmVzc2VzIDAgKHJlc2Vy
dmVkKSBhbmQgMSAocm9vdCBodWIpICovCj4gPiArICAgICAgICBiZS0+b3duX2RldmljZXNfbWFz
ayA9IDM7Cj4gPiAgICAgIH0KPiA+ICAgICAgU1BJQ0VfREVCVUcoIiVzIDw8IiwgX19GVU5DVElP
Tl9fKTsKPiA+ICAgICAgcmV0dXJuIGJlOwo+ID4gQEAgLTUyNCw4ICs1MzQsMTMgQEAgdm9pZAo+
ID4gc3BpY2VfdXNiX2JhY2tlbmRfZGV2aWNlX3VucmVmKFNwaWNlVXNiQmFja2VuZERldmljZSAq
ZGV2KQo+ID4gIHsKPiA+ICAgICAgTE9VRF9ERUJVRygiJXMgPj4gJXAoJWQpIiwgX19GVU5DVElP
Tl9fLCBkZXYsIGRldi0+cmVmX2NvdW50KTsKPiA+ICAgICAgaWYgKGdfYXRvbWljX2ludF9kZWNf
YW5kX3Rlc3QoJmRldi0+cmVmX2NvdW50KSkgewo+ID4gLSAgICAgICAgbGlidXNiX3VucmVmX2Rl
dmljZShkZXYtPmxpYnVzYl9kZXZpY2UpOwo+ID4gLSAgICAgICAgTE9VRF9ERUJVRygiJXMgZnJl
ZWluZyAlcCAobGlidXNiICVwKSIsIF9fRlVOQ1RJT05fXywgZGV2LAo+ID4gZGV2LT5saWJ1c2Jf
ZGV2aWNlKTsKPiA+ICsgICAgICAgIGlmIChkZXYtPmxpYnVzYl9kZXZpY2UpIHsKPiA+ICsgICAg
ICAgICAgICBsaWJ1c2JfdW5yZWZfZGV2aWNlKGRldi0+bGlidXNiX2RldmljZSk7Cj4gPiArICAg
ICAgICAgICAgTE9VRF9ERUJVRygiJXMgZnJlZWluZyAlcCAobGlidXNiICVwKSIsIF9fRlVOQ1RJ
T05fXywgZGV2LAo+ID4gZGV2LT5saWJ1c2JfZGV2aWNlKTsKPiA+ICsgICAgICAgIH0KPiA+ICsg
ICAgICAgIGlmIChkZXYtPmVkZXYpIHsKPiA+ICsgICAgICAgICAgICBkZXZpY2Vfb3BzKGRldi0+
ZWRldiktPnVucmVhbGl6ZShkZXYtPmVkZXYpOwo+ID4gKyAgICAgICAgfQo+ID4gICAgICAgICAg
Z19mcmVlKGRldik7Cj4gPiAgICAgIH0KPiA+ICB9Cj4gPiBAQCAtODI0LDQgKzgzOSw4OCBAQAo+
ID4gc3BpY2VfdXNiX2JhY2tlbmRfY2hhbm5lbF9nZXRfZ3Vlc3RfZmlsdGVyKFNwaWNlVXNiQmFj
a2VuZENoYW5uZWwgKmNoLAo+ID4gICAgICB9Cj4gPiAgfQo+ID4KPiA+ICt2b2lkIHNwaWNlX3Vz
Yl9iYWNrZW5kX2RldmljZV9yZXBvcnRfY2hhbmdlKFNwaWNlVXNiQmFja2VuZCAqYmUsCj4gPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGljZVVzYkJhY2tl
bmREZXZpY2UgKmRldikKPiA+ICt7Cj4gPiArICAgIGdjaGFyICpkZXNjOwo+ID4gKyAgICBnX3Jl
dHVybl9pZl9mYWlsKGRldiAmJiBkZXYtPmVkZXYpOwo+ID4gKwo+ID4gKyAgICBkZXNjID0gZGV2
aWNlX29wcyhkZXYtPmVkZXYpLT5nZXRfcHJvZHVjdF9kZXNjcmlwdGlvbihkZXYtPmVkZXYpOwo+
ID4gKyAgICBTUElDRV9ERUJVRygiJXM6ICVzIiwgX19GVU5DVElPTl9fLCBkZXNjKTsKPiA+ICsg
ICAgZ19mcmVlKGRlc2MpOwo+ID4gK30KPiA+ICsKPiA+ICt2b2lkIHNwaWNlX3VzYl9iYWNrZW5k
X2RldmljZV9lamVjdChTcGljZVVzYkJhY2tlbmQgKmJlLAo+ID4gU3BpY2VVc2JCYWNrZW5kRGV2
aWNlICpkZXYpCj4gPiArewo+ID4gKyAgICBnX3JldHVybl9pZl9mYWlsKGRldik7Cj4gPiArCj4g
PiArICAgIGlmIChkZXYtPmVkZXYpIHsKPiA+ICsgICAgICAgIGJlLT5vd25fZGV2aWNlc19tYXNr
ICY9IH4oMSA8PCBkZXYtPmRldmljZV9pbmZvLmFkZHJlc3MpOwo+ID4gKyAgICB9Cj4gPiArICAg
IGlmIChiZS0+aG90cGx1Z19jYWxsYmFjaykgewo+ID4gKyAgICAgICAgYmUtPmhvdHBsdWdfY2Fs
bGJhY2soYmUtPmhvdHBsdWdfdXNlcl9kYXRhLCBkZXYsIEZBTFNFKTsKPiA+ICsgICAgfQo+ID4g
K30KPiA+ICsKPiA+ICtnYm9vbGVhbgo+ID4gK3NwaWNlX3VzYl9iYWNrZW5kX2NyZWF0ZV9lbXVs
YXRlZF9kZXZpY2UoU3BpY2VVc2JCYWNrZW5kICpiZSwKPiA+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIFNwaWNlVXNiRW11bGF0ZWREZXZpY2VDcmVhdGUKPiA+IGNy
ZWF0ZV9wcm9jLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
dm9pZCAqY3JlYXRlX3BhcmFtcywKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgIEdFcnJvciAqKmVycikKPiA+ICt7Cj4gPiArICAgIFNwaWNlVXNiRW11bGF0ZWRE
ZXZpY2UgKmVkZXY7Cj4gPiArICAgIFNwaWNlVXNiQmFja2VuZERldmljZSAqZGV2Owo+ID4gKyAg
ICBzdHJ1Y3QgbGlidXNiX2RldmljZV9kZXNjcmlwdG9yICpkZXNjOwo+ID4gKyAgICB1aW50MTZf
dCBkZXZpY2VfZGVzY19zaXplOwo+ID4gKyAgICB1aW50OF90IGFkZHJlc3MgPSAwOwo+ID4gKwo+
ID4gKyAgICBpZiAoYmUtPm93bl9kZXZpY2VzX21hc2sgPT0gMHhmZmZmZmZmZikgewo+ID4gKyAg
ICAgICAgZ19zZXRfZXJyb3IoZXJyLCBTUElDRV9DTElFTlRfRVJST1IsIFNQSUNFX0NMSUVOVF9F
UlJPUl9GQUlMRUQsCj4gPiArICAgICAgICAgICAgICAgICAgICBfKCJjYW4ndCBjcmVhdGUgZGV2
aWNlIC0gbGltaXQgcmVhY2hlZCIpKTsKPiA+ICsgICAgICAgIHJldHVybiBGQUxTRTsKPiA+ICsg
ICAgfQo+ID4gKyAgICBmb3IgKGFkZHJlc3MgPSAwOyBhZGRyZXNzIDwgMzI7ICsrYWRkcmVzcykg
ewo+ID4gKyAgICAgICAgaWYgKH5iZS0+b3duX2RldmljZXNfbWFzayAmICgxIDw8IGFkZHJlc3Mp
KSB7Cj4gPiArICAgICAgICAgICAgYnJlYWs7Cj4gPiArICAgICAgICB9Cj4gPiArICAgIH0KPiA+
ICsKPiA+ICsgICAgZGV2ID0gZ19uZXcwKFNwaWNlVXNiQmFja2VuZERldmljZSwgMSk7Cj4gPiAr
ICAgIGRldi0+ZGV2aWNlX2luZm8uYnVzID0gQlVTX05VTUJFUl9GT1JfRU1VTEFURURfVVNCOwo+
ID4gKyAgICBkZXYtPmRldmljZV9pbmZvLmFkZHJlc3MgPSBhZGRyZXNzOwo+ID4gKyAgICBkZXYt
PnJlZl9jb3VudCA9IDE7Cj4gPiArCj4gPiArICAgIGRldi0+ZWRldiA9IGVkZXYgPSBjcmVhdGVf
cHJvYyhiZSwgZGV2LCBjcmVhdGVfcGFyYW1zLCBlcnIpOwo+ID4gKyAgICBpZiAoZWRldiA9PSBO
VUxMKSB7Cj4gPiArICAgICAgICBzcGljZV91c2JfYmFja2VuZF9kZXZpY2VfdW5yZWYoZGV2KTsK
PiA+ICsgICAgICAgIHJldHVybiBGQUxTRTsKPiA+ICsgICAgfQo+ID4gKwo+ID4gKyAgICBpZiAo
IWRldmljZV9vcHMoZWRldiktPmdldF9kZXNjcmlwdG9yKGVkZXYsIExJQlVTQl9EVF9ERVZJQ0Us
IDAsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHZvaWQg
KiopJmRlc2MsICZkZXZpY2VfZGVzY19zaXplKQo+ID4gKyAgICAgICAgfHwgZGV2aWNlX2Rlc2Nf
c2l6ZSAhPSBzaXplb2YoKmRlc2MpKSB7Cj4gPiArCj4gPiArICAgICAgICBzcGljZV91c2JfYmFj
a2VuZF9kZXZpY2VfdW5yZWYoZGV2KTsKPiA+ICsgICAgICAgIGdfc2V0X2Vycm9yKGVyciwgU1BJ
Q0VfQ0xJRU5UX0VSUk9SLCBTUElDRV9DTElFTlRfRVJST1JfRkFJTEVELAo+ID4gKyAgICAgICAg
ICAgICAgICAgICAgXygiY2FuJ3QgY3JlYXRlIGRldmljZSAtIGludGVybmFsIGVycm9yIikpOwo+
ID4gKyAgICAgICAgcmV0dXJuIEZBTFNFOwo+ID4gKyAgICB9Cj4gPiArCj4gPiArICAgIGJlLT5v
d25fZGV2aWNlc19tYXNrIHw9IDEgPDwgYWRkcmVzczsKPiA+ICsKPiA+ICsgICAgZGV2LT5kZXZp
Y2VfaW5mby52aWQgPSBkZXNjLT5pZFZlbmRvcjsKPiA+ICsgICAgZGV2LT5kZXZpY2VfaW5mby5w
aWQgPSBkZXNjLT5pZFByb2R1Y3Q7Cj4gPiArICAgIGRldi0+ZGV2aWNlX2luZm8uYmNkVVNCID0g
ZGVzYy0+YmNkVVNCOwo+ID4gKyAgICBkZXYtPmRldmljZV9pbmZvLmNsYXNzID0gZGVzYy0+YkRl
dmljZUNsYXNzOwo+ID4gKyAgICBkZXYtPmRldmljZV9pbmZvLnN1YmNsYXNzID0gZGVzYy0+YkRl
dmljZVN1YkNsYXNzOwo+ID4gKyAgICBkZXYtPmRldmljZV9pbmZvLnByb3RvY29sID0gZGVzYy0+
YkRldmljZVByb3RvY29sOwo+ID4gKwo+ID4gKyAgICBpZiAoYmUtPmhvdHBsdWdfY2FsbGJhY2sp
IHsKPiA+ICsgICAgICAgIGJlLT5ob3RwbHVnX2NhbGxiYWNrKGJlLT5ob3RwbHVnX3VzZXJfZGF0
YSwgZGV2LCBUUlVFKTsKPiA+ICsgICAgfQo+ID4gKyAgICBzcGljZV91c2JfYmFja2VuZF9kZXZp
Y2VfdW5yZWYoZGV2KTsKPiA+ICsKPiA+ICsgICAgcmV0dXJuIFRSVUU7Cj4gPiArfQo+ID4gKwo+
ID4gICNlbmRpZiAvKiBVU0JfUkVESVIgKi8KPiA+IGRpZmYgLS1naXQgYS9zcmMvdXNiLWJhY2tl
bmQuaCBiL3NyYy91c2ItYmFja2VuZC5oCj4gPiBpbmRleCA2NmUxM2Y1Li5jZDNmZjA5IDEwMDY0
NAo+ID4gLS0tIGEvc3JjL3VzYi1iYWNrZW5kLmgKPiA+ICsrKyBiL3NyYy91c2ItYmFja2VuZC5o
Cj4gPiBAQCAtMzAsMTIgKzMwLDE1IEBAIHR5cGVkZWYgc3RydWN0IF9TcGljZVVzYkJhY2tlbmQg
U3BpY2VVc2JCYWNrZW5kOwo+ID4gIHR5cGVkZWYgc3RydWN0IF9TcGljZVVzYkJhY2tlbmREZXZp
Y2UgU3BpY2VVc2JCYWNrZW5kRGV2aWNlOwo+ID4gIHR5cGVkZWYgc3RydWN0IF9TcGljZVVzYkJh
Y2tlbmRDaGFubmVsIFNwaWNlVXNiQmFja2VuZENoYW5uZWw7Cj4gPgo+ID4gKyNkZWZpbmUgQlVT
X05VTUJFUl9GT1JfRU1VTEFURURfVVNCIEdfTUFYVUlOVDE2Cj4gPiArCj4gPiAgdHlwZWRlZiBz
dHJ1Y3QgVXNiRGV2aWNlSW5mb3JtYXRpb24KPiA+ICB7Cj4gPiAgICAgIHVpbnQxNl90IGJ1czsK
PiA+ICAgICAgdWludDE2X3QgYWRkcmVzczsKPiA+ICAgICAgdWludDE2X3QgdmlkOwo+ID4gICAg
ICB1aW50MTZfdCBwaWQ7Cj4gPiArICAgIHVpbnQxNl90IGJjZFVTQjsKPiA+ICAgICAgdWludDhf
dCBjbGFzczsKPiA+ICAgICAgdWludDhfdCBzdWJjbGFzczsKPiA+ICAgICAgdWludDhfdCBwcm90
b2NvbDsKPiA+IGRpZmYgLS1naXQgYS9zcmMvdXNiLWVtdWxhdGlvbi5oIGIvc3JjL3VzYi1lbXVs
YXRpb24uaAo+ID4gbmV3IGZpbGUgbW9kZSAxMDA2NDQKPiA+IGluZGV4IDAwMDAwMDAuLmFjM2Q4
ZTAKPiA+IC0tLSAvZGV2L251bGwKPiA+ICsrKyBiL3NyYy91c2ItZW11bGF0aW9uLmgKPiA+IEBA
IC0wLDAgKzEsODggQEAKPiA+ICsvKiAtKi0gTW9kZTogQzsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGlu
ZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi8KPiA+ICsvKgo+ID4gKyAgICBDb3B5cmlnaHQgKEMp
IDIwMTkgUmVkIEhhdCwgSW5jLgo+ID4gKwo+ID4gKyAgICBSZWQgSGF0IEF1dGhvcnM6Cj4gPiAr
ICAgIFl1cmkgQmVuZGl0b3ZpY2g8eWJlbmRpdG9AcmVkaGF0LmNvbT4KPiA+ICsKPiA+ICsgICAg
VGhpcyBsaWJyYXJ5IGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFu
ZC9vcgo+ID4gKyAgICBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2Vy
IEdlbmVyYWwgUHVibGljCj4gPiArICAgIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVl
IFNvZnR3YXJlIEZvdW5kYXRpb247IGVpdGhlcgo+ID4gKyAgICB2ZXJzaW9uIDIuMSBvZiB0aGUg
TGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KPiA+ICsKPiA+
ICsgICAgVGhpcyBsaWJyYXJ5IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2ls
bCBiZSB1c2VmdWwsCj4gPiArICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBl
dmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCj4gPiArICAgIE1FUkNIQU5UQUJJTElUWSBvciBG
SVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUgR05VCj4gPiArICAgIExl
c3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCj4gPiArCj4gPiAr
ICAgIFlvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBMZXNzZXIgR2Vu
ZXJhbCBQdWJsaWMKPiA+ICsgICAgTGljZW5zZSBhbG9uZyB3aXRoIHRoaXMgbGlicmFyeTsgaWYg
bm90LCBzZWUKPiA+IDxodHRwOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4KPiA+ICsqLwo+ID4g
Kwo+ID4gKyNwcmFnbWEgb25jZQo+ID4gKwo+ID4gKyNpbmNsdWRlICJ1c2JyZWRpcnBhcnNlci5o
Igo+ID4gKyNpbmNsdWRlICJ1c2ItYmFja2VuZC5oIgo+ID4gKwo+ID4gK3R5cGVkZWYgc3RydWN0
IFNwaWNlVXNiRW11bGF0ZWREZXZpY2UgU3BpY2VVc2JFbXVsYXRlZERldmljZTsKPiA+ICt0eXBl
ZGVmIFNwaWNlVXNiRW11bGF0ZWREZXZpY2UqCj4gPiArKCpTcGljZVVzYkVtdWxhdGVkRGV2aWNl
Q3JlYXRlKShTcGljZVVzYkJhY2tlbmQgKmJlLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgU3BpY2VVc2JCYWNrZW5kRGV2aWNlICpwYXJlbnQsCj4gPiArICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB2b2lkICpjcmVhdGVfcGFyYW1zLAo+ID4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgR0Vycm9yICoqZXJyKTsKPiA+ICsKPiA+ICsvKgo+ID4gKyAg
ICBmdW5jdGlvbiB0YWJsZSBmb3IgZW11bGF0ZWQgVVNCIGRldmljZQo+ID4gKyAgICBtdXN0IGJl
IGZpcnN0IG1lbWJlciBvZiBkZXZpY2Ugc3RydWN0dXJlCj4gPiArICAgIGFsbCBmdW5jdGlvbnMg
YXJlIG1hbmRhdG9yeSBmb3IgaW1wbGVtZW50YXRpb24KPiA+ICsqLwo+ID4gK3R5cGVkZWYgc3Ry
dWN0IFVzYkRldmljZU9wcyB7Cj4gPiArICAgIGdib29sZWFuICgqZ2V0X2Rlc2NyaXB0b3IpKFNw
aWNlVXNiRW11bGF0ZWREZXZpY2UgKmRldmljZSwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgdWludDhfdCB0eXBlLCB1aW50OF90IGluZGV4LAo+ID4gKyAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICB2b2lkICoqYnVmZmVyLCB1aW50MTZfdCAqc2l6ZSk7Cj4gPiArICAg
IGdjaGFyICogKCpnZXRfcHJvZHVjdF9kZXNjcmlwdGlvbikoU3BpY2VVc2JFbXVsYXRlZERldmlj
ZSAqZGV2aWNlKTsKPiA+ICsgICAgdm9pZCAoKmF0dGFjaCkoU3BpY2VVc2JFbXVsYXRlZERldmlj
ZSAqZGV2aWNlLCBzdHJ1Y3QgdXNicmVkaXJwYXJzZXIKPiA+ICpwYXJzZXIpOwo+ID4gKyAgICB2
b2lkICgqcmVzZXQpKFNwaWNlVXNiRW11bGF0ZWREZXZpY2UgKmRldmljZSk7Cj4gPiArICAgIC8q
Cj4gPiArICAgICAgICBwcm9jZXNzaW5nIGlzIHN5bmNocm9ub3VzLCBkZWZhdWx0ID0gc3RhbGw6
Cj4gPiArICAgICAgICAtIHJldHVybiBzdWNjZXNzIHdpdGhvdXQgZGF0YTogc2V0IHN0YXR1cyB0
byAwCj4gPiArICAgICAgICAtIHJldHVybiBlcnJvciAtIHNldCBzdGF0dXMgdG8gZXJyb3IKPiA+
ICsgICAgICAgIC0gcmV0dXJuIHN1Y2Nlc3Mgd2l0aCBkYXRhIC0gc2V0IHN0YXR1cyB0byAwLAo+
ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldCBidWZmZXIgdG8gc29t
ZSBidWZmZXIKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQgbGVu
Z3RoIHRvIG91dCBsZW4KPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0
cnVuY2F0aW9uIGlzIGF1dG9tYXRpYwo+ID4gKyAgICAqLwo+ID4gKyAgICB2b2lkICgqY29udHJv
bF9yZXF1ZXN0KShTcGljZVVzYkVtdWxhdGVkRGV2aWNlICpkZXZpY2UsCj4gPiArICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHVpbnQ4X3QgKmRhdGEsIGludCBkYXRhX2xlbiwKPiA+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgc3RydWN0IHVzYl9yZWRpcl9jb250cm9sX3BhY2tldF9o
ZWFkZXIgKmgsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgKipidWZmZXIp
Owo+ID4gKyAgICAvKgo+ID4gKyAgICAgICAgcHJvY2Vzc2luZyBpcyBzeW5jaHJvbm91czoKPiA+
ICsgICAgICAgIC0gc2V0IGgtPnN0YXR1cyB0byByZXN1bHRpbmcgc3RhdHVzLCBkZWZhdWx0ID0g
c3RhbGwKPiA+ICsgICAgKi8KPiA+ICsgICAgdm9pZCAoKmJ1bGtfb3V0X3JlcXVlc3QpKFNwaWNl
VXNiRW11bGF0ZWREZXZpY2UgKmRldmljZSwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIHVpbnQ4X3QgZXAsIHVpbnQ4X3QgKmRhdGEsIGludCBkYXRhX2xlbiwKPiA+ICsgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIHVpbnQ4X3QgKnN0YXR1cyk7Cj4gPiArICAgIC8qCj4gPiAr
ICAgICAgICBpZiByZXR1cm5zIHRydWUsIHByb2Nlc3NpbmcgaXMgYXN5bmNocm9ub3VzCj4gPiAr
ICAgICAgICBvdGhlcndpc2UgaGVhZGVyIGNvbnRhaW5zIGVycm9yIHN0YXR1cwo+ID4gKyAgICAq
Lwo+ID4gKyAgICBnYm9vbGVhbiAoKmJ1bGtfaW5fcmVxdWVzdCkoU3BpY2VVc2JFbXVsYXRlZERl
dmljZSAqZGV2aWNlLCB1aW50NjRfdCBpZCwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgc3RydWN0IHVzYl9yZWRpcl9idWxrX3BhY2tldF9oZWFkZXIKPiA+ICpidWxrX2hlYWRlcik7
Cj4gPiArICAgIHZvaWQgKCpjYW5jZWxfcmVxdWVzdCkoU3BpY2VVc2JFbXVsYXRlZERldmljZSAq
ZGV2aWNlLCB1aW50NjRfdCBpZCk7Cj4gPiArICAgIHZvaWQgKCpkZXRhY2gpKFNwaWNlVXNiRW11
bGF0ZWREZXZpY2UgKmRldmljZSk7Cj4gPiArICAgIHZvaWQgKCp1bnJlYWxpemUpKFNwaWNlVXNi
RW11bGF0ZWREZXZpY2UgKmRldmljZSk7Cj4gPiArfSBVc2JEZXZpY2VPcHM7Cj4gPiArCj4gPiAr
c3RhdGljIGlubGluZSBjb25zdCBVc2JEZXZpY2VPcHMgKmRldmljZV9vcHMoU3BpY2VVc2JFbXVs
YXRlZERldmljZSAqZGV2KQo+ID4gK3sKPiA+ICsgICAgcmV0dXJuIChjb25zdCBVc2JEZXZpY2VP
cHMgKilkZXY7Cj4gPiArfQo+ID4gKwo+ID4gK2dib29sZWFuCj4gPiArc3BpY2VfdXNiX2JhY2tl
bmRfY3JlYXRlX2VtdWxhdGVkX2RldmljZShTcGljZVVzYkJhY2tlbmQgKmJlLAo+ID4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BpY2VVc2JFbXVsYXRlZERldmlj
ZUNyZWF0ZQo+ID4gY3JlYXRlX3Byb2MsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICB2b2lkICpjcmVhdGVfcGFyYW1zLAo+ID4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgR0Vycm9yICoqZXJyKTsKPiA+ICt2b2lkIHNwaWNlX3Vz
Yl9iYWNrZW5kX2RldmljZV9lamVjdChTcGljZVVzYkJhY2tlbmQgKmJlLAo+ID4gU3BpY2VVc2JC
YWNrZW5kRGV2aWNlICpkZXZpY2UpOwo+ID4gK3ZvaWQgc3BpY2VfdXNiX2JhY2tlbmRfZGV2aWNl
X3JlcG9ydF9jaGFuZ2UoU3BpY2VVc2JCYWNrZW5kICpiZSwKPiA+IFNwaWNlVXNiQmFja2VuZERl
dmljZSAqZGV2aWNlKTsKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX18KU3BpY2UtZGV2ZWwgbWFpbGluZyBsaXN0ClNwaWNlLWRldmVsQGxpc3RzLmZyZWVkZXNr
dG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL3Nw
aWNlLWRldmVs
