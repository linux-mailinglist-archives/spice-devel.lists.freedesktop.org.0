Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 958E3AF99E
	for <lists+spice-devel@lfdr.de>; Wed, 11 Sep 2019 11:56:35 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 1ACE86E203;
	Wed, 11 Sep 2019 09:56:34 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 4D8596E200
 for <spice-devel@lists.freedesktop.org>; Wed, 11 Sep 2019 09:56:32 +0000 (UTC)
Received: from mail-wr1-f72.google.com (mail-wr1-f72.google.com
 [209.85.221.72])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 781E57E426
 for <spice-devel@lists.freedesktop.org>; Wed, 11 Sep 2019 09:56:31 +0000 (UTC)
Received: by mail-wr1-f72.google.com with SMTP id w3so7330408wrv.10
 for <spice-devel@lists.freedesktop.org>; Wed, 11 Sep 2019 02:56:31 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:to:cc:references:from:message-id:date
 :user-agent:mime-version:in-reply-to:content-transfer-encoding
 :content-language;
 bh=jEksMBcrma4BBhTux+59qNOpT/FvU1VxdkSttyKObCU=;
 b=STm3IRAZIO2rG2xYj+JRqXFJ7KR0NTmbMM1d02FoUAuTQqMQL3+PqapI5I6h4O1Sjj
 CCpo8c2jT5Pn2tx8WPIcGgdUfd6qFsPYwLz8rwi9czksM6bUc+XbDcbzcpN9Ob54iTdD
 fsWnwqhiqsHzm2UzxjLBwz77zesQRQRNVqwEHb1D8gXMViJaYiPSCJlPrmkb2laIs+YK
 k4BzG2b1dFVwLodi+FmYOVvBE24fFnZqlob9eBBJIbMyFTRb+eGY690T32EGuYBXCL31
 dffI2NvGjhfEFbcVYJhz3tTvdJTX9afM5yISt9TX0tQvJwm1Ka0p2FqGxjxyYG+dgyB1
 XxdQ==
X-Gm-Message-State: APjAAAVGcv6vrRYeQoQxkD3MwJsYmzl2z7RgY1jD8tVkVRzw0w+xJz7U
 o8GUvDJjcVepvXRJXFBborspLewDQyGaX0rUv8fp3amXrKv3slrDjfnW6l5W6NQ6eX69aCSsWJD
 0YBvdj71i0p6WuAl1GXL0NNWL+8djcRc=
X-Received: by 2002:a1c:7c15:: with SMTP id x21mr3486291wmc.154.1568195789743; 
 Wed, 11 Sep 2019 02:56:29 -0700 (PDT)
X-Google-Smtp-Source: APXvYqx9liyzMuoHBPwP9JrlXhsJykeXcXmwxVhypUzZoW6QZYYs5RPRslsHCoxYg6QuLrDCkzb1/Q==
X-Received: by 2002:a1c:7c15:: with SMTP id x21mr3486265wmc.154.1568195789391; 
 Wed, 11 Sep 2019 02:56:29 -0700 (PDT)
Received: from dhcp-4-151.tlv.redhat.com (bzq-82-81-161-50.red.bezeqint.net.
 [82.81.161.50])
 by smtp.gmail.com with ESMTPSA id b194sm6044625wmg.46.2019.09.11.02.56.27
 (version=TLS1_3 cipher=TLS_AES_128_GCM_SHA256 bits=128/128);
 Wed, 11 Sep 2019 02:56:28 -0700 (PDT)
To: Frediano Ziglio <fziglio@redhat.com>
References: <20190826083948.29309-1-ssheribe@redhat.com>
 <351681027.9951411.1567003440803.JavaMail.zimbra@redhat.com>
From: Snir Sheriber <ssheribe@redhat.com>
Message-ID: <927306c1-dec3-3c43-070a-e8a71f6734ac@redhat.com>
Date: Wed, 11 Sep 2019 12:56:26 +0300
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <351681027.9951411.1567003440803.JavaMail.zimbra@redhat.com>
Content-Language: en-US
Subject: Re: [Spice-devel] [RFC spice-streaming-agent 1/3] Add Xlib capture
 helper files
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: spice-devel@lists.freedesktop.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

SGksCgoKU29ycnkgZm9yIHRoZSBsYXRlIHJlcGxheQoKCk9uIDgvMjgvMTkgNTo0NCBQTSwgRnJl
ZGlhbm8gWmlnbGlvIHdyb3RlOgo+PiBUaGUgWGxpYiBjYXB0dXJlIGhlbHBlciBwcm92aWRlcyBh
IHdyYXBwaW5nIGNsYXNzIGZvciBYSW1hZ2UsIERpc3BsYXkKPj4gaW5mb3JtYXRpb24gYW5kIG90
aGVyIGNhcHR1cmluZyByZWxhdGVkIGZ1bmN0aW9uYWxpdGllcyB3aGljaCBhbGxvd3MKPj4gdG8g
dXNlIHVuaWZpZWQgYW5kIHNpbXBsZSBBUEkgZm9yIHNjcmVlbiBjYXB0dXJpbmcgdXNpbmcgWC4K
Pj4gVGhpcyBhbHNvIHV0aWxpemUgdGhlIFggTUlULVNITSBleHRlbnNpb24gd2hpY2ggaW1wcm92
ZXMgY2FwdHVyaW5nCj4+IHNwZWVkLCBoZW5jZSwgeGV4dCBpcyByZXF1aXJlZC4KPj4gLS0tCj4+
Cj4+IFRoZSBvcmlnaW5hbCBpZGVhIHdhcyBqdXN0IHRvIHVzZSB0aGUgWCBhbmNpZW50IE1JVC1T
SE0gZXh0ZW5zaW9uIHdoaWNoCj4+IHJlZHVjZSBDUFUgdXRpbGl6YXRpb24gc2lnbmlmaWNhbnRs
eSB3aGVuIHVzaW5nIFhsaWIgY2FwdHVyaW5nLgo+PiBTaW5jZSB0aGlzIGNhcHR1cmluZyBtZXRo
b2QgaXMgY3VycmVudGx5IHVzZWQgYnkgdHdvIGRpZmZlcmVudCBwbHVnaW5zCj4+IGl0IHdhcyBz
dWdnZXN0ZWQgdG8gdXNlIG9uZSBjb21tb24gY2xhc3MgZm9yIHRoYXQsIHRoaXMgY2xhc3MgaXMg
YWRkZWQKPj4gYnkgdGhpcyBwYXRjaCBhbmQgdGhlIDIgZm9sbG93aW5nIHBhdGNoZXMgbWFrZXMg
dGhlIGV4aXN0aW5nIHBsdWdpbnMKPj4gdG8gdXNlIHRoaXMgY2xhc3MuCj4+Cj4+IElmIHlvdSBo
YXZlIGFueSBvdGhlciBzdWdnZXN0aW9ucyBvciBjb21tZW50cyBwbGVhc2UgZG8gOykKPj4KPiBJ
dCdzIG5vdCBjbGVhciB3aHkgdGhlIFJGQy4gRnJvbSB0aGUgY29tbWVudCBsb29rcyBsaWtlIHlv
dSB3YW50IHRoZW0uCj4gTWF5YmUgeW91IGFyZSBub3Qgc3VyZSBhYm91dCB0aGUgc3RhdGUgb2Yg
dGhlIHBhdGNoZXM/CgpJIGRvIHdhbnQgdGhlbSBidXQgaSBhbHNvIHdhbnQgY29tbWVudHMgOykK
Cgo+Cj4+IC0tLQo+PiAgIGNvbmZpZ3VyZS5hYyAgICAgICAgIHwgICAxICsKPj4gICBzcmMveGxp
Yi1jYXB0dXJlLmNwcCB8IDE2OSArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrCj4+ICAgc3JjL3hsaWItY2FwdHVyZS5ocHAgfCAgNTMgKysrKysrKysrKysrKysKPj4g
ICAzIGZpbGVzIGNoYW5nZWQsIDIyMyBpbnNlcnRpb25zKCspCj4+ICAgY3JlYXRlIG1vZGUgMTAw
NjQ0IHNyYy94bGliLWNhcHR1cmUuY3BwCj4+ICAgY3JlYXRlIG1vZGUgMTAwNjQ0IHNyYy94bGli
LWNhcHR1cmUuaHBwCj4+Cj4+IGRpZmYgLS1naXQgYS9jb25maWd1cmUuYWMgYi9jb25maWd1cmUu
YWMKPj4gaW5kZXggMWM3Nzg4Yi4uMzIyMGUyNyAxMDA2NDQKPj4gLS0tIGEvY29uZmlndXJlLmFj
Cj4+ICsrKyBiL2NvbmZpZ3VyZS5hYwo+PiBAQCAtMzgsNiArMzgsNyBAQCBQS0dfQ0hFQ0tfTU9E
VUxFUyhEUk0sIGxpYmRybSkKPj4gICBQS0dfQ0hFQ0tfTU9EVUxFUyhYMTEsIHgxMSkKPj4gICBQ
S0dfQ0hFQ0tfTU9EVUxFUyhYRklYRVMsIHhmaXhlcykKPj4gICBQS0dfQ0hFQ0tfTU9EVUxFUyhY
UkFORFIsIHhyYW5kcikKPj4gK1BLR19DSEVDS19NT0RVTEVTKFhFWFQsIHhleHQpCj4+ICAgCj4+
ICAgUEtHX0NIRUNLX01PRFVMRVMoSlBFRywgbGlianBlZywgLCBbCj4+ICAgICAgIEFDX0NIRUNL
X0xJQihqcGVnLCBqcGVnX2Rlc3Ryb3lfZGVjb21wcmVzcywKPj4gZGlmZiAtLWdpdCBhL3NyYy94
bGliLWNhcHR1cmUuY3BwIGIvc3JjL3hsaWItY2FwdHVyZS5jcHAKPj4gbmV3IGZpbGUgbW9kZSAx
MDA2NDQKPj4gaW5kZXggMDAwMDAwMC4uNzgzN2VlMgo+PiAtLS0gL2Rldi9udWxsCj4+ICsrKyBi
L3NyYy94bGliLWNhcHR1cmUuY3BwCj4+IEBAIC0wLDAgKzEsMTY5IEBACj4+ICsvKiBBIGhlbHBl
ciBjbGFzc2VzIHRoYXQgd3JhcHMgWCBkaXNwbGF5IGluZm9ybWF0aW9uIFhJbWFnZSBjYXB0dXJp
bmcKPj4gZnVuY3Rpb25zCj4+ICsgKgo+PiArICogXGNvcHlyaWdodAo+PiArICogQ29weXJpZ2h0
IDIwMTkgUmVkIEhhdCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCj4+ICsgKi8KPj4gKwo+PiAr
I2luY2x1ZGUgPHN5cy9pcGMuaD4KPj4gKyNpbmNsdWRlIDxzeXMvc2htLmg+Cj4+ICsjaW5jbHVk
ZSAieGxpYi1jYXB0dXJlLmhwcCIKPj4gKwo+PiArbmFtZXNwYWNlIHNwaWNlIHsKPj4gK25hbWVz
cGFjZSBzdHJlYW1pbmdfYWdlbnQgewo+PiArCj4+ICsvKioqKioqKioqKioqKioqKioqKiogWElt
ZyBDbGFzcyBJbXBsICoqKioqKioqKioqKioqKioqKioqKioqLwo+PiArCj4+ICtYSW1nOjpYSW1n
KFhJbWFnZSAqeF9pbWFnZSwgYm9vbCBpc19zaG0sIGJvb2wgbmV3X3Jlcykgewo+IHN0eWxlOiBi
cmFja2V0IG9uIG5leHQgbGluZQo+Cj4+ICsgICAgIHRoaXMtPnhfaW1hZ2UgPSB4X2ltYWdlOwo+
PiArICAgICB0aGlzLT54X3NobSA9IGlzX3NobTsKPj4gKyAgICAgdGhpcy0+bmV3X3JlcyA9IG5l
d19yZXM7Cj4gQmV0dGVyIHRvIHVzZSBjbGFzcyBpbml0aWFsaXplZCwgZXZlbiBpZiBpbiB0aGlz
IGNhc2Ugd29uJ3QgY2hhbmdlCj4gbXVjaC4KCldoYXQgZG8geW91IG1lYW4gYnkgY2xhc3MgaW5p
dGlhbGl6ZWQ/CgpYSW1nKFhJbWFnZSAqeF9pbWFnZSwgYm9vbCBpc19zaG0sIGJvb2wgbmV3X3Jl
cyk6IHhfaW1hZ2UoeF9pbWFnZSksIAp4X3NobShpc19zaG0pLG5ld19yZXMobmV3X3Jlcyk/CgoK
Cj4KPj4gK30KPj4gKwo+PiArWEltZzo6flhJbWcoKSB7Cj4+ICsgICAgaWYgKCF4X3NobSkgewo+
PiArICAgICAgICBYRGVzdHJveUltYWdlKHhfaW1hZ2UpOwo+PiArICAgIH0gLy8gZWxzZSB0aGUg
WGxpYkNhcHR1cmUgd2lsbCBkZXN0cm95IGl0Cj4+ICt9Cj4+ICsKPj4gK2NoYXIgKlhJbWc6Omdl
dF9kYXRhKCkgewo+PiArICAgIHJldHVybiB4X2ltYWdlLT5kYXRhOwo+PiArfQo+PiArCj4+ICtp
bnQgWEltZzo6aGVpZ2h0KCkgewo+PiArICAgIHJldHVybiB4X2ltYWdlLT5oZWlnaHQ7Cj4+ICt9
Cj4+ICsKPj4gK2ludCBYSW1nOjp3aWR0aCgpIHsKPj4gKyAgICByZXR1cm4geF9pbWFnZS0+d2lk
dGg7Cj4+ICt9Cj4+ICsKPj4gK2ludCBYSW1nOjpkYXRhX3NpemUoKSB7Cj4+ICsgICAgcmV0dXJu
IHhfaW1hZ2UtPmhlaWdodCAqIHhfaW1hZ2UtPmJ5dGVzX3Blcl9saW5lOwo+PiArfQo+PiArCj4+
ICtib29sIFhJbWc6Om5ld19yZXNvbHV0aW9uKCkgewo+PiArICAgcmV0dXJuIG5ld19yZXM7Cj4+
ICt9Cj4+ICsKPiBJIHdvdWxkIGlubGluZSB0aGVzZSBpbiB0aGUgaGVhZGVyLiBBbHNvIEkgd291
bGQgYWRkIGNvbnN0LCB0aGV5IGRvbid0Cj4gYWxsb3cgdG8gY2hhbmdlIHRoZSBvYmplY3QuCj4K
PiBUaGlzICJuZXdfcmVzb2x1dGlvbiIgZG9lcyBub3QgYXBwbHkgdG8gdGhlICJwcm92aWRlcyBh
IHdyYXBwaW5nIGNsYXNzIGZvcgo+IFhJbWFnZSIsIGFyZSBtb3JlIHJlbGF0ZWQgdG8gY2FwdHVy
ZSBpbnRlcmZhY2UuIE1heWJlICJYQ2FwdHVyZWRJbWciIGFzIG5hbWUKPiBvZiB0aGUgY2xhc3M/
Cj4KPj4gKy8qKioqKioqKioqKioqKioqKiogWGxpYkNhcHR1cmUgQ2xhc3MgSW1wbCAqKioqKioq
KioqKioqKioqKioqLwo+PiArCj4+ICtzdGF0aWMgaW50ICgqcHJldmlvdXNfeF9lcnJfaGFuZGxl
cikoRGlzcGxheSAqZGlzcGxheSwgWEVycm9yRXZlbnQgKmV2ZW50KSA9Cj4+IDA7Cj4gYmV0dGVy
ICI9IG51bGxwdHIiIG9yIGF0IGxlYXN0ICI9IE5VTEwiIChhbHRob3VnaCAwIGZvciBoaXN0b3Jp
YyByZWFzb24gd29ya3MpLgo+Cj4+ICtzdGF0aWMgYm9vbCB4ZXJyb3IgPSBmYWxzZTsKPj4gKwo+
PiArLyogVGhpcyBpcyB1c2VkIG1haW5seSB0byBzaWxlbmNlIHggZXJyb3IgaW4gY2FzZSBvZiBy
ZXNvbHV0aW9uIGNoYW5nZSAqLwo+PiArc3RhdGljIGludCB4X2Vycl9oYW5kbGVyKERpc3BsYXkg
KmRpc3BsYXksIFhFcnJvckV2ZW50ICpldmVudCkgewo+PiArICAgIC8vVE9ETzogcHJpbnQgc29t
ZSBlcnJvciBpbmZvcm1hdGlvbiA/Cj4+ICsgICAgc3dpdGNoIChldmVudC0+ZXJyb3JfY29kZSkg
ewo+PiArICAgICAgICBjYXNlIEJhZEFjY2VzczoKPiBzdHlsZTogdG9vIGluZGVudGVkLgo+Cj4+
ICsgICAgICAgIGNhc2UgQmFkTWF0Y2g6Cj4+ICsgICAgICAgICAgICB4ZXJyb3IgPSB0cnVlOwo+
PiArICAgICAgICAgICAgcmV0dXJuIDA7Cj4+ICsgICAgICAgIGRlZmF1bHQ6Cj4+ICsgICAgICAg
ICAgICByZXR1cm4gcHJldmlvdXNfeF9lcnJfaGFuZGxlcihkaXNwbGF5LCBldmVudCk7Cj4+ICsg
ICAgfQo+PiArfQo+PiArCj4+ICt2b2lkIFhsaWJDYXB0dXJlOjppbml0X3hzaG0oKSB7Cj4+ICsg
ICAgVmlzdWFsICp2aXN1YWwgPSBEZWZhdWx0VmlzdWFsKGRpc3BsYXksIHNjcmVlbik7Cj4+ICsg
ICAgdW5zaWduZWQgaW50IGRlcHRoID0gRGVmYXVsdERlcHRoKGRpc3BsYXksIHNjcmVlbik7Cj4+
ICsgICAgWFdpbmRvd0F0dHJpYnV0ZXMgd2luX2luZm87Cj4+ICsKPj4gKyAgICB4c2htX2VuYWJs
ZWQgPSBmYWxzZTsKPj4gKyAgICB4ZXJyb3IgPSBmYWxzZTsKPj4gKyAgICAvLyBDcmVhdGUgU2hh
cmVkIE1lbW9yeSBYSW1hZ2UKPj4gKyAgICBYR2V0V2luZG93QXR0cmlidXRlcyhkaXNwbGF5LCB3
aW4sICZ3aW5faW5mbyk7IC8vIHVwZGF0ZSBhdHRyaWJ1dGVzCj4+ICsgICAgeHNobV9pbWFnZSA9
IFhTaG1DcmVhdGVJbWFnZShkaXNwbGF5LCB2aXN1YWwsIGRlcHRoLCBaUGl4bWFwLCBudWxscHRy
LAo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJnNobV9pbmZvLCB3aW5faW5m
by53aWR0aCwKPj4gd2luX2luZm8uaGVpZ2h0KTsKPj4gKyAgICBpZiAoIXhzaG1faW1hZ2UpIHsK
Pj4gKyAgICAgICAgcmV0dXJuOwo+PiArICAgIH0KPj4gKyAgICAvLyBBbGxvY2F0ZSBzaG0gYnVm
ZmVyCj4+ICsgICAgaW50IHNobV9pZCA9IHNobWdldChJUENfUFJJVkFURSwgeHNobV9pbWFnZS0+
Ynl0ZXNfcGVyX2xpbmUgKgo+PiB4c2htX2ltYWdlLT5oZWlnaHQsIElQQ19DUkVBVHwwNzc3KTsK
Pj4gKyAgICBpZiAoc2htX2lkID09IC0xKSB7Cj4+ICsgICAgICAgIFhEZXN0cm95SW1hZ2UoeHNo
bV9pbWFnZSk7Cj4gSSBzdXBwb3NlIHlvdSB3YW50IHRvIHJlc2V0IHhzaG1faW1hZ2UgdG9vIHRv
IGF2b2lkIGRhbmRsaW5nIHBvaW50ZXJzLgoKeHNobV9pbWFnZT8KCgo+Cj4+ICsgICAgICAgIHJl
dHVybjsKPj4gKyAgICB9Cj4+ICsKPj4gKyAgICAvLyBBdHRhY2ggc2hhcmUgbWVtb3J5IGJ1ZmVy
Cj4+ICsgICAgdm9pZCAqc2htX2FkZHIgPSBzaG1hdChzaG1faWQsIG51bGxwdHIsIDApOwo+PiAr
ICAgIGlmIChzaG1fYWRkciA9PSAodm9pZCopLTEpIHsKPj4gKyAgICAgICAgWERlc3Ryb3lJbWFn
ZSh4c2htX2ltYWdlKTsKPj4gKyAgICAgICAgc2htY3RsKHNobV9pZCwgSVBDX1JNSUQsIG51bGxw
dHIpOwo+PiArICAgICAgICByZXR1cm47Cj4+ICsgICAgfQo+PiArICAgIHNobV9pbmZvLnNobWlk
ID0gc2htX2lkOwo+PiArICAgIHNobV9pbmZvLnNobWFkZHIgPSB4c2htX2ltYWdlLT5kYXRhID0g
KGNoYXIqKXNobV9hZGRyOwo+PiArICAgIHNobV9pbmZvLnJlYWRPbmx5ID0gZmFsc2U7Cj4+ICsg
ICAgWFNobUF0dGFjaChkaXNwbGF5LCAmc2htX2luZm8pOwo+PiArICAgIFhTeW5jKGRpc3BsYXks
IGZhbHNlKTsKPj4gKwo+PiArICAgIGlmICgheGVycm9yKSB7Cj4+ICsgICAgICAgIHhzaG1fZW5h
YmxlZCA9IHRydWU7Cj4+ICsgICAgICAgIHJldHVybjsgLy8gWFNobSBpbml0aWFsaXphdGlvbiBz
dWNjZWVkZWQKPj4gKyAgICB9Cj4+ICt9Cj4+ICsKPj4gK1hJbWcgKlhsaWJDYXB0dXJlOjpjYXB0
dXJlKCkgewo+PiArICAgIFhXaW5kb3dBdHRyaWJ1dGVzIHdpbl9pbmZvOwo+PiArICAgIGJvb2wg
Y2hhbmdlZCA9IGZhbHNlOwo+PiArICAgIGludCB0cmllcyA9IDA7Cj4+ICsKPj4gKyAgICAvKiBU
aGlzIGNvZGUgZmxvdyBhbGxvd3MgdG8gb3ZlcmNvbWUgcmVzb2x1dGlvbiBjaGFuZ2UgdGhhdCBv
Y2N1cnMganVzdAo+PiArICAgICAqIGFmdGVyIGdldHRpbmcgdGhlIGF0dHJpYnV0ZXMgYW5kIGJl
Zm9yZSBhc2tpbmcgZm9yIHRoZSBYSW1hZ2UKPj4gKyAgICAgKi8KPj4gKyAgICBkbyB7Cj4+ICsg
ICAgICAgIFhHZXRXaW5kb3dBdHRyaWJ1dGVzKGRpc3BsYXksIHdpbiwgJndpbl9pbmZvKTsgLy8g
dXBkYXRlIGF0dHJpYnV0ZXMKPj4gKwo+PiArICAgICAgICBpZiAobGFzdF93aWR0aCAhPSB3aW5f
aW5mby53aWR0aCB8fCBsYXN0X2hlaWdodCAhPSB3aW5faW5mby5oZWlnaHQpCj4+IHsKPj4gKyAg
ICAgICAgICAgIGlmICh4c2htX2VuYWJsZWQgJiYgeHNobV9pbWFnZSkgeyAvLyByZWluaXQgeHNo
bSBleHRlbnRpb24KPj4gKyAgICAgICAgICAgICAgICBkZWluaXRfeHNobSgpOwo+PiArICAgICAg
ICAgICAgICAgIGluaXRfeHNobSgpOwo+PiArICAgICAgICAgICAgfQo+PiArICAgICAgICAgICAg
Y2hhbmdlZCA9IHRydWU7IC8vIHJlc29sdXRpb24gY2hhbmdlZAo+PiArICAgICAgICAgICAgbGFz
dF93aWR0aCA9IHdpbl9pbmZvLndpZHRoOwo+PiArICAgICAgICAgICAgbGFzdF9oZWlnaHQgPSB3
aW5faW5mby5oZWlnaHQ7Cj4+ICsgICAgICAgIH0KPj4gKyAgICAgICAgLy8gVE9ETzogcm91bmQg
ZG93biB0aGUgcmVzb3VsdGlvbiAvIHVzZSBjdXN0b20gcmVzb3VsdGlvbgo+IHNvbWUgdHlwb3Mg
aW4gY29tbWVudAo+Cj4+ICsgICAgICAgIGlmICh4c2htX2VuYWJsZWQgJiYgeHNobV9pbWFnZSkg
ewo+PiArICAgICAgICAgICAgaWYgKFhTaG1HZXRJbWFnZShkaXNwbGF5LCB3aW4sIHhzaG1faW1h
Z2UsIHdpbl9pbmZvLngsCj4+IHdpbl9pbmZvLnksIEFsbFBsYW5lcykpIHsKPj4gKyAgICAgICAg
ICAgICAgICByZXR1cm4gbmV3IFhJbWcoeHNobV9pbWFnZSwgdHJ1ZSwgY2hhbmdlZCk7Cj4+ICsg
ICAgICAgICAgICB9Cj4+ICsgICAgICAgIH0KPj4gKyAgICAgICAgWEltYWdlICppbWFnZSA9IFhH
ZXRJbWFnZShkaXNwbGF5LCB3aW4sIHdpbl9pbmZvLngsIHdpbl9pbmZvLnksCj4+IHdpbl9pbmZv
LndpZHRoLAo+PiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbl9pbmZvLmhl
aWdodCwgQWxsUGxhbmVzLCBaUGl4bWFwKTsKPj4gKyAgICAgICAgaWYgKGltYWdlKSB7Cj4+ICsg
ICAgICAgICAgICByZXR1cm4gbmV3IFhJbWcoaW1hZ2UsIGZhbHNlLCBjaGFuZ2VkKTsKPj4gKyAg
ICAgICAgfQo+PiArICAgIH0gd2hpbGUgKCsrdHJpZXMgPCAyKTsgLy8gdGhlcmUgd2FzIGFuIGVy
cm9yIHRvIGdldCB0aGUgaW1hZ2UsIHRyeSBvbmNlCj4+IG1vcmUgKG1pZ2h0IGJlIGEgcmVzb3Vs
dGlvbiBjaGFuZ2UpCj4+ICsgICAgcmV0dXJuIG51bGxwdHI7IC8vIGZhaWwKPj4gK30KPj4gKwo+
PiArdm9pZCBYbGliQ2FwdHVyZTo6ZGVpbml0X3hzaG0oKSB7Cj4+ICsgICAgaWYgKHhzaG1fZW5h
YmxlZCAmJiB4c2htX2ltYWdlKSB7Cj4+ICsgICAgICAgIFhTaG1EZXRhY2ggKGRpc3BsYXksICZz
aG1faW5mbyk7Cj4+ICsgICAgICAgIHhzaG1faW1hZ2UtPmYuZGVzdHJveV9pbWFnZSh4c2htX2lt
YWdlKTsKPj4gKyAgICAgICAgc2htZHQoc2htX2luZm8uc2htYWRkcik7Cj4+ICsgICAgICAgIHNo
bWN0bChzaG1faW5mby5zaG1pZCwgSVBDX1JNSUQsIDApOwo+PiArICAgICAgICB4c2htX2ltYWdl
ID0gbnVsbHB0cjsKPj4gKyAgICAgICAgeHNobV9lbmFibGVkID0gZmFsc2U7Cj4+ICsgICAgfQo+
PiArfQo+PiArCj4+ICtYbGliQ2FwdHVyZTo6WGxpYkNhcHR1cmUoRGlzcGxheSAqZGlzcGxheSk6
Cj4+ICsgICAgZGlzcGxheShkaXNwbGF5KQo+PiArewo+PiArICAgIFhXaW5kb3dBdHRyaWJ1dGVz
IHdpbl9pbmZvOwo+PiArICAgIHRoaXMtPnNjcmVlbiA9IFhEZWZhdWx0U2NyZWVuKGRpc3BsYXkp
Owo+PiArICAgIHRoaXMtPndpbiA9IFJvb3RXaW5kb3coZGlzcGxheSwgc2NyZWVuKTsKPj4gKyAg
ICBYR2V0V2luZG93QXR0cmlidXRlcyhkaXNwbGF5LCB3aW4sICZ3aW5faW5mbyk7IC8vIHVwZGF0
ZSBhdHRyaWJ1dGVzCj4+ICsgICAgbGFzdF93aWR0aCA9IC0xOwo+PiArICAgIGxhc3RfaGVpZ2h0
ID0gLTE7Cj4+ICsgICAgcHJldmlvdXNfeF9lcnJfaGFuZGxlciA9IFhTZXRFcnJvckhhbmRsZXIo
eF9lcnJfaGFuZGxlcik7Cj4gaXQgbG9va3MgbGlrZSB0aGlzIGNsYXNzIGlzIGEgc2luZ2xldG9u
LCBtYXliZSBjYWxsIFhTZXRFcnJvckhhbmRsZXIKPiBvbmx5IGlmIHByZXZpb3VzX3hfZXJyX2hh
bmRsZXIgaXMgbnVsbHB0ciA/Cj4gQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRoaXMgZnVuY3Rpb24g
c2V0IGZvciB0aGUgZW50aXJlIHByb2dyYW0/CgoKUG9zc2libHkgc2hvdWxkIGJlIHNldCBiYWNr
IHRvIGRlZmF1bHQgb24gZGVzdHJ1Y3Rpb24sIGJ1dCB3ZSBoYXZlIHRvCmhhdmUgaXQgb3RoZXJ3
aXNlIGFueSB4ZXJyb3Igd2lsbCBzaHV0IHRoZSBhZ2VudC4KCgo+Cj4+ICsgICAgaW5pdF94c2ht
KCk7Cj4+ICt9Cj4+ICsKPj4gK1hsaWJDYXB0dXJlOjp+WGxpYkNhcHR1cmUoKSB7Cj4+ICsgICAg
ZGVpbml0X3hzaG0oKTsKPj4gK30KPj4gKwo+PiArfX0gLy8gbmFtZXNwYWNlIHNwaWNlOjpzdHJl
YW1pbmdfYWdlbnQKPj4gZGlmZiAtLWdpdCBhL3NyYy94bGliLWNhcHR1cmUuaHBwIGIvc3JjL3hs
aWItY2FwdHVyZS5ocHAKPj4gbmV3IGZpbGUgbW9kZSAxMDA2NDQKPj4gaW5kZXggMDAwMDAwMC4u
OTMyMDBkYwo+PiAtLS0gL2Rldi9udWxsCj4+ICsrKyBiL3NyYy94bGliLWNhcHR1cmUuaHBwCj4+
IEBAIC0wLDAgKzEsNTMgQEAKPj4gKy8qICBBIGhlbHBlciBjbGFzc2VzIHRoYXQgd3JhcHMgWCBk
aXNwbGF5IGluZm9ybWF0aW9uIFhJbWFnZSBjYXB0dXJpbmcKPj4gZnVuY3Rpb25zCj4+ICsgKgo+
PiArICogXGNvcHlyaWdodAo+PiArICogQ29weXJpZ2h0IDIwMTkgUmVkIEhhdCBJbmMuIEFsbCBy
aWdodHMgcmVzZXJ2ZWQuCj4+ICsgKi8KPj4gKwo+PiArI2lmbmRlZiBTUElDRV9TVFJFQU1JTkdf
QUdFTlRfWExJQl9DQVBUVVJFX0hQUCAvLyBuZWVkIGhlYWRlciBmaWxlPwo+PiArI2RlZmluZSBT
UElDRV9TVFJFQU1JTkdfQUdFTlRfWExJQl9DQVBUVVJFX0hQUAo+PiArCj4+ICsjaW5jbHVkZSA8
WDExL1hsaWIuaD4KPj4gKyNpbmNsdWRlIDxYMTEvWHV0aWwuaD4KPj4gKyNpbmNsdWRlIDxYMTEv
ZXh0ZW5zaW9ucy9YU2htLmg+Cj4+ICsKPj4gK25hbWVzcGFjZSBzcGljZSB7Cj4+ICtuYW1lc3Bh
Y2Ugc3RyZWFtaW5nX2FnZW50IHsKPj4gKwo+PiArY2xhc3MgWEltZwo+PiArewo+PiArcHVibGlj
Ogo+PiArICAgIFhJbWcoWEltYWdlICp4X2lhbWdlLCBib29sIGlzX3NobSwgYm9vbCBuZXdfcmVz
b2x1dGlvbik7Cj4+ICsgICAgflhJbWcoKTsKPj4gKyAgICBjaGFyICpnZXRfZGF0YSgpOwo+PiAr
ICAgIGludCBkYXRhX3NpemUoKTsgLy8gd2l0aCBjb25zaWRlcmluZyBzdHJpZGUKPj4gKyAgICBp
bnQgaGVpZ2h0KCk7Cj4+ICsgICAgaW50IHdpZHRoKCk7Cj4+ICsgICAgYm9vbCBuZXdfcmVzb2x1
dGlvbigpOwo+PiArcHJpdmF0ZToKPj4gKyAgICBYSW1hZ2UgKnhfaW1hZ2U7Cj4+ICsgICAgYm9v
bCB4X3NobTsKPj4gKyAgICBib29sIG5ld19yZXM7Cj4+ICt9Owo+PiArCj4+ICtjbGFzcyBYbGli
Q2FwdHVyZQo+PiArewo+PiArcHVibGljOgo+PiArICAgIFhsaWJDYXB0dXJlKERpc3BsYXkgKmRp
c3BsYXkpOyAvLyBhZGQgZW1wdHkgY29uc3RydWN0b3I/Cj4+ICsgICAgflhsaWJDYXB0dXJlKCk7
Cj4+ICsgICAgWEltZyAqY2FwdHVyZSgpOyAvLyBjYWxsZXIgc2hvdWxkIGRlbGV0ZSB0aGUgcmV0
dXJuIGltYWdlCj4gVXNlIHVuaXF1ZV9wdHIgaW5zdGVhZCBvZiB0aGUgY29tbWVudD8KCgpUaGUg
Y2FsbGVyIG1heSBzdGlsbCB1c2UgdGhlIGRhdGEgYWxzbyBhZnRlciBnZXR0aW5nIG91dCBvZgpz
Y29wZSwgZm9yIGV4YW1wbGUsIGdzdC1wbHVnaW4gbmVlZHMgdG8gaGF2ZSBpdCBhbGl2ZQp1bnRp
bCB0aGUgR0Rlc3Ryb3lOb3RpZnkgaXMgY2FsbGVkCgpTbmlyLgoKPgo+PiArcHJpdmF0ZToKPj4g
KyAgICBpbnQgbGFzdF93aWR0aCwgbGFzdF9oZWlnaHQ7Cj4+ICsgICAgRGlzcGxheSAqY29uc3Qg
ZGlzcGxheTsKPj4gKyAgICBpbnQgc2NyZWVuOwo+PiArICAgIFdpbmRvdyB3aW47Cj4+ICsgICAg
WEltYWdlICp4c2htX2ltYWdlID0gbnVsbHB0cjsKPj4gKyAgICBYU2htU2VnbWVudEluZm8gc2ht
X2luZm87Cj4+ICsgICAgYm9vbCB4c2htX2VuYWJsZWQgPSBmYWxzZTsKPj4gKyAgICB2b2lkIGlu
aXRfeHNobSgpOwo+PiArICAgIHZvaWQgZGVpbml0X3hzaG0oKTsKPj4gK307Cj4+ICsKPj4gK319
IC8vIG5hbWVzcGFjZSBzcGljZTo6c3RyZWFtaW5nX2FnZW50Cj4+ICsKPj4gKyNlbmRpZiAvLyBT
UElDRV9TVFJFQU1JTkdfQUdFTlRfWExJQl9DQVBUVVJFX0hQUAo+IEZyZWRpYW5vCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClNwaWNlLWRldmVsIG1haWxp
bmcgbGlzdApTcGljZS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5m
cmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9zcGljZS1kZXZlbA==
