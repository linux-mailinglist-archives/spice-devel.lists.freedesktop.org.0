Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 22894CE172
	for <lists+spice-devel@lfdr.de>; Mon,  7 Oct 2019 14:19:45 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 339136E5C8;
	Mon,  7 Oct 2019 12:19:42 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id CEAE06E5C8
 for <spice-devel@lists.freedesktop.org>; Mon,  7 Oct 2019 12:19:40 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx08.intmail.prod.int.phx2.redhat.com
 [10.5.11.23])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 74360806A50
 for <spice-devel@lists.freedesktop.org>; Mon,  7 Oct 2019 12:19:40 +0000 (UTC)
Received: from wingsuit.mxp.redhat.com (unknown [10.32.181.37])
 by smtp.corp.redhat.com (Postfix) with ESMTP id F259F3DAD
 for <spice-devel@lists.freedesktop.org>; Mon,  7 Oct 2019 12:19:39 +0000 (UTC)
From: Victor Toso <victortoso@redhat.com>
To: spice-devel@lists.freedesktop.org
Date: Mon,  7 Oct 2019 14:19:33 +0200
Message-Id: <20191007121935.22567-6-victortoso@redhat.com>
In-Reply-To: <20191007121935.22567-1-victortoso@redhat.com>
References: <20191007121935.22567-1-victortoso@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.84 on 10.5.11.23
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.6.2
 (mx1.redhat.com [10.5.110.67]); Mon, 07 Oct 2019 12:19:40 +0000 (UTC)
Subject: [Spice-devel] [spice v1 6/8] tests: migrate: add option for
 hostname change
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

RnJvbTogVmljdG9yIFRvc28gPG1lQHZpY3RvcnRvc28uY29tPgoKVGhpcyBpcyB1c2VkIGluIHRo
ZSBtaWdyYXRlIG1lc3NhZ2UgYW5kIGJlaW5nIGFibGUgdG8gdHdlYWsgaXQgYWxsb3dzCmNsaWVu
dHMgZnJvbSBkaWZmZXJlbnQgbWFjaGluZXMgdG8gdGVzdCB0aGlzIGxvY2FsIG1pZ3JhdGlvbiB0
ZXN0LgoKRXhhbXBsZSBvZiB1c2FnZToKICAgIC4vbWlncmF0ZS5weSAtLWhvc3RuYW1lIDE5Mi4x
NjguMTIyLjEgLS13YWl0LXVzZXItY29ubmVjdAoKSW4gYSBWTSB3aXRoIGFjY2VzcyB0byAxOTIu
MTY4LjEyMi4xOgogICAgcmVtb3RlLXZpZXdlciBzcGljZTovLzE5Mi4xNjguMTIyLjE6NTkxMQoK
U2lnbmVkLW9mZi1ieTogVmljdG9yIFRvc28gPHZpY3RvcnRvc29AcmVkaGF0LmNvbT4KLS0tCiB0
ZXN0cy9taWdyYXRlLnB5IHwgMjMgKysrKysrKysrKysrKystLS0tLS0tLS0KIDEgZmlsZSBjaGFu
Z2VkLCAxNCBpbnNlcnRpb25zKCspLCA5IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3Rlc3Rz
L21pZ3JhdGUucHkgYi90ZXN0cy9taWdyYXRlLnB5CmluZGV4IDc0MmM5ZmFiLi4yZjhiM2ZiYiAx
MDA3NTUKLS0tIGEvdGVzdHMvbWlncmF0ZS5weQorKysgYi90ZXN0cy9taWdyYXRlLnB5CkBAIC0y
MCw3ICsyMCw3IEBAIFdpbGwgbGVhdmUgYSBsb2cgZmlsZSwgbWlncmF0ZV90ZXN0LmxvZywgaW4g
Y3VycmVudCBkaXJlY3RvcnkuCiAjIGFuZCByZXBlYXQ6CiAjICBhY3RpdmUgd2FpdCB1bnRpbCBp
dCdzIGFjdGl2ZQogIyAgYWN0aXZlIGNsaWVudF9taWdyYXRlX2luZm8KLSMgIGFjdGl2ZSBtaWdy
YXRlIHRjcDpsb2NhbGhvc3Q6OTAwMAorIyAgYWN0aXZlIG1pZ3JhdGUgdGNwOiRob3N0bmFtZTo5
MDAwCiAjICBfd2FpdCBmb3IgZXZlbnQgb2YgcXVpdAogIyAgYWN0aXZlIHN0b3AsIGFjdGl2ZTwt
PnBhc3NpdmUKICMKQEAgLTU3LDYgKzU3LDggQEAgZGVmIGdldF9hcmdzKCk6CiAgICAgcGFyc2Vy
LmFkZF9hcmd1bWVudCgnLS1xZW11JywgZGVzdD0ncWVtdScsIGRlZmF1bHQ9Jy4uLy4uL3FlbXUv
eDg2XzY0LXNvZnRtbXUvcWVtdS1zeXN0ZW0teDg2XzY0JykKICAgICBwYXJzZXIuYWRkX2FyZ3Vt
ZW50KCctLWxvZ19maWxlbmFtZScsIGRlc3Q9J2xvZ19maWxlbmFtZScsIGRlZmF1bHQ9J21pZ3Jh
dGUubG9nJykKICAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KCctLWltYWdlJywgZGVzdD0naW1hZ2Un
LCBkZWZhdWx0PScnKQorICAgIHBhcnNlci5hZGRfYXJndW1lbnQoIi0taG9zdG5hbWUiLCBkZXN0
PSdob3N0bmFtZScsIGRlZmF1bHQ9J2xvY2FsaG9zdCcsCisgICAgICAgICAgICAgICAgICAgICAg
ICBoZWxwPSJTZXQgaG9zdG5hbWUgdXNlZCBpbiBtaWdyYXRpb24gbWVzc2FnZSAoZGVmYXVsdDog
bG9jYWxob3N0IikKICAgICBwYXJzZXIuYWRkX2FyZ3VtZW50KCctLWNsaWVudCcsIGRlc3Q9J2Ns
aWVudCcsIGRlZmF1bHQ9J25vbmUnLCBjaG9pY2VzPVsnc3BpY3knLCAncmVtb3RlLXZpZXdlcics
ICdub25lJ10sCiAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJBdXRvbWF0aWNhbGx5IGx1
bmNoIG9uZSBvZiBzdXBwb3J0ZWQgY2xpZW50cyBvciBub25lIChkZWZhdWx0KSIpCiAgICAgcGFy
c2VyLmFkZF9hcmd1bWVudCgnLS12ZGFnZW50JywgZGVzdD0idmRhZ2VudCIsIGFjdGlvbj0nc3Rv
cmVfdHJ1ZScsIGRlZmF1bHQ9RmFsc2UsCkBAIC0xMTUsMTAgKzExNywxMCBAQCBkZWYgc3RhcnRf
cWVtdShxZW11X2V4ZWMsIGltYWdlLCBzcGljZV9wb3J0LCBxbXBfZmlsZW5hbWUsIGluY29taW5n
X3BvcnQ9Tm9uZSwgdwogICAgIHByb2MuaW5jb21pbmdfcG9ydCA9IGluY29taW5nX3BvcnQKICAg
ICByZXR1cm4gcHJvYwogCi1kZWYgc3RhcnRfY2xpZW50KGNsaWVudCwgc3BpY2VfcG9ydCk6Ci0g
ICAgY2xpZW50X2NtZCA9ICJzcGljeSAtLXVyaSBzcGljZTovL2xvY2FsaG9zdDolcyIgJSAoc3Bp
Y2VfcG9ydCkKK2RlZiBzdGFydF9jbGllbnQoY2xpZW50LCBob3N0bmFtZSwgc3BpY2VfcG9ydCk6
CisgICAgY2xpZW50X2NtZCA9ICJzcGljeSAtLXVyaSBzcGljZTovLyVzOiVzIiAlIChob3N0bmFt
ZSwgc3BpY2VfcG9ydCkKICAgICBpZiBjbGllbnQgPT0gInJlbW90ZS12aWV3ZXIiOgotICAgICAg
ICBjbGllbnRfY21kID0gInJlbW90ZS12aWV3ZXIgc3BpY2U6Ly9sb2NhbGhvc3Q6JXMiICUgKHNw
aWNlX3BvcnQpCisgICAgICAgIGNsaWVudF9jbWQgPSAicmVtb3RlLXZpZXdlciBzcGljZTovLyVz
OiVzIiAlIChob3N0bmFtZSwgc3BpY2VfcG9ydCkKIAogICAgIHJldHVybiBQb3BlbihjbGllbnRf
Y21kLnNwbGl0KCksIGV4ZWN1dGFibGU9Y2xpZW50KQogCkBAIC0xNTEsNyArMTUzLDcgQEAgY2xh
c3MgTWlncmF0b3Iob2JqZWN0KToKICAgICBtaWdyYXRpb25fY291bnQgPSAwCiAKICAgICBkZWYg
X19pbml0X18oc2VsZiwgbG9nLCBjbGllbnQsIHFlbXVfZXhlYywgaW1hZ2UsIG1vbml0b3JfZmls
ZXMsCi0gICAgICAgICAgICAgICAgIHNwaWNlX3BvcnRzLCBtaWdyYXRpb25fcG9ydCwgdmRhZ2Vu
dCk6CisgICAgICAgICAgICAgICAgIHNwaWNlX3BvcnRzLCBtaWdyYXRpb25fcG9ydCwgdmRhZ2Vu
dCwgaG9zdG5hbWUpOgogICAgICAgICBzZWxmLmNsaWVudCA9IGNsaWVudCBpZiBjbGllbnQgIT0g
Im5vbmUiIGVsc2UgTm9uZQogICAgICAgICBzZWxmLmxvZyA9IGxvZwogICAgICAgICBzZWxmLnFl
bXVfZXhlYyA9IHFlbXVfZXhlYwpAQCAtMTYwLDYgKzE2Miw3IEBAIGNsYXNzIE1pZ3JhdG9yKG9i
amVjdCk6CiAgICAgICAgIHNlbGYubW9uaXRvcl9maWxlcyA9IG1vbml0b3JfZmlsZXMKICAgICAg
ICAgc2VsZi5zcGljZV9wb3J0cyA9IHNwaWNlX3BvcnRzCiAgICAgICAgIHNlbGYudmRhZ2VudCA9
IHZkYWdlbnQKKyAgICAgICAgc2VsZi5ob3N0bmFtZSA9IGhvc3RuYW1lCiAKICAgICAgICAgc2Vs
Zi5hY3RpdmUgPSBzdGFydF9xZW11KHFlbXVfZXhlYz1xZW11X2V4ZWMsIGltYWdlPWltYWdlLCBz
cGljZV9wb3J0PXNwaWNlX3BvcnRzWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgcW1wX2ZpbGVuYW1lPW1vbml0b3JfZmlsZXNbMF0sIHdpdGhfYWdlbnQ9c2VsZi52ZGFnZW50
KQpAQCAtMTg5LDcgKzE5Miw5IEBAIGNsYXNzIE1pZ3JhdG9yKG9iamVjdCk6CiAgICAgICAgIHdh
aXRfYWN0aXZlKHNlbGYudGFyZ2V0LnFtcCwgRmFsc2UpCiAgICAgICAgIGlmIG5vdCBzZWxmLmNv
bm5lY3RlZF9jbGllbnQ6CiAgICAgICAgICAgICBpZiBzZWxmLmNsaWVudDoKLSAgICAgICAgICAg
ICAgICBzZWxmLmNvbm5lY3RlZF9jbGllbnQgPSBzdGFydF9jbGllbnQoY2xpZW50PXNlbGYuY2xp
ZW50LCBzcGljZV9wb3J0PXNlbGYuc3BpY2VfcG9ydHNbMF0pCisgICAgICAgICAgICAgICAgc2Vs
Zi5jb25uZWN0ZWRfY2xpZW50ID0gc3RhcnRfY2xpZW50KGNsaWVudCA9IHNlbGYuY2xpZW50LAor
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3N0
bmFtZSA9IHNlbGYuaG9zdG5hbWUsCisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIHNwaWNlX3BvcnQgPSBzZWxmLnNwaWNlX3BvcnRzWzBdKQogCiAg
ICAgICAgICAgICBpZiB3YWl0X2Zvcl91c2VyX2lucHV0OgogICAgICAgICAgICAgICAgIHByaW50
ICJ3YWl0aW5nIGZvciBFbnRlciB0byBzdGFydCBtaWdyYXRpb25zIgpAQCAtMjAxLDExICsyMDYs
MTEgQEAgY2xhc3MgTWlncmF0b3Iob2JqZWN0KToKIAogICAgICAgICBzZWxmLmFjdGl2ZS5xbXAu
Y21kKCdjbGllbnRfbWlncmF0ZV9pbmZvJywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAncHJvdG9jb2wnIDogJ3NwaWNlJywKLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgJ2hvc3RuYW1lJyA6ICdsb2NhbGhvc3QnLAorICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAnaG9zdG5hbWUnIDogc2VsZi5ob3N0bmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgJ3BvcnQnIDogc2VsZi50YXJnZXQuc3BpY2VfcG9ydAogICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIH0pCiAgICAgICAgIHNlbGYuYWN0aXZlLnFtcC5jbWQoJ21pZ3JhdGUnLCB7
Ci0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd1cmknOiAndGNwOmxvY2FsaG9zdDol
cycgJSBzZWxmLm1pZ3JhdGlvbl9wb3J0CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICd1cmknOiAndGNwOiVzOiVzJyAlIChzZWxmLmhvc3RuYW1lLCBzZWxmLm1pZ3JhdGlvbl9wb3J0
KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgIHdhaXRfYWN0aXZlKHNl
bGYuYWN0aXZlLnFtcCwgRmFsc2UpCiAgICAgICAgIHdhaXRfYWN0aXZlKHNlbGYudGFyZ2V0LnFt
cCwgVHJ1ZSkKQEAgLTIzOSw3ICsyNDQsNyBAQCBkZWYgbWFpbigpOgogICAgIG1pZ3JhdG9yID0g
TWlncmF0b3IoY2xpZW50PWFyZ3MuY2xpZW50LCBxZW11X2V4ZWM9YXJncy5xZW11X2V4ZWMsCiAg
ICAgICAgIGltYWdlPWFyZ3MuaW1hZ2UsIGxvZz1sb2csIG1vbml0b3JfZmlsZXM9W2FyZ3MucW1w
MSwgYXJncy5xbXAyXSwKICAgICAgICAgbWlncmF0aW9uX3BvcnQ9YXJncy5taWdyYXRlX3BvcnQs
IHNwaWNlX3BvcnRzPVthcmdzLnNwaWNlX3BvcnQxLAotICAgICAgICBhcmdzLnNwaWNlX3BvcnQy
XSwgdmRhZ2VudD1hcmdzLnZkYWdlbnQpCisgICAgICAgIGFyZ3Muc3BpY2VfcG9ydDJdLCB2ZGFn
ZW50PWFyZ3MudmRhZ2VudCwgaG9zdG5hbWU9YXJncy5ob3N0bmFtZSkKICAgICBhdGV4aXQucmVn
aXN0ZXIoY2xlYW51cCwgbWlncmF0b3IpCiAgICAgY291bnRlciA9IDAKICAgICB3aGlsZSBhcmdz
LmNvdW50ZXIgPT0gMCBvciBjb3VudGVyIDwgYXJncy5jb3VudGVyOgotLSAKMi4yMS4wCgpfX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpTcGljZS1kZXZlbCBt
YWlsaW5nIGxpc3QKU3BpY2UtZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0dHBzOi8vbGlz
dHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vc3BpY2UtZGV2ZWw=
