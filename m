Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 6D1F372CA8
	for <lists+spice-devel@lfdr.de>; Wed, 24 Jul 2019 12:54:06 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id CC09C6E501;
	Wed, 24 Jul 2019 10:54:04 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mail-wr1-x42c.google.com (mail-wr1-x42c.google.com
 [IPv6:2a00:1450:4864:20::42c])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 0B2A36E501
 for <spice-devel@lists.freedesktop.org>; Wed, 24 Jul 2019 10:54:03 +0000 (UTC)
Received: by mail-wr1-x42c.google.com with SMTP id y4so46475411wrm.2
 for <spice-devel@lists.freedesktop.org>; Wed, 24 Jul 2019 03:54:02 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references;
 bh=OAPmmfNYO+/8wWA4rYdks49+tQyAsCYylyJ2v97idmM=;
 b=G+xoFGDYVGhZnAPT1+xz59JS1GgHnbDyqygMklzeMhyZwEn9TgA2tEbd0w2Q7bkgLf
 XmPjaB6Ndu3VLalk2COaH58gy90vS0iN3BhnOPqQi9LjqBGi9FZXtkPWD/kY1DOaH2iE
 4bWhJ8GFx8YRuP7Gfu0XjvE9jCJsG7NUHDrEjV+hKG4sU2h1izZZkmrVWOhW6XM1oZgc
 kDtGv+0/2Cc5sV9I3K9wbywWfH9YorcM8yEJRRWljLIcpPC9xrFUA/O+77/OI71DqjJU
 jKe45rhfyx0vlZO2taNkegAx1Ha6PTXahTAHIHpdgVwPcpQgGXpyWOVx/zbIRXImVw9V
 KV0w==
X-Gm-Message-State: APjAAAX2l45WPDroffE8HWNztpX6/ThhKezlq5kmBGSxWipCmfMnyPEz
 63hYotOJsP8ADlcgLLDKJbX3AicE
X-Google-Smtp-Source: APXvYqzD0teqwNi/B8NNkcCgbU58BYCM1KNmBy7NFlsh/6nNMpVGzqVBhTIr0ivhXQqp5qP4wfAuLQ==
X-Received: by 2002:a5d:4e4d:: with SMTP id r13mr38962098wrt.295.1563965641482; 
 Wed, 24 Jul 2019 03:54:01 -0700 (PDT)
Received: from f2.redhat.com (bzq-79-182-115-245.red.bezeqint.net.
 [79.182.115.245])
 by smtp.gmail.com with ESMTPSA id r12sm53542137wrt.95.2019.07.24.03.54.00
 (version=TLS1_2 cipher=ECDHE-RSA-CHACHA20-POLY1305 bits=256/256);
 Wed, 24 Jul 2019 03:54:01 -0700 (PDT)
From: Yuri Benditovich <yuri.benditovich@daynix.com>
To: spice-devel@lists.freedesktop.org
Date: Wed, 24 Jul 2019 13:53:45 +0300
Message-Id: <20190724105351.13753-4-yuri.benditovich@daynix.com>
X-Mailer: git-send-email 2.17.1
In-Reply-To: <20190724105351.13753-1-yuri.benditovich@daynix.com>
References: <20190724105351.13753-1-yuri.benditovich@daynix.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=daynix-com.20150623.gappssmtp.com; s=20150623;
 h=from:to:cc:subject:date:message-id:in-reply-to:references;
 bh=OAPmmfNYO+/8wWA4rYdks49+tQyAsCYylyJ2v97idmM=;
 b=0ib9OgeYKy3ryvmMLHhK3UljU9m1WcaWzUP/HeiW/gOENowLJf6n/jytdcPMTSOj14
 ppL+OuVaWIUbm+eREgfcyNxoiGT+gPed5EdIeRSlf7IYl9XMHv8t4XSoxoEqO/NVbiOO
 UQ5CJg+KvSdIkFxiu1/4qiGXAItp1C8sWRCJSYhYhWY5CiwOgFfLRmHjn5M8OUsoER97
 r++LDaN4mNQuPjqGYqnhbddVjaSFn4AQDx62twJb2TejeR/FkUKeA8/Jji4VH4//8GgZ
 WFCQ16ts49RHNe1fT2lUEjJbMCPsW8Eoc2aT0U8jTojmyA4pRxdDBqeHxHHI3TKCiJ5r
 3ZOQ==
Subject: [Spice-devel] [spice-gtk 3/9] usb-redir: Prepare for creation of
 emulated CD drive
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: yan@daynix.com
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

QWRkZWQgY29tbWFuZC1saW5lIG9wdGlvbiBmb3Igc2hhcmVkIENEIGRldmljZXMgYW5kIHJlc3Bl
Y3RpdmUKcHJvcGVydHkgaW4gdXNiLWRldmljZS1tYW5hZ2VyLgoKU2lnbmVkLW9mZi1ieTogWXVy
aSBCZW5kaXRvdmljaCA8eXVyaS5iZW5kaXRvdmljaEBkYXluaXguY29tPgotLS0KIHNyYy9zcGlj
ZS1vcHRpb24uYyAgICAgICB8IDE1ICsrKysrKysrKysrKysrKwogc3JjL3VzYi1kZXZpY2UtbWFu
YWdlci5jIHwgMzMgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiAyIGZpbGVzIGNo
YW5nZWQsIDQ4IGluc2VydGlvbnMoKykKCmRpZmYgLS1naXQgYS9zcmMvc3BpY2Utb3B0aW9uLmMg
Yi9zcmMvc3BpY2Utb3B0aW9uLmMKaW5kZXggYzJiMDU5ZS4uNGZiY2E5ZiAxMDA2NDQKLS0tIGEv
c3JjL3NwaWNlLW9wdGlvbi5jCisrKyBiL3NyYy9zcGljZS1vcHRpb24uYwpAQCAtMzIsNiArMzIs
NyBAQCBzdGF0aWMgY2hhciAqc21hcnRjYXJkX2RiID0gTlVMTDsKIHN0YXRpYyBjaGFyICpzbWFy
dGNhcmRfY2VydGlmaWNhdGVzID0gTlVMTDsKIHN0YXRpYyBjaGFyICp1c2JyZWRpcl9hdXRvX3Jl
ZGlyZWN0X2ZpbHRlciA9IE5VTEw7CiBzdGF0aWMgY2hhciAqdXNicmVkaXJfcmVkaXJlY3Rfb25f
Y29ubmVjdCA9IE5VTEw7CitzdGF0aWMgZ2NoYXIgKipjZF9zaGFyZV9maWxlcyA9IE5VTEw7CiBz
dGF0aWMgZ2Jvb2xlYW4gc21hcnRjYXJkID0gRkFMU0U7CiBzdGF0aWMgZ2Jvb2xlYW4gZGlzYWJs
ZV9hdWRpbyA9IEZBTFNFOwogc3RhdGljIGdib29sZWFuIGRpc2FibGVfdXNicmVkaXIgPSBGQUxT
RTsKQEAgLTE4Myw2ICsxODQsOCBAQCBHT3B0aW9uR3JvdXAqIHNwaWNlX2dldF9vcHRpb25fZ3Jv
dXAodm9pZCkKICAgICAgICAgICBOXygiRmlsdGVyIHNlbGVjdGluZyBVU0IgZGV2aWNlcyB0byBi
ZSBhdXRvLXJlZGlyZWN0ZWQgd2hlbiBwbHVnZ2VkIGluIiksIE5fKCI8ZmlsdGVyLXN0cmluZz4i
KSB9LAogICAgICAgICB7ICJzcGljZS11c2JyZWRpci1yZWRpcmVjdC1vbi1jb25uZWN0IiwgJ1ww
JywgMCwgR19PUFRJT05fQVJHX1NUUklORywgJnVzYnJlZGlyX3JlZGlyZWN0X29uX2Nvbm5lY3Qs
CiAgICAgICAgICAgTl8oIkZpbHRlciBzZWxlY3RpbmcgVVNCIGRldmljZXMgdG8gcmVkaXJlY3Qg
b24gY29ubmVjdCIpLCBOXygiPGZpbHRlci1zdHJpbmc+IikgfSwKKyAgICAgICAgeyAic3BpY2Ut
c2hhcmUtY2QiLCAnXDAnLCAwLCBHX09QVElPTl9BUkdfU1RSSU5HX0FSUkFZLCAmY2Rfc2hhcmVf
ZmlsZXMsCisgICAgICAgICAgTl8oIk5hbWUgb2YgSVNPIGZpbGUgb3IgQ0QvRFZEIGRldmljZSB0
byBzaGFyZSIpLCBOXygiPGZpbGVuYW1lPiAocmVwZWF0IGFsbG93ZWQpIikgfSwKICAgICAgICAg
eyAic3BpY2UtY2FjaGUtc2l6ZSIsICdcMCcsIDAsIEdfT1BUSU9OX0FSR19JTlQsICZjYWNoZV9z
aXplLAogICAgICAgICAgIE5fKCJJbWFnZSBjYWNoZSBzaXplIChkZXByZWNhdGVkKSIpLCBOXygi
PGJ5dGVzPiIpIH0sCiAgICAgICAgIHsgInNwaWNlLWdsei13aW5kb3ctc2l6ZSIsICdcMCcsIDAs
IEdfT1BUSU9OX0FSR19JTlQsICZnbHpfd2luZG93X3NpemUsCkBAIC0yNzIsNiArMjc1LDE4IEBA
IHZvaWQgc3BpY2Vfc2V0X3Nlc3Npb25fb3B0aW9uKFNwaWNlU2Vzc2lvbiAqc2Vzc2lvbikKICAg
ICAgICAgICAgIGdfb2JqZWN0X3NldChtLCAicmVkaXJlY3Qtb24tY29ubmVjdCIsCiAgICAgICAg
ICAgICAgICAgICAgICAgICAgdXNicmVkaXJfcmVkaXJlY3Rfb25fY29ubmVjdCwgTlVMTCk7CiAg
ICAgfQorICAgIGlmIChjZF9zaGFyZV9maWxlcykgeworICAgICAgICBTcGljZVVzYkRldmljZU1h
bmFnZXIgKm0gPSBzcGljZV91c2JfZGV2aWNlX21hbmFnZXJfZ2V0KHNlc3Npb24sIE5VTEwpOwor
ICAgICAgICBpZiAobSkgeworICAgICAgICAgICAgZ2NoYXIgKipuYW1lID0gY2Rfc2hhcmVfZmls
ZXM7CisgICAgICAgICAgICB3aGlsZSAobmFtZSAmJiAqbmFtZSkgeworICAgICAgICAgICAgICAg
IGdfb2JqZWN0X3NldChtLCAic2hhcmUtY2QiLCAqbmFtZSwgTlVMTCk7CisgICAgICAgICAgICAg
ICAgbmFtZSsrOworICAgICAgICAgICAgfQorICAgICAgICB9CisgICAgICAgIGdfc3RyZnJlZXYo
Y2Rfc2hhcmVfZmlsZXMpOworICAgICAgICBjZF9zaGFyZV9maWxlcyA9IE5VTEw7CisgICAgfQog
ICAgIGlmIChkaXNhYmxlX3VzYnJlZGlyKQogICAgICAgICBnX29iamVjdF9zZXQoc2Vzc2lvbiwg
ImVuYWJsZS11c2JyZWRpciIsIEZBTFNFLCBOVUxMKTsKICAgICBpZiAoZGlzYWJsZV9hdWRpbykK
ZGlmZiAtLWdpdCBhL3NyYy91c2ItZGV2aWNlLW1hbmFnZXIuYyBiL3NyYy91c2ItZGV2aWNlLW1h
bmFnZXIuYwppbmRleCAwOTYxZDE2Li5iMTFiYjE1IDEwMDY0NAotLS0gYS9zcmMvdXNiLWRldmlj
ZS1tYW5hZ2VyLmMKKysrIGIvc3JjL3VzYi1kZXZpY2UtbWFuYWdlci5jCkBAIC03NSw2ICs3NSw3
IEBAIGVudW0gewogICAgIFBST1BfQVVUT19DT05ORUNUX0ZJTFRFUiwKICAgICBQUk9QX1JFRElS
RUNUX09OX0NPTk5FQ1QsCiAgICAgUFJPUF9GUkVFX0NIQU5ORUxTLAorICAgIFBST1BfU0hBUkVf
Q0QKIH07CiAKIGVudW0KQEAgLTQzMyw2ICs0MzQsMjYgQEAgc3RhdGljIHZvaWQgc3BpY2VfdXNi
X2RldmljZV9tYW5hZ2VyX3NldF9wcm9wZXJ0eShHT2JqZWN0ICAgICAgICpnb2JqZWN0LAogICAg
ICAgICBwcml2LT5yZWRpcmVjdF9vbl9jb25uZWN0ID0gZ19zdHJkdXAoZmlsdGVyKTsKICAgICAg
ICAgYnJlYWs7CiAgICAgfQorICAgIGNhc2UgUFJPUF9TSEFSRV9DRDoKKyAgICB7CisjaWZkZWYg
VVNFX1VTQlJFRElSCisgICAgICAgIFVzYkNyZWF0ZURldmljZVBhcmFtZXRlcnMgcGFyYW0gPSB7
IDAgfTsKKyAgICAgICAgY29uc3QgZ2NoYXIgKm5hbWUgPSBnX3ZhbHVlX2dldF9zdHJpbmcodmFs
dWUpOworICAgICAgICAvKiB0aGUgc3RyaW5nIGlzIHRlbXBvcmFyeSwgbm8gbmVlZCB0byBrZWVw
IGl0ICovCisgICAgICAgIFNQSUNFX0RFQlVHKCJzaGFyZV9jZCBzZXQgdG8gJXMiLCBuYW1lKTsK
KyAgICAgICAgaWYgKG5hbWVbMF0gPT0gJyEnKSB7CisgICAgICAgICAgICBuYW1lKys7CisgICAg
ICAgICAgICBwYXJhbS5kZXZpY2VfcGFyYW0uY3JlYXRlX2NkLmRlbGV0ZV9vbl9lamVjdCA9IDE7
CisgICAgICAgIH0KKyAgICAgICAgcGFyYW0uZGV2aWNlX3BhcmFtLmNyZWF0ZV9jZC5maWxlbmFt
ZSA9IG5hbWU7CisgICAgICAgIGlmICghc3BpY2VfdXNiX2JhY2tlbmRfY3JlYXRlX2RldmljZShw
cml2LT5jb250ZXh0LCBVU0JfREVWX1RZUEVfQ0QsICZwYXJhbSkpIHsKKyAgICAgICAgICAgIGdf
d2FybmluZyhwYXJhbS5lcnJvci0+bWVzc2FnZSk7CisgICAgICAgICAgICBzcGljZV91c2JfZGV2
aWNlX21hbmFnZXJfZGV2aWNlX2Vycm9yKHNlbGYsIE5VTEwsIHBhcmFtLmVycm9yKTsKKyAgICAg
ICAgICAgIGdfZXJyb3JfZnJlZShwYXJhbS5lcnJvcik7CisgICAgICAgIH0KKyNlbmRpZgorICAg
ICAgICBicmVhazsKKyAgICB9CiAgICAgZGVmYXVsdDoKICAgICAgICAgR19PQkpFQ1RfV0FSTl9J
TlZBTElEX1BST1BFUlRZX0lEKGdvYmplY3QsIHByb3BfaWQsIHBzcGVjKTsKICAgICAgICAgYnJl
YWs7CkBAIC01MjMsNiArNTQ0LDE4IEBAIHN0YXRpYyB2b2lkIHNwaWNlX3VzYl9kZXZpY2VfbWFu
YWdlcl9jbGFzc19pbml0KFNwaWNlVXNiRGV2aWNlTWFuYWdlckNsYXNzICprbGFzCiAgICAgZ19v
YmplY3RfY2xhc3NfaW5zdGFsbF9wcm9wZXJ0eShnb2JqZWN0X2NsYXNzLCBQUk9QX1JFRElSRUNU
X09OX0NPTk5FQ1QsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwc3BlYyk7
CiAKKyAgICAvKioKKyAgICAqIFNwaWNlVXNiRGV2aWNlTWFuYWdlcjpzaGFyZS1jZDoKKyAgICAq
CisgICAgKiBTZXQgYSBzdHJpbmcgc3BlY2lmeWluZyBhIGZpbGVuYW1lIChJU08pIG9yIHBoeXNp
Y2FsIENEL0RWRCBkZXZpY2UKKyAgICAqIHRvIHNoYXJlIHZpYSBVU0IgYWZ0ZXIgYSBTcGljZSBj
b25uZWN0aW9uIGhhcyBiZWVuIGVzdGFibGlzaGVkLgorICAgICoKKyAgICAqLworICAgIHBzcGVj
ID0gZ19wYXJhbV9zcGVjX3N0cmluZygic2hhcmUtY2QiLCAiU2hhcmUgSVNPIGZpbGUgb3IgZGV2
aWNlIGFzIENEIiwKKyAgICAgICAgIkZpbGUgb3IgZGV2aWNlIG5hbWUgdG8gc2hhcmUiLCBOVUxM
LAorICAgICAgICBHX1BBUkFNX1JFQURXUklURSB8IEdfUEFSQU1fU1RBVElDX1NUUklOR1MpOwor
ICAgIGdfb2JqZWN0X2NsYXNzX2luc3RhbGxfcHJvcGVydHkoZ29iamVjdF9jbGFzcywgUFJPUF9T
SEFSRV9DRCwgcHNwZWMpOworCiAgICAgLyoqCiAgICAgICogU3BpY2VVc2JEZXZpY2VNYW5hZ2Vy
OmZyZWUtY2hhbm5lbHM6CiAgICAgICoKLS0gCjIuMTcuMQoKX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX18KU3BpY2UtZGV2ZWwgbWFpbGluZyBsaXN0ClNwaWNl
LWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9y
Zy9tYWlsbWFuL2xpc3RpbmZvL3NwaWNlLWRldmVs
