Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 553C04B5E6
	for <lists+spice-devel@lfdr.de>; Wed, 19 Jun 2019 12:07:11 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D7B8C89D87;
	Wed, 19 Jun 2019 10:07:09 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id E15A189D87
 for <spice-devel@lists.freedesktop.org>; Wed, 19 Jun 2019 10:07:08 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx04.intmail.prod.int.phx2.redhat.com
 [10.5.11.14])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 8B1663092675
 for <spice-devel@lists.freedesktop.org>; Wed, 19 Jun 2019 10:07:08 +0000 (UTC)
Received: from colo-mx.corp.redhat.com
 (colo-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.21])
 by smtp.corp.redhat.com (Postfix) with ESMTPS id 821EB5D9C6
 for <spice-devel@lists.freedesktop.org>; Wed, 19 Jun 2019 10:07:08 +0000 (UTC)
Received: from zmail25.collab.prod.int.phx2.redhat.com
 (zmail25.collab.prod.int.phx2.redhat.com [10.5.83.31])
 by colo-mx.corp.redhat.com (Postfix) with ESMTP id 76FD354D3C
 for <spice-devel@lists.freedesktop.org>; Wed, 19 Jun 2019 10:07:08 +0000 (UTC)
Date: Wed, 19 Jun 2019 06:07:08 -0400 (EDT)
From: Frediano Ziglio <fziglio@redhat.com>
To: spice-devel@lists.freedesktop.org
Message-ID: <505211853.23631823.1560938828393.JavaMail.zimbra@redhat.com>
In-Reply-To: <20190602193226.19766-1-fziglio@redhat.com>
References: <20190602193226.19766-1-fziglio@redhat.com>
MIME-Version: 1.0
X-Originating-IP: [10.40.205.183, 10.4.195.27]
Thread-Topic: char-device: Don't use RedClient API
Thread-Index: Sg/oat//pL1AriXPPyqD/AnMyOxFlw==
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.14
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.43]); Wed, 19 Jun 2019 10:07:08 +0000 (UTC)
Subject: Re: [Spice-devel] [PATCH spice-server v2 1/2] char-device: Don't
 use RedClient API
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

cGluZyB0aGUgc2VyaWVzCgo+IAo+IFJlZENsaWVudCB3YXMgYW4gb3BhcXVlIHN0cnVjdHVyZSBm
b3IgUmVkQ2hhckRldmljZS4KPiBJdCBzdGFydGVkIHRvIGJlIHVzZWQgd2hlbiBSZWRzU3RhdGUg
c3RhcnRlZCB0byBjb250YWluIGFsbAo+IHRoZSBnbG9iYWwgc3RhdGUuCj4gTWFrZSBpdCBvcGFx
dWUgYWdhaW4gdXNpbmcgYSBuZXcgUmVkQ2hhckRldmljZUNsaWVudE9wYXF1ZS4KPiBUaGUgUmVk
Q2hhckRldmljZUNsaWVudE9wYXF1ZSBkZWZpbmUgaW4gdGhlIGhlYWRlciBhbGxvd3MgdXNlcnMK
PiBvZiB0aGUgY2xhc3MgdG8gb3ZlcnJpZGUgdGhlIHR5cGUgdG8gZ2V0IGEgbW9yZSBzYWZlIHR5
cGUKPiB0aGFuIFJlZENsaWVudC4KPiBUaGUgZGVmaW5lIGF0IHRoZSBiZWdpbm5pbmcgb2YgQyBm
aWxlIGlzIHRvIG1ha2Ugc3VyZSB3ZSBkb24ndAo+IHVzZSB0aGUgb3BhcXVlIHR5cGUgYXMgYSBz
cGVjaWZpYyBvbmUuCj4gCj4gU2lnbmVkLW9mZi1ieTogRnJlZGlhbm8gWmlnbGlvIDxmemlnbGlv
QHJlZGhhdC5jb20+Cj4gLS0tCj4gIHNlcnZlci9jaGFyLWRldmljZS5jIHwgNTIgKysrKysrKysr
KysrKysrKysrKysrKysrLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiAgc2VydmVyL2NoYXItZGV2aWNl
LmggfCAyMiArKysrKysrKysrKy0tLS0tLS0tCj4gIDIgZmlsZXMgY2hhbmdlZCwgNDIgaW5zZXJ0
aW9ucygrKSwgMzIgZGVsZXRpb25zKC0pCj4gCj4gVGhpcyBwYXRjaCB3YXMgbmFtZWQgImNoYXIt
ZGV2aWNlOiBNYWtlIFJlZENsaWVudCBhbiBvcGFxdWUgc3RydWN0dXJlIGFnYWluIgo+IAo+IGRp
ZmYgLS1naXQgYS9zZXJ2ZXIvY2hhci1kZXZpY2UuYyBiL3NlcnZlci9jaGFyLWRldmljZS5jCj4g
aW5kZXggOWVlMjU1NjY0Li44MjI1NWU4MTEgMTAwNjQ0Cj4gLS0tIGEvc2VydmVyL2NoYXItZGV2
aWNlLmMKPiArKysgYi9zZXJ2ZXIvY2hhci1kZXZpY2UuYwo+IEBAIC0yMiw4ICsyMiwxMiBAQAo+
ICAKPiAgI2luY2x1ZGUgPGNvbmZpZy5oPgo+ICAjaW5jbHVkZSA8aW50dHlwZXMuaD4KPiArCj4g
Kwo+ICt0eXBlZGVmIHN0cnVjdCBSZWRDaGFyRGV2aWNlQ2xpZW50T3BhcXVlIFJlZENoYXJEZXZp
Y2VDbGllbnRPcGFxdWU7Cj4gKyNkZWZpbmUgUmVkQ2hhckRldmljZUNsaWVudE9wYXF1ZSBSZWRD
aGFyRGV2aWNlQ2xpZW50T3BhcXVlCj4gKwo+ICAjaW5jbHVkZSAiY2hhci1kZXZpY2UuaCIKPiAt
I2luY2x1ZGUgInJlZC1jbGllbnQuaCIKPiAgI2luY2x1ZGUgInJlZHMuaCIKPiAgI2luY2x1ZGUg
ImdsaWItY29tcGF0LmgiCj4gIAo+IEBAIC0zOSw3ICs0Myw3IEBAIHR5cGVkZWYgZW51bSB7Cj4g
IH0gV3JpdGVCdWZmZXJPcmlnaW47Cj4gIAo+ICBzdHJ1Y3QgUmVkQ2hhckRldmljZVdyaXRlQnVm
ZmVyUHJpdmF0ZSB7Cj4gLSAgICBSZWRDbGllbnQgKmNsaWVudDsgLyogVGhlIGNsaWVudCB0aGF0
IHNlbnQgdGhlIG1lc3NhZ2UgdG8gdGhlIGRldmljZS4KPiArICAgIFJlZENoYXJEZXZpY2VDbGll
bnRPcGFxdWUgKmNsaWVudDsgLyogVGhlIGNsaWVudCB0aGF0IHNlbnQgdGhlIG1lc3NhZ2UKPiB0
byB0aGUgZGV2aWNlLgo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5VTEwgaWYgdGhlIHNl
cnZlciBjcmVhdGVkIHRoZSBtZXNzYWdlICovCj4gICAgICBXcml0ZUJ1ZmZlck9yaWdpbiBvcmln
aW47Cj4gICAgICB1aW50MzJfdCB0b2tlbl9wcmljZTsKPiBAQCAtNDksNyArNTMsNyBAQCBzdHJ1
Y3QgUmVkQ2hhckRldmljZVdyaXRlQnVmZmVyUHJpdmF0ZSB7Cj4gIHR5cGVkZWYgc3RydWN0IFJl
ZENoYXJEZXZpY2VDbGllbnQgUmVkQ2hhckRldmljZUNsaWVudDsKPiAgc3RydWN0IFJlZENoYXJE
ZXZpY2VDbGllbnQgewo+ICAgICAgUmVkQ2hhckRldmljZSAqZGV2Owo+IC0gICAgUmVkQ2xpZW50
ICpjbGllbnQ7Cj4gKyAgICBSZWRDaGFyRGV2aWNlQ2xpZW50T3BhcXVlICpjbGllbnQ7Cj4gICAg
ICBpbnQgZG9fZmxvd19jb250cm9sOwo+ICAgICAgdWludDY0X3QgbnVtX2NsaWVudF90b2tlbnM7
Cj4gICAgICB1aW50NjRfdCBudW1fY2xpZW50X3Rva2Vuc19mcmVlOyAvKiBjbGllbnQgbWVzc2Fn
ZXMgdGhhdCB3ZXJlIGNvbnN1bWVkCj4gICAgICBieSB0aGUgZGV2aWNlICovCj4gQEAgLTEwOCw3
ICsxMTIsNyBAQCByZWRfY2hhcl9kZXZpY2VfcmVhZF9vbmVfbXNnX2Zyb21fZGV2aWNlKFJlZENo
YXJEZXZpY2UKPiAqZGV2KQo+ICBzdGF0aWMgdm9pZAo+ICByZWRfY2hhcl9kZXZpY2Vfc2VuZF9t
c2dfdG9fY2xpZW50KFJlZENoYXJEZXZpY2UgKmRldiwKPiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBSZWRQaXBlSXRlbSAqbXNnLAo+IC0gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIFJlZENsaWVudCAqY2xpZW50KQo+ICsgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIFJlZENoYXJEZXZpY2VDbGllbnRPcGFxdWUgKmNsaWVudCkKPiAgewo+ICAg
ICBSZWRDaGFyRGV2aWNlQ2xhc3MgKmtsYXNzID0gUkVEX0NIQVJfREVWSUNFX0dFVF9DTEFTUyhk
ZXYpOwo+ICAKPiBAQCAtMTE3LDcgKzEyMSw3IEBAIHJlZF9jaGFyX2RldmljZV9zZW5kX21zZ190
b19jbGllbnQoUmVkQ2hhckRldmljZSAqZGV2LAo+ICAKPiAgc3RhdGljIHZvaWQKPiAgcmVkX2No
YXJfZGV2aWNlX3NlbmRfdG9rZW5zX3RvX2NsaWVudChSZWRDaGFyRGV2aWNlICpkZXYsCj4gLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVkQ2xpZW50ICpjbGllbnQsCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVkQ2hhckRldmljZUNsaWVu
dE9wYXF1ZSAqY2xpZW50LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IHVpbnQzMl90IHRva2VucykKPiAgewo+ICAgICBSZWRDaGFyRGV2aWNlQ2xhc3MgKmtsYXNzID0g
UkVEX0NIQVJfREVWSUNFX0dFVF9DTEFTUyhkZXYpOwo+IEBAIC0xNDAsNyArMTQ0LDcgQEAgcmVk
X2NoYXJfZGV2aWNlX29uX2ZyZWVfc2VsZl90b2tlbihSZWRDaGFyRGV2aWNlICpkZXYpCj4gIH0K
PiAgCj4gIHN0YXRpYyB2b2lkCj4gLXJlZF9jaGFyX2RldmljZV9yZW1vdmVfY2xpZW50KFJlZENo
YXJEZXZpY2UgKmRldiwgUmVkQ2xpZW50ICpjbGllbnQpCj4gK3JlZF9jaGFyX2RldmljZV9yZW1v
dmVfY2xpZW50KFJlZENoYXJEZXZpY2UgKmRldiwgUmVkQ2hhckRldmljZUNsaWVudE9wYXF1ZQo+
ICpjbGllbnQpCj4gIHsKPiAgICAgUmVkQ2hhckRldmljZUNsYXNzICprbGFzcyA9IFJFRF9DSEFS
X0RFVklDRV9HRVRfQ0xBU1MoZGV2KTsKPiAgCj4gQEAgLTIyMiw3ICsyMjYsNyBAQCBzdGF0aWMg
dm9pZAo+IHJlZF9jaGFyX2RldmljZV9oYW5kbGVfY2xpZW50X292ZXJmbG93KFJlZENoYXJEZXZp
Y2VDbGllbnQgKmRldl9jbGllCj4gIH0KPiAgCj4gIHN0YXRpYyBSZWRDaGFyRGV2aWNlQ2xpZW50
ICpyZWRfY2hhcl9kZXZpY2VfY2xpZW50X2ZpbmQoUmVkQ2hhckRldmljZSAqZGV2LAo+IC0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlZENs
aWVudCAqY2xpZW50KQo+ICsKPiBSZWRDaGFyRGV2aWNlQ2xpZW50T3BhcXVlCj4gKmNsaWVudCkK
PiAgewo+ICAgICAgR0xpc3QgKml0ZW07Cj4gIAo+IEBAIC00MDAsNyArNDA0LDcgQEAgc3RhdGlj
IHZvaWQKPiByZWRfY2hhcl9kZXZpY2Vfc2VuZF90b19jbGllbnRfdG9rZW5zX2Fic29yYihSZWRD
aGFyRGV2aWNlQ2xpZW50ICpkZQo+ICB9Cj4gIAo+ICB2b2lkIHJlZF9jaGFyX2RldmljZV9zZW5k
X3RvX2NsaWVudF90b2tlbnNfYWRkKFJlZENoYXJEZXZpY2UgKmRldiwKPiAtICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWRDbGllbnQgKmNsaWVudCwKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWRDaGFyRGV2
aWNlQ2xpZW50T3BhcXVlCj4gKmNsaWVudCwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB1aW50MzJfdCB0b2tlbnMpCj4gIHsKPiAgICAgIFJlZENoYXJE
ZXZpY2VDbGllbnQgKmRldl9jbGllbnQ7Cj4gQEAgLTQxNSw3ICs0MTksNyBAQCB2b2lkCj4gcmVk
X2NoYXJfZGV2aWNlX3NlbmRfdG9fY2xpZW50X3Rva2Vuc19hZGQoUmVkQ2hhckRldmljZSAqZGV2
LAo+ICB9Cj4gIAo+ICB2b2lkIHJlZF9jaGFyX2RldmljZV9zZW5kX3RvX2NsaWVudF90b2tlbnNf
c2V0KFJlZENoYXJEZXZpY2UgKmRldiwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBSZWRDbGllbnQgKmNsaWVudCwKPiArICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWRDaGFyRGV2aWNlQ2xpZW50T3BhcXVlCj4g
KmNsaWVudCwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICB1aW50MzJfdCB0b2tlbnMpCj4gIHsKPiAgICAgIFJlZENoYXJEZXZpY2VDbGllbnQgKmRldl9j
bGllbnQ7Cj4gQEAgLTUzNCw3ICs1MzgsNyBAQCBzdGF0aWMgdm9pZCByZWRfY2hhcl9kZXZpY2Vf
d3JpdGVfcmV0cnkodm9pZCAqb3BhcXVlKQo+ICB9Cj4gIAo+ICBzdGF0aWMgUmVkQ2hhckRldmlj
ZVdyaXRlQnVmZmVyICoKPiAtcmVkX2NoYXJfZGV2aWNlX3dyaXRlX2J1ZmZlcl9nZXQoUmVkQ2hh
ckRldmljZSAqZGV2LCBSZWRDbGllbnQgKmNsaWVudCwgaW50Cj4gc2l6ZSwKPiArcmVkX2NoYXJf
ZGV2aWNlX3dyaXRlX2J1ZmZlcl9nZXQoUmVkQ2hhckRldmljZSAqZGV2LAo+IFJlZENoYXJEZXZp
Y2VDbGllbnRPcGFxdWUgKmNsaWVudCwgaW50IHNpemUsCj4gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIFdyaXRlQnVmZmVyT3JpZ2luIG9yaWdpbiwgaW50Cj4gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgIG1pZ3JhdGVkX2RhdGFfdG9rZW5zKQo+ICB7Cj4gICAgICBS
ZWRDaGFyRGV2aWNlV3JpdGVCdWZmZXIgKnJldDsKPiBAQCAtNTk4LDcgKzYwMiw3IEBAIGVycm9y
Ogo+ICB9Cj4gIAo+ICBSZWRDaGFyRGV2aWNlV3JpdGVCdWZmZXIKPiAgKnJlZF9jaGFyX2Rldmlj
ZV93cml0ZV9idWZmZXJfZ2V0X2NsaWVudChSZWRDaGFyRGV2aWNlICpkZXYsCj4gLSAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IFJlZENsaWVudAo+ICpjbGllbnQsCj4gKwo+IFJlZENoYXJEZXZpY2VDbGllbnRPcGFxdWUKPiAq
Y2xpZW50LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICBpbnQgc2l6ZSkKPiAgewo+ICAgICAgc3BpY2VfYXNzZXJ0KGNs
aWVudCk7Cj4gQEAgLTY1OCw3ICs2NjIsNyBAQCB2b2lkIHJlZF9jaGFyX2RldmljZV93cml0ZV9i
dWZmZXJfcmVsZWFzZShSZWRDaGFyRGV2aWNlCj4gKmRldiwKPiAgCj4gICAgICBXcml0ZUJ1ZmZl
ck9yaWdpbiBidWZfb3JpZ2luID0gd3JpdGVfYnVmLT5wcml2LT5vcmlnaW47Cj4gICAgICB1aW50
MzJfdCBidWZfdG9rZW5fcHJpY2UgPSB3cml0ZV9idWYtPnByaXYtPnRva2VuX3ByaWNlOwo+IC0g
ICAgUmVkQ2xpZW50ICpjbGllbnQgPSB3cml0ZV9idWYtPnByaXYtPmNsaWVudDsKPiArICAgIFJl
ZENoYXJEZXZpY2VDbGllbnRPcGFxdWUgKmNsaWVudCA9IHdyaXRlX2J1Zi0+cHJpdi0+Y2xpZW50
Owo+ICAKPiAgICAgIGlmICghZGV2KSB7Cj4gICAgICAgICAgZ193YXJuaW5nKCJubyBkZXZpY2Uu
IHdyaXRlIGJ1ZmZlciBpcyBmcmVlZCIpOwo+IEBAIC03MDMsMTEgKzcwNywxMyBAQCB2b2lkIHJl
ZF9jaGFyX2RldmljZV9kZXN0cm95KFJlZENoYXJEZXZpY2UgKmNoYXJfZGV2KQo+ICAgICAgZ19v
YmplY3RfdW5yZWYoY2hhcl9kZXYpOwo+ICB9Cj4gIAo+IC1zdGF0aWMgUmVkQ2hhckRldmljZUNs
aWVudCAqcmVkX2NoYXJfZGV2aWNlX2NsaWVudF9uZXcoUmVkQ2xpZW50ICpjbGllbnQsCj4gLSAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQg
ZG9fZmxvd19jb250cm9sLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgdWludDMyX3QKPiBtYXhfc2VuZF9xdWV1ZV9zaXplLAo+IC0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDMy
X3QKPiBudW1fY2xpZW50X3Rva2VucywKPiAtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQzMl90Cj4gbnVtX3NlbmRfdG9rZW5zKQo+ICtz
dGF0aWMgUmVkQ2hhckRldmljZUNsaWVudCAqCj4gK3JlZF9jaGFyX2RldmljZV9jbGllbnRfbmV3
KFJlZHNTdGF0ZSAqcmVkcywKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVkQ2hhckRl
dmljZUNsaWVudE9wYXF1ZSAqY2xpZW50LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICBp
bnQgZG9fZmxvd19jb250cm9sLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50MzJf
dCBtYXhfc2VuZF9xdWV1ZV9zaXplLAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICB1aW50
MzJfdCBudW1fY2xpZW50X3Rva2VucywKPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgdWlu
dDMyX3QgbnVtX3NlbmRfdG9rZW5zKQo+ICB7Cj4gICAgICBSZWRDaGFyRGV2aWNlQ2xpZW50ICpk
ZXZfY2xpZW50Owo+ICAKPiBAQCAtNzE3LDggKzcyMyw2IEBAIHN0YXRpYyBSZWRDaGFyRGV2aWNl
Q2xpZW50Cj4gKnJlZF9jaGFyX2RldmljZV9jbGllbnRfbmV3KFJlZENsaWVudCAqY2xpZW50LAo+
ICAgICAgZGV2X2NsaWVudC0+bWF4X3NlbmRfcXVldWVfc2l6ZSA9IG1heF9zZW5kX3F1ZXVlX3Np
emU7Cj4gICAgICBkZXZfY2xpZW50LT5kb19mbG93X2NvbnRyb2wgPSBkb19mbG93X2NvbnRyb2w7
Cj4gICAgICBpZiAoZG9fZmxvd19jb250cm9sKSB7Cj4gLSAgICAgICAgUmVkc1N0YXRlICpyZWRz
ID0gcmVkX2NsaWVudF9nZXRfc2VydmVyKGNsaWVudCk7Cj4gLQo+ICAgICAgICAgIGRldl9jbGll
bnQtPndhaXRfZm9yX3Rva2Vuc190aW1lciA9Cj4gICAgICAgICAgICAgIHJlZHNfY29yZV90aW1l
cl9hZGQocmVkcywgZGV2aWNlX2NsaWVudF93YWl0X2Zvcl90b2tlbnNfdGltZW91dCwKPiAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXZfY2xpZW50KTsKPiBAQCAtNzM2LDcgKzc0
MCw3IEBAIHN0YXRpYyBSZWRDaGFyRGV2aWNlQ2xpZW50Cj4gKnJlZF9jaGFyX2RldmljZV9jbGll
bnRfbmV3KFJlZENsaWVudCAqY2xpZW50LAo+ICB9Cj4gIAo+ICBib29sIHJlZF9jaGFyX2Rldmlj
ZV9jbGllbnRfYWRkKFJlZENoYXJEZXZpY2UgKmRldiwKPiAtICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICBSZWRDbGllbnQgKmNsaWVudCwKPiArICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBSZWRDaGFyRGV2aWNlQ2xpZW50T3BhcXVlICpjbGllbnQsCj4gICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgaW50IGRvX2Zsb3dfY29udHJvbCwKPiAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB1aW50MzJfdCBtYXhfc2VuZF9xdWV1ZV9zaXplLAo+ICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQzMl90IG51bV9jbGllbnRfdG9rZW5zLAo+
IEBAIC03NTcsNyArNzYxLDkgQEAgYm9vbCByZWRfY2hhcl9kZXZpY2VfY2xpZW50X2FkZChSZWRD
aGFyRGV2aWNlICpkZXYsCj4gICAgICBkZXYtPnByaXYtPndhaXRfZm9yX21pZ3JhdGVfZGF0YSA9
IHdhaXRfZm9yX21pZ3JhdGVfZGF0YTsKPiAgCj4gICAgICBzcGljZV9kZWJ1ZygiY2hhciBkZXZp
Y2UgJXAsIGNsaWVudCAlcCIsIGRldiwgY2xpZW50KTsKPiAtICAgIGRldl9jbGllbnQgPSByZWRf
Y2hhcl9kZXZpY2VfY2xpZW50X25ldyhjbGllbnQsIGRvX2Zsb3dfY29udHJvbCwKPiArICAgIGRl
dl9jbGllbnQgPSByZWRfY2hhcl9kZXZpY2VfY2xpZW50X25ldyhkZXYtPnByaXYtPnJlZHMsCj4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpZW50LAo+ICsg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvX2Zsb3dfY29udHJv
bCwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhfc2Vu
ZF9xdWV1ZV9zaXplLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgIG51bV9jbGllbnRfdG9rZW5zLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIG51bV9zZW5kX3Rva2Vucyk7Cj4gQEAgLTc2OSw3ICs3NzUsNyBAQCBib29s
IHJlZF9jaGFyX2RldmljZV9jbGllbnRfYWRkKFJlZENoYXJEZXZpY2UgKmRldiwKPiAgfQo+ICAK
PiAgdm9pZCByZWRfY2hhcl9kZXZpY2VfY2xpZW50X3JlbW92ZShSZWRDaGFyRGV2aWNlICpkZXYs
Cj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVkQ2xpZW50ICpjbGllbnQp
Cj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVkQ2hhckRldmljZUNsaWVu
dE9wYXF1ZSAqY2xpZW50KQo+ICB7Cj4gICAgICBSZWRDaGFyRGV2aWNlQ2xpZW50ICpkZXZfY2xp
ZW50Owo+ICAKPiBAQCAtNzk2LDcgKzgwMiw3IEBAIHZvaWQgcmVkX2NoYXJfZGV2aWNlX2NsaWVu
dF9yZW1vdmUoUmVkQ2hhckRldmljZSAqZGV2LAo+ICB9Cj4gIAo+ICBpbnQgcmVkX2NoYXJfZGV2
aWNlX2NsaWVudF9leGlzdHMoUmVkQ2hhckRldmljZSAqZGV2LAo+IC0gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgUmVkQ2xpZW50ICpjbGllbnQpCj4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBSZWRDaGFyRGV2aWNlQ2xpZW50T3BhcXVlICpjbGllbnQpCj4gIHsK
PiAgICAgIHJldHVybiAocmVkX2NoYXJfZGV2aWNlX2NsaWVudF9maW5kKGRldiwgY2xpZW50KSAh
PSBOVUxMKTsKPiAgfQo+IGRpZmYgLS1naXQgYS9zZXJ2ZXIvY2hhci1kZXZpY2UuaCBiL3NlcnZl
ci9jaGFyLWRldmljZS5oCj4gaW5kZXggMzJlZTRmNzhhLi45ZDRjZjlkOTIgMTAwNjQ0Cj4gLS0t
IGEvc2VydmVyL2NoYXItZGV2aWNlLmgKPiArKysgYi9zZXJ2ZXIvY2hhci1kZXZpY2UuaAo+IEBA
IC0zOCw2ICszOCwxMCBAQCB0eXBlZGVmIHN0cnVjdCBTcGljZUNoYXJEZXZpY2VTdGF0ZSBSZWRD
aGFyRGV2aWNlOwo+ICB0eXBlZGVmIHN0cnVjdCBSZWRDaGFyRGV2aWNlQ2xhc3MgUmVkQ2hhckRl
dmljZUNsYXNzOwo+ICB0eXBlZGVmIHN0cnVjdCBSZWRDaGFyRGV2aWNlUHJpdmF0ZSBSZWRDaGFy
RGV2aWNlUHJpdmF0ZTsKPiAgCj4gKyNpZm5kZWYgUmVkQ2hhckRldmljZUNsaWVudE9wYXF1ZQo+
ICsjZGVmaW5lIFJlZENoYXJEZXZpY2VDbGllbnRPcGFxdWUgUmVkQ2xpZW50Cj4gKyNlbmRpZgo+
ICsKPiAgLyogJ1NwaWNlQ2hhckRldmljZVN0YXRlJyBuYW1lIGlzIHVzZWQgZm9yIGNvbnNpc3Rl
bmN5IHdpdGggd2hhdAo+ICBzcGljZS1jaGFyLmggZXhwb3J0cyAqLwo+ICBzdHJ1Y3QgU3BpY2VD
aGFyRGV2aWNlU3RhdGUKPiAgewo+IEBAIC02MiwxMiArNjYsMTIgQEAgc3RydWN0IFJlZENoYXJE
ZXZpY2VDbGFzcwo+ICAgICAgLyogYWZ0ZXIgdGhpcyBjYWxsLCB0aGUgbWVzc2FnZSBpcyB1bnJl
ZmVyZW5jZWQgKi8KPiAgICAgIHZvaWQgKCpzZW5kX21zZ190b19jbGllbnQpKFJlZENoYXJEZXZp
Y2UgKnNlbGYsCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWRQaXBlSXRlbSAq
bXNnLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVkQ2xpZW50ICpjbGllbnQp
Owo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVkQ2hhckRldmljZUNsaWVudE9w
YXF1ZSAqY2xpZW50KTsKPiAgCj4gICAgICAvKiBUaGUgY2IgaXMgY2FsbGVkIHdoZW4gYSBwcmVk
ZWZpbmVkIG51bWJlciBvZiB3cml0ZSBidWZmZXJzIHdlcmUKPiAgICAgIGNvbnN1bWVkIGJ5IHRo
ZQo+ICAgICAgICogZGV2aWNlICovCj4gICAgICB2b2lkICgqc2VuZF90b2tlbnNfdG9fY2xpZW50
KShSZWRDaGFyRGV2aWNlICpzZWxmLAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgUmVkQ2xpZW50ICpjbGllbnQsCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBSZWRDaGFyRGV2aWNlQ2xpZW50T3BhcXVlICpjbGllbnQsCj4gICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICB1aW50MzJfdCB0b2tlbnMpOwo+ICAKPiAgICAgIC8qIFRoZSBjYiBp
cyBjYWxsZWQgd2hlbiBhIHNlcnZlciAoc2VsZikgbWVzc2FnZSB0aGF0IHdhcyBhZGRyZXNzZWQg
dG8KPiAgICAgIHRoZSBkZXZpY2UsCj4gQEAgLTc3LDcgKzgxLDcgQEAgc3RydWN0IFJlZENoYXJE
ZXZpY2VDbGFzcwo+ICAgICAgLyogVGhpcyBjYiBpcyBjYWxsZWQgaWYgaXQgaXMgcmVjb21tZW5k
ZWQgdG8gcmVtb3ZlIHRoZSBjbGllbnQKPiAgICAgICAqIGR1ZSB0byBzbG93IGZsb3cgb3IgZHVl
IHRvIHNvbWUgb3RoZXIgZXJyb3IuCj4gICAgICAgKiBUaGUgY2FsbGVkIGluc3RhbmNlIHNob3Vs
ZCBkaXNjb25uZWN0IHRoZSBjbGllbnQsIG9yIGF0IGxlYXN0IHRoZQo+ICAgICAgIGNvcnJlc3Bv
bmRpbmcgY2hhbm5lbCAqLwo+IC0gICAgdm9pZCAoKnJlbW92ZV9jbGllbnQpKFJlZENoYXJEZXZp
Y2UgKnNlbGYsIFJlZENsaWVudCAqY2xpZW50KTsKPiArICAgIHZvaWQgKCpyZW1vdmVfY2xpZW50
KShSZWRDaGFyRGV2aWNlICpzZWxmLCBSZWRDaGFyRGV2aWNlQ2xpZW50T3BhcXVlCj4gKmNsaWVu
dCk7Cj4gIAo+ICAgICAgLyogVGhpcyBjYiBpcyBjYWxsZWQgd2hlbiBkZXZpY2UgcmVjZWl2ZXMg
YW4gZXZlbnQgKi8KPiAgICAgIHZvaWQgKCpwb3J0X2V2ZW50KShSZWRDaGFyRGV2aWNlICpzZWxm
LCB1aW50OF90IGV2ZW50KTsKPiBAQCAtMTg4LDcgKzE5Miw3IEBAIHZvaWQgcmVkX2NoYXJfZGV2
aWNlX3Jlc2V0KFJlZENoYXJEZXZpY2UgKmRldik7Cj4gIC8qIG1heF9zZW5kX3F1ZXVlX3NpemUg
PSBob3cgbWFueSBtZXNzYWdlcyB3ZSBjYW4gcmVhZCBmcm9tIHRoZSBkZXZpY2UgYW5kCj4gIGVu
cXVldWUgZm9yIHRoaXMgY2xpZW50LAo+ICAgKiB3aGVuIHdlIGhhdmUgdG9rZW5zIGZvciBvdGhl
ciBjbGllbnRzIGFuZCBubyB0b2tlbnMgZm9yIHRoaXMgb25lICovCj4gIGJvb2wgcmVkX2NoYXJf
ZGV2aWNlX2NsaWVudF9hZGQoUmVkQ2hhckRldmljZSAqZGV2LAo+IC0gICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIFJlZENsaWVudCAqY2xpZW50LAo+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIFJlZENoYXJEZXZpY2VDbGllbnRPcGFxdWUgKmNsaWVudCwKPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgZG9fZmxvd19jb250cm9sLAo+ICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQzMl90IG1heF9zZW5kX3F1ZXVlX3NpemUsCj4g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDMyX3QgbnVtX2NsaWVudF90b2tl
bnMsCj4gQEAgLTE5Niw5ICsyMDAsOSBAQCBib29sIHJlZF9jaGFyX2RldmljZV9jbGllbnRfYWRk
KFJlZENoYXJEZXZpY2UgKmRldiwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBp
bnQgd2FpdF9mb3JfbWlncmF0ZV9kYXRhKTsKPiAgCj4gIHZvaWQgcmVkX2NoYXJfZGV2aWNlX2Ns
aWVudF9yZW1vdmUoUmVkQ2hhckRldmljZSAqZGV2LAo+IC0gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIFJlZENsaWVudCAqY2xpZW50KTsKPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICBSZWRDaGFyRGV2aWNlQ2xpZW50T3BhcXVlICpjbGllbnQpOwo+ICBpbnQg
cmVkX2NoYXJfZGV2aWNlX2NsaWVudF9leGlzdHMoUmVkQ2hhckRldmljZSAqZGV2LAo+IC0gICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVkQ2xpZW50ICpjbGllbnQpOwo+ICsgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVkQ2hhckRldmljZUNsaWVudE9wYXF1ZSAq
Y2xpZW50KTsKPiAgCj4gIHZvaWQgcmVkX2NoYXJfZGV2aWNlX3N0YXJ0KFJlZENoYXJEZXZpY2Ug
KmRldik7Cj4gIHZvaWQgcmVkX2NoYXJfZGV2aWNlX3N0b3AoUmVkQ2hhckRldmljZSAqZGV2KTsK
PiBAQCAtMjA5LDE3ICsyMTMsMTcgQEAgU3BpY2VTZXJ2ZXIqIHJlZF9jaGFyX2RldmljZV9nZXRf
c2VydmVyKFJlZENoYXJEZXZpY2UKPiAqZGV2KTsKPiAgdm9pZCByZWRfY2hhcl9kZXZpY2Vfd2Fr
ZXVwKFJlZENoYXJEZXZpY2UgKmRldik7Cj4gIAo+ICB2b2lkIHJlZF9jaGFyX2RldmljZV9zZW5k
X3RvX2NsaWVudF90b2tlbnNfYWRkKFJlZENoYXJEZXZpY2UgKmRldiwKPiAtICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWRDbGllbnQgKmNsaWVudCwKPiAr
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSZWRDaGFyRGV2
aWNlQ2xpZW50T3BhcXVlCj4gKmNsaWVudCwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICB1aW50MzJfdCB0b2tlbnMpOwo+ICAKPiAgCj4gIHZvaWQgcmVk
X2NoYXJfZGV2aWNlX3NlbmRfdG9fY2xpZW50X3Rva2Vuc19zZXQoUmVkQ2hhckRldmljZSAqZGV2
LAo+IC0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJlZENs
aWVudCAqY2xpZW50LAo+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIFJlZENoYXJEZXZpY2VDbGllbnRPcGFxdWUKPiAqY2xpZW50LAo+ICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpbnQzMl90IHRva2Vucyk7Cj4g
IC8qKiBXcml0ZSB0byBkZXZpY2UgKiovCj4gIAo+ICBSZWRDaGFyRGV2aWNlV3JpdGVCdWZmZXIK
PiAgKnJlZF9jaGFyX2RldmljZV93cml0ZV9idWZmZXJfZ2V0X2NsaWVudChSZWRDaGFyRGV2aWNl
ICpkZXYsCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIFJlZENsaWVudAo+ICpjbGllbnQsCj4gKwo+IFJlZENoYXJEZXZp
Y2VDbGllbnRPcGFxdWUKPiAqY2xpZW50LAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgc2l6ZSk7Cj4gIAo+ICAv
KiBSZXR1cm5zIE5VTEwgaWYgdXNlX3Rva2VuID09IHRydWUgYW5kIG5vIHRva2VucyBhcmUgYXZh
aWxhYmxlICovCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
ClNwaWNlLWRldmVsIG1haWxpbmcgbGlzdApTcGljZS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5v
cmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9zcGljZS1k
ZXZlbA==
