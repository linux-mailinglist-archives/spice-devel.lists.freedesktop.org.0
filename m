Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id DBE27762CE
	for <lists+spice-devel@lfdr.de>; Fri, 26 Jul 2019 11:52:28 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 60C616ED06;
	Fri, 26 Jul 2019 09:52:27 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B27F16ED06
 for <spice-devel@lists.freedesktop.org>; Fri, 26 Jul 2019 09:52:22 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx06.intmail.prod.int.phx2.redhat.com
 [10.5.11.16])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 5C449307BA56;
 Fri, 26 Jul 2019 09:52:22 +0000 (UTC)
Received: from fziglio.remote.csb (unknown [10.33.32.15])
 by smtp.corp.redhat.com (Postfix) with ESMTP id 975715F9DD;
 Fri, 26 Jul 2019 09:52:21 +0000 (UTC)
From: Frediano Ziglio <fziglio@redhat.com>
To: spice-devel@lists.freedesktop.org
Date: Fri, 26 Jul 2019 10:52:11 +0100
Message-Id: <20190726095213.15655-5-fziglio@redhat.com>
In-Reply-To: <20190726095213.15655-1-fziglio@redhat.com>
References: <20190726095213.15655-1-fziglio@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.16
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.43]); Fri, 26 Jul 2019 09:52:22 +0000 (UTC)
Subject: [Spice-devel] [PATCH spice-gtk v3 4/6] channel-display: Remove
 playback_sync_drops_seq_len
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Francois Gouget <fgouget@codeweavers.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

RnJvbTogRnJhbmNvaXMgR291Z2V0IDxmZ291Z2V0QGNvZGV3ZWF2ZXJzLmNvbT4KCmRpc3BsYXlf
aGFuZGxlX3N0cmVhbV9kYXRhKCkgbm93IGhhcyBpdHMgb3duIG1lY2hhbmlzbSB0byBhdm9pZApk
cm9wcGluZyBmcmFtZXMgd2hpY2ggZG9lcyBub3QgZGVwZW5kIG9uIHRoZSBwbGF5YmFjayBsYXRl
bmN5LgoKU2lnbmVkLW9mZi1ieTogRnJhbmNvaXMgR291Z2V0IDxmZ291Z2V0QGNvZGV3ZWF2ZXJz
LmNvbT4KLS0tCiBzcmMvY2hhbm5lbC1kaXNwbGF5LXByaXYuaCAgfCAgMiAtLQogc3JjL2NoYW5u
ZWwtZGlzcGxheS5jICAgICAgIHwgIDggLS0tLS0tLS0KIHNyYy9jaGFubmVsLXBsYXliYWNrLXBy
aXYuaCB8ICAxIC0KIHNyYy9jaGFubmVsLXBsYXliYWNrLmMgICAgICB8ICA5IC0tLS0tLS0tLQog
c3JjL3NwaWNlLXNlc3Npb24tcHJpdi5oICAgIHwgIDEgLQogc3JjL3NwaWNlLXNlc3Npb24uYyAg
ICAgICAgIHwgMTUgLS0tLS0tLS0tLS0tLS0tCiA2IGZpbGVzIGNoYW5nZWQsIDM2IGRlbGV0aW9u
cygtKQoKZGlmZiAtLWdpdCBhL3NyYy9jaGFubmVsLWRpc3BsYXktcHJpdi5oIGIvc3JjL2NoYW5u
ZWwtZGlzcGxheS1wcml2LmgKaW5kZXggYTFhZDMyMjQuLjVkYmE2NjliIDEwMDY0NAotLS0gYS9z
cmMvY2hhbm5lbC1kaXNwbGF5LXByaXYuaAorKysgYi9zcmMvY2hhbm5lbC1kaXNwbGF5LXByaXYu
aApAQCAtMTUxLDggKzE1MSw2IEBAIHN0cnVjdCBkaXNwbGF5X3N0cmVhbSB7CiAgICAgR0FycmF5
ICAgICAgICAgICAgICAgKmRyb3BzX3NlcXNfc3RhdHNfYXJyOwogICAgIHVpbnQzMl90ICAgICAg
ICAgICAgIG51bV9kcm9wc19zZXFzOwogCi0gICAgdWludDMyX3QgICAgICAgICAgICAgcGxheWJh
Y2tfc3luY19kcm9wc19zZXFfbGVuOwotCiAgICAgLyogcGxheWJhY2sgcXVhbGl0eSByZXBvcnQg
dG8gc2VydmVyICovCiAgICAgZ2Jvb2xlYW4gcmVwb3J0X2lzX2FjdGl2ZTsKICAgICB1aW50MzJf
dCByZXBvcnRfaWQ7CmRpZmYgLS1naXQgYS9zcmMvY2hhbm5lbC1kaXNwbGF5LmMgYi9zcmMvY2hh
bm5lbC1kaXNwbGF5LmMKaW5kZXggZjU3NjkxY2QuLmMwYjczYzUxIDEwMDY0NAotLS0gYS9zcmMv
Y2hhbm5lbC1kaXNwbGF5LmMKKysrIGIvc3JjL2NoYW5uZWwtZGlzcGxheS5jCkBAIC0xNTM1LDgg
KzE1MzUsNiBAQCBzdGF0aWMgdm9pZCBkaXNwbGF5X3VwZGF0ZV9zdHJlYW1fcmVwb3J0KFNwaWNl
RGlzcGxheUNoYW5uZWwgKmNoYW5uZWwsIHVpbnQzMl90CiAgICAgfQogfQogCi0jZGVmaW5lIFNU
UkVBTV9QTEFZQkFDS19TWU5DX0RST1BfU0VRX0xFTl9MSU1JVCA1Ci0KIHN0YXRpYyB2b2lkIGRp
c3BsYXlfc3RyZWFtX3N0YXRzX2RlYnVnKGRpc3BsYXlfc3RyZWFtICpzdCkKIHsKICAgICBndWlu
dDY0IGRyb3BzX2R1cmF0aW9uX3RvdGFsID0gMDsKQEAgLTE2MTgsNyArMTYxNiw2IEBAIHN0YXRp
YyB2b2lkIGRpc3BsYXlfc3RyZWFtX3N0YXRzX3NhdmUoZGlzcGxheV9zdHJlYW0gKnN0LAogICAg
ICAgICAgICAgc3QtPmN1cl9kcm9wc19zZXFfc3RhdHMuc3RhcnRfbW1fdGltZSA9IGZyYW1lX21t
dGltZTsKICAgICAgICAgfQogICAgICAgICBzdC0+Y3VyX2Ryb3BzX3NlcV9zdGF0cy5sZW4rKzsK
LSAgICAgICAgc3QtPnBsYXliYWNrX3N5bmNfZHJvcHNfc2VxX2xlbisrOwogICAgICAgICByZXR1
cm47CiAgICAgfQogCkBAIC0xNjMwLDcgKzE2MjcsNiBAQCBzdGF0aWMgdm9pZCBkaXNwbGF5X3N0
cmVhbV9zdGF0c19zYXZlKGRpc3BsYXlfc3RyZWFtICpzdCwKICAgICAgICAgbWVtc2V0KCZzdC0+
Y3VyX2Ryb3BzX3NlcV9zdGF0cywgMCwgc2l6ZW9mKHN0LT5jdXJfZHJvcHNfc2VxX3N0YXRzKSk7
CiAgICAgICAgIHN0LT5udW1fZHJvcHNfc2VxcysrOwogICAgIH0KLSAgICBzdC0+cGxheWJhY2tf
c3luY19kcm9wc19zZXFfbGVuID0gMDsKIH0KIAogc3RhdGljIFNwaWNlRnJhbWUgKnNwaWNlX2Zy
YW1lX25ldyhkaXNwbGF5X3N0cmVhbSAqc3QsCkBAIC0xODUzLDEwICsxODQ5LDYgQEAgc3RhdGlj
IHZvaWQgZGlzcGxheV9oYW5kbGVfc3RyZWFtX2RhdGEoU3BpY2VDaGFubmVsICpjaGFubmVsLCBT
cGljZU1zZ0luICppbikKICAgICBpZiAoYy0+ZW5hYmxlX2FkYXB0aXZlX3N0cmVhbWluZykgewog
ICAgICAgICBkaXNwbGF5X3VwZGF0ZV9zdHJlYW1fcmVwb3J0KFNQSUNFX0RJU1BMQVlfQ0hBTk5F
TChjaGFubmVsKSwgb3AtPmlkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IG9wLT5tdWx0aV9tZWRpYV90aW1lLCBtbXRpbWVfbWFyZ2luKTsKLSAgICAgICAgaWYgKHN0LT5w
bGF5YmFja19zeW5jX2Ryb3BzX3NlcV9sZW4gPj0gU1RSRUFNX1BMQVlCQUNLX1NZTkNfRFJPUF9T
RVFfTEVOX0xJTUlUKSB7Ci0gICAgICAgICAgICBzcGljZV9zZXNzaW9uX3N5bmNfcGxheWJhY2tf
bGF0ZW5jeShzcGljZV9jaGFubmVsX2dldF9zZXNzaW9uKGNoYW5uZWwpKTsKLSAgICAgICAgICAg
IHN0LT5wbGF5YmFja19zeW5jX2Ryb3BzX3NlcV9sZW4gPSAwOwotICAgICAgICB9CiAgICAgfQog
fQogCmRpZmYgLS1naXQgYS9zcmMvY2hhbm5lbC1wbGF5YmFjay1wcml2LmggYi9zcmMvY2hhbm5l
bC1wbGF5YmFjay1wcml2LmgKaW5kZXggYWEzM2QyYzQuLmRjODllMmQ4IDEwMDY0NAotLS0gYS9z
cmMvY2hhbm5lbC1wbGF5YmFjay1wcml2LmgKKysrIGIvc3JjL2NoYW5uZWwtcGxheWJhY2stcHJp
di5oCkBAIC0yMCw1ICsyMCw0IEBACiAKIGdib29sZWFuIHNwaWNlX3BsYXliYWNrX2NoYW5uZWxf
aXNfYWN0aXZlKFNwaWNlUGxheWJhY2tDaGFubmVsICpjaGFubmVsKTsKIGd1aW50MzIgc3BpY2Vf
cGxheWJhY2tfY2hhbm5lbF9nZXRfbGF0ZW5jeShTcGljZVBsYXliYWNrQ2hhbm5lbCAqY2hhbm5l
bCk7Ci12b2lkIHNwaWNlX3BsYXliYWNrX2NoYW5uZWxfc3luY19sYXRlbmN5KFNwaWNlUGxheWJh
Y2tDaGFubmVsICpjaGFubmVsKTsKICNlbmRpZgpkaWZmIC0tZ2l0IGEvc3JjL2NoYW5uZWwtcGxh
eWJhY2suYyBiL3NyYy9jaGFubmVsLXBsYXliYWNrLmMKaW5kZXggNjU2YTQwMzcuLjBlNDM5ZWZm
IDEwMDY0NAotLS0gYS9zcmMvY2hhbm5lbC1wbGF5YmFjay5jCisrKyBiL3NyYy9jaGFubmVsLXBs
YXliYWNrLmMKQEAgLTQ5NSwxMiArNDk1LDMgQEAgZ3VpbnQzMiBzcGljZV9wbGF5YmFja19jaGFu
bmVsX2dldF9sYXRlbmN5KFNwaWNlUGxheWJhY2tDaGFubmVsICpjaGFubmVsKQogICAgIH0KICAg
ICByZXR1cm4gY2hhbm5lbC0+cHJpdi0+bGF0ZW5jeTsKIH0KLQotR19HTlVDX0lOVEVSTkFMCi12
b2lkIHNwaWNlX3BsYXliYWNrX2NoYW5uZWxfc3luY19sYXRlbmN5KFNwaWNlUGxheWJhY2tDaGFu
bmVsICpjaGFubmVsKQotewotICAgIGdfcmV0dXJuX2lmX2ZhaWwoU1BJQ0VfSVNfUExBWUJBQ0tf
Q0hBTk5FTChjaGFubmVsKSk7Ci0gICAgZ19yZXR1cm5faWZfZmFpbChjaGFubmVsLT5wcml2LT5p
c19hY3RpdmUpOwotICAgIFNQSUNFX0RFQlVHKCIlczogbm90aWZ5IGxhdGVuY3kgdXBkYXRlICV1
IiwgX19GVU5DVElPTl9fLCBjaGFubmVsLT5wcml2LT5taW5fbGF0ZW5jeSk7Ci0gICAgZ19jb3Jv
dXRpbmVfb2JqZWN0X25vdGlmeShHX09CSkVDVChTUElDRV9DSEFOTkVMKGNoYW5uZWwpKSwgIm1p
bi1sYXRlbmN5Iik7Ci19CmRpZmYgLS1naXQgYS9zcmMvc3BpY2Utc2Vzc2lvbi1wcml2LmggYi9z
cmMvc3BpY2Utc2Vzc2lvbi1wcml2LmgKaW5kZXggZDg4Mjc2ZjEuLmQwZDdiZThlIDEwMDY0NAot
LS0gYS9zcmMvc3BpY2Utc2Vzc2lvbi1wcml2LmgKKysrIGIvc3JjL3NwaWNlLXNlc3Npb24tcHJp
di5oCkBAIC04Niw3ICs4Niw2IEBAIHZvaWQgc3BpY2Vfc2Vzc2lvbl9zZXRfdXVpZChTcGljZVNl
c3Npb24gKnNlc3Npb24sIGd1aW50OCB1dWlkWzE2XSk7CiB2b2lkIHNwaWNlX3Nlc3Npb25fc2V0
X25hbWUoU3BpY2VTZXNzaW9uICpzZXNzaW9uLCBjb25zdCBnY2hhciAqbmFtZSk7CiBnYm9vbGVh
biBzcGljZV9zZXNzaW9uX2lzX3BsYXliYWNrX2FjdGl2ZShTcGljZVNlc3Npb24gKnNlc3Npb24p
OwogZ3VpbnQzMiBzcGljZV9zZXNzaW9uX2dldF9wbGF5YmFja19sYXRlbmN5KFNwaWNlU2Vzc2lv
biAqc2Vzc2lvbik7Ci12b2lkIHNwaWNlX3Nlc3Npb25fc3luY19wbGF5YmFja19sYXRlbmN5KFNw
aWNlU2Vzc2lvbiAqc2Vzc2lvbik7CiBnYm9vbGVhbiBzcGljZV9zZXNzaW9uX2dldF9hdWRpb19l
bmFibGVkKFNwaWNlU2Vzc2lvbiAqc2Vzc2lvbik7CiBnYm9vbGVhbiBzcGljZV9zZXNzaW9uX2dl
dF9zbWFydGNhcmRfZW5hYmxlZChTcGljZVNlc3Npb24gKnNlc3Npb24pOwogZ2Jvb2xlYW4gc3Bp
Y2Vfc2Vzc2lvbl9nZXRfdXNicmVkaXJfZW5hYmxlZChTcGljZVNlc3Npb24gKnNlc3Npb24pOwpk
aWZmIC0tZ2l0IGEvc3JjL3NwaWNlLXNlc3Npb24uYyBiL3NyYy9zcGljZS1zZXNzaW9uLmMKaW5k
ZXggZTZhOTYxMzMuLjA0YTJkYTk2IDEwMDY0NAotLS0gYS9zcmMvc3BpY2Utc2Vzc2lvbi5jCisr
KyBiL3NyYy9zcGljZS1zZXNzaW9uLmMKQEAgLTI2NjAsMjEgKzI2NjAsNiBAQCB2b2lkIHNwaWNl
X3Nlc3Npb25fc2V0X25hbWUoU3BpY2VTZXNzaW9uICpzZXNzaW9uLCBjb25zdCBnY2hhciAqbmFt
ZSkKICAgICBnX2Nvcm91dGluZV9vYmplY3Rfbm90aWZ5KEdfT0JKRUNUKHNlc3Npb24pLCAibmFt
ZSIpOwogfQogCi1HX0dOVUNfSU5URVJOQUwKLXZvaWQgc3BpY2Vfc2Vzc2lvbl9zeW5jX3BsYXli
YWNrX2xhdGVuY3koU3BpY2VTZXNzaW9uICpzZXNzaW9uKQotewotICAgIGdfcmV0dXJuX2lmX2Zh
aWwoU1BJQ0VfSVNfU0VTU0lPTihzZXNzaW9uKSk7Ci0KLSAgICBTcGljZVNlc3Npb25Qcml2YXRl
ICpzID0gc2Vzc2lvbi0+cHJpdjsKLQotICAgIGlmIChzLT5wbGF5YmFja19jaGFubmVsICYmCi0g
ICAgICAgIHNwaWNlX3BsYXliYWNrX2NoYW5uZWxfaXNfYWN0aXZlKHMtPnBsYXliYWNrX2NoYW5u
ZWwpKSB7Ci0gICAgICAgIHNwaWNlX3BsYXliYWNrX2NoYW5uZWxfc3luY19sYXRlbmN5KHMtPnBs
YXliYWNrX2NoYW5uZWwpOwotICAgIH0gZWxzZSB7Ci0gICAgICAgIFNQSUNFX0RFQlVHKCIlczog
bm90IGltcGxlbWVudGVkIHdoZW4gdGhlcmUgaXNuJ3QgYXVkaW8gcGxheWJhY2siLCBfX0ZVTkNU
SU9OX18pOwotICAgIH0KLX0KLQogR19HTlVDX0lOVEVSTkFMCiBnYm9vbGVhbiBzcGljZV9zZXNz
aW9uX2lzX3BsYXliYWNrX2FjdGl2ZShTcGljZVNlc3Npb24gKnNlc3Npb24pCiB7Ci0tIAoyLjIw
LjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClNwaWNl
LWRldmVsIG1haWxpbmcgbGlzdApTcGljZS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0
cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9zcGljZS1kZXZlbA==
