Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 966DCA507B
	for <lists+spice-devel@lfdr.de>; Mon,  2 Sep 2019 09:59:09 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 7F20589AEA;
	Mon,  2 Sep 2019 07:59:07 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id D07CF89AEA
 for <spice-devel@lists.freedesktop.org>; Mon,  2 Sep 2019 07:59:06 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx02.intmail.prod.int.phx2.redhat.com
 [10.5.11.12])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 4BB1B3099F9F
 for <spice-devel@lists.freedesktop.org>; Mon,  2 Sep 2019 07:59:06 +0000 (UTC)
Received: from colo-mx.corp.redhat.com
 (colo-mx01.intmail.prod.int.phx2.redhat.com [10.5.11.20])
 by smtp.corp.redhat.com (Postfix) with ESMTPS id 4045260C18
 for <spice-devel@lists.freedesktop.org>; Mon,  2 Sep 2019 07:59:06 +0000 (UTC)
Received: from zmail25.collab.prod.int.phx2.redhat.com
 (zmail25.collab.prod.int.phx2.redhat.com [10.5.83.31])
 by colo-mx.corp.redhat.com (Postfix) with ESMTP id 3845618089C8;
 Mon,  2 Sep 2019 07:59:06 +0000 (UTC)
Date: Mon, 2 Sep 2019 03:59:05 -0400 (EDT)
From: Frediano Ziglio <fziglio@redhat.com>
To: Kevin Pouget <kpouget@redhat.com>
Message-ID: <1882378788.10343741.1567411145297.JavaMail.zimbra@redhat.com>
In-Reply-To: <20190902072757.27577-1-kpouget@redhat.com>
References: <20190902072757.27577-1-kpouget@redhat.com>
MIME-Version: 1.0
X-Originating-IP: [10.33.32.16, 10.4.195.27]
Thread-Topic: stream-channel: Add preferred video codec capability
Thread-Index: sjl8yqcPyV/xyZJl7Gqs3N7jGrwQUw==
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.12
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.41]); Mon, 02 Sep 2019 07:59:06 +0000 (UTC)
Subject: Re: [Spice-devel] [PATCH] stream-channel: Add preferred video codec
 capability
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: spice-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

PiAKPiBUaGlzIHBhdGNoIGVuYWJsZXMgdGhlIFNQSUNFX0RJU1BMQVlfQ0FQX1BSRUZfVklERU9f
Q09ERUNfVFlQRQo+IGNhcGFiaWxpdHkgZm9yIHRoZSBzdHJlYW0tY2hhbm5lbC4KPiAKPiB2aWRl
b19zdHJlYW1fcGFyc2VfcHJlZmVycmVkX2NvZGVjczogbmV3IGZ1bmN0aW9uIGZvciBwYXJzaW5n
IHRoZQo+IFNQSUNFIHByb3RvY29sIG1lc3NhZ2UuIFRoaXMgY29kZSB1c2VkIHRvIGluIGluc2lk
ZQo+IGRjY19oYW5kbGVfcHJlZmVycmVkX3ZpZGVvX2NvZGVjX3R5cGUuCj4gCj4gc3RydWN0IFN0
cmVhbUNoYW5uZWxDbGllbnQ6OmNsaWVudF9wcmVmZXJyZWRfdmlkZW9fY29kZWNzOiBuZXcgZmll
bGQuCj4gCj4gU2lnbmVkLW9mZi1ieTogS2V2aW4gUG91Z2V0IDxrcG91Z2V0QHJlZGhhdC5jb20+
Cj4gLS0tCj4gCj4gVGhpcyBwYXRjaCBhZGRzIHRoZSBjbGllbnQgcHJlZmVycmVkIHZpZGVvIGNv
ZGVjcyBjYXBhYmlsaXR5LCBhbmQKPiBzdG9yZXMgdGhlIGxpc3QgaW4gdGhlIFN0cmVhbUNoYW5u
ZWxDbGllbnQgZmllbGRzLCBidXQgZG9lc24ndCBwYXNzIGl0Cj4gaW4gYW55d2F5IHRvIHRoZSBz
dHJlYW1pbmctYWdlbnQuCj4gCj4gV2UgY2FuIGRlY2lkZSBsYXRlciBvbiB3aGF0J3MgdGhlIHJp
Z2h0IHRoaW5nIHRvIGRvIHdpdGggdGhpcwo+IGxpc3QuIFNlZSB0aG9zZSBSRkMgcGF0Y2hlcyBm
b3IgYSBwb3NzaWJpbGl0eToKPiAKPiA+IHN0cmVhbS1jaGFubmVsOiBVc2UgdGhlIHByZWZlcnJl
ZCBjb2RlYyBsaXN0IGluc3RlYWQgb2Ygc3VwcG9ydGVkCj4gPj4gaHR0cHM6Ly9wYXRjaHdvcmsu
ZnJlZWRlc2t0b3Aub3JnL3BhdGNoLzMyMjAzOS8/c2VyaWVzPTY0Nzg3JnJldj0zCj4gPiBzdHJl
YW1pbmc6IFJlc3RhcnQgZ3Vlc3QgdmlkZW8gc3RyZWFtcyBvbiB2aWRlby1jb2RlYyBjaGFuZ2Vz
Cj4gPj4gaHR0cHM6Ly9wYXRjaHdvcmsuZnJlZWRlc2t0b3Aub3JnL3BhdGNoLzMyMjA0MC8/c2Vy
aWVzPTY0Nzg3JnJldj0zCj4gCj4gLS0tCj4gIHNlcnZlci9kY2MuYyAgICAgICAgICAgIHwgMzAg
Ky0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gIHNlcnZlci9zdHJlYW0tY2hhbm5lbC5j
IHwgMzkgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCj4gIHNlcnZlci92
aWRlby1zdHJlYW0uYyAgIHwgMzUgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysK
PiAgc2VydmVyL3ZpZGVvLXN0cmVhbS5oICAgfCAgMSArCj4gIDQgZmlsZXMgY2hhbmdlZCwgNzYg
aW5zZXJ0aW9ucygrKSwgMjkgZGVsZXRpb25zKC0pCj4gCj4gZGlmZiAtLWdpdCBhL3NlcnZlci9k
Y2MuYyBiL3NlcnZlci9kY2MuYwo+IGluZGV4IDIxZTg1OThlLi41MzhmMWY1MSAxMDA2NDQKPiAt
LS0gYS9zZXJ2ZXIvZGNjLmMKPiArKysgYi9zZXJ2ZXIvZGNjLmMKPiBAQCAtMTE1OCwzOCArMTE1
OCwxMCBAQCBzdGF0aWMgdm9pZCBvbl9kaXNwbGF5X3ZpZGVvX2NvZGVjc191cGRhdGUoR09iamVj
dAo+ICpnb2JqZWN0LCBHUGFyYW1TcGVjICpwc3BlYywKPiAgc3RhdGljIGludCBkY2NfaGFuZGxl
X3ByZWZlcnJlZF92aWRlb19jb2RlY190eXBlKERpc3BsYXlDaGFubmVsQ2xpZW50ICpkY2MsCj4g
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGljZU1z
Z2NEaXNwbGF5UHJlZmVycmVkVmlkZW9Db2RlY1R5cGUKPiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICptc2cpCj4gIHsKPiAtICAgIGdpbnQgaSwgbGVu
Owo+IC0gICAgZ2ludCBpbmRleGVzW1NQSUNFX1ZJREVPX0NPREVDX1RZUEVfRU5VTV9FTkRdOwo+
IC0gICAgR0FycmF5ICpjbGllbnQ7Cj4gLQo+ICAgICAgZ19yZXR1cm5fdmFsX2lmX2ZhaWwobXNn
LT5udW1fb2ZfY29kZWNzID4gMCwgVFJVRSk7Cj4gCj4gLSAgICAvKiBzZXQgZGVmYXVsdCB0byBh
IGJpZyBhbmQgcG9zaXRpdmUgbnVtYmVyICovCj4gLSAgICBtZW1zZXQoaW5kZXhlcywgMHg3Ziwg
c2l6ZW9mKGluZGV4ZXMpKTsKPiAtCj4gLSAgICBmb3IgKGxlbiA9IDAsIGkgPSAwOyBpIDwgbXNn
LT5udW1fb2ZfY29kZWNzOyBpKyspIHsKPiAtICAgICAgICBnaW50IHZpZGVvX2NvZGVjID0gbXNn
LT5jb2RlY3NbaV07Cj4gLQo+IC0gICAgICAgIGlmICh2aWRlb19jb2RlYyA8IFNQSUNFX1ZJREVP
X0NPREVDX1RZUEVfTUpQRUcgfHwKPiAtICAgICAgICAgICAgdmlkZW9fY29kZWMgPj0gU1BJQ0Vf
VklERU9fQ09ERUNfVFlQRV9FTlVNX0VORCkgewo+IC0gICAgICAgICAgICBzcGljZV9kZWJ1Zygi
Q2xpZW50IGhhcyBzZW50IHVua25vd24gdmlkZW8tY29kZWMgKHZhbHVlICVkIGF0Cj4gaW5kZXgg
JWQpLiAiCj4gLSAgICAgICAgICAgICAgICAgICAgICAgICJJZ25vcmluZyBhcyBzZXJ2ZXIgY2Fu
J3QgaGFuZGxlIGl0IiwKPiAtICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvX2NvZGVjLCBp
KTsKPiAtICAgICAgICAgICAgY29udGludWU7Cj4gLSAgICAgICAgfQo+IC0KPiAtICAgICAgICBp
ZiAoaW5kZXhlc1t2aWRlb19jb2RlY10gPCBTUElDRV9WSURFT19DT0RFQ19UWVBFX0VOVU1fRU5E
KSB7Cj4gLSAgICAgICAgICAgIGNvbnRpbnVlOwo+IC0gICAgICAgIH0KPiAtCj4gLSAgICAgICAg
bGVuKys7Cj4gLSAgICAgICAgaW5kZXhlc1t2aWRlb19jb2RlY10gPSBsZW47Cj4gLSAgICB9Cj4g
LSAgICBjbGllbnQgPSBnX2FycmF5X3NpemVkX25ldyhGQUxTRSwgRkFMU0UsIHNpemVvZihnaW50
KSwKPiBTUElDRV9WSURFT19DT0RFQ19UWVBFX0VOVU1fRU5EKTsKPiAtICAgIGdfYXJyYXlfYXBw
ZW5kX3ZhbHMoY2xpZW50LCBpbmRleGVzLCBTUElDRV9WSURFT19DT0RFQ19UWVBFX0VOVU1fRU5E
KTsKPiAtCj4gICAgICBnX2NsZWFyX3BvaW50ZXIoJmRjYy0+cHJpdi0+Y2xpZW50X3ByZWZlcnJl
ZF92aWRlb19jb2RlY3MsCj4gICAgICBnX2FycmF5X3VucmVmKTsKPiAtICAgIGRjYy0+cHJpdi0+
Y2xpZW50X3ByZWZlcnJlZF92aWRlb19jb2RlY3MgPSBjbGllbnQ7Cj4gKyAgICBkY2MtPnByaXYt
PmNsaWVudF9wcmVmZXJyZWRfdmlkZW9fY29kZWNzID0KPiB2aWRlb19zdHJlYW1fcGFyc2VfcHJl
ZmVycmVkX2NvZGVjcyhtc2cpOwo+IAo+ICAgICAgLyogTmV3IGNsaWVudCBwcmVmZXJlbmNlICov
Cj4gICAgICBkY2NfdXBkYXRlX3ByZWZlcnJlZF92aWRlb19jb2RlY3MoZGNjKTsKPiBkaWZmIC0t
Z2l0IGEvc2VydmVyL3N0cmVhbS1jaGFubmVsLmMgYi9zZXJ2ZXIvc3RyZWFtLWNoYW5uZWwuYwo+
IGluZGV4IDc5NTMwMThlLi43NDQ4ZjIxZSAxMDA2NDQKPiAtLS0gYS9zZXJ2ZXIvc3RyZWFtLWNo
YW5uZWwuYwo+ICsrKyBiL3NlcnZlci9zdHJlYW0tY2hhbm5lbC5jCj4gQEAgLTIyLDYgKzIyLDcg
QEAKPiAgI2luY2x1ZGUgPHNwaWNlL3N0cmVhbS1kZXZpY2UuaD4KPiAKPiAgI2luY2x1ZGUgInJl
ZC1jaGFubmVsLWNsaWVudC5oIgo+ICsjaW5jbHVkZSAicmVkLWNsaWVudC5oIgo+ICAjaW5jbHVk
ZSAic3RyZWFtLWNoYW5uZWwuaCIKPiAgI2luY2x1ZGUgInJlZHMuaCIKPiAgI2luY2x1ZGUgImNv
bW1vbi1ncmFwaGljcy1jaGFubmVsLmgiCgpJIHN0aWxsIGRvbid0IHVuZGVyc3RhbmQgd2h5IHlv
dSBuZWVkIHRvIGluY2x1ZGUgdGhpcywgaXQncyBub3QgbmVjZXNzYXJ5IG5vcgp1c2VkIGJ5IHRo
aXMgcGF0Y2guCgo+IEBAIC01Miw2ICs1Myw5IEBAIHN0cnVjdCBTdHJlYW1DaGFubmVsQ2xpZW50
IHsKPiAgICAgIC8qIGN1cnJlbnQgdmlkZW8gc3RyZWFtIGlkLCA8MCBpZiBub3QgaW5pdGlhbGl6
ZWQgb3IKPiAgICAgICAqIHdlIGFyZSBub3Qgc2VuZGluZyBhIHN0cmVhbSAqLwo+ICAgICAgaW50
IHN0cmVhbV9pZDsKPiArICAgIC8qIEFycmF5IHdpdGggU1BJQ0VfVklERU9fQ09ERUNfVFlQRV9F
TlVNX0VORCBlbGVtZW50cywgd2l0aCB0aGUgY2xpZW50Cj4gKyAgICAgKiBwcmVmZXJlbmNlIG9y
ZGVyIChpbmRleCkgYXMgdmFsdWUgKi8KPiArICAgIEdBcnJheSAqY2xpZW50X3ByZWZlcnJlZF92
aWRlb19jb2RlY3M7Cj4gIH07Cj4gCj4gIHN0cnVjdCBTdHJlYW1DaGFubmVsQ2xpZW50Q2xhc3Mg
ewo+IEBAIC0xMTQsMTUgKzExOCwzMCBAQCB0eXBlZGVmIHN0cnVjdCBTdHJlYW1EYXRhSXRlbSB7
Cj4gICNkZWZpbmUgUFJJTUFSWV9TVVJGQUNFX0lEIDAKPiAKPiAgc3RhdGljIHZvaWQgc3RyZWFt
X2NoYW5uZWxfY2xpZW50X29uX2Rpc2Nvbm5lY3QoUmVkQ2hhbm5lbENsaWVudCAqcmNjKTsKPiAr
c3RhdGljIGJvb2wKPiArc3RyZWFtX2NoYW5uZWxfaGFuZGxlX3ByZWZlcnJlZF92aWRlb19jb2Rl
Y190eXBlKFJlZENoYW5uZWxDbGllbnQgKnJjYywKPiArCj4gU3BpY2VNc2djRGlzcGxheVByZWZl
cnJlZFZpZGVvQ29kZWNUeXBlCj4gKm1zZyk7Cj4gCj4gIFJFQ09SREVSKHN0cmVhbV9jaGFubmVs
X2RhdGEsIDMyLCAiU3RyZWFtIGNoYW5uZWwgZGF0YSBwYWNrZXQiKTsKPiAKPiArc3RhdGljIHZv
aWQKPiArc3RyZWFtX2NoYW5uZWxfY2xpZW50X2ZpbmFsaXplKEdPYmplY3QgKm9iamVjdCkKPiAr
ewo+ICsgICAgU3RyZWFtQ2hhbm5lbENsaWVudCAqc2VsZiA9IFNUUkVBTV9DSEFOTkVMX0NMSUVO
VChvYmplY3QpOwo+ICsgICAgZ19jbGVhcl9wb2ludGVyKCZzZWxmLT5jbGllbnRfcHJlZmVycmVk
X3ZpZGVvX2NvZGVjcywgZ19hcnJheV91bnJlZik7Cj4gKwo+ICsgICAgR19PQkpFQ1RfQ0xBU1Mo
c3RyZWFtX2NoYW5uZWxfY2xpZW50X3BhcmVudF9jbGFzcyktPmZpbmFsaXplKG9iamVjdCk7Cj4g
K30KPiArCj4gIHN0YXRpYyB2b2lkCj4gIHN0cmVhbV9jaGFubmVsX2NsaWVudF9jbGFzc19pbml0
KFN0cmVhbUNoYW5uZWxDbGllbnRDbGFzcyAqa2xhc3MpCj4gIHsKPiArICAgIEdPYmplY3RDbGFz
cyAqb2JqZWN0X2NsYXNzID0gR19PQkpFQ1RfQ0xBU1Moa2xhc3MpOwo+ICsKPiAgICAgIFJlZENo
YW5uZWxDbGllbnRDbGFzcyAqY2hhbm5lbF9jbGFzcyA9IFJFRF9DSEFOTkVMX0NMSUVOVF9DTEFT
UyhrbGFzcyk7Cj4gCj4gICAgICBjaGFubmVsX2NsYXNzLT5vbl9kaXNjb25uZWN0ID0gc3RyZWFt
X2NoYW5uZWxfY2xpZW50X29uX2Rpc2Nvbm5lY3Q7Cj4gKyAgICBvYmplY3RfY2xhc3MtPmZpbmFs
aXplID0gc3RyZWFtX2NoYW5uZWxfY2xpZW50X2ZpbmFsaXplOwo+ICB9Cj4gCj4gIHN0YXRpYyB2
b2lkCj4gQEAgLTMyNCw2ICszNDMsOSBAQCBoYW5kbGVfbWVzc2FnZShSZWRDaGFubmVsQ2xpZW50
ICpyY2MsIHVpbnQxNl90IHR5cGUsCj4gdWludDMyX3Qgc2l6ZSwgdm9pZCAqbXNnKQo+ICAgICAg
Y2FzZSBTUElDRV9NU0dDX0RJU1BMQVlfR0xfRFJBV19ET05FOgo+ICAgICAgICAgIC8qIGNsaWVu
dCBzaG91bGQgbm90IHNlbmQgdGhpcyBtZXNzYWdlICovCj4gICAgICAgICAgcmV0dXJuIGZhbHNl
Owo+ICsgICAgY2FzZSBTUElDRV9NU0dDX0RJU1BMQVlfUFJFRkVSUkVEX1ZJREVPX0NPREVDX1RZ
UEU6Cj4gKyAgICAgICAgcmV0dXJuIHN0cmVhbV9jaGFubmVsX2hhbmRsZV9wcmVmZXJyZWRfdmlk
ZW9fY29kZWNfdHlwZShyY2MsCj4gKyAgICAgICAgICAgIChTcGljZU1zZ2NEaXNwbGF5UHJlZmVy
cmVkVmlkZW9Db2RlY1R5cGUgKiltc2cpOwo+ICAgICAgZGVmYXVsdDoKPiAgICAgICAgICByZXR1
cm4gcmVkX2NoYW5uZWxfY2xpZW50X2hhbmRsZV9tZXNzYWdlKHJjYywgdHlwZSwgc2l6ZSwgbXNn
KTsKPiAgICAgIH0KPiBAQCAtMzkwLDYgKzQxMiwyMiBAQCBzdHJlYW1fY2hhbm5lbF9nZXRfc3Vw
cG9ydGVkX2NvZGVjcyhTdHJlYW1DaGFubmVsCj4gKmNoYW5uZWwsIHVpbnQ4X3QgKm91dF9jb2Rl
Y3MpCj4gICAgICByZXR1cm4gbnVtOwo+ICB9Cj4gCj4gK3N0YXRpYyBib29sCj4gK3N0cmVhbV9j
aGFubmVsX2hhbmRsZV9wcmVmZXJyZWRfdmlkZW9fY29kZWNfdHlwZShSZWRDaGFubmVsQ2xpZW50
ICpyY2MsCj4gKwo+IFNwaWNlTXNnY0Rpc3BsYXlQcmVmZXJyZWRWaWRlb0NvZGVjVHlwZQo+ICpt
c2cpCj4gK3sKPiArICAgIFN0cmVhbUNoYW5uZWxDbGllbnQgKnNjYyA9IFNUUkVBTV9DSEFOTkVM
X0NMSUVOVChyY2MpOwoKT3RoZXIgY29kZSB1c2VkICJjbGllbnQiIGluc3RlYWQgb2YgInNjYyIu
IEluIHRoZSBwYXN0IHRoZXJlIHdhcwpzb21lIGRpc2N1c3Npb25zIGFib3V0IG5vdCBhZGRpbmcg
dGhlc2UgdG9vIG11Y2ggY29udHJhY3Rpb25zIGZvciB0aGVzZQp2YXJpYWJsZXMgKG5vdCBleHRl
bmRpbmcgdGhlIHVzYWdlIG9mIHRoZW0pLgoKPiArCj4gKyAgICBpZiAobXNnLT5udW1fb2ZfY29k
ZWNzID09IDApIHsKPiArICAgICAgICByZXR1cm4gdHJ1ZTsKPiArICAgIH0KPiArCj4gKyAgICBn
X2NsZWFyX3BvaW50ZXIoJnNjYy0+Y2xpZW50X3ByZWZlcnJlZF92aWRlb19jb2RlY3MsIGdfYXJy
YXlfdW5yZWYpOwo+ICsgICAgc2NjLT5jbGllbnRfcHJlZmVycmVkX3ZpZGVvX2NvZGVjcyA9Cj4g
dmlkZW9fc3RyZWFtX3BhcnNlX3ByZWZlcnJlZF9jb2RlY3MobXNnKTsKPiArCj4gKyAgICByZXR1
cm4gdHJ1ZTsKPiArfQo+ICsKPiAgc3RhdGljIHZvaWQKPiAgc3RyZWFtX2NoYW5uZWxfY29ubmVj
dChSZWRDaGFubmVsICpyZWRfY2hhbm5lbCwgUmVkQ2xpZW50ICpyZWRfY2xpZW50LAo+ICBSZWRT
dHJlYW0gKnN0cmVhbSwKPiAgICAgICAgICAgICAgICAgICAgICAgICBpbnQgbWlncmF0aW9uLCBS
ZWRDaGFubmVsQ2FwYWJpbGl0aWVzICpjYXBzKQo+IEBAIC00NDgsNiArNDg2LDcgQEAgc3RyZWFt
X2NoYW5uZWxfY29uc3RydWN0ZWQoR09iamVjdCAqb2JqZWN0KQo+IAo+ICAgICAgcmVkX2NoYW5u
ZWxfc2V0X2NhcChyZWRfY2hhbm5lbCwgU1BJQ0VfRElTUExBWV9DQVBfTU9OSVRPUlNfQ09ORklH
KTsKPiAgICAgIHJlZF9jaGFubmVsX3NldF9jYXAocmVkX2NoYW5uZWwsIFNQSUNFX0RJU1BMQVlf
Q0FQX1NUUkVBTV9SRVBPUlQpOwo+ICsgICAgcmVkX2NoYW5uZWxfc2V0X2NhcChyZWRfY2hhbm5l
bCwKPiBTUElDRV9ESVNQTEFZX0NBUF9QUkVGX1ZJREVPX0NPREVDX1RZUEUpOwo+IAo+ICAgICAg
cmVkc19yZWdpc3Rlcl9jaGFubmVsKHJlZHMsIHJlZF9jaGFubmVsKTsKPiAgfQo+IGRpZmYgLS1n
aXQgYS9zZXJ2ZXIvdmlkZW8tc3RyZWFtLmMgYi9zZXJ2ZXIvdmlkZW8tc3RyZWFtLmMKPiBpbmRl
eCA2YWE4NTlhMC4uNjcxNGQ3ODAgMTAwNjQ0Cj4gLS0tIGEvc2VydmVyL3ZpZGVvLXN0cmVhbS5j
Cj4gKysrIGIvc2VydmVyL3ZpZGVvLXN0cmVhbS5jCj4gQEAgLTQ2OCw2ICs0NjgsNDEgQEAgc3Rh
dGljIGJvb2wgdmlkZW9fc3RyZWFtX2FkZF9mcmFtZShEaXNwbGF5Q2hhbm5lbAo+ICpkaXNwbGF5
LAo+ICAgICAgcmV0dXJuIEZBTFNFOwo+ICB9Cj4gCj4gKy8qIFJldHVybnMgYW4gYXJyYXkgd2l0
aCBTUElDRV9WSURFT19DT0RFQ19UWVBFX0VOVU1fRU5EIGVsZW1lbnRzLAo+ICsgKiB3aXRoIHRo
ZSBjbGllbnQgcHJlZmVyZW5jZSBvcmRlciAoaW5kZXgpIGFzIHZhbHVlICovCj4gK0dBcnJheQo+
ICp2aWRlb19zdHJlYW1fcGFyc2VfcHJlZmVycmVkX2NvZGVjcyhTcGljZU1zZ2NEaXNwbGF5UHJl
ZmVycmVkVmlkZW9Db2RlY1R5cGUKPiAqbXNnKQo+ICt7Cj4gKyAgICBpbnQgaSwgbGVuOwo+ICsg
ICAgaW50IGluZGV4ZXNbU1BJQ0VfVklERU9fQ09ERUNfVFlQRV9FTlVNX0VORF07Cj4gKyAgICBH
QXJyYXkgKmNsaWVudDsKPiArCj4gKyAgICAvKiBzZXQgZGVmYXVsdCB0byBhIGJpZyBhbmQgcG9z
aXRpdmUgbnVtYmVyICovCj4gKyAgICBtZW1zZXQoaW5kZXhlcywgMHg3Ziwgc2l6ZW9mKGluZGV4
ZXMpKTsKPiArCj4gKyAgICBmb3IgKGxlbiA9IDAsIGkgPSAwOyBpIDwgbXNnLT5udW1fb2ZfY29k
ZWNzOyBpKyspIHsKPiArICAgICAgICBTcGljZVZpZGVvQ29kZWNUeXBlIHZpZGVvX2NvZGVjID0g
bXNnLT5jb2RlY3NbaV07Cj4gKwo+ICsgICAgICAgIGlmICh2aWRlb19jb2RlYyA8IFNQSUNFX1ZJ
REVPX0NPREVDX1RZUEVfTUpQRUcgfHwKPiArICAgICAgICAgICAgdmlkZW9fY29kZWMgPj0gU1BJ
Q0VfVklERU9fQ09ERUNfVFlQRV9FTlVNX0VORCkgewo+ICsgICAgICAgICAgICBzcGljZV9kZWJ1
ZygiQ2xpZW50IGhhcyBzZW50IHVua25vd24gdmlkZW8tY29kZWMgKHZhbHVlICVkIGF0Cj4gaW5k
ZXggJWQpLiAiCj4gKyAgICAgICAgICAgICAgICAgICAgICAgICJJZ25vcmluZyBhcyBzZXJ2ZXIg
Y2FuJ3QgaGFuZGxlIGl0IiwKPiArICAgICAgICAgICAgICAgICAgICAgICAgIHZpZGVvX2NvZGVj
LCBpKTsKPiArICAgICAgICAgICAgY29udGludWU7Cj4gKyAgICAgICAgfQo+ICsKPiArICAgICAg
ICBpZiAoaW5kZXhlc1t2aWRlb19jb2RlY10gPCBTUElDRV9WSURFT19DT0RFQ19UWVBFX0VOVU1f
RU5EKSB7Cj4gKyAgICAgICAgICAgIGNvbnRpbnVlOwo+ICsgICAgICAgIH0KPiArCj4gKyAgICAg
ICAgbGVuKys7Cj4gKyAgICAgICAgaW5kZXhlc1t2aWRlb19jb2RlY10gPSBsZW47Cj4gKyAgICB9
Cj4gKyAgICBjbGllbnQgPSBnX2FycmF5X3NpemVkX25ldyhGQUxTRSwgRkFMU0UsIHNpemVvZihp
bnQpLAo+IFNQSUNFX1ZJREVPX0NPREVDX1RZUEVfRU5VTV9FTkQpOwo+ICsgICAgZ19hcnJheV9h
cHBlbmRfdmFscyhjbGllbnQsIGluZGV4ZXMsIFNQSUNFX1ZJREVPX0NPREVDX1RZUEVfRU5VTV9F
TkQpOwo+ICsKPiArICAgIHJldHVybiBjbGllbnQ7Cj4gK30KPiArCj4gIC8qIFRPRE86IGRvY3Vt
ZW50IHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIDIgZnVuY3Rpb25zIGJlbG93ICovCj4gIHZv
aWQgdmlkZW9fc3RyZWFtX3RyYWNlX3VwZGF0ZShEaXNwbGF5Q2hhbm5lbCAqZGlzcGxheSwgRHJh
d2FibGUgKmRyYXdhYmxlKQo+ICB7Cj4gZGlmZiAtLWdpdCBhL3NlcnZlci92aWRlby1zdHJlYW0u
aCBiL3NlcnZlci92aWRlby1zdHJlYW0uaAo+IGluZGV4IDQ2YjA3NmZkLi43MzQzNTUxNSAxMDA2
NDQKPiAtLS0gYS9zZXJ2ZXIvdmlkZW8tc3RyZWFtLmgKPiArKysgYi9zZXJ2ZXIvdmlkZW8tc3Ry
ZWFtLmgKPiBAQCAtMTQ3LDYgKzE0Nyw3IEBAIHZvaWQgdmlkZW9fc3RyZWFtX2RldGFjaF9hbmRf
c3RvcChEaXNwbGF5Q2hhbm5lbAo+ICpkaXNwbGF5KTsKPiAgdm9pZCB2aWRlb19zdHJlYW1fdHJh
Y2VfYWRkX2RyYXdhYmxlKERpc3BsYXlDaGFubmVsICpkaXNwbGF5LCBEcmF3YWJsZQo+ICAqaXRl
bSk7Cj4gIHZvaWQgdmlkZW9fc3RyZWFtX2RldGFjaF9iZWhpbmQoRGlzcGxheUNoYW5uZWwgKmRp
c3BsYXksIFFSZWdpb24gKnJlZ2lvbiwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICBEcmF3YWJsZSAqZHJhd2FibGUpOwo+ICtHQXJyYXkKPiAqdmlkZW9fc3RyZWFtX3BhcnNlX3By
ZWZlcnJlZF9jb2RlY3MoU3BpY2VNc2djRGlzcGxheVByZWZlcnJlZFZpZGVvQ29kZWNUeXBlCj4g
Km1zZyk7Cj4gCj4gIHZvaWQgdmlkZW9fc3RyZWFtX2FnZW50X3VucmVmKERpc3BsYXlDaGFubmVs
ICpkaXNwbGF5LCBWaWRlb1N0cmVhbUFnZW50Cj4gICphZ2VudCk7Cj4gIHZvaWQgdmlkZW9fc3Ry
ZWFtX2FnZW50X3N0b3AoVmlkZW9TdHJlYW1BZ2VudCAqYWdlbnQpOwoKT3RoZXJ3aXNlIGZpbmUg
Zm9yIG1lLgoKRnJlZGlhbm8KX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX18KU3BpY2UtZGV2ZWwgbWFpbGluZyBsaXN0ClNwaWNlLWRldmVsQGxpc3RzLmZyZWVk
ZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZv
L3NwaWNlLWRldmVs
