Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id B4AA661E2B
	for <lists+spice-devel@lfdr.de>; Mon,  8 Jul 2019 14:07:08 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5791D89C98;
	Mon,  8 Jul 2019 12:07:07 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mail-wm1-f67.google.com (mail-wm1-f67.google.com
 [209.85.128.67])
 by gabe.freedesktop.org (Postfix) with ESMTPS id B2F6689C98
 for <spice-devel@lists.freedesktop.org>; Mon,  8 Jul 2019 12:07:05 +0000 (UTC)
Received: by mail-wm1-f67.google.com with SMTP id 207so15521792wma.1
 for <spice-devel@lists.freedesktop.org>; Mon, 08 Jul 2019 05:07:05 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:to:references:from:message-id:date
 :user-agent:mime-version:in-reply-to:content-transfer-encoding
 :content-language;
 bh=/klfWXFTwzkdpD4bG617ULc/U7z3obpDGORcpOnrXNY=;
 b=Hwh7UIzaAeGia2zs1491Q6/iaCqbtilIt2d/WWlIpYmgdyNWl36I6Iy4IYuEzA+VZ6
 CuFXdMkZRGGuWyeTIoPny78feCcI6p7Qs30BCm9ZHkcomsCXoK/DWH60mJxCoj1OJc3i
 6tOv0wRJzYcKK4C3okHAwOAb6V6Udsn4apkMZGa9QBlW36+ndL7NGrMcItyZlKWfOouf
 M4wraz0Vg7WTvtZswrcpb4i95IzJHlq0v9hjX+q+vTx+JdZyjsUyAlko57boZimbbQNH
 JDBtt/RZEfPyUMa6xIvCy/y0IFDEXJ77/YjsXNgCCV4O8x8FRppvthGuieUh6pDOyP2q
 pr7Q==
X-Gm-Message-State: APjAAAWf007yhJfKuSzV1hkZfeTlMHyXFo8eBJs/haIfMtTQOnz/jlZr
 NgHPWSLI5xzX3vlrs4VpFTikotH7cJI=
X-Google-Smtp-Source: APXvYqyLA/AD9urGkgkJi6Y4EKejIyuvd3khVbtskF+nGAsd3ky8plu8c7kCZsik/3JK4hru4z7w1Q==
X-Received: by 2002:a1c:751a:: with SMTP id o26mr16490909wmc.13.1562587624001; 
 Mon, 08 Jul 2019 05:07:04 -0700 (PDT)
Received: from dhcp-4-93.tlv.redhat.com (bzq-82-81-161-50.red.bezeqint.net.
 [82.81.161.50])
 by smtp.gmail.com with ESMTPSA id o6sm31835412wra.27.2019.07.08.05.07.02
 for <spice-devel@lists.freedesktop.org>
 (version=TLS1_3 cipher=AEAD-AES128-GCM-SHA256 bits=128/128);
 Mon, 08 Jul 2019 05:07:03 -0700 (PDT)
To: spice-devel@lists.freedesktop.org
References: <20190707163545.28466-1-fziglio@redhat.com>
From: Snir Sheriber <ssheribe@redhat.com>
Message-ID: <ec2f4a6d-ad93-540c-199b-29563b0e5236@redhat.com>
Date: Mon, 8 Jul 2019 15:07:01 +0300
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.7.0
MIME-Version: 1.0
In-Reply-To: <20190707163545.28466-1-fziglio@redhat.com>
Content-Language: en-US
Subject: Re: [Spice-devel] [PATCH spice-server v2] red-qxl: Better
 encapsulation of device display information
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

QWNrZWQtYnk6IFNuaXIgU2hlcmliZXIgPHNzaGVyaWJlQHJlZGhhdC5jb20+CgoKT24gNy83LzE5
IDc6MzUgUE0sIEZyZWRpYW5vIFppZ2xpbyB3cm90ZToKPiBEbyBub3QgZXhwb3NlIG11bHRpcGxl
IGZ1bmN0aW9ucyB0byBmZXRjaCBkaWZmZXJlbnQgcGFydHMgb2YKPiBpbnRlcm5hbCBzdHJ1Y3R1
cmUuCj4KPiBTaWduZWQtb2ZmLWJ5OiBGcmVkaWFubyBaaWdsaW8gPGZ6aWdsaW9AcmVkaGF0LmNv
bT4KPiAtLS0KPiAgIHNlcnZlci9yZWQtcXhsLmMgfCAzNCArKysrKysrKysrKysrKysrKysrKyst
LS0tLS0tLS0tLS0tCj4gICBzZXJ2ZXIvcmVkLXF4bC5oIHwgIDQgKy0tLQo+ICAgc2VydmVyL3Jl
ZHMuYyAgICB8IDE5ICstLS0tLS0tLS0tLS0tLS0tLS0KPiAgIDMgZmlsZXMgY2hhbmdlZCwgMjMg
aW5zZXJ0aW9ucygrKSwgMzQgZGVsZXRpb25zKC0pCj4KPiBDaGFuZ2VzIHNpbmNlIHYxOgo+IC0g
Y29tbWl0IG1lc3NhZ2UgZml4ZXMKPiAtIGFkZCBuZXcgbGluZSBhZnRlciB2YXJpYWJsZSBkZWNs
YXJhdGlvbnMKPiAtIGFkZCBxeGxfc3RhdGUgdmFyaWFibGUKPgo+IGRpZmYgLS1naXQgYS9zZXJ2
ZXIvcmVkLXF4bC5jIGIvc2VydmVyL3JlZC1xeGwuYwo+IGluZGV4IGQ0MGQzOTcwZC4uMDMzNDgy
NzBmIDEwMDY0NAo+IC0tLSBhL3NlcnZlci9yZWQtcXhsLmMKPiArKysgYi9zZXJ2ZXIvcmVkLXF4
bC5jCj4gQEAgLTgwOSwyMiArODA5LDMwIEBAIHZvaWQgc3BpY2VfcXhsX3NldF9kZXZpY2VfaW5m
byhRWExJbnN0YW5jZSAqaW5zdGFuY2UsCj4gICAgICAgcmVkc19zZW5kX2RldmljZV9kaXNwbGF5
X2luZm8ocmVkX3F4bF9nZXRfc2VydmVyKGluc3RhbmNlLT5zdCkpOwo+ICAgfQo+ICAgCj4gLWNv
bnN0IGNoYXIqIHJlZF9xeGxfZ2V0X2RldmljZV9hZGRyZXNzKGNvbnN0IFFYTEluc3RhbmNlICpx
eGwpCj4gK3VpbnQzMl90IHJlZF9xeGxfbWFyc2hhbGxfZGV2aWNlX2Rpc3BsYXlfaW5mbyhjb25z
dCBRWExJbnN0YW5jZSAqcXhsLCBTcGljZU1hcnNoYWxsZXIgKm0pCj4gICB7Cj4gICAgICAgY29u
c3QgUVhMU3RhdGUgKnF4bF9zdGF0ZSA9IHF4bC0+c3Q7Cj4gLSAgICByZXR1cm4gcXhsX3N0YXRl
LT5kZXZpY2VfYWRkcmVzczsKPiAtfQo+IC0KPiAtY29uc3QgdWludDMyX3QqIHJlZF9xeGxfZ2V0
X2RldmljZV9kaXNwbGF5X2lkcyhjb25zdCBRWExJbnN0YW5jZSAqcXhsKQo+IC17Cj4gLSAgICBj
b25zdCBRWExTdGF0ZSAqcXhsX3N0YXRlID0gcXhsLT5zdDsKPiAtICAgIHJldHVybiBxeGxfc3Rh
dGUtPmRldmljZV9kaXNwbGF5X2lkczsKPiAtfQo+ICsgICAgdWludDMyX3QgZGV2aWNlX2NvdW50
ID0gMDsKPiArICAgIGNvbnN0IGNoYXIgKmNvbnN0IGRldmljZV9hZGRyZXNzID0gcXhsX3N0YXRl
LT5kZXZpY2VfYWRkcmVzczsKPiArICAgIGNvbnN0IHNpemVfdCBkZXZpY2VfYWRkcmVzc19sZW4g
PSBzdHJsZW4oZGV2aWNlX2FkZHJlc3MpICsgMTsKPiAgIAo+IC1zaXplX3QgcmVkX3F4bF9nZXRf
bW9uaXRvcnNfY291bnQoY29uc3QgUVhMSW5zdGFuY2UgKnF4bCkKPiAtewo+IC0gICAgY29uc3Qg
UVhMU3RhdGUgKnF4bF9zdGF0ZSA9IHF4bC0+c3Q7Cj4gLSAgICByZXR1cm4gcXhsX3N0YXRlLT5t
b25pdG9yc19jb3VudDsKPiArICAgIGlmIChkZXZpY2VfYWRkcmVzc19sZW4gPT0gMSkgewo+ICsg
ICAgICAgIHJldHVybiAwOwo+ICsgICAgfQo+ICsgICAgZm9yIChzaXplX3QgaSA9IDA7IGkgPCBx
eGxfc3RhdGUtPm1vbml0b3JzX2NvdW50OyArK2kpIHsKPiArICAgICAgICBzcGljZV9tYXJzaGFs
bGVyX2FkZF91aW50MzIobSwgcXhsLT5pZCk7Cj4gKyAgICAgICAgc3BpY2VfbWFyc2hhbGxlcl9h
ZGRfdWludDMyKG0sIGkpOwo+ICsgICAgICAgIHNwaWNlX21hcnNoYWxsZXJfYWRkX3VpbnQzMiht
LCBxeGxfc3RhdGUtPmRldmljZV9kaXNwbGF5X2lkc1tpXSk7Cj4gKyAgICAgICAgc3BpY2VfbWFy
c2hhbGxlcl9hZGRfdWludDMyKG0sIGRldmljZV9hZGRyZXNzX2xlbik7Cj4gKyAgICAgICAgc3Bp
Y2VfbWFyc2hhbGxlcl9hZGQobSwgKHZvaWQqKSBkZXZpY2VfYWRkcmVzcywgZGV2aWNlX2FkZHJl
c3NfbGVuKTsKPiArICAgICAgICArK2RldmljZV9jb3VudDsKPiArCj4gKyAgICAgICAgZ19kZWJ1
ZygiICAgKHF4bCkgICAgY2hhbm5lbF9pZDogJXUgbW9uaXRvcl9pZDogJXp1LCBkZXZpY2VfYWRk
cmVzczogJXMsICIKPiArICAgICAgICAgICAgICAgICJkZXZpY2VfZGlzcGxheV9pZDogJXUiLAo+
ICsgICAgICAgICAgICAgICAgcXhsLT5pZCwgaSwgZGV2aWNlX2FkZHJlc3MsCj4gKyAgICAgICAg
ICAgICAgICBxeGxfc3RhdGUtPmRldmljZV9kaXNwbGF5X2lkc1tpXSk7Cj4gKyAgICB9Cj4gKyAg
ICByZXR1cm4gZGV2aWNlX2NvdW50Owo+ICAgfQo+ICAgCj4gICB2b2lkIHJlZF9xeGxfaW5pdChS
ZWRzU3RhdGUgKnJlZHMsIFFYTEluc3RhbmNlICpxeGwpCj4gZGlmZiAtLWdpdCBhL3NlcnZlci9y
ZWQtcXhsLmggYi9zZXJ2ZXIvcmVkLXF4bC5oCj4gaW5kZXggOTQ3NTM5NDgyLi41YmIyNTRhZGIg
MTAwNjQ0Cj4gLS0tIGEvc2VydmVyL3JlZC1xeGwuaAo+ICsrKyBiL3NlcnZlci9yZWQtcXhsLmgK
PiBAQCAtNDAsOSArNDAsNyBAQCB2b2lkIHJlZF9xeGxfcHV0X2dsX3NjYW5vdXQoUVhMSW5zdGFu
Y2UgKnF4bCwgU3BpY2VNc2dEaXNwbGF5R2xTY2Fub3V0VW5peCAqc2Nhbgo+ICAgdm9pZCByZWRf
cXhsX2dsX2RyYXdfYXN5bmNfY29tcGxldGUoUVhMSW5zdGFuY2UgKnF4bCk7Cj4gICBpbnQgcmVk
X3F4bF9jaGVja19xeGxfdmVyc2lvbihRWExJbnN0YW5jZSAqcXhsLCBpbnQgbWFqb3IsIGludCBt
aW5vcik7Cj4gICBTcGljZVNlcnZlciogcmVkX3F4bF9nZXRfc2VydmVyKFFYTFN0YXRlICpxeGwp
Owo+IC1jb25zdCBjaGFyKiByZWRfcXhsX2dldF9kZXZpY2VfYWRkcmVzcyhjb25zdCBRWExJbnN0
YW5jZSAqcXhsKTsKPiAtY29uc3QgdWludDMyX3QqIHJlZF9xeGxfZ2V0X2RldmljZV9kaXNwbGF5
X2lkcyhjb25zdCBRWExJbnN0YW5jZSAqcXhsKTsKPiAtc2l6ZV90IHJlZF9xeGxfZ2V0X21vbml0
b3JzX2NvdW50KGNvbnN0IFFYTEluc3RhbmNlICpxeGwpOwo+ICt1aW50MzJfdCByZWRfcXhsX21h
cnNoYWxsX2RldmljZV9kaXNwbGF5X2luZm8oY29uc3QgUVhMSW5zdGFuY2UgKnF4bCwgU3BpY2VN
YXJzaGFsbGVyICptKTsKPiAgIAo+ICAgLyogV3JhcHBlcnMgYXJvdW5kIFFYTEludGVyZmFjZSB2
ZnVuY3MgKi8KPiAgIHZvaWQgcmVkX3F4bF9nZXRfaW5pdF9pbmZvKFFYTEluc3RhbmNlICpxeGws
IFFYTERldkluaXRJbmZvICppbmZvKTsKPiBkaWZmIC0tZ2l0IGEvc2VydmVyL3JlZHMuYyBiL3Nl
cnZlci9yZWRzLmMKPiBpbmRleCA3NzgzYWIwYjQuLjgxN2ZkZDQyMyAxMDA2NDQKPiAtLS0gYS9z
ZXJ2ZXIvcmVkcy5jCj4gKysrIGIvc2VydmVyL3JlZHMuYwo+IEBAIC05MjAsMjQgKzkyMCw3IEBA
IHZvaWQgcmVkc19tYXJzaGFsbF9kZXZpY2VfZGlzcGxheV9pbmZvKFJlZHNTdGF0ZSAqcmVkcywg
U3BpY2VNYXJzaGFsbGVyICptKQo+ICAgCj4gICAgICAgLy8gYWRkIHRoZSBxeGwgZGV2aWNlcyB0
byB0aGUgbWVzc2FnZQo+ICAgICAgIEZPUkVBQ0hfUVhMX0lOU1RBTkNFKHJlZHMsIHF4bCkgewo+
IC0gICAgICAgIGNvbnN0IGNoYXIgKmNvbnN0IGRldmljZV9hZGRyZXNzID0gcmVkX3F4bF9nZXRf
ZGV2aWNlX2FkZHJlc3MocXhsKTsKPiAtICAgICAgICBjb25zdCBzaXplX3QgZGV2aWNlX2FkZHJl
c3NfbGVuID0gc3RybGVuKGRldmljZV9hZGRyZXNzKSArIDE7Cj4gLSAgICAgICAgaWYgKGRldmlj
ZV9hZGRyZXNzX2xlbiA9PSAxKSB7Cj4gLSAgICAgICAgICAgIGNvbnRpbnVlOwo+IC0gICAgICAg
IH0KPiAtICAgICAgICBmb3IgKHNpemVfdCBpID0gMDsgaSA8IHJlZF9xeGxfZ2V0X21vbml0b3Jz
X2NvdW50KHF4bCk7ICsraSkgewo+IC0gICAgICAgICAgICBzcGljZV9tYXJzaGFsbGVyX2FkZF91
aW50MzIobSwgcXhsLT5pZCk7Cj4gLSAgICAgICAgICAgIHNwaWNlX21hcnNoYWxsZXJfYWRkX3Vp
bnQzMihtLCBpKTsKPiAtICAgICAgICAgICAgc3BpY2VfbWFyc2hhbGxlcl9hZGRfdWludDMyKG0s
IHJlZF9xeGxfZ2V0X2RldmljZV9kaXNwbGF5X2lkcyhxeGwpW2ldKTsKPiAtICAgICAgICAgICAg
c3BpY2VfbWFyc2hhbGxlcl9hZGRfdWludDMyKG0sIGRldmljZV9hZGRyZXNzX2xlbik7Cj4gLSAg
ICAgICAgICAgIHNwaWNlX21hcnNoYWxsZXJfYWRkKG0sICh2b2lkKikgZGV2aWNlX2FkZHJlc3Ms
IGRldmljZV9hZGRyZXNzX2xlbik7Cj4gLSAgICAgICAgICAgICsrZGV2aWNlX2NvdW50Owo+IC0K
PiAtICAgICAgICAgICAgZ19kZWJ1ZygiICAgKHF4bCkgICAgY2hhbm5lbF9pZDogJXUgbW9uaXRv
cl9pZDogJXp1LCBkZXZpY2VfYWRkcmVzczogJXMsICIKPiAtICAgICAgICAgICAgICAgICAgICAi
ZGV2aWNlX2Rpc3BsYXlfaWQ6ICV1IiwKPiAtICAgICAgICAgICAgICAgICAgICBxeGwtPmlkLCBp
LCBkZXZpY2VfYWRkcmVzcywKPiAtICAgICAgICAgICAgICAgICAgICByZWRfcXhsX2dldF9kZXZp
Y2VfZGlzcGxheV9pZHMocXhsKVtpXSk7Cj4gLSAgICAgICAgfQo+ICsgICAgICAgIGRldmljZV9j
b3VudCArPSByZWRfcXhsX21hcnNoYWxsX2RldmljZV9kaXNwbGF5X2luZm8ocXhsLCBtKTsKPiAg
ICAgICB9Cj4gICAKPiAgICAgICAvLyBhZGQgdGhlIHN0cmVhbSBkZXZpY2VzIHRvIHRoZSBtZXNz
YWdlCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClNwaWNl
LWRldmVsIG1haWxpbmcgbGlzdApTcGljZS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0
cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9zcGljZS1kZXZlbA==
