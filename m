Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 0D4A98920D
	for <lists+spice-devel@lfdr.de>; Sun, 11 Aug 2019 16:41:45 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 9D79B6E352;
	Sun, 11 Aug 2019 14:41:43 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mail-wr1-f47.google.com (mail-wr1-f47.google.com
 [209.85.221.47])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DD4056E351
 for <spice-devel@lists.freedesktop.org>; Sun, 11 Aug 2019 14:41:41 +0000 (UTC)
Received: by mail-wr1-f47.google.com with SMTP id j16so169360wrr.8
 for <spice-devel@lists.freedesktop.org>; Sun, 11 Aug 2019 07:41:41 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:subject:to:references:from:message-id:date
 :user-agent:mime-version:in-reply-to:content-transfer-encoding
 :content-language;
 bh=EKPv+za5wC69MSQ58rpx57p2w9EzcBBnp+asNrBBUdI=;
 b=tiEZmRr6UMvu47GlTN3DvRYf8piolQL06GlAXiOwacyreir6n+JLxpox/e6F71QJjq
 04tEBb6Xb4UOGWUHz0E7xtEurQfXOepoNO4Y2GoQgUt21HprtWnqgpNT75KDG0HeeMGy
 PyKEOQP32R8NjYOJ2kEUYeduQN3oUJfIWqow+aWdxBfxIwY/rjFzO195NTulQGKZavLq
 Wi3PQ7acaSc6mku6loofViAnsy83BPmjYULcWppDTxs30DaXAQsXT7+plh6Fulg/Y1HY
 zwYfkWBgqI6hgQP13u/lEwI1avS8eZGF1gU9QQbQk1LakRC8am/LUI8VjC5aBDJa7ryO
 fEtQ==
X-Gm-Message-State: APjAAAUoLeySuiQZtuMK2I1tJb2+PvHkw2kPrmtG/FJW0Ms3XbBM8mKY
 0Qi0LUHx4faPwXB29uyg8q+RE6yUxBQ=
X-Google-Smtp-Source: APXvYqxuOVPtXBaAJHDowHWzzvNoscLdHq+bhVViP9ANVnhxgz8R3OHXDTPkswcbiheMrdb9rI+csA==
X-Received: by 2002:adf:fc51:: with SMTP id e17mr32454545wrs.348.1565534500201; 
 Sun, 11 Aug 2019 07:41:40 -0700 (PDT)
Received: from dhcp-4-70.tlv.redhat.com (bzq-82-81-161-50.red.bezeqint.net.
 [82.81.161.50])
 by smtp.gmail.com with ESMTPSA id f197sm6137515wme.22.2019.08.11.07.41.39
 for <spice-devel@lists.freedesktop.org>
 (version=TLS1_3 cipher=AEAD-AES128-GCM-SHA256 bits=128/128);
 Sun, 11 Aug 2019 07:41:39 -0700 (PDT)
To: spice-devel@lists.freedesktop.org
References: <20190806153453.20616-1-kpouget@redhat.com>
 <20190806153453.20616-8-kpouget@redhat.com>
From: Snir Sheriber <ssheribe@redhat.com>
Message-ID: <85892182-261b-189b-9820-6c8e104d4138@redhat.com>
Date: Sun, 11 Aug 2019 17:41:38 +0300
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <20190806153453.20616-8-kpouget@redhat.com>
Content-Language: en-US
Subject: Re: [Spice-devel] [RFC spice-streaming-agent 4/4] concrete-agent:
 prioritize requested codec for plugin selection
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

Ck9uIDgvNi8xOSA2OjM0IFBNLCBLZXZpbiBQb3VnZXQgd3JvdGU6Cj4gVGhpcyBwYXRjaCBnaXZl
cyBtb3JlIHByaW9yaXR5IHRvIHRoZSByZXF1ZXN0ZWQgdmlkZW8gY29kZWNzIHdoZW4KPiBzZWxl
Y3RpbmcgdGhlIEZyYW1lQ2FwdHVyZSBwbHVnaW4sIGluc3RlYWQgb2YgaXRzIGhhcmQtY29kZWQg
cmFuay4KCgpXZSBtYXkgd2FudCB0byBtZW50aW9uIHRoaXMgcHJpb3JpdHkgYWxzbyBpbiB0aGUg
aGVhZGVyIGZpbGUuCgpTbmlyLgoKPiBUaGUgY2xpZW50X2NvZGVjcyBzdG9yYWdlIHN0cnVjdHVy
ZSBpcyBjaGFuZ2VkIGZyb20gJ3NldCcgdG8gJ3ZlY3RvcicsCj4gYXMgdGhlIGNvZGVjIG9yZGVy
IGlzIG5vdCBwcmVzZXJ2ZWQgYnkgdGhlIHNldCBzdHJ1Y3R1cmUuLgo+Cj4gU2lnbmVkLW9mZi1i
eTogS2V2aW4gUG91Z2V0IDxrcG91Z2V0QHJlZGhhdC5jb20+Cj4gLS0tCj4gICBzcmMvY29uY3Jl
dGUtYWdlbnQuY3BwICAgICAgICB8IDM4ICsrKysrKysrKysrKysrKysrLS0tLS0tLS0tLS0tLS0t
LS0tCj4gICBzcmMvY29uY3JldGUtYWdlbnQuaHBwICAgICAgICB8ICAyICstCj4gICBzcmMvc3Bp
Y2Utc3RyZWFtaW5nLWFnZW50LmNwcCB8ICAyICstCj4gICBzcmMvc3RyZWFtLXBvcnQuY3BwICAg
ICAgICAgICB8ICAyICstCj4gICBzcmMvc3RyZWFtLXBvcnQuaHBwICAgICAgICAgICB8ICA0ICsr
LS0KPiAgIDUgZmlsZXMgY2hhbmdlZCwgMjQgaW5zZXJ0aW9ucygrKSwgMjQgZGVsZXRpb25zKC0p
Cj4KPiBkaWZmIC0tZ2l0IGEvc3JjL2NvbmNyZXRlLWFnZW50LmNwcCBiL3NyYy9jb25jcmV0ZS1h
Z2VudC5jcHAKPiBpbmRleCAzMzZiZDA5Li42ODNmYTI2IDEwMDY0NAo+IC0tLSBhL3NyYy9jb25j
cmV0ZS1hZ2VudC5jcHAKPiArKysgYi9zcmMvY29uY3JldGUtYWdlbnQuY3BwCj4gQEAgLTExMSw3
ICsxMTEsNyBAQCB2b2lkIENvbmNyZXRlQWdlbnQ6OkxvYWRQbHVnaW4oY29uc3Qgc3RkOjpzdHJp
bmcgJnBsdWdpbl9maWxlbmFtZSkKPiAgICAgICB9Cj4gICB9Cj4gICAKPiAtRnJhbWVDYXB0dXJl
ICpDb25jcmV0ZUFnZW50OjpHZXRCZXN0RnJhbWVDYXB0dXJlKGNvbnN0IHN0ZDo6c2V0PFNwaWNl
VmlkZW9Db2RlY1R5cGU+JiBjb2RlY3MpCj4gK0ZyYW1lQ2FwdHVyZSAqQ29uY3JldGVBZ2VudDo6
R2V0QmVzdEZyYW1lQ2FwdHVyZShjb25zdCBzdGQ6OnZlY3RvcjxTcGljZVZpZGVvQ29kZWNUeXBl
PiYgY29kZWNzKQo+ICAgewo+ICAgICAgIHN0ZDo6dmVjdG9yPHN0ZDo6cGFpcjx1bnNpZ25lZCwg
c3RkOjpzaGFyZWRfcHRyPFBsdWdpbj4+PiBzb3J0ZWRfcGx1Z2luczsKPiAgIAo+IEBAIC0xMjEs
MjQgKzEyMSwyNCBAQCBGcmFtZUNhcHR1cmUgKkNvbmNyZXRlQWdlbnQ6OkdldEJlc3RGcmFtZUNh
cHR1cmUoY29uc3Qgc3RkOjpzZXQ8U3BpY2VWaWRlb0NvZGVjVAo+ICAgICAgIH0KPiAgICAgICBz
b3J0KHNvcnRlZF9wbHVnaW5zLnJiZWdpbigpLCBzb3J0ZWRfcGx1Z2lucy5yZW5kKCkpOwo+ICAg
Cj4gLSAgICAvLyByZXR1cm4gZmlyc3Qgbm90IG51bGwKPiAtICAgIGZvciAoY29uc3QgYXV0byYg
cGx1Z2luOiBzb3J0ZWRfcGx1Z2lucykgewo+IC0gICAgICAgIGlmIChwbHVnaW4uZmlyc3QgPT0g
RG9udFVzZSkgewo+IC0gICAgICAgICAgICBicmVhazsKPiAtICAgICAgICB9Cj4gLSAgICAgICAg
Ly8gY2hlY2sgY2xpZW50IHN1cHBvcnRzIHRoZSBjb2RlYwo+IC0gICAgICAgIGlmIChjb2RlY3Mu
ZmluZChwbHVnaW4uc2Vjb25kLT5WaWRlb0NvZGVjVHlwZSgpKSA9PSBjb2RlY3MuZW5kKCkpCj4g
LSAgICAgICAgICAgIGNvbnRpbnVlOwo+IC0KPiAtICAgICAgICBGcmFtZUNhcHR1cmUgKmNhcHR1
cmU7Cj4gLSAgICAgICAgdHJ5IHsKPiAtICAgICAgICAgICAgY2FwdHVyZSA9IHBsdWdpbi5zZWNv
bmQtPkNyZWF0ZUNhcHR1cmUoKTsKPiAtICAgICAgICB9IGNhdGNoIChjb25zdCBzdGQ6OmV4Y2Vw
dGlvbiAmZXJyKSB7Cj4gLSAgICAgICAgICAgIHN5c2xvZyhMT0dfRVJSLCAiRXJyb3IgY3JlYXRp
bmcgY2FwdHVyZSBlbmdpbmU6ICVzIiwgZXJyLndoYXQoKSk7Cj4gLSAgICAgICAgICAgIGNvbnRp
bnVlOwo+IC0gICAgICAgIH0KPiAtICAgICAgICBpZiAoY2FwdHVyZSkgewo+IC0gICAgICAgICAg
ICByZXR1cm4gY2FwdHVyZTsKPiArICAgIGZvciAoY29uc3QgYXV0byYgY29kZWNfdHlwZTogY29k
ZWNzKSB7Cj4gKyAgICAgICAgLy8gZmluZCB0aGUgcGx1Z2luIHdpdGggdGhlIGhpZ2hlc3QgcmFu
ayBmb3IgdGhpcyBjb2RlYyB0eXBlCj4gKyAgICAgICAgZm9yIChjb25zdCBhdXRvJiBwbHVnaW46
IHNvcnRlZF9wbHVnaW5zKSB7Cj4gKyAgICAgICAgICAgIGlmIChwbHVnaW4uZmlyc3QgPT0gRG9u
dFVzZSkgewo+ICsgICAgICAgICAgICAgICAgY29udGludWU7Cj4gKyAgICAgICAgICAgIH0KPiAr
Cj4gKyAgICAgICAgICAgIC8vIGNoZWNrIGNsaWVudCBzdXBwb3J0cyB0aGUgY29kZWMKPiArICAg
ICAgICAgICAgaWYgKHBsdWdpbi5zZWNvbmQtPlZpZGVvQ29kZWNUeXBlKCkgIT0gY29kZWNfdHlw
ZSkgewo+ICsgICAgICAgICAgICAgICAgY29udGludWU7Cj4gKyAgICAgICAgICAgIH0KPiArCj4g
KyAgICAgICAgICAgIHRyeSB7Cj4gKyAgICAgICAgICAgICAgICByZXR1cm4gcGx1Z2luLnNlY29u
ZC0+Q3JlYXRlQ2FwdHVyZSgpOwo+ICsgICAgICAgICAgICB9IGNhdGNoIChjb25zdCBzdGQ6OmV4
Y2VwdGlvbiAmZXJyKSB7Cj4gKyAgICAgICAgICAgICAgICBzeXNsb2coTE9HX0VSUiwgIkVycm9y
IGNyZWF0aW5nIGNhcHR1cmUgZW5naW5lOiAlcyIsIGVyci53aGF0KCkpOwo+ICsgICAgICAgICAg
ICAgICAgY29udGludWU7Cj4gKyAgICAgICAgICAgIH0KPiAgICAgICAgICAgfQo+ICAgICAgIH0K
PiAgICAgICByZXR1cm4gbnVsbHB0cjsKPiBkaWZmIC0tZ2l0IGEvc3JjL2NvbmNyZXRlLWFnZW50
LmhwcCBiL3NyYy9jb25jcmV0ZS1hZ2VudC5ocHAKPiBpbmRleCA2ZDFiZTM1Li4wMzk5YmFiIDEw
MDY0NAo+IC0tLSBhL3NyYy9jb25jcmV0ZS1hZ2VudC5ocHAKPiArKysgYi9zcmMvY29uY3JldGUt
YWdlbnQuaHBwCj4gQEAgLTMzLDcgKzMzLDcgQEAgcHVibGljOgo+ICAgICAgIHZvaWQgUmVnaXN0
ZXIoY29uc3Qgc3RkOjpzaGFyZWRfcHRyPFBsdWdpbj4mIHBsdWdpbikgb3ZlcnJpZGU7Cj4gICAg
ICAgY29uc3QgQ29uZmlndXJlT3B0aW9uKiBPcHRpb25zKCkgY29uc3Qgb3ZlcnJpZGU7Cj4gICAg
ICAgdm9pZCBMb2FkUGx1Z2lucyhjb25zdCBzdGQ6OnN0cmluZyAmZGlyZWN0b3J5KTsKPiAtICAg
IEZyYW1lQ2FwdHVyZSAqR2V0QmVzdEZyYW1lQ2FwdHVyZShjb25zdCBzdGQ6OnNldDxTcGljZVZp
ZGVvQ29kZWNUeXBlPiYgY29kZWNzKTsKPiArICAgIEZyYW1lQ2FwdHVyZSAqR2V0QmVzdEZyYW1l
Q2FwdHVyZShjb25zdCBzdGQ6OnZlY3RvcjxTcGljZVZpZGVvQ29kZWNUeXBlPiYgY29kZWNzKTsK
PiAgICAgICBfX2F0dHJpYnV0ZV9fICgoZm9ybWF0IChwcmludGYsIDIsIDMpKSkKPiAgICAgICB2
b2lkIExvZ1N0YXQoY29uc3QgY2hhciogZm9ybWF0LCAuLi4pIG92ZXJyaWRlOwo+ICAgcHJpdmF0
ZToKPiBkaWZmIC0tZ2l0IGEvc3JjL3NwaWNlLXN0cmVhbWluZy1hZ2VudC5jcHAgYi9zcmMvc3Bp
Y2Utc3RyZWFtaW5nLWFnZW50LmNwcAo+IGluZGV4IGQyNzRiNWYuLjE1YzI3MzIgMTAwNjQ0Cj4g
LS0tIGEvc3JjL3NwaWNlLXN0cmVhbWluZy1hZ2VudC5jcHAKPiArKysgYi9zcmMvc3BpY2Utc3Ry
ZWFtaW5nLWFnZW50LmNwcAo+IEBAIC0xMjgsNyArMTI4LDcgQEAgcHJpdmF0ZToKPiAgIHN0YXRp
YyBib29sIGNhcHR1cmVfaW5fcHJvZ3Jlc3MgPSBmYWxzZTsKPiAgIHN0YXRpYyBib29sIHJlc2V0
X3JlcXVlc3RlZCA9IGZhbHNlOwo+ICAgc3RhdGljIGJvb2wgcXVpdF9yZXF1ZXN0ZWQgPSBmYWxz
ZTsKPiAtc3RhdGljIHN0ZDo6c2V0PFNwaWNlVmlkZW9Db2RlY1R5cGU+IGNsaWVudF9jb2RlY3M7
Cj4gK3N0YXRpYyBzdGQ6OnZlY3RvcjxTcGljZVZpZGVvQ29kZWNUeXBlPiBjbGllbnRfY29kZWNz
Owo+ICAgCj4gICBzdGF0aWMgYm9vbCBoYXZlX3NvbWV0aGluZ190b19yZWFkKFN0cmVhbVBvcnQg
JnN0cmVhbV9wb3J0LCBib29sIGJsb2NraW5nKQo+ICAgewo+IGRpZmYgLS1naXQgYS9zcmMvc3Ry
ZWFtLXBvcnQuY3BwIGIvc3JjL3N0cmVhbS1wb3J0LmNwcAo+IGluZGV4IDI2NzAxMjAuLjBkMDhk
NTAgMTAwNjQ0Cj4gLS0tIGEvc3JjL3N0cmVhbS1wb3J0LmNwcAo+ICsrKyBiL3NyYy9zdHJlYW0t
cG9ydC5jcHAKPiBAQCAtNDMsNyArNDMsNyBAQCBTdGFydFN0b3BNZXNzYWdlIEluYm91bmRNZXNz
YWdlOjpnZXRfcGF5bG9hZDxTdGFydFN0b3BNZXNzYWdlPigpCj4gICAgICAgfQo+ICAgCj4gICAg
ICAgZm9yIChzaXplX3QgaSA9IDE7IGkgPD0gZGF0YVswXTsgKytpKSB7Cj4gLSAgICAgICAgbXNn
LmNsaWVudF9jb2RlY3MuaW5zZXJ0KChTcGljZVZpZGVvQ29kZWNUeXBlKSBkYXRhW2ldKTsKPiAr
ICAgICAgICBtc2cuY2xpZW50X2NvZGVjcy5wdXNoX2JhY2soKFNwaWNlVmlkZW9Db2RlY1R5cGUp
IGRhdGFbaV0pOwo+ICAgICAgIH0KPiAgIAo+ICAgICAgIHJldHVybiBtc2c7Cj4gZGlmZiAtLWdp
dCBhL3NyYy9zdHJlYW0tcG9ydC5ocHAgYi9zcmMvc3RyZWFtLXBvcnQuaHBwCj4gaW5kZXggMDg0
NzNmNy4uYjJmNzUyMCAxMDA2NDQKPiAtLS0gYS9zcmMvc3RyZWFtLXBvcnQuaHBwCj4gKysrIGIv
c3JjL3N0cmVhbS1wb3J0LmhwcAo+IEBAIC0xNiw3ICsxNiw3IEBACj4gICAjaW5jbHVkZSA8c3Ry
aW5nPgo+ICAgI2luY2x1ZGUgPG1lbW9yeT4KPiAgICNpbmNsdWRlIDxtdXRleD4KPiAtI2luY2x1
ZGUgPHNldD4KPiArI2luY2x1ZGUgPHZlY3Rvcj4KPiAgIAo+ICAgCj4gICBuYW1lc3BhY2Ugc3Bp
Y2Ugewo+IEBAIC00NSw3ICs0NSw3IEBAIHB1YmxpYzoKPiAgIHN0cnVjdCBTdGFydFN0b3BNZXNz
YWdlCj4gICB7Cj4gICAgICAgYm9vbCBzdGFydF9zdHJlYW1pbmcgPSBmYWxzZTsKPiAtICAgIHN0
ZDo6c2V0PFNwaWNlVmlkZW9Db2RlY1R5cGU+IGNsaWVudF9jb2RlY3M7Cj4gKyAgICBzdGQ6OnZl
Y3RvcjxTcGljZVZpZGVvQ29kZWNUeXBlPiBjbGllbnRfY29kZWNzOwo+ICAgfTsKPiAgIAo+ICAg
c3RydWN0IEluQ2FwYWJpbGl0aWVzTWVzc2FnZSB7fTsKX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX18KU3BpY2UtZGV2ZWwgbWFpbGluZyBsaXN0ClNwaWNlLWRl
dmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9t
YWlsbWFuL2xpc3RpbmZvL3NwaWNlLWRldmVs
