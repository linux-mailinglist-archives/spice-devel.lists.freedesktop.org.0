Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 366E27DF69
	for <lists+spice-devel@lfdr.de>; Thu,  1 Aug 2019 17:48:21 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B7D0E6E708;
	Thu,  1 Aug 2019 15:48:19 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 840F36E708
 for <spice-devel@lists.freedesktop.org>; Thu,  1 Aug 2019 15:48:18 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx01.intmail.prod.int.phx2.redhat.com
 [10.5.11.11])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id F1FD23143555
 for <spice-devel@lists.freedesktop.org>; Thu,  1 Aug 2019 15:48:17 +0000 (UTC)
Received: from colo-mx.corp.redhat.com
 (colo-mx02.intmail.prod.int.phx2.redhat.com [10.5.11.21])
 by smtp.corp.redhat.com (Postfix) with ESMTPS id E9687600F8
 for <spice-devel@lists.freedesktop.org>; Thu,  1 Aug 2019 15:48:17 +0000 (UTC)
Received: from zmail25.collab.prod.int.phx2.redhat.com
 (zmail25.collab.prod.int.phx2.redhat.com [10.5.83.31])
 by colo-mx.corp.redhat.com (Postfix) with ESMTP id DB9E5264C8;
 Thu,  1 Aug 2019 15:48:17 +0000 (UTC)
Date: Thu, 1 Aug 2019 11:48:17 -0400 (EDT)
From: Frediano Ziglio <fziglio@redhat.com>
To: Snir Sheriber <ssheribe@redhat.com>
Message-ID: <2074963738.4204519.1564674497673.JavaMail.zimbra@redhat.com>
In-Reply-To: <20190801150119.29179-4-ssheribe@redhat.com>
References: <20190801150119.29179-1-ssheribe@redhat.com>
 <20190801150119.29179-4-ssheribe@redhat.com>
MIME-Version: 1.0
X-Originating-IP: [10.33.32.17, 10.4.195.14]
Thread-Topic: gst-plugin: reduce number of templates being used
Thread-Index: e8Sb3ZL75lE9YwOKdDA8B4/hv6mw7A==
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.11
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.49]); Thu, 01 Aug 2019 15:48:18 +0000 (UTC)
Subject: Re: [Spice-devel] [PATCH spice-streaming-agent 4/4] gst-plugin:
 reduce number of templates being used
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: spice-devel@lists.freedesktop.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

PiAKPiAtLS0KPiAKPiBUaGlzIHBhdGNoIGlzIG5vdCByZWFsbHkgbmVjZXNzYXJ5LCBqdXN0IGEg
c3VnZ2VzdGlvbiwgaXQncyBhIGJpdCBoYWNreQo+IGJ1dCB3b3VsZCBzYXZlIHNvbWUgY29kZS4K
PiBPdGhlciBvcHRpb25zIHdvdWxkIGJlIHRvIHVzZSBleHBsaWNpdCB0ZW1wbGF0ZSBzcGVjaWFs
aXphdGlvbiBvciB0bwo+IGxlYXZlIGl0IGFzIGlzLgo+IAoKU3VyZSwgd2hhdCBJIGRvbid0IGxp
a2UgaXMgdGhhdCBpcyBzdXJlbHkgbm90IHR5cGUgc2FmZSwgeW91IGNhbiBpbnN0YW50aWF0ZQph
IEdzdE1pbmlPYmplY3RVUHRyIG9mIHdoYXRldmVyLCBldmVuIGFuICJpbnQiIHR5cGUgYW5kIGNv
bXBpbGVyIHdvbid0CmNvbXBsYWluIGF0IGFsbCwgd2l0Y2ggaXMgYSBnb29kIHRoaW5nIG9mIEMr
Ky4KSSdtIHRoaW5raW5nIHBvc3NpYmxlIGNoYW5nZXMgdG8gdGhpcyBwYXRjaCBsaWtlIHRyYWl0
cyBhbmQvb3IgbWFjcm9zIHRvCmRlY2xhcmUgYWxsb3dlZCB0eXBlcy4KQ2VydGFpbiB0aGUgdHlw
ZSBpcyBnZXR0aW5nIGEgYml0IGxvbmcgKCJHc3RNaW5pT2JqZWN0VVB0cjxHc3RTYW1wbGU+Iiks
CmJ1dCB0aGlzIGNvdWxkIGJlIHNvbHZlIGJ5IHR5cGVkZWZzICh3ZWxsLCB0aGlzIHdhcyBzb2x2
ZWQgYnkgdXNpbmcgbGluZXMpLgoKPiAtLS0KPiAgc3JjL2dzdC1wbHVnaW4uY3BwIHwgNDQgKysr
KysrKysrKysrKystLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KPiAgMSBmaWxlIGNoYW5n
ZWQsIDE0IGluc2VydGlvbnMoKyksIDMwIGRlbGV0aW9ucygtKQo+IAo+IGRpZmYgLS1naXQgYS9z
cmMvZ3N0LXBsdWdpbi5jcHAgYi9zcmMvZ3N0LXBsdWdpbi5jcHAKPiBpbmRleCBjNzQxMmM1Li41
ZjRjYzNkIDEwMDY0NAo+IC0tLSBhL3NyYy9nc3QtcGx1Z2luLmNwcAo+ICsrKyBiL3NyYy9nc3Qt
cGx1Z2luLmNwcAo+IEBAIC00OSwzMiArNDksMTYgQEAgc3RydWN0IEdzdE9iamVjdERlbGV0ZXIg
ewo+ICB0ZW1wbGF0ZSA8dHlwZW5hbWUgVD4KPiAgdXNpbmcgR3N0T2JqZWN0VVB0ciA9IHN0ZDo6
dW5pcXVlX3B0cjxULCBHc3RPYmplY3REZWxldGVyPFQ+PjsKPiAgCj4gLXN0cnVjdCBHc3RDYXBz
RGVsZXRlciB7Cj4gLSAgICB2b2lkIG9wZXJhdG9yKCkoR3N0Q2FwcyogcCkKPiAtICAgIHsKPiAt
ICAgICAgICBnc3RfY2Fwc191bnJlZihwKTsKPiAtICAgIH0KPiAtfTsKPiAtCj4gLXVzaW5nIEdz
dENhcHNVUHRyID0gc3RkOjp1bmlxdWVfcHRyPEdzdENhcHMsIEdzdENhcHNEZWxldGVyPjsKPiAt
Cj4gLXN0cnVjdCBHc3RTYW1wbGVEZWxldGVyIHsKPiAtICAgIHZvaWQgb3BlcmF0b3IoKShHc3RT
YW1wbGUqIHApCj4gLSAgICB7Cj4gLSAgICAgICAgZ3N0X3NhbXBsZV91bnJlZihwKTsKPiAtICAg
IH0KPiAtfTsKPiAtCj4gLXVzaW5nIEdzdFNhbXBsZVVQdHIgPSBzdGQ6OnVuaXF1ZV9wdHI8R3N0
U2FtcGxlLCBHc3RTYW1wbGVEZWxldGVyPjsKPiAtCj4gLXN0cnVjdCBHc3RCdWZmZXJEZWxldGVy
IHsKPiAtICAgIHZvaWQgb3BlcmF0b3IoKShHc3RCdWZmZXIqIHApCj4gK3RlbXBsYXRlIDx0eXBl
bmFtZSBUPgo+ICtzdHJ1Y3QgR3N0TWluaU9iamVjdERlbGV0ZXIgewo+ICsgICAgdm9pZCBvcGVy
YXRvcigpKFQqIHApCj4gICAgICB7Cj4gLSAgICAgICAgZ3N0X2J1ZmZlcl91bnJlZihwKTsKPiAr
ICAgICAgICBnc3RfbWluaV9vYmplY3RfdW5yZWYoR1NUX01JTklfT0JKRUNUX0NBU1QocCkpOwo+
ICAgICAgfQo+ICB9Owo+ICAKPiAtdXNpbmcgR3N0QnVmZmVyVVB0ciA9IHN0ZDo6dW5pcXVlX3B0
cjxHc3RCdWZmZXIsIEdzdEJ1ZmZlckRlbGV0ZXI+Owo+ICt0ZW1wbGF0ZSA8dHlwZW5hbWUgVD4K
PiArdXNpbmcgR3N0TWluaU9iamVjdFVQdHIgPSBzdGQ6OnVuaXF1ZV9wdHI8VCwgR3N0TWluaU9i
amVjdERlbGV0ZXI8VD4+Owo+ICAKPiAgY2xhc3MgR3N0cmVhbWVyRnJhbWVDYXB0dXJlIGZpbmFs
IDogcHVibGljIEZyYW1lQ2FwdHVyZQo+ICB7Cj4gQEAgLTg5LDcgKzczLDcgQEAgcHVibGljOgo+
ICAgICAgc3RkOjp2ZWN0b3I8RGV2aWNlRGlzcGxheUluZm8+IGdldF9kZXZpY2VfZGlzcGxheV9p
bmZvKCkgY29uc3Qgb3ZlcnJpZGU7Cj4gIHByaXZhdGU6Cj4gICAgICB2b2lkIGZyZWVfc2FtcGxl
KCk7Cj4gLSAgICBHc3RFbGVtZW50ICpnZXRfZW5jb2Rlcl9wbHVnaW4oY29uc3QgR3N0cmVhbWVy
RW5jb2RlclNldHRpbmdzICZzZXR0aW5ncywKPiBHc3RDYXBzVVB0ciAmc2lua19jYXBzKTsKPiAr
ICAgIEdzdEVsZW1lbnQgKmdldF9lbmNvZGVyX3BsdWdpbihjb25zdCBHc3RyZWFtZXJFbmNvZGVy
U2V0dGluZ3MgJnNldHRpbmdzLAo+IEdzdE1pbmlPYmplY3RVUHRyPEdzdENhcHM+ICZzaW5rX2Nh
cHMpOwo+ICAgICAgR3N0RWxlbWVudCAqZ2V0X2NhcHR1cmVfcGx1Z2luKGNvbnN0IEdzdHJlYW1l
ckVuY29kZXJTZXR0aW5ncwo+ICAgICAgJnNldHRpbmdzKTsKPiAgICAgIHZvaWQgcGlwZWxpbmVf
aW5pdChjb25zdCBHc3RyZWFtZXJFbmNvZGVyU2V0dGluZ3MgJnNldHRpbmdzKTsKPiAgICAgIERp
c3BsYXkgKmNvbnN0IGRweTsKPiBAQCAtOTcsNyArODEsNyBAQCBwcml2YXRlOgo+ICAgICAgdm9p
ZCB4bGliX2NhcHR1cmUoKTsKPiAgI2VuZGlmCj4gICAgICBHc3RPYmplY3RVUHRyPEdzdEVsZW1l
bnQ+IHBpcGVsaW5lLCBjYXB0dXJlLCBzaW5rOwo+IC0gICAgR3N0U2FtcGxlVVB0ciBzYW1wbGU7
Cj4gKyAgICBHc3RNaW5pT2JqZWN0VVB0cjxHc3RTYW1wbGU+IHNhbXBsZTsKPiAgICAgIEdzdE1h
cEluZm8gbWFwID0ge307Cj4gICAgICB1aW50MzJfdCBsYXN0X3dpZHRoID0gfjB1LCBsYXN0X2hl
aWdodCA9IH4wdTsKPiAgICAgIHVpbnQzMl90IGN1cl93aWR0aCA9IDAsIGN1cl9oZWlnaHQgPSAw
Owo+IEBAIC0xMzQsNyArMTE4LDcgQEAgR3N0RWxlbWVudAo+ICpHc3RyZWFtZXJGcmFtZUNhcHR1
cmU6OmdldF9jYXB0dXJlX3BsdWdpbihjb25zdCBHc3RyZWFtZXJFbmNvZGVyU2V0dAo+ICB9Cj4g
IAo+ICBHc3RFbGVtZW50ICpHc3RyZWFtZXJGcmFtZUNhcHR1cmU6OmdldF9lbmNvZGVyX3BsdWdp
bihjb25zdAo+ICBHc3RyZWFtZXJFbmNvZGVyU2V0dGluZ3MgJnNldHRpbmdzLAo+IC0gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHc3RDYXBzVVB0
cgo+ICZzaW5rX2NhcHMpCj4gKwo+IEdzdE1pbmlPYmplY3RVUHRyPEdzdENhcHM+Cj4gJnNpbmtf
Y2FwcykKPiAgewo+ICAgICAgR0xpc3QgKmVuY29kZXJzOwo+ICAgICAgR0xpc3QgKmZpbHRlcmVk
Owo+IEBAIC0yMzgsNyArMjIyLDcgQEAgdm9pZCBHc3RyZWFtZXJGcmFtZUNhcHR1cmU6OnBpcGVs
aW5lX2luaXQoY29uc3QKPiBHc3RyZWFtZXJFbmNvZGVyU2V0dGluZ3MgJnNldHRpbgo+ICAgICAg
aWYgKCFjb252ZXJ0KSB7Cj4gICAgICAgICAgdGhyb3cgc3RkOjpydW50aW1lX2Vycm9yKCJHc3Ry
ZWFtZXIncyAnYXV0b3ZpZGVvY29udmVydCcgZWxlbWVudAo+ICAgICAgICAgIGNhbm5vdCBiZSBj
cmVhdGVkIik7Cj4gICAgICB9Cj4gLSAgICBHc3RDYXBzVVB0ciBzaW5rX2NhcHM7Cj4gKyAgICBH
c3RNaW5pT2JqZWN0VVB0cjxHc3RDYXBzPiBzaW5rX2NhcHM7Cj4gICAgICBHc3RPYmplY3RVUHRy
PEdzdEVsZW1lbnQ+IGVuY29kZXIoZ2V0X2VuY29kZXJfcGx1Z2luKHNldHRpbmdzLAo+ICAgICAg
c2lua19jYXBzKSk7Cj4gICAgICBpZiAoIWVuY29kZXIpIHsKPiAgICAgICAgICB0aHJvdyBzdGQ6
OnJ1bnRpbWVfZXJyb3IoIkdzdHJlYW1lcidzIGVuY29kZXIgZWxlbWVudCBjYW5ub3QgYmUKPiAg
ICAgICAgICBjcmVhdGVkIik7Cj4gQEAgLTI2MCw3ICsyNDQsNyBAQCB2b2lkIEdzdHJlYW1lckZy
YW1lQ2FwdHVyZTo6cGlwZWxpbmVfaW5pdChjb25zdAo+IEdzdHJlYW1lckVuY29kZXJTZXR0aW5n
cyAmc2V0dGluCj4gICAgICBnc3RfYmluX2FkZChiaW4sIGVuY29kZXIpOwo+ICAgICAgZ3N0X2Jp
bl9hZGQoYmluLCBzaW5rKTsKPiAgCj4gLSAgICBHc3RDYXBzVVB0ciBjYXBzKGdzdF9jYXBzX2Zy
b21fc3RyaW5nKCJ2aWRlby94LXJhdyhBTlkpIikpOwo+ICsgICAgR3N0TWluaU9iamVjdFVQdHI8
R3N0Q2Fwcz4KPiBjYXBzKGdzdF9jYXBzX2Zyb21fc3RyaW5nKCJ2aWRlby94LXJhdyhBTlkpIikp
Owo+ICAgICAgbGluayA9IGdzdF9lbGVtZW50X2xpbmsoY2FwdHVyZS5nZXQoKSwgY29udmVydC5n
ZXQoKSkgJiYKPiAgICAgICAgICAgICBnc3RfZWxlbWVudF9saW5rX2ZpbHRlcmVkKGNvbnZlcnQu
Z2V0KCksIGVuY29kZXIuZ2V0KCksCj4gICAgICAgICAgICAgY2Fwcy5nZXQoKSkgJiYKPiAgICAg
ICAgICAgICBnc3RfZWxlbWVudF9saW5rX2ZpbHRlcmVkKGVuY29kZXIuZ2V0KCksIHNpbmsuZ2V0
KCksCj4gICAgICAgICAgICAgc2lua19jYXBzLmdldCgpKTsKPiBAQCAtMzYyLDcgKzM0Niw3IEBA
IHZvaWQgR3N0cmVhbWVyRnJhbWVDYXB0dXJlOjp4bGliX2NhcHR1cmUoKQo+ICAgICAgICAgIHRo
cm93IHN0ZDo6cnVudGltZV9lcnJvcigiQ2Fubm90IGNhcHR1cmUgZnJvbSBYIik7Cj4gICAgICB9
Cj4gIAo+IC0gICAgR3N0QnVmZmVyVVB0ciBidWYoZ3N0X2J1ZmZlcl9uZXdfd3JhcHBlZF9mdWxs
KChHc3RNZW1vcnlGbGFncykwLAo+IGltYWdlLT5kYXRhLAo+ICsgICAgR3N0TWluaU9iamVjdFVQ
dHI8R3N0QnVmZmVyPgo+IGJ1Zihnc3RfYnVmZmVyX25ld193cmFwcGVkX2Z1bGwoKEdzdE1lbW9y
eUZsYWdzKTAsIGltYWdlLT5kYXRhLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIGltYWdlLT5oZWlnaHQgKgo+ICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltYWdlLT5ieXRlc19wZXJfbGluZSwgMCwK
PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFn
ZS0+aGVpZ2h0ICoKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBpbWFnZS0+Ynl0ZXNfcGVyX2xpbmUsCj4gICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2UsCj4gICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJlZV94aW1hZ2UpKTsKPiBAQCAtMzcwLDcg
KzM1NCw3IEBAIHZvaWQgR3N0cmVhbWVyRnJhbWVDYXB0dXJlOjp4bGliX2NhcHR1cmUoKQo+ICAg
ICAgICAgIHRocm93IHN0ZDo6cnVudGltZV9lcnJvcigiRmFpbGVkIHRvIHdyYXAgaW1hZ2UgaW4g
Z3N0cmVhbWVyCj4gICAgICAgICAgYnVmZmVyIik7Cj4gICAgICB9Cj4gIAo+IC0gICAgR3N0Q2Fw
c1VQdHIgY2Fwcyhnc3RfY2Fwc19uZXdfc2ltcGxlKCJ2aWRlby94LXJhdyIsCj4gKyAgICBHc3RN
aW5pT2JqZWN0VVB0cjxHc3RDYXBzPiBjYXBzKGdzdF9jYXBzX25ld19zaW1wbGUoInZpZGVvL3gt
cmF3IiwKPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZm9ybWF0
IiwgR19UWVBFX1NUUklORywgIkJHUngiLAo+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICJ3aWR0aCIsIEdfVFlQRV9JTlQsIGltYWdlLT53aWR0aCwKPiAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiaGVpZ2h0IiwgR19UWVBFX0lOVCwK
PiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWFnZS0+aGVpZ2h0
LAo+IEBAIC0zNzgsNyArMzYyLDcgQEAgdm9pZCBHc3RyZWFtZXJGcmFtZUNhcHR1cmU6OnhsaWJf
Y2FwdHVyZSgpCj4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVs
bHB0cikpOwo+ICAKPiAgICAgIC8vIFB1c2ggc2FtcGxlCj4gLSAgICBHc3RTYW1wbGVVUHRyIGFw
cHNyY19zYW1wbGUoZ3N0X3NhbXBsZV9uZXcoYnVmLmdldCgpLCBjYXBzLmdldCgpLAo+IG51bGxw
dHIsIG51bGxwdHIpKTsKPiArICAgIEdzdE1pbmlPYmplY3RVUHRyPEdzdFNhbXBsZT4gYXBwc3Jj
X3NhbXBsZShnc3Rfc2FtcGxlX25ldyhidWYuZ2V0KCksCj4gY2Fwcy5nZXQoKSwgbnVsbHB0ciwg
bnVsbHB0cikpOwo+ICAgICAgaWYgKGdzdF9hcHBfc3JjX3B1c2hfc2FtcGxlKEdTVF9BUFBfU1JD
KGNhcHR1cmUuZ2V0KCkpLAo+ICAgICAgYXBwc3JjX3NhbXBsZS5nZXQoKSkgIT0gR1NUX0ZMT1df
T0spIHsKPiAgICAgICAgICB0aHJvdyBzdGQ6OnJ1bnRpbWVfZXJyb3IoImdzdHJhbWVyIGFwcHNy
YyBlbGVtZW50IGNhbm5vdCBwdXNoCj4gICAgICAgICAgc2FtcGxlIik7Cj4gICAgICB9CgpGcmVk
aWFubwpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpTcGlj
ZS1kZXZlbCBtYWlsaW5nIGxpc3QKU3BpY2UtZGV2ZWxAbGlzdHMuZnJlZWRlc2t0b3Aub3JnCmh0
dHBzOi8vbGlzdHMuZnJlZWRlc2t0b3Aub3JnL21haWxtYW4vbGlzdGluZm8vc3BpY2UtZGV2ZWw=
