Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 33596DAE6E
	for <lists+spice-devel@lfdr.de>; Thu, 17 Oct 2019 15:31:04 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id B20D36E48F;
	Thu, 17 Oct 2019 13:31:02 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from us-smtp-delivery-1.mimecast.com (us-smtp-2.mimecast.com
 [205.139.110.61])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 9CD0D6E48F
 for <spice-devel@lists.freedesktop.org>; Thu, 17 Oct 2019 13:31:00 +0000 (UTC)
Received: from mail-wr1-f72.google.com (mail-wr1-f72.google.com
 [209.85.221.72]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-354-7hoK0_ACMXWUc4z0TtdMbQ-1; Thu, 17 Oct 2019 09:30:57 -0400
Received: by mail-wr1-f72.google.com with SMTP id m14so961509wru.17
 for <spice-devel@lists.freedesktop.org>; Thu, 17 Oct 2019 06:30:57 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=g9Vko61UqLooFFCSIafJ7Tp3L/8lyRfsfE4OT8M/34A=;
 b=kw1Snye3CPrWH97O7rAu0rq9KKR6U0u0vGaljD2v3XBrOIiRUFLMxJ+DvJLI+z48ss
 nWHEM1x+6GHGOA8LbDFanHlDQaZ0PQ77o8Hf6NyY/V6kGE5vojEfAOvYnovWJQAeAh+p
 k6WfFGvDOqGcskeyvC2MQYedPGLy+Oz+bSUJWUMz/268ZSZ419yaSnfHqJYoJXWEyiTr
 gB8V3LyJgeRit54qbBNA7rxBWHbDLYOp9gqHzuziMX0FdqQt82WrPOvq4RNkQWoIFrBn
 SecZTVreB/ExkIlmnz15cdR9x6T9cbu7vdwLzBU4z6patGx4bWHu1+0dUtuxF9Z3TizG
 BSzA==
X-Gm-Message-State: APjAAAWB4AWww690EGSVzgWEmoazVuvT6fY+C/fS1HxJWjDjDaMD/ku/
 RCsPrPlgedcVJCnp3LRyRIPZZ5KFee8pQ5D6rCxeMm/aAdvPUmEEUwfiyYI6q1rcj72LJDYDPNr
 gJl9/+/zpw3uNKQKHHhXX2/R+dObKrXI=
X-Received: by 2002:adf:db81:: with SMTP id u1mr3012985wri.347.1571319056402; 
 Thu, 17 Oct 2019 06:30:56 -0700 (PDT)
X-Google-Smtp-Source: APXvYqykLpdqF535J3Fa5vnnIEsbws5Mpt9NRjQweD773+sk7TsRmn586lACVoxh4MBstrxZt/jbjA==
X-Received: by 2002:adf:db81:: with SMTP id u1mr3012965wri.347.1571319056150; 
 Thu, 17 Oct 2019 06:30:56 -0700 (PDT)
Received: from pinea.redhat.com ([2001:861:3440:6a0:2cf1:592d:314d:825])
 by smtp.gmail.com with ESMTPSA id y1sm2589055wrw.6.2019.10.17.06.30.55
 for <spice-devel@lists.freedesktop.org>
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 17 Oct 2019 06:30:55 -0700 (PDT)
From: Kevin Pouget <kpouget@redhat.com>
To: spice-devel@lists.freedesktop.org
Date: Thu, 17 Oct 2019 15:30:46 +0200
Message-Id: <20191017133047.32259-2-kpouget@redhat.com>
X-Mailer: git-send-email 2.21.0
In-Reply-To: <20191017133047.32259-1-kpouget@redhat.com>
References: <20191017133047.32259-1-kpouget@redhat.com>
MIME-Version: 1.0
X-MC-Unique: 7hoK0_ACMXWUc4z0TtdMbQ-1
X-Mimecast-Spam-Score: 0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=redhat.com; 
 s=mimecast20190719; t=1571319059;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding:
 in-reply-to:in-reply-to:references:references;
 bh=rkLZqDjIlCBQ9juFvJfhB6SnzEiIJnXq7cbGPksKAOA=;
 b=SyMhzKsmG5zxl9uQieSpF7WkORvCUluDGsWqMOEmP6bedN8lIFe7oz5NttlfVYOM3A7THm
 +0nnMizLnhYafn1PYdziptY1o3OlKqcEYkb7JaB2Y6ke1y8c6omKQlq1/DTX8G8Ox2EoAp
 PUEpKi2AIatWuop/dVOKAgaU/s6mRNA=
Subject: [Spice-devel] [PATCH spice-common 2/3] agent-interface: add
 configuration functions
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

YWdlbnRfaW50ZXJmYWNlX3N0YXJ0OiB0aGlzIGZ1bmN0aW9uIGFsbG93cyBsYXVuY2hpbmcgdGhl
IGFnZW50CmludGVyZmFjZSAoaWUsIGl0cyBsaXN0ZW5pbmcgc29ja2V0KSBvbiBhIGdpdmVuIHBv
cnQuCgphZ2VudF9pbnRlcmZhY2Vfc2V0X29uX2Nvbm5lY3RfY2I6IHRoaXMgZnVuY3Rpb24gYWxs
b3dzIHBhc3NpbmcgYQpjYWxsYmFjayBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgdHJpZ2dlcmVkIHdo
ZW4gYSBjbGllbnQgKGEgTG9jYWwgQWdlbnQpCmNvbm5lY3RzIHRvIHRoZSBBZ2VudCBJbnRlcmZh
Y2Ugc29ja2V0LgoKYWdlbnRfaW50ZXJmYWNlX3NldF9mb3J3YXJkX3F1YWxpdHlfY2I6IHRoaXMg
ZnVuY3Rpb24gYWxsb3dzIFNQSUNFIHRvCnByb3ZpZGUgYSBmdW5jdGlvbiB0aGF0IHdpbGwgZm9y
d2FyZCBRdWFsaXR5IG1lc3NhZ2VzIHJlY2VpdmVkIGJ5IHRoZQpBZ2VudCBJbnRlcmZhY2UgdG93
YXJkcyBTUElDRSBzZXJ2ZXIsIGZvciBhIGNlbnRyYWxpemVkIHByb2Nlc3Npbmcgb2YKdGhlIG1l
c3NhZ2VzLgoKU2lnbmVkLW9mZi1ieTogS2V2aW4gUG91Z2V0IDxrcG91Z2V0QHJlZGhhdC5jb20+
Ci0tLQogY29tbW9uL2FnZW50X2ludGVyZmFjZS5jIHwgNDUgKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrLQogY29tbW9uL2FnZW50X2ludGVyZmFjZS5oIHwgMjIgKysrKysr
KysrKysrKysrKysrKysKIGNvbW1vbi9yZWNvcmRlci5oICAgICAgICB8IDI3ICsrKysrKysrKysr
KysrKysrKysrKysrKwogMyBmaWxlcyBjaGFuZ2VkLCA5MyBpbnNlcnRpb25zKCspLCAxIGRlbGV0
aW9uKC0pCgpkaWZmIC0tZ2l0IGEvY29tbW9uL2FnZW50X2ludGVyZmFjZS5jIGIvY29tbW9uL2Fn
ZW50X2ludGVyZmFjZS5jCmluZGV4IDc2OGI2YTkuLmVhYzA3MWMgMTAwNjQ0Ci0tLSBhL2NvbW1v
bi9hZ2VudF9pbnRlcmZhY2UuYworKysgYi9jb21tb24vYWdlbnRfaW50ZXJmYWNlLmMKQEAgLTQz
LDYgKzQzLDEyIEBAIHN0YXRpYyBGSUxFICpjb21tdW5pY2F0aW9uX2YgPSBOVUxMOwogc3RhdGlj
IHJlY29yZGVyX2luZm8gKnJlY29yZGVyc1tOQl9NQVhfUkVDT1JERVJTXTsKIHN0YXRpYyB1aW50
MzJfdCBuYl9yZWNvcmRlcnMgPSAwOwogCitzdGF0aWMgZm9yd2FyZF9xdWFsaXR5X2NiX3QgZm9y
d2FyZF9xdWFsaXR5X2NiOworc3RhdGljIHZvaWQgKmZvcndhcmRfcXVhbGl0eV9jYl9kYXRhOwor
CitzdGF0aWMgb25fY29ubmVjdF9jYl90IG9uX2Nvbm5lY3RfY2I7CitzdGF0aWMgdm9pZCAqb25f
Y29ubmVjdF9jYl9kYXRhOworCiBzdGF0aWMgdWludHB0cl90IHJlY29yZGVyX3RpY2sodm9pZCk7
CiAKICNpZm5kZWYgUkVDT1JERVJfSFoKQEAgLTk4LDYgKzEwNCwxMCBAQCBzdGF0aWMgaW50IGFn
ZW50X2luaXRpYWxpemVfY29tbXVuaWNhdGlvbihpbnQgc29ja2V0KQogICAgICAgICBnX2luZm8o
IkVuYWJsZSByZWNvcmRlciAnJXMnIiwgcmVjb3JkZXJzW2ldLT5uYW1lKTsKICAgICB9CiAKKyAg
ICBpZiAob25fY29ubmVjdF9jYiAmJiBvbl9jb25uZWN0X2NiKG9uX2Nvbm5lY3RfY2JfZGF0YSkp
IHsKKyAgICAgICAgZ290byB1bmxvY2s7CisgICAgfQorCiAgICAgY29tbXVuaWNhdGlvbl9mID0g
c29ja2V0X2Y7CiAgICAgcmV0ID0gMDsKIApAQCAtMTI0LDYgKzEzNCwxOCBAQCBzdGF0aWMgdm9p
ZCBhZ2VudF9maW5hbGl6ZV9jb21tdW5pY2F0aW9uKGludCBzb2NrZXQpCiAgICAgZ19tdXRleF91
bmxvY2soJm11dGV4X3NvY2tldCk7CiB9CiAKK3N0YXRpYyB2b2lkIGZvcndhcmRfcXVhbGl0eShj
b25zdCBjaGFyICpxdWFsaXR5KQoreworICAgIGlmICghZm9yd2FyZF9xdWFsaXR5X2NiKSB7Cisg
ICAgICAgIGdfd2FybmluZygiUXVhbGl0eTogTm8gY2FsbGJhY2sgc2V0LCBkcm9wcGluZyB0aGUg
bWVzc2FnZSAoJXMpLiIsIHF1YWxpdHkpOworICAgICAgICByZXR1cm47CisgICAgfQorCisgICAg
Z19pbmZvKCJRdWFsaXR5OiBGb3J3YXJkaW5nICclcyciLCBxdWFsaXR5KTsKKworICAgIGZvcndh
cmRfcXVhbGl0eV9jYihmb3J3YXJkX3F1YWxpdHlfY2JfZGF0YSwgcXVhbGl0eSk7Cit9CisKIHN0
YXRpYyBpbnQgYWdlbnRfcHJvY2Vzc19jb21tdW5pY2F0aW9uKGludCBzb2NrZXQpCiB7CiAgICAg
c3RhdGljIGNoYXIgbXNnX2luWzEyOF07CkBAIC0xNDQsNyArMTY2LDggQEAgc3RhdGljIGludCBh
Z2VudF9wcm9jZXNzX2NvbW11bmljYXRpb24oaW50IHNvY2tldCkKICAgICB9CiAKICAgICBpZiAo
bXNnX2luW2xlbl0gPT0gJ1wwJykgewotICAgICAgICAvLyBUT0RPOiBwcm9jZXNzIHF1YWxpdHkg
aW5kaWNhdG9yCisgICAgICAgIC8vIHByb2Nlc3MgcXVhbGl0eSBpbmRpY2F0b3IKKyAgICAgICAg
Zm9yd2FyZF9xdWFsaXR5KG1zZ19pbik7CiAgICAgICAgIGxlbiA9IDA7CiAgICAgICAgIHJldHVy
biAwOwogICAgIH0KQEAgLTM5Niw2ICs0MTksMjYgQEAgc3RhdGljIHZvaWQgcmVjb3JkZXJfdHJh
Y2VfZW50cnkocmVjb3JkZXJfaW5mbyAqaW5mbywgcmVjb3JkZXJfZW50cnkgKmVudHJ5LCAuLi4K
ICAgICBnX211dGV4X3VubG9jaygmbXV0ZXhfc29ja2V0KTsKIH0KIAordm9pZCBhZ2VudF9pbnRl
cmZhY2Vfc3RhcnQodW5zaWduZWQgaW50IHBvcnQpCit7CisgICAgZ19pbmZvKCJMYXVuY2ggb24g
cG9ydCAldSIsIHBvcnQpOworICAgIHJlY29yZGVyX2luaXRpYWxpemF0aW9uKHBvcnQpOworfQor
Cit2b2lkIGFnZW50X2ludGVyZmFjZV9zZXRfZm9yd2FyZF9xdWFsaXR5X2NiKGZvcndhcmRfcXVh
bGl0eV9jYl90IGNiLCB2b2lkICpkYXRhKQoreworICAgIGdfZGVidWcoIlJlY2VpdmVkIGZvcndh
cmRfcXVhbGl0eSBjYWxsYmFjayIpOworICAgIGZvcndhcmRfcXVhbGl0eV9jYiA9IGNiOworICAg
IGZvcndhcmRfcXVhbGl0eV9jYl9kYXRhID0gZGF0YTsKK30KKwordm9pZCBhZ2VudF9pbnRlcmZh
Y2Vfc2V0X29uX2Nvbm5lY3RfY2Iob25fY29ubmVjdF9jYl90IGNiLCB2b2lkICpkYXRhKQorewor
ICAgIGdfZGVidWcoIlJlY2VpdmVkIG9uX2Nvbm5lY3QgY2FsbGJhY2siKTsKKyAgICBvbl9jb25u
ZWN0X2NiID0gY2I7CisgICAgb25fY29ubmVjdF9jYl9kYXRhID0gZGF0YTsKK30KKwogdm9pZCBy
ZWNvcmRlcl9hcHBlbmQocmVjb3JkZXJfaW5mbyAqcmVjLAogICAgICAgICAgICAgICAgICAgICAg
Y29uc3QgY2hhciAqd2hlcmUsCiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFyICpmb3Jt
YXQsCmRpZmYgLS1naXQgYS9jb21tb24vYWdlbnRfaW50ZXJmYWNlLmggYi9jb21tb24vYWdlbnRf
aW50ZXJmYWNlLmgKaW5kZXggMDQyMTIwZS4uY2U1YjhkOSAxMDA2NDQKLS0tIGEvY29tbW9uL2Fn
ZW50X2ludGVyZmFjZS5oCisrKyBiL2NvbW1vbi9hZ2VudF9pbnRlcmZhY2UuaApAQCAtNTQwLDMg
KzU0MCwyNSBAQCBzdGF0aWMgaW5saW5lIHVpbnRwdHJfdCBfcmVjb3JkZXJfZG91YmxlKGRvdWJs
ZSBkKQogICAgICAgICByZXR1cm4gdS5pOwogICAgIH0KIH0KKworLy8gPT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PQorLy8gICBBZ2VudC1JbnRlcmZhY2Ugc3BlY2lmaWMgZGVmaW5pdGlvbnMKKy8vID09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT0KKworI2lmZGVmIF9fY3BsdXNwbHVzCitleHRlcm4gIkMiIHsKKyNlbmRp
ZiAvLyBfX2NwbHVzcGx1cworCisvLyBsYXVuY2ggdGhlIEFnZW50LUludGVyZmFjZSBzZXJ2ZXIg
c29ja2V0CitleHRlcm4gdm9pZCBhZ2VudF9pbnRlcmZhY2Vfc3RhcnQodW5zaWduZWQgaW50IHBv
cnQpOworCisvLwordHlwZWRlZiB2b2lkICgqZm9yd2FyZF9xdWFsaXR5X2NiX3QpKHZvaWQgKiwg
Y29uc3QgY2hhciAqKTsKK2V4dGVybiB2b2lkIGFnZW50X2ludGVyZmFjZV9zZXRfZm9yd2FyZF9x
dWFsaXR5X2NiKGZvcndhcmRfcXVhbGl0eV9jYl90IGNiLCB2b2lkICpkYXRhKTsKKworLy8gc2V0
IGEgY2FsbGJhY2sgZnVuY3Rpb24gdHJpZ2dlcmVkIHdoZW4gYSBuZXcgY2xpZW50IGNvbm5lY3Rz
IHRvIHRoZSBzb2NrZXQKK3R5cGVkZWYgaW50ICgqb25fY29ubmVjdF9jYl90KSh2b2lkICopOwor
ZXh0ZXJuIHZvaWQgYWdlbnRfaW50ZXJmYWNlX3NldF9vbl9jb25uZWN0X2NiKG9uX2Nvbm5lY3Rf
Y2JfdCBjYiwgdm9pZCAqZGF0YSk7CisjaWZkZWYgX19jcGx1c3BsdXMKK30KKyNlbmRpZiAvLyBf
X2NwbHVzcGx1cwpkaWZmIC0tZ2l0IGEvY29tbW9uL3JlY29yZGVyLmggYi9jb21tb24vcmVjb3Jk
ZXIuaAppbmRleCA4NDQ4ZTAyLi43MTk0YWI1IDEwMDY0NAotLS0gYS9jb21tb24vcmVjb3JkZXIu
aAorKysgYi9jb21tb24vcmVjb3JkZXIuaApAQCAtNzMsMyArNzMsMzAgQEAgcmVjb3JkZXJfZHVt
cF9vbl9jb21tb25fc2lnbmFscyh1bnNpZ25lZCBhZGQsIHVuc2lnbmVkIHJlbW92ZSkKICNlbHNl
CiAjaW5jbHVkZSA8Y29tbW9uL3JlY29yZGVyL3JlY29yZGVyLmg+CiAjZW5kaWYKKworI2lmICFk
ZWZpbmVkKEVOQUJMRV9BR0VOVF9JTlRFUkZBQ0UpCisjaWZkZWYgX19jcGx1c3BsdXMKK2V4dGVy
biAiQyIgeworI2VuZGlmIC8vIF9fY3BsdXNwbHVzCisKKy8qIFN0dWJzIGZvciBBZ2VudC1JbnRl
cmZhY2Ugc3BlY2lmaWMgZGVmaW5pdGlvbnMgKi8KK3N0YXRpYyBpbmxpbmUgdm9pZAorYWdlbnRf
aW50ZXJmYWNlX3N0YXJ0KHVuc2lnbmVkIGludCBwb3J0KQoreworfQorCit0eXBlZGVmIHZvaWQg
KCpmb3J3YXJkX3F1YWxpdHlfY2JfdCkodm9pZCAqLCBjb25zdCBjaGFyICopOworc3RhdGljIGlu
bGluZSB2b2lkCithZ2VudF9pbnRlcmZhY2Vfc2V0X2ZvcndhcmRfcXVhbGl0eV9jYihmb3J3YXJk
X3F1YWxpdHlfY2JfdCBjYiwgdm9pZCAqZGF0YSkKK3sKK30KKwordHlwZWRlZiBpbnQgKCpvbl9j
b25uZWN0X2NiX3QpKHZvaWQgKik7CitzdGF0aWMgaW5saW5lIHZvaWQKK2FnZW50X2ludGVyZmFj
ZV9zZXRfb25fY29ubmVjdF9jYihvbl9jb25uZWN0X2NiX3QgY2IsIHZvaWQgKmRhdGEpCit7Cit9
CisjaWZkZWYgX19jcGx1c3BsdXMKK30KKyNlbmRpZiAvLyBfX2NwbHVzcGx1cworI2VuZGlmCi0t
IAoyLjIxLjAKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
ClNwaWNlLWRldmVsIG1haWxpbmcgbGlzdApTcGljZS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5v
cmcKaHR0cHM6Ly9saXN0cy5mcmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9zcGljZS1k
ZXZlbA==
