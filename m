Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 23F0A6BE6E
	for <lists+spice-devel@lfdr.de>; Wed, 17 Jul 2019 16:39:49 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 5135C8929F;
	Wed, 17 Jul 2019 14:39:47 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mx1.redhat.com (mx1.redhat.com [209.132.183.28])
 by gabe.freedesktop.org (Postfix) with ESMTPS id DE2F48929F
 for <spice-devel@lists.freedesktop.org>; Wed, 17 Jul 2019 14:39:45 +0000 (UTC)
Received: from smtp.corp.redhat.com (int-mx01.intmail.prod.int.phx2.redhat.com
 [10.5.11.11])
 (using TLSv1.2 with cipher AECDH-AES256-SHA (256/256 bits))
 (No client certificate requested)
 by mx1.redhat.com (Postfix) with ESMTPS id 51B10300CB02
 for <spice-devel@lists.freedesktop.org>; Wed, 17 Jul 2019 14:39:45 +0000 (UTC)
Received: from dhcp-4-93.tlv.redhat.com (dhcp-4-93.tlv.redhat.com [10.35.4.93])
 by smtp.corp.redhat.com (Postfix) with ESMTP id B159D600C8
 for <spice-devel@lists.freedesktop.org>; Wed, 17 Jul 2019 14:39:44 +0000 (UTC)
From: Snir Sheriber <ssheribe@redhat.com>
To: spice-devel@lists.freedesktop.org
Date: Wed, 17 Jul 2019 17:39:43 +0300
Message-Id: <20190717143943.8126-1-ssheribe@redhat.com>
MIME-Version: 1.0
X-Scanned-By: MIMEDefang 2.79 on 10.5.11.11
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-4.5.16
 (mx1.redhat.com [10.5.110.47]); Wed, 17 Jul 2019 14:39:45 +0000 (UTC)
Subject: [Spice-devel] [PATCH v2 spice-streaming-agent] gst-plugin: receive
 encoder properties as command parameters
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

RnJvbTogdGVzdCA8dGVzdEBsb2NhbGhvc3QubG9jYWxkb21haW4+CgpUaGlzIGFsbG93cyB0byBz
ZXQgcGx1Z2luIGtleT12YWx1ZSBwcm9wZXJ0aWVzIG9uIHJ1biB0aW1lLgpUbyBhZGQgZW5jb2Rl
ciBwbHVnaW4gcHJvcGVydHkgdXNlIHRoZSBmb2xsb3dpbmcgc3ludGF4OgotYyBnc3QucHJvcD0i
cHJvcGVydHk9dmFsdWUiIC1jIGdzdC5wcm9wPSJwcm9wZXJ0eTI9dmFsdWUyIi4uLgpNYWtlIHN1
cmUgc3ludGF4IGlzIGFjY3VyYXRlIGFuZCB0aGF0IHRoZSBwcm9wZXJ0eSBpcyBzdXBwb3J0ZWQg
YnkKdGhlIGNob3NlbiBwbHVnaW4sIHdyb25nIHByb3BlcnRpZXMgbWF5IGlnbm9yZWQgc2lsZW50
bHkuCgpTaWduZWQtb2ZmLWJ5OiBTbmlyIFNoZXJpYmVyIDxzc2hlcmliZUByZWRoYXQuY29tPgot
LS0KCkRpZmZlcmVuY2UgZnJvbSB2MToKLVZhcmlhYmxlcyBuYW1pbmcKLVVzaW5nIHZlY3RvciBv
ZiBwYWlycwotQWRkIHdhcm5pbmdzIGZvciB3cm9uZyBpbnB1dAotU2V0IHByb3BldGllcyBhZnRl
ciBsb2cgbXNnCi1GaXggY29tbWl0IG1zZwoKKlRoZXJlIGlzIG9ubHkgYmFzaWMgaW5wdXQgdmFs
aWRhdGlvbiwgYXNzdW1pbmcgdGhlIHVzZXIgaXMKIGFjY3VyYXRlIHdpdGggdGhlIHByb3BlcnRp
ZXMgaGUgc2V0cy4KIEN1cnJlbnRseSB0aGUgY29kZSBjaGVja3MgcHJvcGVydHkgbmFtZSBleGlz
dHMgZm9yIHRoZSBlbmNvZGVyCiBvYmplY3QsIGkgaGFkIGEgdmVyc2lvbiB0aGF0IGNoZWNrcyBh
bHNvIHRoZSB2YWx1ZSBtYXRjaGVzIHRoZQogcHJvcGVydHkgdHlwZSBidXQgaXQgc2VlbXMgdG8g
YmUgb3Zlci1jb2RpbmcgZm9yIHRoaXMgcHVycG9zZS4KIAotLS0KIHNyYy9nc3QtcGx1Z2luLmNw
cCB8IDI4ICsrKysrKysrKysrKysrKysrKysrKysrLS0tLS0KIDEgZmlsZSBjaGFuZ2VkLCAyMyBp
bnNlcnRpb25zKCspLCA1IGRlbGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL3NyYy9nc3QtcGx1Z2lu
LmNwcCBiL3NyYy9nc3QtcGx1Z2luLmNwcAppbmRleCA0ZTgwMmYxLi4zMjcwY2NlIDEwMDY0NAot
LS0gYS9zcmMvZ3N0LXBsdWdpbi5jcHAKKysrIGIvc3JjL2dzdC1wbHVnaW4uY3BwCkBAIC0zNSw2
ICszNSw3IEBAIHN0cnVjdCBHc3RyZWFtZXJFbmNvZGVyU2V0dGluZ3MKICAgICBpbnQgZnBzID0g
MjU7CiAgICAgU3BpY2VWaWRlb0NvZGVjVHlwZSBjb2RlYyA9IFNQSUNFX1ZJREVPX0NPREVDX1RZ
UEVfSDI2NDsKICAgICBzdGQ6OnN0cmluZyBlbmNvZGVyOworICAgIHN0ZDo6dmVjdG9yPHN0ZDo6
cGFpcjxzdGQ6OnN0cmluZywgc3RkOjpzdHJpbmc+PiBwcm9wX3BhaXJzOwogfTsKIAogdGVtcGxh
dGUgPHR5cGVuYW1lIFQ+CkBAIC0xNzksMTEgKzE4MCwxOCBAQCBHc3RFbGVtZW50ICpHc3RyZWFt
ZXJGcmFtZUNhcHR1cmU6OmdldF9lbmNvZGVyX3BsdWdpbihjb25zdCBHc3RyZWFtZXJFbmNvZGVy
U2V0dAogICAgIH0KIAogICAgIGVuY29kZXIgPSBmYWN0b3J5ID8gZ3N0X2VsZW1lbnRfZmFjdG9y
eV9jcmVhdGUoZmFjdG9yeSwgImVuY29kZXIiKSA6IG51bGxwdHI7Ci0gICAgaWYgKGVuY29kZXIp
IHsgLy8gSW52YWxpZCBwcm9wZXJ0aWVzIHdpbGwgYmUgaWdub3JlZCBzaWxlbnRseQotICAgICAg
ICAvKiB4MjY0ZW5jIHByb3BlcnRpZXMgKi8KLSAgICAgICAgZ3N0X3V0aWxfc2V0X29iamVjdF9h
cmcoR19PQkpFQ1QoZW5jb2RlciksICJ0dW5lIiwgInplcm9sYXRlbmN5Iik7Ly8gc3RpbGxpbWFn
ZSwgZmFzdGRlY29kZSwgemVyb2xhdGVuY3kKLSAgICAgICAgZ3N0X3V0aWxfc2V0X29iamVjdF9h
cmcoR19PQkpFQ1QoZW5jb2RlciksICJiZnJhbWVzIiwgIjAiKTsKLSAgICAgICAgZ3N0X3V0aWxf
c2V0X29iamVjdF9hcmcoR19PQkpFQ1QoZW5jb2RlciksICJzcGVlZC1wcmVzZXQiLCAiMSIpOy8v
IDEtdWx0cmFmYXN0LCA2LW1lZCwgOS12ZXJ5c2xvdworICAgIGlmIChlbmNvZGVyKSB7IC8vIFNl
dCBlbmNvZGVyIHByb3BlcnRpZXMKKyAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzZXR0aW5n
cy5wcm9wX3BhaXJzLnNpemUoKTsgaSsrKSB7CisgICAgICAgICAgICBjb25zdCBjaGFyICpwcm9w
X25hbWUgPSBzZXR0aW5ncy5wcm9wX3BhaXJzW2ldLmZpcnN0LmNfc3RyKCk7CisgICAgICAgICAg
ICBpZiAoIWdfb2JqZWN0X2NsYXNzX2ZpbmRfcHJvcGVydHkoR19PQkpFQ1RfR0VUX0NMQVNTKGVu
Y29kZXIpLCBwcm9wX25hbWUpKSB7CisgICAgICAgICAgICAgICAgZ3N0X3N5c2xvZyhMT0dfV0FS
TklORywgIiclcycgcHJvcGVydHkgd2FzIG5vdCBmb3VuZCBmb3IgdGhpcyBlbmNvZGVyIiwgcHJv
cF9uYW1lKTsKKyAgICAgICAgICAgICAgICBjb250aW51ZTsKKyAgICAgICAgICAgIH0KKyAgICAg
ICAgICAgIGNvbnN0IGNoYXIgKnByb3BfdmFsID0gc2V0dGluZ3MucHJvcF9wYWlyc1tpXS5zZWNv
bmQuY19zdHIoKTsKKyAgICAgICAgICAgIGdzdF9zeXNsb2coTE9HX05PVElDRSwgIlRyeWluZyB0
byBzZXQgZW5jb2RlciBwcm9wZXJ0eTogJyVzID0gJXMnIiwgcHJvcF9uYW1lLCBwcm9wX3ZhbCk7
CisgICAgICAgICAgICAvKiBJbnZhbGlkIHByb3BlcnRpZXMgd2lsbCBiZSBpZ25vcmVkIHNpbGVu
dGx5ICovCisgICAgICAgICAgICBnc3RfdXRpbF9zZXRfb2JqZWN0X2FyZyhHX09CSkVDVChlbmNv
ZGVyKSwgcHJvcF9uYW1lLCBwcm9wX3ZhbCk7CisgICAgICAgIH0KICAgICB9CiAgICAgZ3N0X3Bs
dWdpbl9mZWF0dXJlX2xpc3RfZnJlZShmaWx0ZXJlZCk7CiAgICAgZ3N0X3BsdWdpbl9mZWF0dXJl
X2xpc3RfZnJlZShlbmNvZGVycyk7CkBAIC00NDksNiArNDU3LDE2IEBAIHZvaWQgR3N0cmVhbWVy
UGx1Z2luOjpQYXJzZU9wdGlvbnMoY29uc3QgQ29uZmlndXJlT3B0aW9uICpvcHRpb25zKQogICAg
ICAgICAgICAgfQogICAgICAgICB9IGVsc2UgaWYgKG5hbWUgPT0gImdzdC5lbmNvZGVyIikgewog
ICAgICAgICAgICAgc2V0dGluZ3MuZW5jb2RlciA9IHZhbHVlOworICAgICAgICB9IGVsc2UgaWYg
KG5hbWUgPT0gImdzdC5wcm9wIikgeworICAgICAgICAgICAgc3RkOjpzdHJpbmcgcHJvcF9uYW1l
LCBwcm9wX3ZhbDsKKyAgICAgICAgICAgIHNpemVfdCBwb3MgPSB2YWx1ZS5maW5kKCc9Jyk7Cisg
ICAgICAgICAgICBpZiAoIXBvcyB8fCBwb3MgPj0gdmFsdWUuc2l6ZSgpIC0gMSkgeworICAgICAg
ICAgICAgICAgIGdzdF9zeXNsb2coTE9HX1dBUk5JTkcsICJQcm9wZXJ0eSBpbnB1dCBpcyBpbnZh
bGlkICgnJXMnIElnbm9yZWQpIiwgdmFsdWUuY19zdHIoKSk7CisgICAgICAgICAgICAgICAgY29u
dGludWU7CisgICAgICAgICAgICB9CisgICAgICAgICAgICBwcm9wX25hbWUgPSB2YWx1ZS5zdWJz
dHIoMCwgcG9zKTsKKyAgICAgICAgICAgIHByb3BfdmFsID0gdmFsdWUuc3Vic3RyKHBvcyArIDEp
OworICAgICAgICAgICAgc2V0dGluZ3MucHJvcF9wYWlycy5wdXNoX2JhY2sobWFrZV9wYWlyKHBy
b3BfbmFtZSwgcHJvcF92YWwpKTsKICAgICAgICAgfQogICAgIH0KIH0KLS0gCjIuMjEuMAoKX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KU3BpY2UtZGV2ZWwg
bWFpbGluZyBsaXN0ClNwaWNlLWRldmVsQGxpc3RzLmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xp
c3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xpc3RpbmZvL3NwaWNlLWRldmVs
