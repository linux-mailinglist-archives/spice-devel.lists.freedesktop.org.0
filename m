Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [131.252.210.177])
	by mail.lfdr.de (Postfix) with ESMTPS id 7D9D4DAB92
	for <lists+spice-devel@lfdr.de>; Thu, 17 Oct 2019 13:55:24 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id 3E6FA88310;
	Thu, 17 Oct 2019 11:55:22 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from us-smtp-1.mimecast.com (us-smtp-delivery-1.mimecast.com
 [207.211.31.120])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 281866EA5C
 for <spice-devel@lists.freedesktop.org>; Thu, 17 Oct 2019 11:55:20 +0000 (UTC)
Received: from mail-wm1-f70.google.com (mail-wm1-f70.google.com
 [209.85.128.70]) (Using TLS) by relay.mimecast.com with ESMTP id
 us-mta-155-tVnvCMGIMfu9K7NMgZofzQ-1; Thu, 17 Oct 2019 07:55:17 -0400
Received: by mail-wm1-f70.google.com with SMTP id m16so935733wmg.8
 for <spice-devel@lists.freedesktop.org>; Thu, 17 Oct 2019 04:55:15 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:from:to:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=/7h97aIBuOFbZelBGqKs86VuATBiWErkAcHtAzN7zoc=;
 b=c7WZQJSfWmbBfLA6TbtZxhiIgEFXvngGnIRLRC8rae8rphJyb/OnlCFW3XueRv1B7c
 AWZUwridjdvwRDT7M8HhPb+ObR7ITd8FUPD3Ks7sLLRNEOL9ijKeS2Vcl+KzzTBpYepf
 PLim20L5QJ1pNJ2jyD5eNTrygaq8XtHro+xcghg/bbQ+2RT4aUGHYBurCkW3LXjIQc6d
 kOe7lrfExxeCrRMePd5DHHH9sPM7oO9/lAkqxY7Nnjllp2IAxUI9nCuzgPwqxMXleIaI
 SL5yi046zbQi9IhmTT2aFzVreXE/PpLuoSseofapoYFh+N6+Zh6A6A38/lGHm1Gwof1I
 F+NQ==
X-Gm-Message-State: APjAAAUx62qDijS9MOcSjyKGpYoJe/5oG4TrH9o2ADHwpPifxk6+cYJx
 ysDIabexE5L19lNSwqLvhwobAvoiwHUy/5EmfKBrBm6c5lTs0gUXFgNgXSReBXSJA4dTiTS64bp
 KCMflpbqAC2hWBmIzUMteaI81NR7Hfnw=
X-Received: by 2002:a05:600c:2048:: with SMTP id
 p8mr2545156wmg.9.1571313314781; 
 Thu, 17 Oct 2019 04:55:14 -0700 (PDT)
X-Google-Smtp-Source: APXvYqyzArhF1xrh27UxHiQwMLX9kC9+DyEqiu4d16t4EqWBRs/rynTJSCelRG/h2+KyahqOYq7cYQ==
X-Received: by 2002:a05:600c:2048:: with SMTP id
 p8mr2545140wmg.9.1571313314421; 
 Thu, 17 Oct 2019 04:55:14 -0700 (PDT)
Received: from pinea.redhat.com ([2001:861:3440:6a0:2cf1:592d:314d:825])
 by smtp.gmail.com with ESMTPSA id p23sm1825957wmg.42.2019.10.17.04.55.13
 for <spice-devel@lists.freedesktop.org>
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Thu, 17 Oct 2019 04:55:13 -0700 (PDT)
From: Kevin Pouget <kpouget@redhat.com>
To: spice-devel@lists.freedesktop.org
Date: Thu, 17 Oct 2019 13:54:59 +0200
Message-Id: <20191017115459.13743-1-kpouget@redhat.com>
X-Mailer: git-send-email 2.21.0
MIME-Version: 1.0
X-MC-Unique: tVnvCMGIMfu9K7NMgZofzQ-1
X-Mimecast-Spam-Score: 0
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=redhat.com; 
 s=mimecast20190719; t=1571313319;
 h=from:from:reply-to:subject:subject:date:date:message-id:message-id:
 to:to:cc:mime-version:mime-version:content-type:content-type:
 content-transfer-encoding:content-transfer-encoding;
 bh=lmZ9oIdbT+anMoNMoqO6n138Gv9Am3bByJ/g1M7jRYQ=;
 b=KKk0LRZhRb/P6bNaye4nLLITtthiYDV5Vinu5TkNyEV2U0/rq3SnMZ2F9QKxk7mV8ildtf
 iXLE5Wb6CmpiXKLlXVhYcjSUcp46tkUriW3ED0l97rqddy/2iRhvs79USUaVY80TeuknWX
 Zv1irYlNXr8hu6m3BYX0Ri1dJKuAFBc=
Subject: [Spice-devel] [PATCH spice-streaming-agent] gst-plugin: Allow the
 instantiation/configuration of multiple plugins
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

VGhpcyBwYXRjaCBhbGxvd3MgdGhlIGluc3RhbnRpYXRpb24gYW5kIHRoZSBjb25maWd1cmF0aW9u
IG9mIG11bHRpcGxlCkdTdHJlYW1lciBwbHVnaW5zIGZyb20gdGhlIGNvbW1hbmRsaW5lLgoKT25l
IHBsdWdpbiB3aWxsIGJlIGluc3RhbnRpYXRlZCBmb3IgZWFjaCAnZ3N0LmNvZGVjPVZBTFVFJyBm
b3VuZCBpbgp0aGUgY29tbWFuZCBsaW5lIGFyZ3VtZW50cy4KCkEgcGx1Z2luIGNhbiBiZSBpbnN0
YW50aWF0ZWQgYnkgY29kZWMsIHdpdGggdGhlIGRlZmF1bHQgZ3N0cmVhbWVyCmVuY29kZXI6ICdn
c3QuY29kZWM9Q09ERUNfVFlQRScgKGVnLCBtanBlZy92cDgvdnA5Ly4uLiksIG9yIHdpdGggYQpj
b2RlYyBhbmQgYW4gZW5jb2RlciAnZ3N0LmNvZGVjPUNPREVDX1RZUEU9RU5DT0RFUicuCgpBIHBs
dWdpbiBjYW4gYmUgY29uZmlndXJlZCBpbiBkaWZmZXJlbnQgd2F5cyAoc2VlIFdhbnRPcHRpb24o
KSk6Ci0gd2l0aG91dCBwcmVmaXggKGVnLCBmcmFtZXJhdGU9MzApIGZvciBhbGwgdGhlIHBsdWdp
bnMsCi0gd2l0aCB0aGUgR1N0cmVhbWVyIHByb3BlcnR5IHByZWZpeDoKICAtICdnc3QucHJvcD1W
QUxVRScgZm9yIGFsbCB0aGUgR1N0cmVhbWVyIHBsdWdpbnMsCiAgLSAnZ3N0LkNPREVDX1RZUEUu
cHJvcD1WQUxVRScgZm9yIGFsbCB0aGUgR1N0cmVhbWVyIHBsdWdpbiB1c2luZyB0aGUKICAgIGdp
dmVuIGNvZGVjIHR5cGUsCiAgLSAnZ3N0LkVOQ09ERVIucHJvcD1WQUxVRScgZm9yIHRoZSBHU3Ry
ZWFtZXIgcGx1Z2luIHVzaW5nIHRoZSBnaXZlbgogICAgZW5jb2Rlci4KClRoZSBzcGxpdCBiZXR3
ZWVuIFBhcnNlT3B0aW9ucyBhbmQgVXBkYXRlT3B0aW9ucyB3aWxsIGxhdGVyIGFsbG93IGxpdmUK
cGx1Z2luIHJlY29uZmlndXJhdGlvbiAoaWUsIHdpdGhvdXQgZnVsbHkgcmVsYXVuY2hpbmcgdGhl
CnNwaWNlLXN0cmVhbWluZy1hZ2VudCkuCgpTaWduZWQtb2ZmLWJ5OiBLZXZpbiBQb3VnZXQgPGtw
b3VnZXRAcmVkaGF0LmNvbT4KLS0tCiBzcmMvZ3N0LXBsdWdpbi5jcHAgfCAxMjEgKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKystLS0tLS0tLS0tCiAxIGZpbGUgY2hhbmdlZCwgOTQg
aW5zZXJ0aW9ucygrKSwgMjcgZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvc3JjL2dzdC1wbHVn
aW4uY3BwIGIvc3JjL2dzdC1wbHVnaW4uY3BwCmluZGV4IDkyMmI5MGQuLjRiNDRkOWQgMTAwNjQ0
Ci0tLSBhL3NyYy9nc3QtcGx1Z2luLmNwcAorKysgYi9zcmMvZ3N0LXBsdWdpbi5jcHAKQEAgLTMz
LDcgKzMzLDggQEAgbmFtZXNwYWNlIGdzdHJlYW1lcl9wbHVnaW4gewogc3RydWN0IEdzdHJlYW1l
ckVuY29kZXJTZXR0aW5ncwogewogICAgIGludCBmcHMgPSAyNTsKLSAgICBTcGljZVZpZGVvQ29k
ZWNUeXBlIGNvZGVjID0gU1BJQ0VfVklERU9fQ09ERUNfVFlQRV9IMjY0OworICAgIFNwaWNlVmlk
ZW9Db2RlY1R5cGUgY29kZWM7CisgICAgc3RkOjpzdHJpbmcgY29kZWNfbmFtZTsKICAgICBzdGQ6
OnN0cmluZyBlbmNvZGVyOwogICAgIHN0ZDo6dmVjdG9yPHN0ZDo6cGFpcjxzdGQ6OnN0cmluZywg
c3RkOjpzdHJpbmc+PiBwcm9wX3BhaXJzOwogfTsKQEAgLTg2LDEyICs4NywxNCBAQCBjbGFzcyBH
c3RyZWFtZXJQbHVnaW4gZmluYWw6IHB1YmxpYyBQbHVnaW4KIHB1YmxpYzoKICAgICBGcmFtZUNh
cHR1cmUgKkNyZWF0ZUNhcHR1cmUoKSBvdmVycmlkZTsKICAgICB1bnNpZ25lZCBSYW5rKCkgb3Zl
cnJpZGU7Ci0gICAgdm9pZCBQYXJzZU9wdGlvbnMoY29uc3QgQ29uZmlndXJlT3B0aW9uICpvcHRp
b25zKTsKKyAgICB2b2lkIFBhcnNlT3B0aW9ucyhjb25zdCBDb25maWd1cmVPcHRpb24gKm9wdGlv
bnMsIGNvbnN0IHN0ZDo6c3RyaW5nIGNvZGVjX3ZhbHVlKTsKKyAgICB2b2lkIFVwZGF0ZU9wdGlv
bnMoY29uc3QgQ29uZmlndXJlT3B0aW9uICpvcHRpb25zKTsKICAgICBTcGljZVZpZGVvQ29kZWNU
eXBlIFZpZGVvQ29kZWNUeXBlKCkgY29uc3Qgb3ZlcnJpZGUgewogICAgICAgICByZXR1cm4gc2V0
dGluZ3MuY29kZWM7CiAgICAgfQogcHJpdmF0ZToKICAgICBHc3RyZWFtZXJFbmNvZGVyU2V0dGlu
Z3Mgc2V0dGluZ3M7CisgICAgYm9vbCBXYW50T3B0aW9uKGNvbnN0IHN0ZDo6c3RyaW5nIHBhcmFt
X25hbWUsIGNvbnN0IHN0ZDo6c3RyaW5nIG9wdF9uYW1lLCBib29sIGdzdF9wcmZ4KTsKIH07CiAK
IEdzdEVsZW1lbnQgKkdzdHJlYW1lckZyYW1lQ2FwdHVyZTo6Z2V0X2NhcHR1cmVfcGx1Z2luKGNv
bnN0IEdzdHJlYW1lckVuY29kZXJTZXR0aW5ncyAmc2V0dGluZ3MpCkBAIC00MjAsNDUgKzQyMywx
MDAgQEAgdW5zaWduZWQgR3N0cmVhbWVyUGx1Z2luOjpSYW5rKCkKICAgICByZXR1cm4gU29mdHdh
cmVNaW47CiB9CiAKLXZvaWQgR3N0cmVhbWVyUGx1Z2luOjpQYXJzZU9wdGlvbnMoY29uc3QgQ29u
ZmlndXJlT3B0aW9uICpvcHRpb25zKQorYm9vbCBHc3RyZWFtZXJQbHVnaW46OldhbnRPcHRpb24o
Y29uc3Qgc3RkOjpzdHJpbmcgcGFyYW1fbmFtZSwgY29uc3Qgc3RkOjpzdHJpbmcgb3B0X25hbWUs
CisgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbCBnc3RfcHJmeCkKK3sKKyAg
ICBjb25zdCBzdGQ6OnN0cmluZyBuYW1lOworICAgIHN0ZDo6dmVjdG9yIDxzdGQ6OnN0cmluZz4g
bmFtZXM7CisKKyAgICBuYW1lcy5wdXNoX2JhY2socGFyYW1fbmFtZSk7IC8vIGVnLiBmcmFtZXJh
dGUgb3IgZ3N0LmNvZGVjCisgICAgbmFtZXMucHVzaF9iYWNrKHNldHRpbmdzLmNvZGVjX25hbWUg
KyAiLiIgKyBwYXJhbV9uYW1lKTsgLy8gZWcuIGdzdC52cDgucHJvcAorCisgICAgaWYgKCFzZXR0
aW5ncy5lbmNvZGVyLmVtcHR5KCkpIHsKKyAgICAgICAgbmFtZXMucHVzaF9iYWNrKHNldHRpbmdz
LmVuY29kZXIgKyAiLiIgKyBwYXJhbV9uYW1lKTsgLy8gZWcuIGdzdC52cDhlbmMucHJvcAorICAg
IH0KKworICAgIGZvciAoYXV0byBuYW1lOiBuYW1lcykgeworICAgICAgICBpZiAob3B0X25hbWUg
PT0gKGdzdF9wcmZ4ID8gImdzdC4iIDogIiIpICsgbmFtZSkgeworICAgICAgICAgICAgcmV0dXJu
IHRydWU7CisgICAgICAgIH0KKyAgICB9CisKKyAgICByZXR1cm4gZmFsc2U7Cit9CisKK3ZvaWQg
R3N0cmVhbWVyUGx1Z2luOjpVcGRhdGVPcHRpb25zKGNvbnN0IENvbmZpZ3VyZU9wdGlvbiAqb3B0
aW9ucykKIHsKICAgICBmb3IgKDsgb3B0aW9ucy0+bmFtZTsgKytvcHRpb25zKSB7CiAgICAgICAg
IGNvbnN0IHN0ZDo6c3RyaW5nIG5hbWUgPSBvcHRpb25zLT5uYW1lOwogICAgICAgICBjb25zdCBz
dGQ6OnN0cmluZyB2YWx1ZSA9IG9wdGlvbnMtPnZhbHVlOwogCi0gICAgICAgIGlmIChuYW1lID09
ICJmcmFtZXJhdGUiKSB7CisgICAgICAgIGlmIChXYW50T3B0aW9uKCJmcmFtZXJhdGUiLCBuYW1l
LCBmYWxzZSkpIHsKICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgc2V0dGluZ3Mu
ZnBzID0gc3RkOjpzdG9pKHZhbHVlKTsKKwogICAgICAgICAgICAgfSBjYXRjaCAoY29uc3Qgc3Rk
OjpleGNlcHRpb24gJmUpIHsKLSAgICAgICAgICAgICAgICB0aHJvdyBzdGQ6OnJ1bnRpbWVfZXJy
b3IoIkludmFsaWQgdmFsdWUgJyIgKyB2YWx1ZSArICInIGZvciBvcHRpb24gJ2ZyYW1lcmF0ZScu
Iik7Ci0gICAgICAgICAgICB9Ci0gICAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSAiZ3N0LmNvZGVj
IikgewotICAgICAgICAgICAgaWYgKHZhbHVlID09ICJoMjY0IikgewotICAgICAgICAgICAgICAg
IHNldHRpbmdzLmNvZGVjID0gU1BJQ0VfVklERU9fQ09ERUNfVFlQRV9IMjY0OwotICAgICAgICAg
ICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAidnA5IikgewotICAgICAgICAgICAgICAgIHNldHRpbmdz
LmNvZGVjID0gU1BJQ0VfVklERU9fQ09ERUNfVFlQRV9WUDk7Ci0gICAgICAgICAgICB9IGVsc2Ug
aWYgKHZhbHVlID09ICJ2cDgiKSB7Ci0gICAgICAgICAgICAgICAgc2V0dGluZ3MuY29kZWMgPSBT
UElDRV9WSURFT19DT0RFQ19UWVBFX1ZQODsKLSAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUg
PT0gIm1qcGVnIikgewotICAgICAgICAgICAgICAgIHNldHRpbmdzLmNvZGVjID0gU1BJQ0VfVklE
RU9fQ09ERUNfVFlQRV9NSlBFRzsKLSAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT0gImgy
NjUiKSB7Ci0gICAgICAgICAgICAgICAgc2V0dGluZ3MuY29kZWMgPSBTUElDRV9WSURFT19DT0RF
Q19UWVBFX0gyNjU7Ci0gICAgICAgICAgICB9IGVsc2UgewotICAgICAgICAgICAgICAgIHRocm93
IHN0ZDo6cnVudGltZV9lcnJvcigiSW52YWxpZCB2YWx1ZSAnIiArIHZhbHVlICsgIicgZm9yIG9w
dGlvbiAnZ3N0LmNvZGVjJy4iKTsKKyAgICAgICAgICAgICAgICB0aHJvdyBzdGQ6OnJ1bnRpbWVf
ZXJyb3IoIkludmFsaWQgdmFsdWUgJyIgKyB2YWx1ZSArICInICIKKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgImZvciBvcHRpb24gJyIgKyBuYW1lICsgIicuIik7CiAg
ICAgICAgICAgICB9Ci0gICAgICAgIH0gZWxzZSBpZiAobmFtZSA9PSAiZ3N0LmVuY29kZXIiKSB7
Ci0gICAgICAgICAgICBzZXR0aW5ncy5lbmNvZGVyID0gdmFsdWU7Ci0gICAgICAgIH0gZWxzZSBp
ZiAobmFtZSA9PSAiZ3N0LnByb3AiKSB7CisgICAgICAgIH0gZWxzZSBpZiAoV2FudE9wdGlvbigi
cHJvcCIsIG5hbWUsIHRydWUpKSB7CiAgICAgICAgICAgICBzaXplX3QgcG9zID0gdmFsdWUuZmlu
ZCgnPScpOwogICAgICAgICAgICAgaWYgKHBvcyA9PSAwIHx8IHBvcyA+PSB2YWx1ZS5zaXplKCkg
LSAxKSB7CiAgICAgICAgICAgICAgICAgZ3N0X3N5c2xvZyhMT0dfV0FSTklORywgIlByb3BlcnR5
IGlucHV0IGlzIGludmFsaWQgKCclcycgSWdub3JlZCkiLCB2YWx1ZS5jX3N0cigpKTsKICAgICAg
ICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgIH0KLSAgICAgICAgICAgIHNldHRpbmdz
LnByb3BfcGFpcnMucHVzaF9iYWNrKG1ha2VfcGFpcih2YWx1ZS5zdWJzdHIoMCwgcG9zKSwgdmFs
dWUuc3Vic3RyKHBvcyArIDEpKSk7CisgICAgICAgICAgICAvLyBhZGQgb3IgdXBkYXRlIHZhbHVl
IGluIHNldHRpbmdzIGFycmF5CisgICAgICAgICAgICBib29sIGFscmVhZHlfc2V0ID0gZmFsc2U7
CisgICAgICAgICAgICBjb25zdCBhdXRvICZuZXdfbmFtZSA9IHZhbHVlLnN1YnN0cigwLCBwb3Mp
OworICAgICAgICAgICAgY29uc3QgYXV0byAmbmV3X3ZhbHVlID0gdmFsdWUuc3Vic3RyKHBvcyAr
IDEpOworCisgICAgICAgICAgICBmb3IgKGF1dG8gJnByb3AgOiBzZXR0aW5ncy5wcm9wX3BhaXJz
KSB7CisgICAgICAgICAgICAgICAgaWYgKHByb3AuZmlyc3QgIT0gbmV3X25hbWUpIHsKKyAgICAg
ICAgICAgICAgICAgICAgY29udGludWU7CisgICAgICAgICAgICAgICAgfQorICAgICAgICAgICAg
ICAgIHByb3Auc2Vjb25kID0gbmV3X3ZhbHVlOworICAgICAgICAgICAgICAgIGFscmVhZHlfc2V0
ID0gdHJ1ZTsKKyAgICAgICAgICAgICAgICBicmVhazsKKyAgICAgICAgICAgIH0KKyAgICAgICAg
ICAgIGlmICghYWxyZWFkeV9zZXQpIHsKKyAgICAgICAgICAgICAgICBzZXR0aW5ncy5wcm9wX3Bh
aXJzLnB1c2hfYmFjayhtYWtlX3BhaXIobmV3X25hbWUsIG5ld192YWx1ZSkpOworICAgICAgICAg
ICAgfQogICAgICAgICB9CiAgICAgfQogfQogCit2b2lkIEdzdHJlYW1lclBsdWdpbjo6UGFyc2VP
cHRpb25zKGNvbnN0IENvbmZpZ3VyZU9wdGlvbiAqb3B0aW9ucywKKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgY29uc3Qgc3RkOjpzdHJpbmcgY29kZWNfdmFsdWUpCit7CisgICAg
Y29uc3Qgc3RkOjpzdHJpbmcgZW5jb2Rlcl9uYW1lOworICAgIHNpemVfdCBoYXNfZW5jb2RlciA9
IGNvZGVjX3ZhbHVlLmZpbmQoJz0nKTsKKworICAgIGlmIChoYXNfZW5jb2RlciAhPSBzdGQ6OnN0
cmluZzo6bnBvcykgeworICAgICAgICBzZXR0aW5ncy5jb2RlY19uYW1lID0gY29kZWNfdmFsdWUu
c3Vic3RyKDAsIGhhc19lbmNvZGVyKTsKKyAgICAgICAgc2V0dGluZ3MuZW5jb2RlciA9IGNvZGVj
X3ZhbHVlLnN1YnN0cihoYXNfZW5jb2RlciArIDEpOworCisgICAgfSBlbHNlIHsKKyAgICAgICAg
c2V0dGluZ3MuY29kZWNfbmFtZSA9IGNvZGVjX3ZhbHVlOworICAgIH0KKworICAgIGlmIChzZXR0
aW5ncy5jb2RlY19uYW1lID09ICJtanBlZyIpIHsKKyAgICAgICAgc2V0dGluZ3MuY29kZWMgPSBT
UElDRV9WSURFT19DT0RFQ19UWVBFX01KUEVHOworICAgIH0gZWxzZSBpZiAoc2V0dGluZ3MuY29k
ZWNfbmFtZSA9PSAiaDI2NCIpIHsKKyAgICAgICAgc2V0dGluZ3MuY29kZWMgPSBTUElDRV9WSURF
T19DT0RFQ19UWVBFX0gyNjQ7CisgICAgfSBlbHNlIGlmIChzZXR0aW5ncy5jb2RlY19uYW1lID09
ICJoMjY1IikgeworICAgICAgICBzZXR0aW5ncy5jb2RlYyA9IFNQSUNFX1ZJREVPX0NPREVDX1RZ
UEVfSDI2NTsKKyAgICB9IGVsc2UgaWYgKHNldHRpbmdzLmNvZGVjX25hbWUgPT0gInZwOCIpIHsK
KyAgICAgICAgc2V0dGluZ3MuY29kZWMgPSBTUElDRV9WSURFT19DT0RFQ19UWVBFX1ZQODsKKyAg
ICB9IGVsc2UgaWYgKHNldHRpbmdzLmNvZGVjX25hbWUgPT0gInZwOSIpIHsKKyAgICAgICAgc2V0
dGluZ3MuY29kZWMgPSBTUElDRV9WSURFT19DT0RFQ19UWVBFX1ZQOTsKKyAgICB9IGVsc2Ugewor
ICAgICAgICB0aHJvdyBzdGQ6OnJ1bnRpbWVfZXJyb3IoIkludmFsaWQgdmFsdWUgJyIgKyBzZXR0
aW5ncy5jb2RlY19uYW1lICsKKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICInIGZv
ciBvcHRpb24gJ2dzdC5jb2RlYycuIik7CisgICAgfQorCisgICAgVXBkYXRlT3B0aW9ucyhvcHRp
b25zKTsKK30KKwogfX19IC8vbmFtZXNwYWNlIHNwaWNlOjpzdHJlYW1pbmdfYWdlbnQ6OmdzdHJl
YW1lcl9wbHVnaW4KIAogdXNpbmcgbmFtZXNwYWNlIHNwaWNlOjpzdHJlYW1pbmdfYWdlbnQ6Omdz
dHJlYW1lcl9wbHVnaW47CkBAIC00NjcsMTEgKzUyNSwyMCBAQCBTUElDRV9TVFJFQU1JTkdfQUdF
TlRfUExVR0lOKGFnZW50KQogewogICAgIGdzdF9pbml0KG51bGxwdHIsIG51bGxwdHIpOwogCi0g
ICAgYXV0byBwbHVnaW4gPSBzdGQ6Om1ha2Vfc2hhcmVkPEdzdHJlYW1lclBsdWdpbj4oKTsKKyAg
ICBib29sIGhhc19wbHVnaW5zID0gZmFsc2U7CisgICAgYXV0byBvcHRpb25zID0gYWdlbnQtPk9w
dGlvbnMoKTsKKyAgICBmb3IgKDsgb3B0aW9ucy0+bmFtZTsgKytvcHRpb25zKSB7CisgICAgICAg
IGNvbnN0IHN0ZDo6c3RyaW5nIG5hbWUgPSBvcHRpb25zLT5uYW1lOworICAgICAgICBjb25zdCBz
dGQ6OnN0cmluZyB2YWx1ZSA9IG9wdGlvbnMtPnZhbHVlOwogCi0gICAgcGx1Z2luLT5QYXJzZU9w
dGlvbnMoYWdlbnQtPk9wdGlvbnMoKSk7CisgICAgICAgIGlmIChuYW1lID09ICJnc3QuY29kZWMi
KSB7CisgICAgICAgICAgICBhdXRvIHBsdWdpbiA9IHN0ZDo6bWFrZV9zaGFyZWQ8R3N0cmVhbWVy
UGx1Z2luPigpOwogCi0gICAgYWdlbnQtPlJlZ2lzdGVyKHBsdWdpbik7CisgICAgICAgICAgICBw
bHVnaW4tPlBhcnNlT3B0aW9ucyhhZ2VudC0+T3B0aW9ucygpLCB2YWx1ZSk7CisgICAgICAgICAg
ICBhZ2VudC0+UmVnaXN0ZXIocGx1Z2luKTsKKyAgICAgICAgICAgIGhhc19wbHVnaW5zID0gdHJ1
ZTsKKyAgICAgICAgfQorICAgIH0KIAotICAgIHJldHVybiB0cnVlOworICAgIHJldHVybiBoYXNf
cGx1Z2luczsKIH0KLS0gCjIuMjEuMAoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX18KU3BpY2UtZGV2ZWwgbWFpbGluZyBsaXN0ClNwaWNlLWRldmVsQGxpc3Rz
LmZyZWVkZXNrdG9wLm9yZwpodHRwczovL2xpc3RzLmZyZWVkZXNrdG9wLm9yZy9tYWlsbWFuL2xp
c3RpbmZvL3NwaWNlLWRldmVs
