Return-Path: <spice-devel-bounces@lists.freedesktop.org>
X-Original-To: lists+spice-devel@lfdr.de
Delivered-To: lists+spice-devel@lfdr.de
Received: from gabe.freedesktop.org (gabe.freedesktop.org [IPv6:2610:10:20:722:a800:ff:fe36:1795])
	by mail.lfdr.de (Postfix) with ESMTPS id 501AE74936
	for <lists+spice-devel@lfdr.de>; Thu, 25 Jul 2019 10:36:11 +0200 (CEST)
Received: from gabe.freedesktop.org (localhost [127.0.0.1])
	by gabe.freedesktop.org (Postfix) with ESMTP id D1A556E69B;
	Thu, 25 Jul 2019 08:36:09 +0000 (UTC)
X-Original-To: spice-devel@lists.freedesktop.org
Delivered-To: spice-devel@lists.freedesktop.org
Received: from mail-io1-xd44.google.com (mail-io1-xd44.google.com
 [IPv6:2607:f8b0:4864:20::d44])
 by gabe.freedesktop.org (Postfix) with ESMTPS id 3558A6E69B
 for <spice-devel@lists.freedesktop.org>; Thu, 25 Jul 2019 08:36:09 +0000 (UTC)
Received: by mail-io1-xd44.google.com with SMTP id z3so95597432iog.0
 for <spice-devel@lists.freedesktop.org>; Thu, 25 Jul 2019 01:36:09 -0700 (PDT)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20161025;
 h=x-gm-message-state:mime-version:references:in-reply-to:from:date
 :message-id:subject:to:cc;
 bh=9Co+FVujaIi6NcnyhHNRdkbNc5yGvdjqwheqGDWVNJc=;
 b=RS2IIvFGBfBIlM9ve/AK6N7uPQcqm7CL0zjE82yb1oZME5bV0i8rqsyUJgUw4el7in
 GE/Ps3owd+4HiNZezKVqDzNALs+R7/hceJNrXsMmNu52yQL7oPxyLMl1+zPF0cEh+YVx
 s52ujCCmyNamPHcIdeqUXeQ1a56sFoNjdv5Jmfe4OaFN9PdnctsH6VNH1i3XgU3cEUDA
 lrrloHfdljwu8NUNni/sDq3LDtt86gw9QypQfTUyVpZDZ401uFcN4tqwTMX0sLAriWuY
 5bgY2gBDIrv0a8OSJE5uaKwB7r+naWkfVHQEGsC0k/te5OQEpCWaUpEJqgpDFKc9WrhU
 8ISA==
X-Gm-Message-State: APjAAAXCsEXS16E72xNowmomlqsPBBrB2JH0csMwO0BjjJH2yrR1ZhuH
 M15Rpka4dMNwlu4ZcQ++dvONMHiyNKbxpk51AlgPL1Rw
X-Google-Smtp-Source: APXvYqwND05JhzcwO5HPdA8qcQDXsPCiTT7vOgByOI4aZhLlTx1moqziiEn6yOg7/1f5ciA++lFoOxe5o5icqf1zpNQ=
X-Received: by 2002:a6b:6611:: with SMTP id a17mr56906413ioc.179.1564043768447; 
 Thu, 25 Jul 2019 01:36:08 -0700 (PDT)
MIME-Version: 1.0
References: <20190724105351.13753-1-yuri.benditovich@daynix.com>
 <20190724105351.13753-2-yuri.benditovich@daynix.com>
 <20190725080851.e432vmkxpghf5j6q@wingsuit>
In-Reply-To: <20190725080851.e432vmkxpghf5j6q@wingsuit>
From: Yuri Benditovich <yuri.benditovich@daynix.com>
Date: Thu, 25 Jul 2019 11:35:55 +0300
Message-ID: <CAOEp5OcBAWqAD8+UbKcDUqBFkpLo9_SjzOPZv5k2BG_mzP8a+A@mail.gmail.com>
To: Victor Toso <victortoso@redhat.com>
X-Mailman-Original-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=daynix-com.20150623.gappssmtp.com; s=20150623;
 h=mime-version:references:in-reply-to:from:date:message-id:subject:to
 :cc;
 bh=9Co+FVujaIi6NcnyhHNRdkbNc5yGvdjqwheqGDWVNJc=;
 b=IdAUuzWHIeiIpGLKnFninFTyrIjdcf98bVhhfZ0I37ZEvY4bxIzDIspnLmk5uDV8iJ
 VMgRJBIOJRWz8MMW+rD976sLdhfBGlDiVjYDACrgvaL2gyuyepNMeUjw9hPRezLQmNLB
 c2s/S9TnJYEeQ1RZ+1Ow1vGBNVtO8lXs6a3CHZ6bwaCzMnEoNqgWZLJ5k2kT4gNTcQqM
 4T0Lo5EIIbdvrA6NvuWlhKUJypIfoD3yCwEOF7jRy3OAnf28VsuwpemwET1nIYHEU67i
 Y32k9ot6Xx3+MiyV66hqs/ps2pCigThKd7l9zFK9cWIjiuTejCGBuRzEzCKRPAJyDUh3
 hd0A==
Subject: Re: [Spice-devel] [spice-gtk 1/9] usb-redir: define interfaces to
 support emulated devices
X-BeenThere: spice-devel@lists.freedesktop.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: <spice-devel.lists.freedesktop.org>
List-Unsubscribe: <https://lists.freedesktop.org/mailman/options/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=unsubscribe>
List-Archive: <https://lists.freedesktop.org/archives/spice-devel>
List-Post: <mailto:spice-devel@lists.freedesktop.org>
List-Help: <mailto:spice-devel-request@lists.freedesktop.org?subject=help>
List-Subscribe: <https://lists.freedesktop.org/mailman/listinfo/spice-devel>, 
 <mailto:spice-devel-request@lists.freedesktop.org?subject=subscribe>
Cc: Yan Vugenfirer <yan@daynix.com>,
 Spice List <spice-devel@lists.freedesktop.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: spice-devel-bounces@lists.freedesktop.org
Sender: "Spice-devel" <spice-devel-bounces@lists.freedesktop.org>

T24gVGh1LCBKdWwgMjUsIDIwMTkgYXQgMTE6MDggQU0gVmljdG9yIFRvc28gPHZpY3RvcnRvc29A
cmVkaGF0LmNvbT4gd3JvdGU6Cj4KPiBIaSwKPgo+IE9uIFdlZCwgSnVsIDI0LCAyMDE5IGF0IDAx
OjUzOjQzUE0gKzAzMDAsIFl1cmkgQmVuZGl0b3ZpY2ggd3JvdGU6Cj4gPiBTcGljZVVzYkJhY2tl
bmREZXZpY2Ugc3RydWN0dXJlIGlzIGV4dGVuZGVkIHRvIHN1cHBvcnQKPiA+IGFkZGl0aW9uYWwg
a2luZCBvZiBkZXZpY2UgdGhhdCBpcyBlbXVsYXRlZCBieSBTcGljZS1HVEsKPiA+IGFuZCBub3Qg
cHJlc2VudCBsb2NhbGx5IChhbmQgZG9lcyBub3QgaGF2ZSBsaWJ1c2JfZGV2aWNlKSwKPiA+IHN1
Y2ggZGV2aWNlIGhhcyBpbnN0ZWFkIHBvaW50ZXIgdG8gU3BpY2VVc2JFbXVsYXRlZERldmljZQo+
ID4gYWJzdHJhY3Qgc3RydWN0dXJlLiBTcGVjaWZpYyBpbXBsZW1lbnRhdGlvbiBvZiBzdWNoIGRl
dmljZQo+ID4gZGVwZW5kcyBvbiBpdHMgZGV2aWNlIHR5cGUgKGN1cnJlbnRseSBvbmx5ICdDRCBk
ZXZpY2UnCj4gPiBkZWZpbmVkKS4gSW1wbGVtZW50YXRpb24gbW9kdWxlIHJlZ2lzdGVycyBjb25z
dHJ1Y3RvciBmb3IKPiA+IHRoaXMgZGV2aWNlIHR5cGUuIERldmljZSBzdHJ1Y3R1cmUgaXMgYWJz
dHJhY3QgYnV0IGFsd2F5cwo+ID4gc3RhcnRzIGZyb20gdGFibGUgb2YgdmlydHVhbCBmdW5jdGlv
bnMgcmVxdWlyZWQgdG8gcmVkaXJlY3QKPiA+IHN1Y2ggdmlydHVhbCBkZXZpY2UuCj4gPgo+ID4g
U2lnbmVkLW9mZi1ieTogWXVyaSBCZW5kaXRvdmljaCA8eXVyaS5iZW5kaXRvdmljaEBkYXluaXgu
Y29tPgo+ID4gLS0tCj4gPiAgc3JjL21lc29uLmJ1aWxkICAgICB8ICAgMSArCj4gPiAgc3JjL3Vz
Yi1iYWNrZW5kLmMgICB8IDEyOCArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrLQo+ID4gIHNyYy91c2ItYmFja2VuZC5oICAgfCAgMzYgKysrKysrKysrKysrLQo+ID4g
IHNyYy91c2ItZW11bGF0aW9uLmggfCAgODggKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
Cj4gPiAgNCBmaWxlcyBjaGFuZ2VkLCAyNTAgaW5zZXJ0aW9ucygrKSwgMyBkZWxldGlvbnMoLSkK
PiA+ICBjcmVhdGUgbW9kZSAxMDA2NDQgc3JjL3VzYi1lbXVsYXRpb24uaAo+ID4KPiA+IGRpZmYg
LS1naXQgYS9zcmMvbWVzb24uYnVpbGQgYi9zcmMvbWVzb24uYnVpbGQKPiA+IGluZGV4IGFkY2Zh
ZWMuLjQ5ZmVjNTIgMTAwNjQ0Cj4gPiAtLS0gYS9zcmMvbWVzb24uYnVpbGQKPiA+ICsrKyBiL3Ny
Yy9tZXNvbi5idWlsZAo+ID4gQEAgLTEyMiw2ICsxMjIsNyBAQCBzcGljZV9jbGllbnRfZ2xpYl9z
b3VyY2VzID0gWwo+ID4gICAgJ3VzYnV0aWwuYycsCj4gPiAgICAndXNidXRpbC5oJywKPiA+ICAg
ICd1c2ItYmFja2VuZC5jJywKPiA+ICsgICd1c2ItZW11bGF0aW9uLmgnLAo+ID4gICAgJ3VzYi1i
YWNrZW5kLmgnLAo+ID4gICAgJ3ZtY3N0cmVhbS5jJywKPiA+ICAgICd2bWNzdHJlYW0uaCcsCj4g
PiBkaWZmIC0tZ2l0IGEvc3JjL3VzYi1iYWNrZW5kLmMgYi9zcmMvdXNiLWJhY2tlbmQuYwo+ID4g
aW5kZXggOWFjODU5NS4uMGJmMmVjYyAxMDA2NDQKPiA+IC0tLSBhL3NyYy91c2ItYmFja2VuZC5j
Cj4gPiArKysgYi9zcmMvdXNiLWJhY2tlbmQuYwo+ID4gQEAgLTM5LDYgKzM5LDcgQEAKPiA+ICAj
aW5jbHVkZSAidXNicmVkaXJwYXJzZXIuaCIKPiA+ICAjaW5jbHVkZSAic3BpY2UtdXRpbC5oIgo+
ID4gICNpbmNsdWRlICJ1c2ItYmFja2VuZC5oIgo+ID4gKyNpbmNsdWRlICJ1c2ItZW11bGF0aW9u
LmgiCj4gPiAgI2luY2x1ZGUgImNoYW5uZWwtdXNicmVkaXItcHJpdi5oIgo+ID4gICNpbmNsdWRl
ICJzcGljZS1jaGFubmVsLXByaXYuaCIKPiA+Cj4gPiBAQCAtNDcsNiArNDgsNyBAQAo+ID4gIHN0
cnVjdCBfU3BpY2VVc2JCYWNrZW5kRGV2aWNlCj4gPiAgewo+ID4gICAgICBsaWJ1c2JfZGV2aWNl
ICpsaWJ1c2JfZGV2aWNlOwo+ID4gKyAgICBTcGljZVVzYkVtdWxhdGVkRGV2aWNlICplZGV2Owo+
ID4gICAgICBnaW50IHJlZl9jb3VudDsKPiA+ICAgICAgU3BpY2VVc2JCYWNrZW5kQ2hhbm5lbCAq
YXR0YWNoZWRfdG87Cj4gPiAgICAgIFVzYkRldmljZUluZm9ybWF0aW9uIGRldmljZV9pbmZvOwo+
ID4gQEAgLTY2LDYgKzY4LDkgQEAgc3RydWN0IF9TcGljZVVzYkJhY2tlbmQKPiA+ICAgICAgbGli
dXNiX2RldmljZSAqKmxpYnVzYl9kZXZpY2VfbGlzdDsKPiA+ICAgICAgZ2ludCByZWRpcmVjdGlu
ZzsKPiA+ICAjZW5kaWYKPiA+ICsKPiA+ICsgICAgU3BpY2VVc2JFbXVsYXRlZERldmljZUNyZWF0
ZSBkZXZfaW5pdFtVU0JfREVWX1RZUEVfTUFYXTsKPiA+ICsgICAgdWludDMyX3Qgb3duX2Rldmlj
ZXNfbWFzazsKPiA+ICB9Owo+ID4KPiA+ICBzdHJ1Y3QgX1NwaWNlVXNiQmFja2VuZENoYW5uZWwK
PiA+IEBAIC00MDgsNiArNDEzLDcgQEAgU3BpY2VVc2JCYWNrZW5kICpzcGljZV91c2JfYmFja2Vu
ZF9uZXcoR0Vycm9yICoqZXJyb3IpCj4gPiAgICAgICAgICBsaWJ1c2Jfc2V0X29wdGlvbihiZS0+
bGlidXNiX2NvbnRleHQsIExJQlVTQl9PUFRJT05fVVNFX1VTQkRLKTsKPiA+ICAjZW5kaWYKPiA+
ICAjZW5kaWYKPiA+ICsgICAgICAgIGJlLT5vd25fZGV2aWNlc19tYXNrID0gMzsgLyogZXhjbHVk
ZSBhZGRyZXNzZXMgMCBhbmQgMSAqLwo+ID4gICAgICB9Cj4gPiAgICAgIFNQSUNFX0RFQlVHKCIl
cyA8PCIsIF9fRlVOQ1RJT05fXyk7Cj4gPiAgICAgIHJldHVybiBiZTsKPiA+IEBAIC01MjQsOCAr
NTMwLDEyIEBAIHZvaWQgc3BpY2VfdXNiX2JhY2tlbmRfZGV2aWNlX3VucmVmKFNwaWNlVXNiQmFj
a2VuZERldmljZSAqZGV2KQo+ID4gIHsKPiA+ICAgICAgTE9VRF9ERUJVRygiJXMgPj4gJXAoJWQp
IiwgX19GVU5DVElPTl9fLCBkZXYsIGRldi0+cmVmX2NvdW50KTsKPiA+ICAgICAgaWYgKGdfYXRv
bWljX2ludF9kZWNfYW5kX3Rlc3QoJmRldi0+cmVmX2NvdW50KSkgewo+ID4gLSAgICAgICAgbGli
dXNiX3VucmVmX2RldmljZShkZXYtPmxpYnVzYl9kZXZpY2UpOwo+ID4gLSAgICAgICAgTE9VRF9E
RUJVRygiJXMgZnJlZWluZyAlcCAobGlidXNiICVwKSIsIF9fRlVOQ1RJT05fXywgZGV2LCBkZXYt
PmxpYnVzYl9kZXZpY2UpOwo+ID4gKyAgICAgICAgaWYgKGRldi0+bGlidXNiX2RldmljZSkgewo+
ID4gKyAgICAgICAgICAgIGxpYnVzYl91bnJlZl9kZXZpY2UoZGV2LT5saWJ1c2JfZGV2aWNlKTsK
PiA+ICsgICAgICAgICAgICBMT1VEX0RFQlVHKCIlcyBmcmVlaW5nICVwIChsaWJ1c2IgJXApIiwg
X19GVU5DVElPTl9fLCBkZXYsIGRldi0+bGlidXNiX2RldmljZSk7Cj4gPiArICAgICAgICB9IGVs
c2UgaWYgKGRldi0+ZWRldikgewo+ID4gKyAgICAgICAgICAgIGRldmljZV9vcHMoZGV2LT5lZGV2
KS0+ZGVsZXRlKGRldi0+ZWRldik7Cj4gPiArICAgICAgICB9Cj4gPiAgICAgICAgICBnX2ZyZWUo
ZGV2KTsKPiA+ICAgICAgfQo+ID4gIH0KPiA+IEBAIC04MjQsNCArODM0LDExOCBAQCBzcGljZV91
c2JfYmFja2VuZF9jaGFubmVsX2dldF9ndWVzdF9maWx0ZXIoU3BpY2VVc2JCYWNrZW5kQ2hhbm5l
bCAqY2gsCj4gPiAgICAgIH0KPiA+ICB9Cj4gPgo+ID4gK2djaGFyICogc3BpY2VfdXNiX2JhY2tl
bmRfZGV2aWNlX2Rlc2NyaXB0aW9uKFNwaWNlVXNiQmFja2VuZERldmljZSAqZGV2LAo+ID4gKyAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGdjaGFyICpm
b3JtYXQpCj4KPiBTdHlsZTogZXh0cmEgc3BhY2UgYWZ0ZXIgYXN0ZXJpc2sKPgo+ID4gK3sKPiA+
ICsgICAgaWYgKCFkZXYtPmVkZXYpIHsKPiA+ICsgICAgICAgIHJldHVybiBnX3N0cmR1cCgiTm90
IGF2YWlsYWJsZSBmb3IgbGlidXNiIGRldmljZXMiKTsKPiA+ICsgICAgfQo+ID4gKyAgICBnY2hh
ciAqZGVzY3JpcHRpb24sICpkZXNjcmlwdG9yLCAqcHJvZHVjdDsKPiA+ICsgICAgZGVzY3JpcHRv
ciA9IGdfc3RyZHVwX3ByaW50ZigiWyUwNHg6JTA0eF0iLCBkZXYtPmRldmljZV9pbmZvLnZpZCwg
ZGV2LT5kZXZpY2VfaW5mby5waWQpOwo+ID4gKyAgICBwcm9kdWN0ID0gZGV2aWNlX29wcyhkZXYt
PmVkZXYpLT5nZXRfcHJvZHVjdF9kZXNjcmlwdGlvbihkZXYtPmVkZXYpOwo+ID4gKyAgICBkZXNj
cmlwdGlvbiA9IGdfc3RyZHVwX3ByaW50Zihmb3JtYXQsICIiLCBwcm9kdWN0LCBkZXNjcmlwdG9y
LAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXYtPmRldmljZV9pbmZv
LmJ1cywgZGV2LT5kZXZpY2VfaW5mby5hZGRyZXNzKTsKPiA+ICsgICAgZ19mcmVlKGRlc2NyaXB0
b3IpOwo+ID4gKyAgICBnX2ZyZWUocHJvZHVjdCk7Cj4gPiArICAgIHJldHVybiBkZXNjcmlwdGlv
bjsKPiA+ICt9Cj4gPiArCj4gPiArdm9pZCBzcGljZV91c2JfYmFja2VuZF9yZWdpc3Rlcl9kZXZp
Y2VfdHlwZShTcGljZVVzYkJhY2tlbmQgKmJlLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgVXNiRW11bGF0ZWREZXZpY2VUeXBlIGRldl90eXBlLAo+ID4g
KyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BpY2VVc2JFbXVs
YXRlZERldmljZUNyZWF0ZSBpbml0X3Byb2MpCj4gPiArewo+ID4gKyAgICBpZiAoZGV2X3R5cGUg
Pj0gVVNCX0RFVl9UWVBFX01BWCkgewo+ID4gKyAgICAgICAgZ19yZXR1cm5faWZfcmVhY2hlZCgp
Owo+ID4gKyAgICB9Cj4KPiBnX3JldHVybl9pZl9mYWlsKGRldl90eXBlIDwgVVNCX0RFVl9UWVBF
X01BWCk7ID8KPgo+ID4gKyAgICBiZS0+ZGV2X2luaXRbZGV2X3R5cGVdID0gaW5pdF9wcm9jOwo+
ID4gK30KPiA+ICsKPiA+ICt2b2lkIHNwaWNlX3VzYl9iYWNrZW5kX2RldmljZV9yZXBvcnRfY2hh
bmdlKFNwaWNlVXNiQmFja2VuZCAqYmUsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBTcGljZVVzYkJhY2tlbmREZXZpY2UgKmRldikKPiA+ICt7Cj4gPiAr
ICAgIGdjaGFyICpkZXNjOwo+ID4gKyAgICBnX3JldHVybl9pZl9mYWlsKGRldiAmJiBkZXYtPmVk
ZXYpOwo+ID4gKwo+ID4gKyAgICBkZXNjID0gZGV2aWNlX29wcyhkZXYtPmVkZXYpLT5nZXRfcHJv
ZHVjdF9kZXNjcmlwdGlvbihkZXYtPmVkZXYpOwo+ID4gKyAgICBTUElDRV9ERUJVRygiJXM6ICVz
IiwgX19GVU5DVElPTl9fLCBkZXNjKTsKPiA+ICsgICAgZ19mcmVlKGRlc2MpOwo+Cj4gQ3VyaW91
cyBhYm91dCB0aGlzIGZ1bmN0aW9uLCBsb29raW5nIGF0IHRoZSB3aG9sZSBzZXQgdGhpcyBpcwo+
IGNhbGxlZCBvbiBjZF91c2JfYnVsa19tc2RfbHVuX2NoYW5nZWQoKSB3aGljaCBoYXMgdGhlIGNv
bW1lbnQKPiAiY2FsbGVkIHdoZW4gYSBjaGFuZ2UgaGFwcGVucyBvbiBTQ1NJIGxheWVyIgo+Cj4g
V2hhdCBraW5kIG9mIGNoYW5nZSBjYW4gaXQgaGFwcGVuIG9uIHRoZSBlbXVsYXRlZCBkZXZpY2U/
CgpBbnl0aGluZyBjYXVzZWQgYnkgaW50ZXJhY3Rpb24gd2l0aCBWTSBhbmQgbmVlZGVkIHJlZmxl
Y3Rpb24gaW4gY2xpZW50IFVJLgpGb3IgY2FzZSBvZiBDRCwgZm9yIGV4YW1wbGUgdGhpcyBpcyB1
bmxvYWQuCgo+Cj4gPiArfQo+ID4gKwo+ID4gK3ZvaWQgc3BpY2VfdXNiX2JhY2tlbmRfZGV2aWNl
X2VqZWN0KFNwaWNlVXNiQmFja2VuZCAqYmUsIFNwaWNlVXNiQmFja2VuZERldmljZSAqZGV2KQo+
ID4gK3sKPiA+ICsgICAgZ19yZXR1cm5faWZfZmFpbChkZXYgJiYgZGV2LT5lZGV2KTsKPiA+ICsK
PiA+ICsgICAgaWYgKGJlLT5ob3RwbHVnX2NhbGxiYWNrKSB7Cj4KPiBXb25kZXJpbmcgaWYgdGhp
cyBzaG91bGQgbm90IGJlIGEKPiBnX3JldHVybl9pZl9mYWlsKGJlLT5ob3RwbHVnX2NhbGxiYWNr
ICE9IE5VTEwpOwo+Cj4gVGhpcyBjYWxsYmFjayBpcyB1bnNldCBvbmx5IG9uCj4gc3BpY2VfdXNi
X2JhY2tlbmRfZGVyZWdpc3Rlcl9ob3RwbHVnKCkgc28gaXQgc2hvdWxkIGJlIHNvbWV3aGF0Cj4g
cHJvZ3JhbW1pbmcgZXJyb3IgaGF2aW5nIHNwaWNlX3VzYl9iYWNrZW5kX2RldmljZV9lamVjdCgp
IGJlaW5nCj4gY2FsbGVkIGFmdGVyIHRoYXQsIG5vPyBUaGF0IGNvdWxkIGFsc28gbWFrZSBub3Qg
d2FudGVkIHVucmVmIHRvCj4gZGV2Cgpvay4gYnV0IHVuZGVyIGluIGFueSBjYXNlLCB0aGUgZGV2
aWNlIHdhcyBjcmVhdGVkIHdpdGggcmVmID0gMQoKPgo+ID4gKyAgICAgICAgYmUtPmhvdHBsdWdf
Y2FsbGJhY2soYmUtPmhvdHBsdWdfdXNlcl9kYXRhLCBkZXYsIEZBTFNFKTsKPiA+ICsgICAgfQo+
ID4gKyAgICBzcGljZV91c2JfYmFja2VuZF9kZXZpY2VfdW5yZWYoZGV2KTsKPiA+ICt9Cj4gPiAr
Cj4gPiArZ2Jvb2xlYW4gc3BpY2VfdXNiX2JhY2tlbmRfY3JlYXRlX2RldmljZShTcGljZVVzYkJh
Y2tlbmQgKmJlLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
VXNiRW11bGF0ZWREZXZpY2VUeXBlIGRldl90eXBlLAo+ID4gKyAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgVXNiQ3JlYXRlRGV2aWNlUGFyYW1ldGVycyAqcGFyYW0pCj4g
PiArewo+ID4gKyAgICBTcGljZVVzYkVtdWxhdGVkRGV2aWNlICplZGV2ID0gTlVMTDsKPiA+ICsg
ICAgU3BpY2VVc2JCYWNrZW5kRGV2aWNlICAqZGV2Owo+ID4gKyAgICBzdHJ1Y3QgbGlidXNiX2Rl
dmljZV9kZXNjcmlwdG9yICpkZXNjOwo+ID4gKyAgICB1aW50MTZfdCBkZXZpY2VfZGVzY19zaXpl
Owo+ID4gKyAgICB1aW50OF90IGFkZHJlc3MgPSAwOwo+ID4gKwo+ID4gKyAgICBpZiAoZGV2X3R5
cGUgPj0gVVNCX0RFVl9UWVBFX01BWCB8fCAhYmUtPmRldl9pbml0W2Rldl90eXBlXSkgewo+ID4g
KyAgICAgICAgcGFyYW0tPmVycm9yID0gZ19lcnJvcl9uZXcoU1BJQ0VfQ0xJRU5UX0VSUk9SLCBT
UElDRV9DTElFTlRfRVJST1JfRkFJTEVELAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgXygiY2FuJ3QgY3JlYXRlIGRldmljZSAtIG5vdCBzdXBwb3J0ZWQiKSk7Cj4gPiAr
ICAgICAgICByZXR1cm4gRkFMU0U7Cj4gPiArICAgIH0KPiA+ICsKPiA+ICsgICAgaWYgKGJlLT5v
d25fZGV2aWNlc19tYXNrID09IDB4ZmZmZmZmZmYpIHsKPiA+ICsgICAgICAgIHBhcmFtLT5lcnJv
ciA9IGdfZXJyb3JfbmV3KFNQSUNFX0NMSUVOVF9FUlJPUiwgU1BJQ0VfQ0xJRU5UX0VSUk9SX0ZB
SUxFRCwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8oImNhbid0IGNy
ZWF0ZSBkZXZpY2UgLSBsaW1pdCByZWFjaGVkIikpOwo+ID4gKyAgICAgICAgcmV0dXJuIEZBTFNF
Owo+ID4gKyAgICB9Cj4gPiArICAgIGZvciAoYWRkcmVzcyA9IDA7IGFkZHJlc3MgPCAzMjsgKyth
ZGRyZXNzKSB7Cj4gPiArICAgICAgICBpZiAofmJlLT5vd25fZGV2aWNlc19tYXNrICYgKDEgPDwg
YWRkcmVzcykpIHsKPiA+ICsgICAgICAgICAgICBicmVhazsKPiA+ICsgICAgICAgIH0KPiA+ICsg
ICAgfQo+ID4gKwo+ID4gKyAgICBkZXYgPSBnX25ldzAoU3BpY2VVc2JCYWNrZW5kRGV2aWNlLCAx
KTsKPiA+ICsKPiA+ICsgICAgcGFyYW0tPmFkZHJlc3MgPSBhZGRyZXNzOwo+ID4gKyAgICBpZiAo
YmUtPmRldl9pbml0W2Rldl90eXBlXShiZSwgZGV2LCBwYXJhbSwgJmVkZXYpKSB7Cj4gPiArICAg
ICAgICBnX2ZyZWUoZGV2KTsKPiA+ICsgICAgICAgIHJldHVybiBGQUxTRTsKPiA+ICsgICAgfQo+
ID4gKwo+ID4gKyAgICBpZiAoIWRldmljZV9vcHMoZWRldiktPmdldF9kZXNjcmlwdG9yKGVkZXYs
IExJQlVTQl9EVF9ERVZJQ0UsIDAsCj4gPiArICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgKHZvaWQgKiopJmRlc2MsICZkZXZpY2VfZGVzY19zaXplKQo+ID4gKyAgICAg
ICAgfHwgZGV2aWNlX2Rlc2Nfc2l6ZSAhPSBzaXplb2YoKmRlc2MpKSB7Cj4gPiArCj4gPiArICAg
ICAgICBkZXZpY2Vfb3BzKGVkZXYpLT5kZWxldGUoZWRldik7Cj4gPiArICAgICAgICBnX2ZyZWUo
ZGV2KTsKPiA+ICsgICAgICAgIHBhcmFtLT5lcnJvciA9IGdfZXJyb3JfbmV3KFNQSUNFX0NMSUVO
VF9FUlJPUiwgU1BJQ0VfQ0xJRU5UX0VSUk9SX0ZBSUxFRCwKPiA+ICsgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgIF8oImNhbid0IGNyZWF0ZSBkZXZpY2UgLSBpbnRlcm5hbCBlcnJv
ciIpKTsKPiA+ICsgICAgICAgIHJldHVybiBGQUxTRTsKPiA+ICsgICAgfQo+ID4gKwo+ID4gKyAg
ICBiZS0+b3duX2RldmljZXNfbWFzayB8PSAxIDw8IGFkZHJlc3M7Cj4KPiBJIHNlZSB0aGUgYml0
IGlzIHNldCB0byAxIGJ1dCBzaG91bGRuJ3QgaXQgYmUgdGhlcmUgYSBwbGFjZSB3aGVyZQo+IHRo
ZSBiaXQgaXMgc2V0IHRvIDAsIGxldCdzIHNheSwgd2hlbiBkZXZpY2UgaXMgZGlzY29ubmVjdGVk
PwoKTUlzc2VkLCB0aGFua3MuIFdhcyBlYXN5IHRvIG1pc3MgYXMgdGhlcmUgaXMgbm8gZHluYW1p
YyBjcmVhdGlvbiB5ZXQuCgo+Cj4gPiArCj4gPiArICAgIGRldi0+ZGV2aWNlX2luZm8uYnVzID0g
QlVTX05VTUJFUl9GT1JfRU1VTEFURURfVVNCOwo+ID4gKyAgICBkZXYtPmRldmljZV9pbmZvLmFk
ZHJlc3MgPSBhZGRyZXNzOwo+ID4gKyAgICBkZXYtPmRldmljZV9pbmZvLnZpZCA9IGRlc2MtPmlk
VmVuZG9yOwo+ID4gKyAgICBkZXYtPmRldmljZV9pbmZvLnBpZCA9IGRlc2MtPmlkUHJvZHVjdDsK
PiA+ICsgICAgZGV2LT5kZXZpY2VfaW5mby5iY2RVU0IgPSBkZXNjLT5iY2RVU0I7Cj4gPiArICAg
IGRldi0+ZGV2aWNlX2luZm8uY2xhc3MgPSBkZXNjLT5iRGV2aWNlQ2xhc3M7Cj4gPiArICAgIGRl
di0+ZGV2aWNlX2luZm8uc3ViY2xhc3MgPSBkZXNjLT5iRGV2aWNlU3ViQ2xhc3M7Cj4gPiArICAg
IGRldi0+ZGV2aWNlX2luZm8ucHJvdG9jb2wgPSBkZXNjLT5iRGV2aWNlUHJvdG9jb2w7Cj4gPiAr
ICAgIGRldi0+ZGV2aWNlX2luZm8uZGV2aWNlX3R5cGUgPSBkZXZfdHlwZTsKPiA+ICsgICAgZGV2
LT5yZWZfY291bnQgPSAxOwo+ID4gKyAgICBkZXYtPmVkZXYgPSBlZGV2Owo+ID4gKwo+ID4gKyAg
ICBpZiAoYmUtPmhvdHBsdWdfY2FsbGJhY2spIHsKPiA+ICsgICAgICAgIGJlLT5ob3RwbHVnX2Nh
bGxiYWNrKGJlLT5ob3RwbHVnX3VzZXJfZGF0YSwgZGV2LCBUUlVFKTsKPiA+ICsgICAgfQo+ID4g
Kwo+ID4gKyAgICByZXR1cm4gVFJVRTsKPiA+ICt9Cj4gPiArCj4gPiAgI2VuZGlmIC8qIFVTQl9S
RURJUiAqLwo+ID4gZGlmZiAtLWdpdCBhL3NyYy91c2ItYmFja2VuZC5oIGIvc3JjL3VzYi1iYWNr
ZW5kLmgKPiA+IGluZGV4IDY5YTQ5MGIuLjhhMDRlZDAgMTAwNjQ0Cj4gPiAtLS0gYS9zcmMvdXNi
LWJhY2tlbmQuaAo+ID4gKysrIGIvc3JjL3VzYi1iYWNrZW5kLmgKPiA+IEBAIC0zMSwxNSArMzEs
MjQgQEAgdHlwZWRlZiBzdHJ1Y3QgX1NwaWNlVXNiQmFja2VuZCBTcGljZVVzYkJhY2tlbmQ7Cj4g
PiAgdHlwZWRlZiBzdHJ1Y3QgX1NwaWNlVXNiQmFja2VuZERldmljZSBTcGljZVVzYkJhY2tlbmRE
ZXZpY2U7Cj4gPiAgdHlwZWRlZiBzdHJ1Y3QgX1NwaWNlVXNiQmFja2VuZENoYW5uZWwgU3BpY2VV
c2JCYWNrZW5kQ2hhbm5lbDsKPiA+Cj4gPiArdHlwZWRlZiBlbnVtCj4gPiArewo+ID4gKyAgICBV
U0JfREVWX1RZUEVfTk9ORSwKPiA+ICsgICAgVVNCX0RFVl9UWVBFX0NELAo+ID4gKyAgICBVU0Jf
REVWX1RZUEVfTUFYCj4gPiArfSBVc2JFbXVsYXRlZERldmljZVR5cGU7Cj4gPiArCj4gPiAgdHlw
ZWRlZiBzdHJ1Y3QgVXNiRGV2aWNlSW5mb3JtYXRpb24KPiA+ICB7Cj4gPiAgICAgIHVpbnQxNl90
IGJ1czsKPiA+ICAgICAgdWludDE2X3QgYWRkcmVzczsKPiA+ICAgICAgdWludDE2X3QgdmlkOwo+
ID4gICAgICB1aW50MTZfdCBwaWQ7Cj4gPiArICAgIHVpbnQxNl90IGJjZFVTQjsKPiA+ICAgICAg
dWludDhfdCBjbGFzczsKPiA+ICAgICAgdWludDhfdCBzdWJjbGFzczsKPiA+ICAgICAgdWludDhf
dCBwcm90b2NvbDsKPiA+ICsgICAgdWludDhfdCBkZXZpY2VfdHlwZTsgLyogVXNiRW11bGF0ZWRE
ZXZpY2VUeXBlICovCj4gPiAgfSBVc2JEZXZpY2VJbmZvcm1hdGlvbjsKPiA+Cj4gPiAgdHlwZWRl
ZiB2b2lkKCp1c2JfaG90X3BsdWdfY2FsbGJhY2spKHZvaWQgKnVzZXJfZGF0YSwgU3BpY2VVc2JC
YWNrZW5kRGV2aWNlICpkZXYsIGdib29sZWFuIGFkZGVkKTsKPiA+IEBAIC03MSw3ICs4MCw2IEBA
IGdib29sZWFuIHNwaWNlX3VzYl9iYWNrZW5kX2RldmljZV9pc29jaChTcGljZVVzYkJhY2tlbmRE
ZXZpY2UgKmRldik7Cj4gPiAgLyogcmV0dXJucyAwIGlmIHRoZSBkZXZpY2UgcGFzc2VzIHRoZSBm
aWx0ZXIgKi8KPiA+ICBpbnQgc3BpY2VfdXNiX2JhY2tlbmRfZGV2aWNlX2NoZWNrX2ZpbHRlcihT
cGljZVVzYkJhY2tlbmREZXZpY2UgKmRldiwKPiA+ICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICBjb25zdCBzdHJ1Y3QgdXNicmVkaXJmaWx0ZXJfcnVsZSAqcnVsZXMs
IGludCBjb3VudCk7Cj4gPiAtCj4gPiAgLyogU3BpY2UgVVNCIGJhY2tlbmQgY2hhbm5lbCBBUEkg
Ki8KPiA+ICBTcGljZVVzYkJhY2tlbmRDaGFubmVsICpzcGljZV91c2JfYmFja2VuZF9jaGFubmVs
X25ldyhTcGljZVVzYkJhY2tlbmQgKmNvbnRleHQsCj4gPiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAgICAgICAgICAgICp1c2VyX2Rh
dGEpOwo+ID4gQEAgLTg5LDYgKzk3LDMyIEBAIHZvaWQgc3BpY2VfdXNiX2JhY2tlbmRfY2hhbm5l
bF9nZXRfZ3Vlc3RfZmlsdGVyKFNwaWNlVXNiQmFja2VuZENoYW5uZWwgKmNoLAo+ID4gICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludCAqY291bnQpOwo+
ID4gIHZvaWQgc3BpY2VfdXNiX2JhY2tlbmRfcmV0dXJuX3dyaXRlX2RhdGEoU3BpY2VVc2JCYWNr
ZW5kQ2hhbm5lbCAqY2gsIHZvaWQgKmRhdGEpOwo+ID4KPiA+ICsjZGVmaW5lIEJVU19OVU1CRVJf
Rk9SX0VNVUxBVEVEX1VTQiAgICAgICAgIDI1NQo+Cj4gSXMgdGhlcmUgYSBzcGVjaWZpYyByZWFz
b24gZm9yIGl0IHRvIGJlIDI1NSAobGlrZSBzdGFuZGFyZCk/IElmCj4geWVzLCBJJ2QgYWRkIGEg
c21hbGwgY29tbWVudCBhYm92ZSBpdC4KPgo+ID4gKwo+ID4gK3R5cGVkZWYgc3RydWN0IFVzYkNy
ZWF0ZURldmljZVBhcmFtZXRlcnMKPiA+ICt7Cj4gPiArICAgIEdFcnJvciAqZXJyb3I7Cj4gPiAr
ICAgIHVpbnQzMl90ICAgIGFkZHJlc3M7Cj4gPiArICAgIHVpbnQzMl90ICAgIHJlc2VydmVkOwo+
ID4gKyAgICB1bmlvbgo+ID4gKyAgICB7Cj4gPiArICAgICAgICBzdHJ1Y3QKPiA+ICsgICAgICAg
IHsKPiA+ICsgICAgICAgICAgICBjb25zdCBjaGFyICpmaWxlbmFtZTsKPiA+ICsgICAgICAgICAg
ICB1aW50MzJfdCAgIGRlbGV0ZV9vbl9lamVjdCAgOiAxOwo+ID4gKyAgICAgICAgfSBjcmVhdGVf
Y2Q7Cj4gPiArICAgIH0gZGV2aWNlX3BhcmFtOwo+ID4gKwo+ID4gK30gVXNiQ3JlYXRlRGV2aWNl
UGFyYW1ldGVyczsKPiA+ICsKPiA+ICsvKiBBUEkgcmVsYXRlZCB0byBlbXVsYXRlZCBkZXZpY2Vz
ICovCj4gPiArZ2Jvb2xlYW4gc3BpY2VfdXNiX2JhY2tlbmRfY3JlYXRlX2RldmljZShTcGljZVVz
YkJhY2tlbmQgKmJlLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgVXNiRW11bGF0ZWREZXZpY2VUeXBlIGRldl90eXBlLAo+ID4gKyAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgVXNiQ3JlYXRlRGV2aWNlUGFyYW1ldGVycyAqcGFyYW0p
Owo+ID4gK2djaGFyICpzcGljZV91c2JfYmFja2VuZF9kZXZpY2VfZGVzY3JpcHRpb24oU3BpY2VV
c2JCYWNrZW5kRGV2aWNlICpkZXYsIGNvbnN0IGdjaGFyICpmb3JtYXQpOwo+ID4gK3ZvaWQgc3Bp
Y2VfdXNiX2JhY2tlbmRfZGV2aWNlX2VqZWN0KFNwaWNlVXNiQmFja2VuZCAqYmUsIFNwaWNlVXNi
QmFja2VuZERldmljZSAqZGV2aWNlKTsKPiA+ICt2b2lkIHNwaWNlX3VzYl9iYWNrZW5kX2Rldmlj
ZV9yZXBvcnRfY2hhbmdlKFNwaWNlVXNiQmFja2VuZCAqYmUsIFNwaWNlVXNiQmFja2VuZERldmlj
ZSAqZGV2aWNlKTsKPiA+ICsKPiA+ICBHX0VORF9ERUNMUwo+ID4KPiA+ICAjZW5kaWYKPiA+IGRp
ZmYgLS1naXQgYS9zcmMvdXNiLWVtdWxhdGlvbi5oIGIvc3JjL3VzYi1lbXVsYXRpb24uaAo+ID4g
bmV3IGZpbGUgbW9kZSAxMDA2NDQKPiA+IGluZGV4IDAwMDAwMDAuLjQ0NzMzNjEKPiA+IC0tLSAv
ZGV2L251bGwKPiA+ICsrKyBiL3NyYy91c2ItZW11bGF0aW9uLmgKPiA+IEBAIC0wLDAgKzEsODgg
QEAKPiA+ICsvKiAtKi0gTW9kZTogQzsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1v
ZGU6IG5pbCAtKi0gKi8KPiA+ICsvKgo+ID4gKyAgICBDb3B5cmlnaHQgKEMpIDIwMTkgUmVkIEhh
dCwgSW5jLgo+ID4gKwo+ID4gKyAgICBSZWQgSGF0IEF1dGhvcnM6Cj4gPiArICAgIFl1cmkgQmVu
ZGl0b3ZpY2g8eWJlbmRpdG9AcmVkaGF0LmNvbT4KPiA+ICsKPiA+ICsgICAgVGhpcyBsaWJyYXJ5
IGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vcgo+ID4gKyAg
ICBtb2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVi
bGljCj4gPiArICAgIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5IHRoZSBGcmVlIFNvZnR3YXJlIEZv
dW5kYXRpb247IGVpdGhlcgo+ID4gKyAgICB2ZXJzaW9uIDIuMSBvZiB0aGUgTGljZW5zZSwgb3Ig
KGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KPiA+ICsKPiA+ICsgICAgVGhpcyBs
aWJyYXJ5IGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWws
Cj4gPiArICAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBs
aWVkIHdhcnJhbnR5IG9mCj4gPiArICAgIE1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBB
IFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUgR05VCj4gPiArICAgIExlc3NlciBHZW5lcmFs
IFB1YmxpYyBMaWNlbnNlIGZvciBtb3JlIGRldGFpbHMuCj4gPiArCj4gPiArICAgIFlvdSBzaG91
bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBMZXNzZXIgR2VuZXJhbCBQdWJsaWMK
PiA+ICsgICAgTGljZW5zZSBhbG9uZyB3aXRoIHRoaXMgbGlicmFyeTsgaWYgbm90LCBzZWUgPGh0
dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+Lgo+ID4gKyovCj4gPiArCj4gPiArI2lmbmRlZiBf
X1NQSUNFX1VTQl9FTVVMQVRJT05fSF9fCj4gPiArI2RlZmluZSBfX1NQSUNFX1VTQl9FTVVMQVRJ
T05fSF9fCj4gPiArCj4gPiArI2luY2x1ZGUgInVzYnJlZGlycGFyc2VyLmgiCj4gPiArI2luY2x1
ZGUgInVzYi1iYWNrZW5kLmgiCj4gPiArCj4gPiArdHlwZWRlZiBzdHJ1Y3QgX1NwaWNlVXNiRW11
bGF0ZWREZXZpY2UgU3BpY2VVc2JFbXVsYXRlZERldmljZTsKPiA+ICt0eXBlZGVmIGludCAoKlNw
aWNlVXNiRW11bGF0ZWREZXZpY2VDcmVhdGUpKFNwaWNlVXNiQmFja2VuZCAqYmUsCj4gPiArICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTcGljZVVzYkJhY2tlbmRE
ZXZpY2UgKnBhcmVudCwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIFVzYkNyZWF0ZURldmljZVBhcmFtZXRlcnMgKnBhcmFtLAo+ID4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3BpY2VVc2JFbXVsYXRlZERldmljZSAq
KmRldmljZSk7Cj4gPiArCj4gPiArLyoKPiA+ICsgICAgZnVuY3Rpb24gdGFibGUgZm9yIGVtdWxh
dGVkIFVTQiBkZXZpY2UKPiA+ICsgICAgbXVzdCBiZSBmaXJzdCBtZW1iZXIgb2YgZGV2aWNlIHN0
cnVjdHVyZQo+ID4gKyAgICBhbGwgZnVuY3Rpb25zIGFyZSBtYW5kYXRvcnkgZm9yIGltcGxlbWVu
dGF0aW9uCj4gPiArKi8KPiA+ICt0eXBlZGVmIHN0cnVjdCBVc2JEZXZpY2VPcHMKPiA+ICt7Cj4g
PiArICAgIGdib29sZWFuICgqZ2V0X2Rlc2NyaXB0b3IpKFNwaWNlVXNiRW11bGF0ZWREZXZpY2Ug
KmRldmljZSwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDhfdCB0eXBl
LCB1aW50OF90IGluZGV4LAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lk
ICoqYnVmZmVyLCB1aW50MTZfdCAqc2l6ZSk7Cj4gPiArICAgIGdjaGFyICogKCpnZXRfcHJvZHVj
dF9kZXNjcmlwdGlvbikoU3BpY2VVc2JFbXVsYXRlZERldmljZSAqZGV2aWNlKTsKPiA+ICsgICAg
dm9pZCAoKmF0dGFjaCkoU3BpY2VVc2JFbXVsYXRlZERldmljZSAqZGV2aWNlLCBzdHJ1Y3QgdXNi
cmVkaXJwYXJzZXIgKnBhcnNlcik7Cj4gPiArICAgIHZvaWQgKCpyZXNldCkoU3BpY2VVc2JFbXVs
YXRlZERldmljZSAqZGV2aWNlKTsKPiA+ICsgICAgLyoKPiA+ICsgICAgICAgIHByb2Nlc3Npbmcg
aXMgc3luY2hyb25vdXMsIGRlZmF1bHQgPSBzdGFsbDoKPiA+ICsgICAgICAgIC0gcmV0dXJuIHN1
Y2Nlc3Mgd2l0aG91dCBkYXRhOiBzZXQgc3RhdHVzIHRvIDAKPiA+ICsgICAgICAgIC0gcmV0dXJu
IGVycm9yIC0gc2V0IHN0YXR1cyB0byBlcnJvcgo+ID4gKyAgICAgICAgLSByZXR1cm4gc3VjY2Vz
cyB3aXRoIGRhdGEgLSBzZXQgc3RhdHVzIHRvIDAsCj4gPiArICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgc2V0IGJ1ZmZlciB0byBzb21lIGJ1ZmZlcgo+ID4gKyAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIHNldCBsZW5ndGggdG8gb3V0IGxlbgo+ID4gKyAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydW5jYXRpb24gaXMgYXV0b21hdGljCj4g
PiArICAgICovCj4gPiArICAgIHZvaWQgKCpjb250cm9sX3JlcXVlc3QpKFNwaWNlVXNiRW11bGF0
ZWREZXZpY2UgKmRldmljZSwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDhf
dCAqZGF0YSwgaW50IGRhdGFfbGVuLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICBz
dHJ1Y3QgdXNiX3JlZGlyX2NvbnRyb2xfcGFja2V0X2hlYWRlciAqaCwKPiA+ICsgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgdm9pZCAqKmJ1ZmZlcik7Cj4gPiArICAgIC8qCj4gPiArICAgICAg
ICBwcm9jZXNzaW5nIGlzIHN5bmNocm9ub3VzOgo+ID4gKyAgICAgICAgLSBzZXQgaC0+c3RhdHVz
IHRvIHJlc3VsdGluZyBzdGF0dXMsIGRlZmF1bHQgPSBzdGFsbAo+ID4gKyAgICAqLwo+ID4gKyAg
ICB2b2lkICgqYnVsa19vdXRfcmVxdWVzdCkoU3BpY2VVc2JFbXVsYXRlZERldmljZSAqZGV2aWNl
LAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWludDhfdCBlcCwgdWludDhfdCAq
ZGF0YSwgaW50IGRhdGFfbGVuLAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdWlu
dDhfdCAqc3RhdHVzKTsKPiA+ICsgICAgLyoKPiA+ICsgICAgICAgIGlmIHJldHVybnMgdHJ1ZSwg
cHJvY2Vzc2luZyBpcyBhc3luY2hyb25vdXMKPiA+ICsgICAgICAgIG90aGVyd2lzZSBoZWFkZXIg
Y29udGFpbnMgZXJyb3Igc3RhdHVzCj4gPiArICAgICovCj4gPiArICAgIGdib29sZWFuICgqYnVs
a19pbl9yZXF1ZXN0KShTcGljZVVzYkVtdWxhdGVkRGV2aWNlICpkZXZpY2UsIHVpbnQ2NF90IGlk
LAo+ID4gKyAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJ1Y3QgdXNiX3JlZGlyX2J1bGtf
cGFja2V0X2hlYWRlciAqYnVsa19oZWFkZXIpOwo+ID4gKyAgICB2b2lkICgqY2FuY2VsX3JlcXVl
c3QpKFNwaWNlVXNiRW11bGF0ZWREZXZpY2UgKmRldmljZSwgdWludDY0X3QgaWQpOwo+ID4gKyAg
ICB2b2lkICgqZGV0YWNoKShTcGljZVVzYkVtdWxhdGVkRGV2aWNlICpkZXZpY2UpOwo+ID4gKyAg
ICB2b2lkICgqZGVsZXRlKShTcGljZVVzYkVtdWxhdGVkRGV2aWNlICpkZXZpY2UpOwo+ID4gK30g
VXNiRGV2aWNlT3BzOwo+Cj4gT2ssCj4KPiA+ICsKPiA+ICtzdGF0aWMgaW5saW5lIGNvbnN0IFVz
YkRldmljZU9wcyAqZGV2aWNlX29wcyhTcGljZVVzYkVtdWxhdGVkRGV2aWNlICpkZXYpIHsKPiA+
ICsgICAgcmV0dXJuIChjb25zdCBVc2JEZXZpY2VPcHMgKilkZXY7Cj4gPiArfQo+ID4gKwo+ID4g
K3ZvaWQgc3BpY2VfdXNiX2JhY2tlbmRfcmVnaXN0ZXJfZGV2aWNlX3R5cGUoU3BpY2VVc2JCYWNr
ZW5kICpiZSwKPiA+ICsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
IFVzYkVtdWxhdGVkRGV2aWNlVHlwZSBkZXZfdHlwZSwKPiA+ICsgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIFNwaWNlVXNiRW11bGF0ZWREZXZpY2VDcmVhdGUgaW5p
dF9wcm9jKTsKPiA+ICsvKiBzdXBwb3J0ZWQgZGV2aWNlIHR5cGVzICovCj4gPiArdm9pZCBzcGlj
ZV91c2JfZGV2aWNlX3JlZ2lzdGVyX2NkKFNwaWNlVXNiQmFja2VuZCAqYmUpOwo+Cj4gU2hvdWxk
IGJlIGFkZGVkIGluIGxhdGVyIHBhdGNoZXMuCj4KPiBDaGVlcnMsCj4gVmljdG9yCl9fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fClNwaWNlLWRldmVsIG1haWxp
bmcgbGlzdApTcGljZS1kZXZlbEBsaXN0cy5mcmVlZGVza3RvcC5vcmcKaHR0cHM6Ly9saXN0cy5m
cmVlZGVza3RvcC5vcmcvbWFpbG1hbi9saXN0aW5mby9zcGljZS1kZXZlbA==
